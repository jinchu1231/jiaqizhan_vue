(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07f03f03"],{"11d5":function(e,t,i){e.exports=i.p+"static/img/query-noData.a2c7c515.png"},"20f7":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.searchList.length?i("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[i("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.searchList,(function(t,o){return i("el-col",{key:o,attrs:{span:6}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:o<3||o>=3&&e.showAll,expression:"index<3 || (index>=3 && showAll)"}],attrs:{label:t.label}},[e.useInputList.includes(t.__config__.jnpfKey)?[i("el-input",{key:e.key,staticClass:"item",attrs:{placeholder:t.__config__.placeholder?t.__config__.placeholder:"请输入"+t.label,clearable:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e.useDateList.includes(t.__config__.jnpfKey)?[i("el-date-picker",{staticClass:"item",attrs:{"value-format":"timestamp",format:"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期",type:"datetimerange",clearable:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e.useSelectList.includes(t.__config__.jnpfKey)?[i("el-select",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",filterable:"",multiple:t.searchMultiple},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}},e._l(t.options,(function(e,o){return i("el-option",{key:o,attrs:{label:e[t.props.label],value:e[t.props.value]}})})),1)]:["inputNumber"===t.__config__.jnpfKey||"slider"===t.__config__.jnpfKey?[t.__config__.isFromParam?i("JnpfInputNumber",{attrs:{placeholder:"请输入",clearable:"",controls:"","controls-position":"right"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):i("num-range",{key:e.key,attrs:{precision:t.precision},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"rate"===t.__config__.jnpfKey?[t.__config__.isFromParam?i("JnpfInputNumber",{attrs:{placeholder:"请输入",clearable:"",controls:"","controls-position":"right"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):i("num-range",{key:e.key,attrs:{precision:t.allowHalf?1:0},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"calculate"===t.__config__.jnpfKey?[i("num-range",{attrs:{precision:t.precision||0},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"cascader"===t.__config__.jnpfKey?[i("JnpfCascader",{staticClass:"item",attrs:{options:t.options,clearable:"","show-all-levels":t.showAllLevels,props:t.props,filterable:"",placeholder:"请选择"+t.label},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"timePicker"===t.__config__.jnpfKey||"timeRange"===t.__config__.jnpfKey?[i("el-time-picker",{key:e.key,staticClass:"item",attrs:{"start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:"","value-format":t.format,format:t.format,"is-range":""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"datePicker"===t.__config__.jnpfKey?[t.__config__.isFromParam?i("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",clearable:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):i("JnpfDateRangePicker",{staticClass:"item",attrs:{type:t.type,clearable:"",format:t.format,startPlaceholder:"开始日期",endPlaceholder:"结束日期"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"dateRange"===t.__config__.jnpfKey?[i("el-date-picker",{staticClass:"item",attrs:{type:t.type,clearable:"","value-format":"timestamp",format:t.format,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"areaSelect"===t.__config__.jnpfKey?[i("JnpfAreaSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,level:t.level,clearable:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"treeSelect"===t.__config__.jnpfKey?[i("JnpfTreeSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,options:t.options,props:t.props,clearable:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"createUser"===t.__config__.jnpfKey||"modifyUser"===t.__config__.jnpfKey?[i("JnpfUserSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",ableIds:t.ableIds,selectType:t.selectType},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"currOrganize"===t.__config__.jnpfKey||"organizeSelect"===t.__config__.jnpfKey?[i("JnpfOrganizeSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",multiple:t.searchMultiple,ableIds:t.ableIds,selectType:t.selectType},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"currDept"===t.__config__.jnpfKey?[i("JnpfDepSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",ableIds:t.ableIds,selectType:t.selectType},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"currPosition"===t.__config__.jnpfKey||"posSelect"===t.__config__.jnpfKey?[i("JnpfPosSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",multiple:t.searchMultiple,ableIds:t.ableIds,selectType:t.selectType},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"groupSelect"===t.__config__.jnpfKey?[i("JnpfGroupSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",multiple:t.searchMultiple,selectType:t.selectType,ableIds:t.ableIds},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"roleSelect"===t.__config__.jnpfKey?[i("JnpfRoleSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",multiple:t.searchMultiple,selectType:t.selectType,ableIds:t.ableIds},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"userSelect"===t.__config__.jnpfKey?[i("JnpfUserSelect",{key:e.key,staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",selectType:"all"!=t.selectType&&"custom"!=t.selectType?"all":t.selectType,ableIds:t.ableIds,multiple:t.searchMultiple},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"usersSelect"===t.__config__.jnpfKey?[i("JnpfUsersSelect",{key:e.key,staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",selectType:t.selectType,ableIds:t.ableIds,multiple:t.searchMultiple},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"depSelect"===t.__config__.jnpfKey?[i("JnpfDepSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.label,clearable:"",selectType:t.selectType,ableIds:t.ableIds,multiple:t.searchMultiple},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e(),"autoComplete"===t.__config__.jnpfKey?[i("JnpfAutoComplete",{staticClass:"item",attrs:{placeholder:"请输入"+t.label,total:t.total,clearable:"",relationField:t.relationField,templateJson:t.templateJson,interfaceId:t.interfaceId},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})]:e._e()]],2)],1)})),i("el-col",{attrs:{span:6}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v(e._s(e.$t("common.search"))+"\n        ")]),i("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v(e._s(e.$t("common.reset"))+"\n        ")]),e.searchList.length>3?[e.showAll?i("el-button",{attrs:{type:"text",icon:"el-icon-arrow-up"},on:{click:function(t){e.showAll=!1}}},[e._v("\n            收起")]):i("el-button",{attrs:{type:"text",icon:"el-icon-arrow-down"},on:{click:function(t){e.showAll=!0}}},[e._v("\n            展开\n          ")])]:e._e()],2)],1)],2)],1):e._e()},a=[],n=(i("6762"),i("2fdb"),i("ac6a"),i("456d"),i("ed08")),l=i("100e"),r=i("9b6f"),s=i("17de"),c={props:["list","initDataJson"],data:function(){return{showAll:!1,searchList:[],useInputList:l["l"],useDateList:l["k"],useSelectList:l["m"],defSearchList:[],key:+new Date}},watch:{list:{handler:function(e){this.searchList=Object(n["b"])(e),this.defSearchList=Object(n["b"])(e),this.buildOptions(this.searchList)},deep:!0,immediate:!0},initDataJson:{handler:function(e){if(""!=e){var t=JSON.parse(e);if(Object.keys(t).length>0)for(var i in t)for(var o=0;o<this.searchList.length;o++){var a=this.searchList[o];if(a.id===i){a.searchMultiple?"organizeSelect"==a.jnpfKey?a.value=Array.isArray(t[i])&&Array.isArray(t[i][0])?t[i]:[t[i]]:a.value=Array.isArray(t[i])?t[i]:[t[i]]:a.value=t[i];break}}}}}},methods:{buildOptions:function(e){e.forEach((function(e){var t=e.__config__;if(l["b"].indexOf(t.jnpfKey)>-1&&("dictionary"===t.dataType&&t.dictionaryType&&(e.options=[],Object(r["i"])(t.dictionaryType).then((function(t){e.options=t.data.list}))),"dynamic"===t.dataType&&t.propsUrl)){e.options=[];var i={paramList:t.templateJson||[]};Object(s["o"])(t.propsUrl,i).then((function(t){e.options=Array.isArray(t.data)?t.data:[]}))}}))},search:function(){for(var e={},t=0;t<this.searchList.length;t++){var i=this.searchList[t];i.value&&(Array.isArray(i.value)?i.value.length&&(e[i.prop]=i.value):e[i.prop]=i.value)}var o="{}"===JSON.stringify(e)?"":JSON.stringify(e);this.$emit("search",o)},reset:function(){this.treeReset(),this.$emit("reset")},treeReset:function(){for(var e=0;e<this.defSearchList.length;e++)(this.searchList[e].value||void 0==this.searchList[e].value)&&(this.$set(this.searchList[e],"value",this.defSearchList[e].value),["timePicker","timeRange"].includes(this.searchList[e].__config__.jnpfKey)?this.$set(this.searchList[e],"value",null):this.useInputList.includes(this.searchList[e].__config__.jnpfKey)&&this.$set(this.searchList[e],"value",""));this.key=+new Date}}},d=c,p=i("2877"),u=Object(p["a"])(d,o,a,!1,null,null,null);t["default"]=u.exports},"34e8":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"JNPF-common-layout"},[i("div",{staticClass:"JNPF-common-layout-center"},[i("Search",{ref:"Search",attrs:{list:e.columnData.searchList},on:{reset:e.reset,search:e.searchData}}),i("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[i("div",{staticClass:"JNPF-common-head"},[e.isPreview||!e.columnData.useBtnPermission?i("div",e._l(e.columnData.btnsList,(function(t,o){return i("el-button",{key:o,attrs:{type:0==o?"primary":"text",icon:t.icon},on:{click:function(i){return e.headBtnsHandel(t.value)}}},[e._v("\n            "+e._s(t.label))])})),1):i("div",e._l(e.columnData.btnsList,(function(t,o){return i("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+t.value,expression:"'btn_'+item.value"}],key:o,attrs:{type:0==o?"primary":"text",icon:t.icon},on:{click:function(i){return e.headBtnsHandel(t.value)}}},[e._v("\n            "+e._s(t.label))])})),1),i("div",{staticClass:"JNPF-common-head-right"},[i("el-tooltip",{attrs:{effect:"dark",content:e.$t("common.refresh"),placement:"top"}},[i("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)]),e.refreshTable?i("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableRef",attrs:{data:e.list,"row-key":"id","default-expand-all":2!==e.columnData.childTableStyle&&e.expandsTable,"tree-props":{children:"children",hasChildren:""},load:e.treeLoad,"row-style":e.rowStyle,"cell-style":e.cellStyle,"has-c":e.hasBatchBtn,"custom-column":"","span-method":e.arraySpanMethod,hasNO:!(2==e.columnData.childTableStyle&&e.childColumnList.length&&3!=e.columnData.type&&4!=e.columnData.type),hasNOFixed:e.columnList.some((function(e){return"left"==e.fixed})),"show-summary":e.columnData.showSummary&&!(3==e.columnData.type||5==e.columnData.type),"summary-method":e.getTableSummaries},on:{"sort-change":e.sortChange,"selection-change":e.handleSelectionChange}},[[e._l(e.columnList,(function(t,o){return["complexHeader"==t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.id,label:t.label,align:t.align}},[e._l(t.children,(function(t){return[i("el-table-column",{key:t.prop,attrs:{prop:t.id,label:t.label,align:t.align,width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow}})]}))],2)]:i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable}})]}))],e.columnBtnsList.length||e.customBtnsList.length?i("el-table-column",{attrs:{label:"操作",fixed:(2!=e.columnData.childTableStyle||!e.childColumnList.length)&&"right",width:80},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.top?void 0:[e.customBtnsList.length?[i("el-dropdown",{attrs:{"hide-on-click":""}},[i("span",{staticClass:"el-dropdown-link"},[i("el-button",{attrs:{type:"text",size:"mini"}},[e._v("\n                    "+e._s(e.$t("common.moreBtn"))),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.customBtnsList,(function(o,a){return i("el-dropdown-item",{key:a,nativeOn:{click:function(i){return e.customBtnsHandel(o,t.row,t.$index)}}},[e._v(e._s(o.label)+"\n                  ")])})),1)],1)]:e._e()]}}],null,!0)}):e._e()],2):e._e(),3!==e.columnData.type&&5!==e.columnData.type&&e.columnData.hasPage&&e.refreshTable?[i("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})]:e._e()],2)],1),e.exportBoxVisible?i("ExportBox",{ref:"ExportBox",on:{download:e.download}}):e._e(),e.customBoxVisible?i("CustomBox",{ref:"CustomBox",on:{close:function(t){e.customBoxVisible=!1}}}):e._e()],1)},a=[],n=(i("386d"),i("ade3")),l=(i("a481"),i("28a5"),i("d263"),i("2909")),r=(i("c5f6"),i("6762"),i("2fdb"),i("ac6a"),i("c7eb")),s=(i("55dd"),i("5530")),c=(i("96cf"),i("1da1")),d=i("ef22"),p=i("826a"),u=i("9b6f"),f=i("17de"),m=i("2934"),h=i("e200"),b=i("20f7"),_=i("0c2e"),w=i("1374"),g={name:"dynamicModel",props:["config","modelId","isPreview"],components:{Search:b["default"],ExportBox:_["a"],CustomBox:w["a"]},data:function(){return{keyword:"",treeProps:{children:"children",label:"fullName",value:"id",isLeaf:"isLeaf"},list:[],cacheList:[],total:0,listLoading:!1,listQuery:{currentPage:1,pageSize:20,sort:"desc",sidx:"",menuId:"",queryJson:"",superQueryJson:""},defaultListQuery:{pageSize:20,sort:"desc",sidx:""},treeData:[],expandsTree:!0,treeActiveId:"",columnData:{columnBtnsList:[]},formData:{},columnList:[],childColumnList:[],columnOptions:[],exportList:[],columnBtnsList:[],customBtnsList:[],hasBatchBtn:!1,refreshTable:!1,expandsTable:!0,multipleSelection:[],settingsColumnList:[],mergeList:[],expandObj:{},flowTemplateJson:{},isCustomCopy:!1,candidateVisible:!1,candidateType:1,branchList:[],candidateList:[],currRow:{},workFlowFormData:{},rowStyle:null,cellStyle:null,refreshTree:!0,exportBoxVisible:!1,customBoxVisible:!1}},watch:{keyword:function(e){1==this.columnData.treeMethod&&this.$refs.treeBox.filter(e)}},created:function(){this.init()},methods:{init:function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(){var t,i=this;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.listLoading=!0,this.listQuery.menuId=this.$route.meta.modelId,this.refreshTable=!1,this.config.columnData){e.next=5;break}return e.abrupt("return");case 5:return this.columnData=JSON.parse(this.config.columnData),this.columnData.searchList=this.columnData.searchList.map((function(e){return Object(s["a"])({value:void 0},e)})),3===this.columnData.type&&(this.columnData.columnList=this.columnData.columnList.filter((function(e){return e.prop!=i.columnData.groupField}))),1==this.config.enableFlow&&(this.flowTemplateJson=this.config.flowTemplateJson?JSON.parse(this.config.flowTemplateJson):{},this.isCustomCopy=this.flowTemplateJson.properties&&this.flowTemplateJson.properties.isCustomCopy),this.customBtnsList=this.columnData.customBtnsList||[],this.columnBtnsList=this.columnData.columnBtnsList||[],this.listLoading=!0,this.isPreview&&(this.listQuery.menuId="270579315303777093"),e.next=15,Object(m["d"])(this.listQuery.menuId);case 15:if(t=e.sent,this.settingsColumnList=t.data||[],this.rowStyle=this.jnpf.getScriptFunc.call(this,this.columnData.funcs&&this.columnData.funcs.rowStyle),this.cellStyle=this.jnpf.getScriptFunc.call(this,this.columnData.funcs&&this.columnData.funcs.cellStyle),this.getColumnList(),this.$nextTick((function(){i.refreshTable=!0})),!this.isPreview){e.next=23;break}return e.abrupt("return",this.listLoading=!1);case 23:this.listQuery.pageSize=this.columnData.pageSize,this.listQuery.sort=this.columnData.sort,this.listQuery.sidx=this.columnData.defaultSidx,this.defaultListQuery.pageSize=this.columnData.pageSize,this.defaultListQuery.sort=this.columnData.sort,this.defaultListQuery.sidx=this.columnData.defaultSidx,3!==this.columnData.type&&this.columnData.hasPage||(this.listQuery.pageSize=1e4),this.initData();case 31:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initData:function(){var e=this;this.isPreview||(this.listLoading=!0,Object(d["s"])(this.modelId,this.listQuery).then((function(t){4===e.columnData.type?(e.list=t.data.list.map((function(t){return Object(s["a"])(Object(s["a"])(Object(s["a"])({},t),e.expandObj),{},{rowEdit:!1})})),e.cacheList=JSON.parse(JSON.stringify(e.list))):e.list=t.data.list.map((function(t){return Object(s["a"])(Object(s["a"])(Object(s["a"])({},t),e.expandObj),{},{hasChildren:!0})})),3!==e.columnData.type&&e.columnData.hasPage&&(e.total=t.data.pagination.total),e.listLoading=!1,e.$nextTick((function(){e.columnData.funcs&&e.columnData.funcs.afterOnload&&e.setTableLoadFunc()}))})).catch((function(){e.listLoading=!1})))},getTreeView:function(){var e=this;if("dictionary"===this.columnData.treeDataSource){if(!this.columnData.treeDictionary)return;Object(u["i"])(this.columnData.treeDictionary).then((function(t){e.treeData=t.data.list,e.initData()}))}if("organize"===this.columnData.treeDataSource&&this.$store.dispatch("generator/getDepTree").then((function(t){e.treeData=t,e.initData()})),"department"===this.columnData.treeDataSource&&this.$store.dispatch("generator/getDepTree").then((function(t){e.treeData=t,e.initData()})),"api"===this.columnData.treeDataSource){if(!this.columnData.treePropsUrl)return;Object(f["o"])(this.columnData.treePropsUrl).then((function(t){var i=t.data;Array.isArray(i)?e.treeData=i:e.treeData=[],e.initData()}))}},getTableSummaries:function(e){var t=this,i=e.columns,o=e.data,a=[];return i.forEach((function(e,i){if(0!==i){if(t.columnData.summaryField.includes(e.property)){var n=o.map((function(t){return Number(t[e.property])}));n.every((function(e){return isNaN(e)}))?a[i]="":a[i]=n.reduce((function(e,t){var i=Number(t);return isNaN(i)?e:e+t}),0).toFixed(2)}}else a[i]="合计"})),a},getColumnList:function(){if(this.isPreview){var e=this.columnData.columnList;this.columnList=this.transformColumnList(e)}else{var t=[];if(this.columnData.useColumnPermission){for(var i=this.$store.getters.permissionList,o=this.$route.meta.modelId,a=i.filter((function(e){return e.modelId===o})),n=a[0]&&a[0].column?a[0].column:[],l=0;l<this.columnData.columnList.length;l++)e:for(var r=0;r<n.length;r++)if(this.columnData.columnList[l].prop===n[r].enCode){t.push(this.columnData.columnList[l]);break e}}else t=this.columnData.columnList;[3,5].includes(this.columnData.type)||(t=this.getComplexColumns(t)),this.columnList=this.transformColumnList(t)}},getComplexColumns:function(e){var t=this.columnData.complexHeaderList||[];if(!t.length)return e;for(var i=[],o=0;o<t.length;o++){var a=t[o];if(a.label=a.fullName,a.align=a.align,a.dataIndex=a.id,a.prop=a.id,a.children=[],a.jnpfKey="complexHeader",a.sortable=!1,a.childColumns&&a.childColumns.length){i.push.apply(i,Object(l["a"])(a.childColumns));for(var n=0;n<e.length;n++){var r=e[n];a.childColumns.includes(r.id)&&"left"!==r.fixed&&"right"!==r.fixed&&a.children.push(Object(s["a"])({},r))}}}t=t.filter((function(e){return e.children.length}));for(var c=0;c<e.length;c++){var d=e[c];i.includes(d.id)||t.push(d)}return t},transformColumnList:function(e){for(var t=this,i=[],o=function(){var o=e[a];if(o.prop.includes("-")){var n=o.prop.split("-")[0],l=o.prop.split("-")[1],r=o.label.split("-")[0],s=o.label.replace(r+"-",""),c={align:"center",jnpfKey:"table",prop:n,label:r,children:[]};o.vModel=l,o.childLabel=s,t.expandObj.hasOwnProperty("".concat(n,"Expand"))||t.$set(t.expandObj,"".concat(n,"Expand"),!1),i.some((function(e){return e.prop===n}))||i.push(c);for(var d=0;d<i.length;d++)if(i[d].prop===n){i[d].children.push(o);break}}else i.push(o)},a=0;a<e.length;a++)o();return this.getMergeList(i),this.getExportList(i),this.childColumnList=i.filter((function(e){return"table"===e.jnpfKey})),i},getExportList:function(e){for(var t=[],i=0;i<e.length;i++)"table"===e[i].jnpfKey?4!=this.columnData.type&&t.push.apply(t,Object(l["a"])(e[i].children)):"complexHeader"===e[i].jnpfKey?t.push.apply(t,Object(l["a"])(e[i].children)):t.push(e[i]);this.exportList=t},getMergeList:function(e){var t=this;e.forEach((function(e){e.children&&e.children.length>0&&"table"==e.jnpfKey?e.children.forEach((function(i,o){0==o?t.mergeList.push({prop:i.prop,rowspan:1,colspan:e.children.length}):t.mergeList.push({prop:i.prop,rowspan:0,colspan:0})})):t.mergeList.push({prop:e.prop,rowspan:1,colspan:1})}))},arraySpanMethod:function(e){for(var t=e.column,i=0;i<this.mergeList.length;i++)if(t.property==this.mergeList[i].prop)return[this.mergeList[i].rowspan,this.mergeList[i].colspan]},toggleExpand:function(e,t){e[t]=!e[t]},getNodePath:function(e){var t=[],i=function e(i){i.level&&t.unshift(i.data),i.parent&&e(i.parent)};return i(e),t},handleNodeClick:function(e,t){var i=this;if(this.treeActiveId!=e[this.treeProps.value]){this.treeActiveId=e[this.treeProps.value],this.$refs.Search.treeReset();var o={};if("organize"===this.columnData.treeDataSource){var a=this.getNodePath(t),l=a.map((function(e){return e[i.treeProps.value]}));o=Object(n["a"])({},this.columnData.treeRelation,l),this.treeActiveId=l}else o=Object(n["a"])({},this.columnData.treeRelation,e[this.treeProps.value]);this.search(JSON.stringify(o))}},handleDel:function(e,t){var i=this;this.$confirm(this.$t("common.delTip"),this.$t("common.tipTitle"),{type:"warning"}).then((function(){e?Object(d["j"])(i.modelId,e).then((function(e){i.$message({type:"success",message:e.msg,duration:1e3,onClose:function(){i.initData()}})})):i.list.splice(t,1)})).catch((function(){}))},saveForRowEdit:function(e,t,i){var o=this;if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});if(1==this.config.enableFlow){var a={id:e.id,status:t||"1",candidateType:this.candidateType,formData:e,flowId:this.config.flowId,flowUrgent:1};i&&(a=Object(s["a"])(Object(s["a"])({},a),i));var n=a.id?p["c"]:p["a"];n(a).then((function(e){o.$message({message:e.msg,type:"success",duration:1500,onClose:function(){o.candidateVisible=!1,o.initData()}})}))}else{var l={id:e.id,data:JSON.stringify(e)},r=l.id?d["y"]:d["i"];r(this.modelId,l).then((function(e){o.$message({message:e.msg,type:"success",duration:1500,onClose:function(){o.candidateVisible=!1,o.initData()}})}))}},submitForRowEdit:function(e){var t=this;if(this.currRow=e,this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.workFlowFormData={id:e.id,formData:e,flowId:this.config.flowId},Object(h["g"])(0,this.workFlowFormData).then((function(i){var o=i.data;if(t.candidateType=o.type,1==o.type)t.branchList=i.data.list.filter((function(e){return e.isBranchFlow})),t.candidateList=i.data.list.filter((function(e){return!e.isBranchFlow&&e.isCandidates})),t.candidateVisible=!0;else if(2==o.type)t.branchList=[],t.candidateList=i.data.list.filter((function(e){return e.isCandidates})),t.candidateVisible=!0;else{if(t.isCustomCopy)return t.branchList=[],t.candidateList=[],void(t.candidateVisible=!0);t.$confirm("您确定要提交当前流程吗, 是否继续?","提示",{type:"warning"}).then((function(){t.saveForRowEdit(e,"0")})).catch((function(){}))}})).catch((function(){}))},submitCandidate:function(e){this.saveForRowEdit(this.currRow,"0",e)},cancelRowEdit:function(e,t){if(!e.id)return this.list.splice(t,1);e.rowEdit=!1;var i=JSON.parse(JSON.stringify(this.cacheList[t]));this.$set(this.list,t,i)},handleSelectionChange:function(e){var t=e.map((function(e){return e.id}));this.multipleSelection=t},sortChange:function(e){e.column;var t=e.prop,i=e.order;this.listQuery.sort="ascending"==i?"asc":"desc",this.listQuery.sidx=i?t:"",this.initData()},reset:function(){if(this.listQuery.sort=this.defaultListQuery.sort,this.listQuery.sidx=this.defaultListQuery.sidx,2===this.columnData.type){var e=Object(n["a"])({},this.columnData.treeRelation,this.treeActiveId),t=this.treeActiveId?JSON.stringify(e):"";this.search(t)}else this.search("")},searchData:function(e){2===this.columnData.type&&this.treeActiveId&&(e=JSON.parse(e),e=Object(s["a"])(Object(n["a"])({},this.columnData.treeRelation,this.treeActiveId),e),e=JSON.stringify(e)),this.search(e)},search:function(e){this.isPreview||(e||this.$refs.treeBox&&this.$refs.treeBox.setCurrentKey(null),this.listQuery.queryJson=e,this.listQuery.currentPage=1,this.initData())},superQuery:function(e){this.isPreview||(this.listQuery.superQueryJson=e,this.listQuery.currentPage=1,this.initData())},customBtnsHandel:function(e,t,i){1==e.event.btnType&&this.handlePopup(e.event,t,i),2==e.event.btnType&&this.handleScriptFunc(e.event,t,i),3==e.event.btnType&&this.handleInterface(e.event,t,i)},handlePopup:function(e,t,i){var o=this;this.customBoxVisible=!0,this.$nextTick((function(){o.$refs.CustomBox.init(e,o.modelId,"",o.isPreview,t)}))},handleScriptFunc:function(e,t,i){var o={data:t,index:i,refresh:this.initData,onlineUtils:this.jnpf.onlineUtils},a=this.jnpf.getScriptFunc.call(this,e.func);a&&a.call(this,o)},handleInterface:function(e,t,i){var o=this,a=function(){e.templateJson&&e.templateJson.length&&e.templateJson.forEach((function(e){e.defaultValue=t[e.relationField]||""}));var i={paramList:e.templateJson||[]};Object(f["o"])(e.interfaceId,i).then((function(e){o.$message({message:e.msg,type:"success"})}))};if(!e.useConfirm)return a();this.$confirm(e.confirmTitle||"确认执行此操作","提示",{type:"warning"}).then((function(){a()})).catch((function(){}))},setTableLoadFunc:function(){var e=this.$refs.tableRef.$refs.JNPFTable,t={data:this.list,tableRef:e,onlineUtils:this.jnpf.onlineUtils},i=this.jnpf.getScriptFunc.call(this,this.columnData.funcs.afterOnload);i&&i.call(this,t)},toggleTreeExpand:function(e){var t=this;this.refreshTree=!1,this.expandsTree=e,this.$nextTick((function(){t.refreshTree=!0,t.$nextTick((function(){t.$refs.treeBox.setCurrentKey(null)}))}))},toggleExpandList:function(){var e=this;this.refreshTable=!1,this.expandsTable=!this.expandsTable,this.$nextTick((function(){e.refreshTable=!0}))},loadNode:function(e,t){var i=e.data,o=this.columnData;if(o.treeInterfaceId){if(o.treeTemplateJson&&o.treeTemplateJson.length)for(var a=0;a<o.treeTemplateJson.length;a++){var n=o.treeTemplateJson[a];n.defaultValue=i[n.relationField]||""}var l={paramList:o.treeTemplateJson||[]};Object(f["o"])(o.treeInterfaceId,l).then((function(e){var i=e.data;Array.isArray(i)?t(i):t([])}))}},treeLoad:function(e,t,i){var o=this;Object(d["t"])(this.modelId,e.id,this.listQuery).then((function(e){if(e.data.list&&Array.isArray(e.data.list)){var t=e.data.list.map((function(e){return Object(s["a"])(Object(s["a"])(Object(s["a"])({},e),o.expandObj),{},{hasChildren:!0})}));i(t)}else i([])}))},headBtnsHandel:function(e){var t=this;"download"==e&&(this.exportBoxVisible=!0,this.$nextTick((function(){t.$refs.ExportBox.init(t.exportList)})))},download:function(e){var t=this;if(this.isPreview)return this.$message({message:"功能预览不支持数据导出",type:"warning"});var i=Object(s["a"])(Object(s["a"])({},this.listQuery),e);Object(d["l"])(this.modelId,i).then((function(e){e.data.url&&(t.jnpf.downloadFile(e.data.url),t.$refs.ExportBox.visible=!1,t.exportBoxVisible=!1)}))},getFixed:function(e,t){return 0==t&&this.columnData.groupField&&3==this.columnData.type?!!this.columnList.some((function(e){return"left"==e.fixed}))&&"left":2!=this.columnData.childTableStyle&&("none"!=e.fixed&&e.fixed)}}},v=g,y=i("2877"),x=Object(y["a"])(v,o,a,!1,null,null,null);t["default"]=x.exports},"5a09":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"child-table-column"},[e.expand?e._e():e._l(e.fewData,(function(t,o){return i("tr",{key:o,staticClass:"child-table__row"},e._l(e.head,(function(o,a){return i("td",{key:a,class:{"td-flex-1":!o.width},style:{width:o.width-1+"px","text-align":o.align}},["relationForm"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[i("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(i){return e.toDetail(o.modelId,t[o.vModel+"_id"])}}},[e._v("\n            "+e._s(t[o.vModel])+"\n          ")])],1):"inputNumber"===o.jnpfKey||"calculate"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[i("JnpfNumber",{attrs:{thousands:o.thousands,precision:o.precision},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"input"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow}},[i("jnpf-input",{attrs:{addonBefore:o.addonBefore,addonAfter:o.addonAfter,showOverflow:e.showOverflow,useMask:o.useMask,maskConfig:o.maskConfig,detailed:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"sign"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:!o.useMask&&e.showOverflow?t[o.vModel]:""}},[i("JnpfSign",{attrs:{detailed:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"rate"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[i("JnpfRate",{attrs:{disabled:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"slider"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[i("JnpfSlider",{attrs:{disabled:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"uploadFile"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[t[o.vModel]&&t[o.vModel].length?i("JnpfUploadFile",{attrs:{detailed:"",disabled:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}}):e._e()],1):"uploadImg"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[t[o.vModel]&&t[o.vModel].length?i("JnpfUploadImg",{attrs:{detailed:"",disabled:"",simple:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}}):e._e()],1):i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[e._v("\n          "+e._s(t[o.vModel])+"\n        ")])])})),0)})),e.expand?e._l(e.data,(function(t,o){return i("tr",{key:o,staticClass:"child-table__row"},e._l(e.head,(function(o,a){return i("td",{key:a,class:{"td-flex-1":!o.width},style:{width:o.width-1+"px","text-align":o.align}},["relationForm"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[i("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(i){return e.toDetail(o.modelId,t[o.vModel+"_id"])}}},[e._v("\n            "+e._s(t[o.vModel])+"\n          ")])],1):"inputNumber"===o.jnpfKey||"calculate"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[i("JnpfNumber",{attrs:{thousands:o.thousands,precision:o.precision},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"input"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow}},[i("jnpf-input",{attrs:{addonBefore:o.addonBefore,addonAfter:o.addonAfter,showOverflow:e.showOverflow,useMask:o.useMask,maskConfig:o.maskConfig,detailed:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"sign"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:!o.useMask&&e.showOverflow?t[o.vModel]:""}},[i("JnpfSign",{attrs:{detailed:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"rate"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[i("JnpfRate",{attrs:{disabled:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"slider"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[i("JnpfSlider",{attrs:{disabled:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}})],1):"uploadFile"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[t[o.vModel]&&t[o.vModel].length?i("JnpfUploadFile",{attrs:{detailed:"",disabled:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}}):e._e()],1):"uploadImg"===o.jnpfKey?i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[t[o.vModel]&&t[o.vModel].length?i("JnpfUploadImg",{attrs:{detailed:"",disabled:"",simple:""},model:{value:t[o.vModel],callback:function(i){e.$set(t,o.vModel,i)},expression:"item[headItem.vModel]"}}):e._e()],1):i("div",{staticClass:"cell",class:{ellipsis:e.showOverflow},attrs:{title:e.showOverflow?t[o.vModel]:""}},[e._v("\n          "+e._s(t[o.vModel])+"\n        ")])])})),0)})):e._e(),e.data.length>e.defaultNumber?i("div",{staticClass:"expand-more-btn"},[e.expand?i("el-button",{attrs:{type:"text"},on:{click:e.toggleExpand}},[e._v("隐藏部分")]):e._e(),e.expand?e._e():i("el-button",{attrs:{type:"text"},on:{click:e.toggleExpand}},[e._v("加载更多")])],1):e._e()],2)},a=[],n=(i("c5f6"),{name:"childTableColumn",data:function(){return{}},props:{data:{type:Array,default:function(){return[]}},head:{type:Array,default:function(){return[]}},defaultNumber:{type:Number,default:3},rowEdit:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},showOverflow:{type:Boolean,default:!1}},computed:{fewData:function(){return this.data?this.data.slice(0,this.defaultNumber):[]}},methods:{toggleExpand:function(){this.$emit("toggleExpand")},toDetail:function(e,t){this.$emit("toDetail",e,t)}}}),l=n,r=i("2877"),s=Object(r["a"])(l,o,a,!1,null,null,null);t["default"]=s.exports},"63c9":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.currentView,{directives:[{name:"show",rawName:"v-show",value:e.showPage,expression:"showPage"}],tag:"component",attrs:{config:e.config,modelId:e.modelId,isPreview:e.isPreview}})},a=[],n=(i("a481"),i("ef22")),l=i("b4b7"),r=i("7292"),s=i("34e8"),c=i("3fa5"),d={name:"dynamicModel",components:{Form:l["default"],List:r["default"],ViewForm:s["default"]},data:function(){return{currentView:"",showPage:!1,isPreview:!1,modelId:"",config:{}}},created:function(){this.$store.dispatch("base/getDictionaryAll");var e=this.$route.query.isPreview||!1;e?(this.modelId=this.$route.query.id,this.isPreview=!0):this.modelId=this.$route.meta.relationId;var t=this.$route.query.previewType?this.$route.query.previewType:"";this.modelId&&this.getConfigData({type:t})},methods:{getConfigData:function(e){var t=this;Object(n["m"])(this.modelId,e).then((function(e){if(200!==e.code||!e.data)return t.$store.dispatch("tagsView/delView",t.$route),t.$router.replace("/404"),void Object(c["a"])({message:e.msg||"请求出错，请重试",type:"error",duration:1500});t.config=e.data,"1"==e.data.webType?t.currentView="Form":"4"==e.data.webType?t.currentView="ViewForm":t.currentView="List",t.showPage=!0})).catch((function(){}))}}},p=d,u=i("2877"),f=Object(u["a"])(p,o,a,!1,null,null,null);t["default"]=f.exports},7292:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"JNPF-common-layout"},[2===e.columnData.type?i("div",{staticClass:"JNPF-common-layout-left"},[e.columnData.treeTitle?i("div",{staticClass:"JNPF-common-title"},[i("h2",[e._v(e._s(e.columnData.treeTitle))]),0==e.columnData.treeSynType?i("el-dropdown",[i("el-link",{attrs:{icon:"icon-ym icon-ym-mpMenu",underline:!1}}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.treeRefresh()}}},[e._v("刷新数据")]),i("el-dropdown-item",{nativeOn:{click:function(t){return e.toggleTreeExpand(!0)}}},[e._v("展开全部")]),i("el-dropdown-item",{nativeOn:{click:function(t){return e.toggleTreeExpand(!1)}}},[e._v("折叠全部")])],1)],1):e._e()],1):e._e(),e.columnData.hasTreeQuery&&0==e.columnData.treeSynType?i("div",{staticClass:"JNPF-common-tree-search-box"},[i("el-input",{attrs:{placeholder:"输入关键字","suffix-icon":"el-icon-search",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1):e._e(),e.refreshTree?i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"treeBox",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.treeProps,"default-expand-all":0==e.columnData.treeSynType&&e.expandsTree,"highlight-current":"","expand-on-click-node":!1,"node-key":e.treeProps.value,"filter-node-method":e.filterNode,lazy:!!(1==e.columnData.treeSynType&"api"===e.columnData.treeDataSource),load:e.loadNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,a=t.data;return i("span",{staticClass:"custom-tree-node"},[i("i",{class:a.icon}),i("span",{staticClass:"text"},[e._v(e._s(o.label))])])}}],null,!1,1575034392)}):e._e()],1):e._e(),i("div",{staticClass:"JNPF-common-layout-center"},[i("Search",{ref:"Search",attrs:{list:e.columnData.searchList,initDataJson:e.listQuery.queryJson},on:{reset:e.reset,search:e.searchData}}),i("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[i("div",{staticClass:"JNPF-common-head"},[e.isPreview||!e.columnData.useBtnPermission?i("div",e._l(e.columnData.btnsList,(function(t,o){return i("span",{key:o,staticStyle:{margin:"0 4px"}},[i("el-button",{attrs:{type:0==o?"primary":"text",icon:t.icon},on:{click:function(i){return e.headBtnsHandel(t.value)}}},[e._v("\n              "+e._s(t.label))])],1)})),0):i("div",e._l(e.columnData.btnsList,(function(t,o){return i("span",{key:o,staticStyle:{margin:"0 4px"}},[i("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+t.value,expression:"'btn_'+item.value"}],attrs:{type:0==o?"primary":"text",icon:t.icon},on:{click:function(i){return e.headBtnsHandel(t.value)}}},[e._v("\n              "+e._s(t.label))])],1)})),0),i("div",{staticClass:"JNPF-common-head-right"},[e.columnData.hasSuperQuery?i("el-tooltip",{attrs:{content:"高级查询",placement:"top"}},[i("el-link",{attrs:{icon:"icon-ym icon-ym-filter JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.openSuperQuery()}}})],1):e._e(),5==e.columnData.type&&0==e.columnData.treeLazyType?[i("el-tooltip",{attrs:{effect:"dark",content:"展开",placement:"top"}},[i("el-link",{directives:[{name:"show",rawName:"v-show",value:!e.expandsTable,expression:"!expandsTable"}],attrs:{type:"text",icon:"icon-ym icon-ym-btn-expand JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.toggleExpandList()}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:"折叠",placement:"top"}},[i("el-link",{directives:[{name:"show",rawName:"v-show",value:e.expandsTable,expression:"expandsTable"}],attrs:{type:"text",icon:"icon-ym icon-ym-btn-collapse JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.toggleExpandList()}}})],1)]:e._e(),i("el-tooltip",{attrs:{effect:"dark",content:e.$t("common.refresh"),placement:"top"}},[i("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],2)]),e.refreshTable?i("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableRef",attrs:{data:e.list,"row-key":"id","default-expand-all":2!==e.columnData.childTableStyle&&1!=e.columnData.treeLazyType&&e.expandsTable,lazy:5==e.columnData.type&&1==e.columnData.treeLazyType,"tree-props":{children:"children",hasChildren:1==e.columnData.treeLazyType?"hasChildren":""},load:e.treeLoad,"cell-style":e.cellStyle,"header-cell-class-name":e.handleHeaderClass,"row-style":e.rowStyle,"has-c":e.hasBatchBtn,"custom-column":"","span-method":e.arraySpanMethod,hasNO:!(2==e.columnData.childTableStyle&&e.childColumnList.length&&3!=e.columnData.type)&&4!=e.columnData.type,hasNOFixed:e.columnList.some((function(e){return"left"==e.fixed})),"show-summary":e.columnData.showSummary&&!(3==e.columnData.type||5==e.columnData.type),"summary-method":e.getTableSummaries},on:{"sort-change":e.handleTableSort,"selection-change":e.handleSelectionChange}},[4===e.columnData.type?[i("el-table-column",{attrs:{width:"50",align:"center",label:"序号",fixed:e.columnList.some((function(e){return"left"==e.fixed}))},scopedSlots:e._u([{key:"default",fn:function(t){return[0==e.config.enableFlow?i("div",{staticClass:"row-action"},[i("span",{staticClass:"index"},[e._v(e._s(t.$index+1))]),i("i",{staticClass:"ym-custom ym-custom-arrow-expand",on:{click:function(i){return e.handleRowForm(t.$index)}}})]):i("div",[e._v(e._s(t.$index+1))])]}}],null,!1,1055398317)}),e._l(e.columnList,(function(t,o){return["table"!==t.jnpfKey?i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:"none"!=t.fixed&&t.fixed,width:t.width,"show-overflow-tooltip":e.getTooltip(t.jnpfKey),sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.rowEdit?["inputNumber"===t.jnpfKey?[i("JnpfInputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,min:t.min,max:t.max,step:t.step,precision:t.precision,addonBefore:t.addonBefore,addonAfter:t.addonAfter,"controls-position":t["controls-position"],disabled:t.disabled,thousands:t.thousands},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"switch"===t.jnpfKey?i("div",{staticStyle:{"padding-top":"5px"}},[i("el-switch",{attrs:{activeValue:t.activeValue,inactiveValue:t.inactiveValue,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})],1):"timePicker"===t.jnpfKey?[i("JnpfTimePicker",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,clearable:t.clearable,valueFormat:t.format,format:t.format,readonly:t.readonly,disabled:t.disabled,startTime:t.startTime,endTime:t.endTime},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"datePicker"===t.jnpfKey?[i("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{clearable:t.clearable,placeholder:t.placeholder,format:t.format,readonly:t.readonly,disabled:t.disabled,startTime:t.startTime,endTime:t.endTime},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:["organizeSelect"].includes(t.jnpfKey)?[i("JnpfOrganizeSelect",{attrs:{placeholder:t.placeholder,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:["depSelect"].includes(t.jnpfKey)?[i("JnpfDepSelect",{attrs:{placeholder:t.placeholder,selectType:t.selectType,ableDepIds:t.ableDepIds,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:["userSelect"].includes(t.jnpfKey)?[i("JnpfUserSelect",{attrs:{placeholder:t.placeholder,selectType:t.selectType,ableDepIds:t.ableDepIds,ablePosIds:t.ablePosIds,ableUserIds:t.ableUserIds,ableRoleIds:t.ableRoleIds,ableGroupIds:t.ableGroupIds,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:["usersSelect"].includes(t.jnpfKey)?[i("JnpfUsersSelect",{attrs:{placeholder:t.placeholder,selectType:t.selectType,ableIds:t.ableIds,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:["posSelect"].includes(t.jnpfKey)?[i("JnpfPosSelect",{attrs:{placeholder:t.placeholder,selectType:t.selectType,ableDepIds:t.ableDepIds,ablePosIds:t.ablePosIds,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"groupSelect"===t.jnpfKey?[i("JnpfGroupSelect",{attrs:{placeholder:t.placeholder,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"roleSelect"===t.jnpfKey?[i("JnpfRoleSelect",{attrs:{placeholder:t.placeholder,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"areaSelect"===t.jnpfKey?[i("JnpfAreaSelect",{attrs:{level:t.level,placeholder:t.placeholder,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:["select","radio","checkbox"].includes(t.jnpfKey)?[i("el-select",{attrs:{placeholder:t.placeholder,filterable:t.filterable,multiple:t.multiple||"checkbox"===t.jnpfKey,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}},e._l(t.options,(function(e,o){return i("el-option",{key:o,attrs:{label:e[t.props.label],value:e[t.props.value]}})})),1)]:"cascader"===t.jnpfKey?[i("JnpfCascader",{staticStyle:{width:"100%"},attrs:{options:t.options,clearable:t.clearable,"show-all-levels":t.showAllLevels,props:t.props,filterable:t.filterable,separator:t.separator,placeholder:t.placeholder,disabled:t.disabled,multiple:t.multiple},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"treeSelect"===t.jnpfKey?[i("JnpfTreeSelect",{attrs:{options:t.options,props:t.props,placeholder:t.placeholder,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"relationForm"===t.jnpfKey?[i("JnpfRelationForm",{attrs:{placeholder:t.placeholder,modelId:t.modelId,columnOptions:t.columnOptions,relationField:t.relationField,hasPage:t.hasPage,pageSize:t.pageSize,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"popupSelect"===t.jnpfKey?[i("JnpfPopupSelect",{attrs:{placeholder:t.placeholder,interfaceId:t.interfaceId,columnOptions:t.columnOptions,propsValue:t.propsValue,relationField:t.relationField,hasPage:t.hasPage,pageSize:t.pageSize,popupType:t.popupType,templateJson:t.templateJson,popupTitle:t.popupTitle,popupWidth:t.popupWidth,clearable:t.clearable,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"autoComplete"===t.jnpfKey?[i("JnpfAutoComplete",{attrs:{placeholder:t.placeholder,interfaceId:t.interfaceId,relationField:t.relationField,total:t.total,clearable:t.clearable,templateJson:t.templateJson,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"popupTableSelect"===t.jnpfKey?[i("JnpfPopupTableSelect",{attrs:{placeholder:t.placeholder,interfaceId:t.interfaceId,columnOptions:t.columnOptions,propsValue:t.propsValue,relationField:t.relationField,hasPage:t.hasPage,pageSize:t.pageSize,popupType:t.popupType,popupTitle:t.popupTitle,popupWidth:t.popupWidth,filterable:t.filterable,multiple:t.multiple,clearable:t.clearable,disabled:t.disabled,templateJson:t.templateJson},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"sign"===t.jnpfKey?[i("JnpfSign",{attrs:{disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"rate"===t.jnpfKey?[i("JnpfRate",{attrs:{disabled:t.disabled,count:t.count},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"slider"===t.jnpfKey?[i("JnpfSlider",{attrs:{disabled:t.disabled,min:t.min,max:t.max,step:t.step},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"location"===t.jnpfKey?[i("JnpfLocation",{attrs:{disabled:t.disabled,autoLocation:t.autoLocation,adjustmentScope:t.adjustmentScope,enableDesktopLocation:t.enableDesktopLocation,locationScope:t.locationScope,enableLocationScope:t.enableLocationScope,clearable:t.clearable},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"uploadFile"===t.jnpfKey?[i("JnpfUploadFile",{attrs:{disabled:t.disabled,simple:"",limit:t.limit},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:"uploadImg"===t.jnpfKey?[i("JnpfUploadImg",{attrs:{disabled:t.disabled,sizeUnit:t.sizeUnit,limit:t.limit,fileSize:t.fileSize,isAccount:t.isAccount,folder:t.folder,tipText:t.tipText,accept:t.accept},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:["input","textarea"].includes(t.jnpfKey)?[i("JnpfInput",{attrs:{placeholder:t.placeholder,readonly:t.readonly,prefixIcon:t.prefixIcon,suffixIcon:t.suffixIcon,clearable:t.clearable,showWordLimit:t.showWordLimit,maxlength:t.maxlength,showPassword:t.showPassword,addonBefore:t.addonBefore,addonAfter:t.addonAfter,disabled:t.disabled},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]:e.systemComponentsList.includes(t.jnpfKey)?[e._v("\n                    "+e._s(o.row[t.prop+"_name"]||o.row[t.prop])+"\n                  ")]:[e._v("\n                    "+e._s(o.row[t.prop])+"\n                  ")]]:[["relationForm"].includes(t.jnpfKey)?[i("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(i){return e.toDetail(t.modelId,o.row[""+t.prop])}}},[e._v("\n                      "+e._s(o.row[t.prop+"_name"]||o.row[t.prop]))])]:["inputNumber","calculate"].includes(t.jnpfKey)?[o.row[t.prop+"_name"]?[i("JnpfNumber",{attrs:{thousands:t.thousands,precision:t.precision},model:{value:o.row[t.prop+"_name"],callback:function(i){e.$set(o.row,t.prop+"_name",i)},expression:"scope.row[item.prop+'_name']"}})]:[i("JnpfNumber",{attrs:{thousands:t.thousands,precision:t.precision},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]]:"input"==t.jnpfKey?[o.row[t.prop+"_name"]?[i("jnpf-input",{attrs:{addonBefore:t.addonBefore,addonAfter:t.addonAfter,showOverflow:e.getTooltip(t.jnpfKey),useMask:t.useMask,maskConfig:t.maskConfig,detailed:""},model:{value:o.row[t.prop+"_name"],callback:function(i){e.$set(o.row,t.prop+"_name",i)},expression:"scope.row[item.prop+'_name']"}})]:[i("jnpf-input",{attrs:{addonBefore:t.addonBefore,addonAfter:t.addonAfter,useMask:t.useMask,showOverflow:e.getTooltip(t.jnpfKey),maskConfig:t.maskConfig,detailed:""},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]]:"sign"==t.jnpfKey?[o.row[t.prop+"_name"]?[i("JnpfSign",{attrs:{detailed:""},model:{value:o.row[t.prop+"_name"],callback:function(i){e.$set(o.row,t.prop+"_name",i)},expression:"scope.row[item.prop+'_name']"}})]:[i("JnpfSign",{attrs:{detailed:""},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]]:"location"==t.jnpfKey&&e.columnData.showOverflow?[o.row[t.prop+"_name"]?[i("el-tooltip",{attrs:{effect:"dark",content:o.row[t.prop+"_name"],placement:"top"}},[i("div",{staticClass:"showOverflow"},[e._v(e._s(o.row[t.prop+"_name"]))])])]:[i("el-tooltip",{attrs:{effect:"dark",content:o.row[t.prop],placement:"top"}},[i("div",{staticClass:"showOverflow"},[e._v(e._s(o.row[t.prop]))])])]]:"rate"==t.jnpfKey?[o.row[t.prop+"_name"]?[i("JnpfRate",{attrs:{disabled:"",count:t.count},model:{value:o.row[t.prop+"_name"],callback:function(i){e.$set(o.row,t.prop+"_name",i)},expression:"scope.row[item.prop+'_name']"}})]:[i("JnpfRate",{attrs:{disabled:"",count:t.count},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]]:"slider"==t.jnpfKey?[o.row[t.prop+"_name"]?[i("JnpfSlider",{attrs:{disabled:""},model:{value:o.row[t.prop+"_name"],callback:function(i){e.$set(o.row,t.prop+"_name",i)},expression:"scope.row[item.prop+'_name']"}})]:[i("JnpfSlider",{attrs:{disabled:""},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})]]:"uploadFile"==t.jnpfKey?[o.row[t.prop+"_name"]?[o.row[t.prop+"_name"]&&o.row[t.prop+"_name"].length?i("JnpfUploadFile",{attrs:{disabled:"",simple:"",detailed:""},model:{value:o.row[t.prop+"_name"],callback:function(i){e.$set(o.row,t.prop+"_name",i)},expression:"scope.row[item.prop+'_name']"}}):e._e()]:[o.row[t.prop]&&o.row[t.prop].length?i("JnpfUploadFile",{attrs:{disabled:"",simple:"",detailed:""},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}}):e._e()]]:"uploadImg"==t.jnpfKey?[o.row[t.prop+"_name"]?[o.row[t.prop+"_name"]&&o.row[t.prop+"_name"].length?i("JnpfUploadImg",{attrs:{disabled:"",simple:"",detailed:""},model:{value:o.row[t.prop+"_name"],callback:function(i){e.$set(o.row,t.prop+"_name",i)},expression:"scope.row[item.prop+'_name']"}}):e._e()]:[o.row[t.prop]&&o.row[t.prop].length?i("JnpfUploadImg",{attrs:{disabled:"",simple:"",detailed:""},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}}):e._e()]]:[e._v("\n                    "+e._s(o.row[t.prop+"_name"]||o.row[t.prop])+"\n                  ")]]]}}],null,!0)},["complexHeader"==t.jnpfKey&&t.children&&t.children.length?[e._l(t.children,(function(o){return[i("el-table-column",{key:o.prop,attrs:{prop:o.prop,label:o.label,width:o.width,align:o.align,"show-overflow-tooltip":e.getTooltip(o.jnpfKey),sortable:o.sortable?"custom":o.sortable},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.rowEdit?["inputNumber"===o.jnpfKey?[i("JnpfInputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:o.placeholder,min:o.min,max:o.max,step:o.step,precision:o.precision,addonBefore:o.addonBefore,addonAfter:o.addonAfter,"controls-position":o["controls-position"],disabled:o.disabled,thousands:o.thousands},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"switch"===o.jnpfKey?i("div",{staticStyle:{"padding-top":"5px"}},[i("el-switch",{attrs:{"active-value":o["active-value"],"inactive-value":o["inactive-value"],disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})],1):"timePicker"===o.jnpfKey?[i("JnpfTimePicker",{staticStyle:{width:"100%"},attrs:{placeholder:o.placeholder,clearable:o.clearable,valueFormat:o.format,format:o.format,readonly:o.readonly,disabled:o.disabled,startTime:o.startTime,endTime:o.endTime},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"datePicker"===o.jnpfKey?[i("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{clearable:o.clearable,placeholder:o.placeholder,format:o.format,readonly:o.readonly,disabled:o.disabled,startTime:o.startTime,endTime:o.endTime},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:["organizeSelect"].includes(o.jnpfKey)?[i("JnpfOrganizeSelect",{attrs:{placeholder:o.placeholder,multiple:o.multiple,clearable:o.clearable,disabled:o.disabled,selectType:o.selectType,ableIds:o.ableIds},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:["depSelect"].includes(o.jnpfKey)?[i("JnpfDepSelect",{attrs:{placeholder:o.placeholder,selectType:o.selectType,ableDepIds:o.ableDepIds,multiple:o.multiple,clearable:o.clearable,disabled:o.disabled,ableIds:o.ableIds},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:["userSelect"].includes(o.jnpfKey)?[i("JnpfUserSelect",{attrs:{placeholder:o.placeholder,selectType:o.selectType,ableIds:o.ableIds,multiple:o.multiple,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:["usersSelect"].includes(o.jnpfKey)?[i("JnpfUsersSelect",{attrs:{placeholder:o.placeholder,selectType:o.selectType,ableIds:o.ableIds,multiple:o.multiple,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:["posSelect"].includes(o.jnpfKey)?[i("JnpfPosSelect",{attrs:{placeholder:o.placeholder,selectType:o.selectType,ableIds:o.ableIds,multiple:o.multiple,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"groupSelect"===o.jnpfKey?[i("JnpfGroupSelect",{attrs:{ableIds:o.ableIds,placeholder:o.placeholder,multiple:o.multiple,selectType:o.selectType,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"roleSelect"===o.jnpfKey?[i("JnpfRoleSelect",{attrs:{ableIds:o.ableIds,placeholder:o.placeholder,multiple:o.multiple,selectType:o.selectType,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"areaSelect"===o.jnpfKey?[i("JnpfAreaSelect",{attrs:{level:o.level,placeholder:o.placeholder,multiple:o.multiple,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:["select","radio","checkbox"].includes(o.jnpfKey)?[i("el-select",{attrs:{placeholder:o.placeholder,filterable:o.filterable,multiple:o.multiple||"checkbox"===o.jnpfKey,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}},e._l(o.options,(function(e,t){return i("el-option",{key:t,attrs:{label:e[o.props.label],value:e[o.props.value]}})})),1)]:"cascader"===o.jnpfKey?[i("el-cascader",{staticStyle:{width:"100%"},attrs:{options:o.options,clearable:o.clearable,"show-all-levels":o.showAllLevels,props:o.props,filterable:o.filterable,separator:o.separator,placeholder:o.placeholder,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"treeSelect"===o.jnpfKey?[i("JnpfTreeSelect",{attrs:{options:o.options,props:o.props,placeholder:o.placeholder,multiple:o.multiple,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"relationForm"===o.jnpfKey?[i("JnpfRelationForm",{attrs:{placeholder:o.placeholder,modelId:o.modelId,columnOptions:o.columnOptions,relationField:o.relationField,hasPage:o.hasPage,pageSize:o.pageSize,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"popupSelect"===o.jnpfKey?[i("JnpfPopupSelect",{attrs:{placeholder:o.placeholder,interfaceId:o.interfaceId,columnOptions:o.columnOptions,propsValue:o.propsValue,relationField:o.relationField,hasPage:o.hasPage,pageSize:o.pageSize,popupType:o.popupType,templateJson:t.templateJson,popupTitle:o.popupTitle,popupWidth:o.popupWidth,clearable:o.clearable,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"autoComplete"===o.jnpfKey?[i("JnpfAutoComplete",{attrs:{placeholder:o.placeholder,interfaceId:o.interfaceId,relationField:o.relationField,total:o.total,clearable:o.clearable,templateJson:o.templateJson,disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"popupTableSelect"===o.jnpfKey?[i("JnpfPopupTableSelect",{attrs:{placeholder:o.placeholder,interfaceId:o.interfaceId,multiple:o.multiple,columnOptions:o.columnOptions,propsValue:o.propsValue,relationField:o.relationField,hasPage:o.hasPage,pageSize:o.pageSize,popupType:o.popupType,popupTitle:o.popupTitle,popupWidth:o.popupWidth,filterable:o.filterable,disabled:o.disabled,clearable:"",templateJson:t.templateJson},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"sign"===o.jnpfKey?[i("JnpfSign",{attrs:{disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"location"===o.jnpfKey?[i("JnpfLocation",{attrs:{disabled:o.disabled,autoLocation:o.autoLocation,adjustmentScope:o.adjustmentScope,enableDesktopLocation:o.enableDesktopLocation,locationScope:o.locationScope,enableLocationScope:o.enableLocationScope,clearable:o.clearable},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"rate"===o.jnpfKey?[i("JnpfRate",{attrs:{disabled:o.disabled,count:o.count},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"slider"===o.jnpfKey?[i("JnpfSlider",{attrs:{disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]:"uploadFile"===o.jnpfKey?[a.row[o.prop]&&a.row[o.prop].length?i("JnpfUploadFile",{attrs:{disabled:o.disabled,simple:""},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}}):e._e()]:"uploadImg"===o.jnpfKey?[a.row[o.prop]&&a.row[o.prop].length?i("JnpfUploadImg",{attrs:{disabled:"",simple:""},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}}):e._e()]:["input","textarea"].includes(o.jnpfKey)?[i("el-input",{attrs:{placeholder:o.placeholder,readonly:o.readonly,"prefix-icon":o["prefix-icon"],"suffix-icon":o["suffix-icon"],clearable:o.clearable,"show-word-limit":o["show-word-limit"],maxlength:o.maxlength,"show-password":o["show-password"],disabled:o.disabled},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}},[o.__slot__&&o.__slot__.prepend?i("template",{slot:"prepend"},[e._v(e._s(o.__slot__.prepend))]):e._e(),o.__slot__&&o.__slot__.append?i("template",{slot:"append"},[e._v(e._s(o.__slot__.append))]):e._e()],2)]:e.systemComponentsList.includes(o.jnpfKey)?[e._v("\n                          "+e._s(a.row[o.prop+"_name"]||a.row[o.prop])+"\n                        ")]:[e._v("\n                          "+e._s(a.row[o.prop])+"\n                        ")]]:[["relationForm"].includes(o.jnpfKey)?[i("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(t){return e.toDetail(o.modelId,a.row[""+o.prop])}}},[e._v("\n                            "+e._s(a.row[o.prop+"_name"]||a.row[o.prop]))])]:["inputNumber","calculate"].includes(o.jnpfKey)?[a.row[o.prop+"_name"]?[i("JnpfNumber",{attrs:{thousands:o.thousands,precision:o.precision},model:{value:a.row[o.prop+"_name"],callback:function(t){e.$set(a.row,o.prop+"_name",t)},expression:"scope.row[child.prop+'_name']"}})]:[i("JnpfNumber",{attrs:{thousands:o.thousands,precision:o.precision},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]]:["input"].includes(o.jnpfKey)?[a.row[o.prop+"_name"]?[i("jnpf-input",{attrs:{addonBefore:o.addonBefore,addonAfter:o.addonAfter,showOverflow:e.getTooltip(o.jnpfKey),useMask:o.useMask,maskConfig:o.maskConfig,detailed:""},model:{value:a.row[o.prop+"_name"],callback:function(t){e.$set(a.row,o.prop+"_name",t)},expression:"scope.row[child.prop+'_name']"}})]:[i("jnpf-input",{attrs:{addonBefore:o.addonBefore,addonAfter:o.addonAfter,showOverflow:e.getTooltip(o.jnpfKey),useMask:o.useMask,maskConfig:o.maskConfig,detailed:""},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]]:["sign"].includes(o.jnpfKey)?[a.row[o.prop+"_name"]?[i("JnpfSign",{attrs:{detailed:""},model:{value:a.row[o.prop+"_name"],callback:function(t){e.$set(a.row,o.prop+"_name",t)},expression:"scope.row[child.prop+'_name']"}})]:[i("JnpfSign",{attrs:{detailed:""},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]]:"location"==o.jnpfKey&&e.columnData.showOverflow?[a.row[o.prop+"_name"]?[i("el-tooltip",{attrs:{effect:"dark",content:a.row[o.prop+"_name"],placement:"top"}},[i("div",{staticClass:"showOverflow"},[e._v(e._s(a.row[o.prop+"_name"]))])])]:[i("el-tooltip",{attrs:{effect:"dark",content:a.row[o.prop],placement:"top"}},[i("div",{staticClass:"showOverflow"},[e._v(e._s(a.row[o.prop]))])])]]:"rate"===o.jnpfKey?[a.row[o.prop+"_name"]?[i("JnpfRate",{attrs:{disabled:"",count:o.count},model:{value:a.row[o.prop+"_name"],callback:function(t){e.$set(a.row,o.prop+"_name",t)},expression:"scope.row[child.prop+'_name']"}})]:[i("JnpfRate",{attrs:{disabled:"",count:o.count},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]]:"slider"===o.jnpfKey?[a.row[o.prop+"_name"]?[i("JnpfSlider",{attrs:{disabled:""},model:{value:a.row[o.prop+"_name"],callback:function(t){e.$set(a.row,o.prop+"_name",t)},expression:"scope.row[child.prop+'_name']"}})]:[i("JnpfSlider",{attrs:{disabled:""},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}})]]:"uploadFile"===o.jnpfKey?[a.row[o.prop+"_name"]?[a.row[o.prop+"_name"]&&a.row[o.prop+"_name"].length?i("JnpfUploadFile",{attrs:{disabled:"",simple:""},model:{value:a.row[o.prop+"_name"],callback:function(t){e.$set(a.row,o.prop+"_name",t)},expression:"scope.row[child.prop+'_name']"}}):e._e()]:[a.row[o.prop]&&a.row[o.prop].length?i("JnpfUploadFile",{attrs:{disabled:"",simple:""},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}}):e._e()]]:"uploadImg"===o.jnpfKey?[a.row[o.prop+"_name"]?[a.row[o.prop+"_name"]&&a.row[o.prop+"_name"].length?i("JnpfUploadImg",{attrs:{disabled:"",simple:""},model:{value:a.row[o.prop+"_name"],callback:function(t){e.$set(a.row,o.prop+"_name",t)},expression:"scope.row[child.prop+'_name']"}}):e._e()]:[a.row[o.prop]&&a.row[o.prop].length?i("JnpfUploadImg",{attrs:{disabled:"",simple:""},model:{value:a.row[o.prop],callback:function(t){e.$set(a.row,o.prop,t)},expression:"scope.row[child.prop]"}}):e._e()]]:[e._v("\n                          "+e._s(a.row[o.prop+"_name"]||a.row[o.prop])+"\n                        ")]]]}}],null,!0)})]}))]:e._e()],2):e._e()]}))]:[2!=e.columnData.childTableStyle||!e.childColumnList.length||1!=e.columnData.type&&2!=e.columnData.type?e._e():[i("el-table-column",{attrs:{width:"0"}}),i("el-table-column",{attrs:{type:"expand",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tabs",e._l(e.childColumnList,(function(o,a){return i("el-tab-pane",{key:a,attrs:{label:o.label}},[i("el-table",{attrs:{data:t.row[o.prop],size:"mini"}},e._l(o.children,(function(t,o){return i("el-table-column",{key:o,attrs:{prop:t.vModel,label:t.childLabel,align:t.align,width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow},scopedSlots:e._u([{key:"default",fn:function(o){return["relationForm"===t.jnpfKey?[i("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(i){return e.toDetail(t.modelId,o.row[t.vModel+"_id"])}}},[e._v("\n                              "+e._s(o.row[t.vModel])+"\n                            ")])]:"inputNumber"===t.jnpfKey||"calculate"===t.jnpfKey?[i("JnpfNumber",{attrs:{thousands:t.thousands,precision:t.precision},model:{value:o.row[t.vModel],callback:function(i){e.$set(o.row,t.vModel,i)},expression:"scope.row[childTable.vModel]"}})]:"input"===t.jnpfKey?[i("jnpf-input",{attrs:{showOverflow:e.getTooltip(t.jnpfKey),addonBefore:t.addonBefore,addonAfter:t.addonAfter,useMask:t.useMask,maskConfig:t.maskConfig,detailed:""},model:{value:o.row[t.vModel],callback:function(i){e.$set(o.row,t.vModel,i)},expression:"scope.row[childTable.vModel]"}})]:"sign"===t.jnpfKey?[i("JnpfSign",{attrs:{detailed:""},model:{value:o.row[t.vModel],callback:function(i){e.$set(o.row,t.vModel,i)},expression:"scope.row[childTable.vModel]"}})]:"rate"===t.jnpfKey?[i("JnpfRate",{attrs:{disabled:"",count:t.count},model:{value:o.row[t.vModel],callback:function(i){e.$set(o.row,t.vModel,i)},expression:"scope.row[childTable.vModel]"}})]:"slider"===t.jnpfKey?[i("JnpfSlider",{attrs:{disabled:""},model:{value:o.row[t.vModel],callback:function(i){e.$set(o.row,t.vModel,i)},expression:"scope.row[childTable.vModel]"}})]:"uploadFile"===t.jnpfKey?[o.row[t.vModel]&&o.row[t.vModel].length?i("JnpfUploadFile",{attrs:{detailed:"",disabled:"",simple:""},model:{value:o.row[t.vModel],callback:function(i){e.$set(o.row,t.vModel,i)},expression:"scope.row[childTable.vModel]"}}):e._e()]:"uploadImg"===t.jnpfKey?[o.row[t.vModel]&&o.row[t.vModel].length?i("JnpfUploadImg",{attrs:{detailed:"",disabled:"",simple:""},model:{value:o.row[t.vModel],callback:function(i){e.$set(o.row,t.vModel,i)},expression:"scope.row[childTable.vModel]"}}):e._e()]:[e._v("\n                            "+e._s(o.row[t.vModel])+"\n                          ")]]}}],null,!0)})})),1)],1)})),1)]}}],null,!1,1091393027)}),i("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}})],e._l(e.columnList,(function(t,o){return["table"===t.jnpfKey?[2!=e.columnData.childTableStyle||3==e.columnData.type?i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align}},e._l(t.children,(function(o,a){return i("el-table-column",{key:a,attrs:{prop:o.prop,label:o.childLabel,align:o.align,width:o.width,sortable:o.sortable?"custom":o.sortable,"class-name":"child-table-box"},scopedSlots:e._u([{key:"default",fn:function(o){return[a?e._e():i("child-table-column",{attrs:{data:o.row[t.prop],head:t.children,showOverflow:!!e.columnData.showOverflow,expand:o.row[t.prop+"Expand"]},on:{toggleExpand:function(i){return e.toggleExpand(o.row,t.prop+"Expand")},toDetail:e.toDetail}})]}}],null,!0)})})),1):e._e()]:"relationForm"===t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[i("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(i){return e.toDetail(t.modelId,o.row[t.prop+"_id"])}}},[e._v("\n                    "+e._s(o.row[t.prop]))])]}}],null,!0)})]:"inputNumber"===t.jnpfKey||"calculate"===t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]?[i("JnpfNumber",{attrs:{thousands:t.thousands,precision:t.precision},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[item.id]"}})]:e._e()]}}],null,!0)})]:"input"===t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]&&!o.row.top?[i("jnpf-input",{attrs:{addonBefore:t.addonBefore,addonAfter:t.addonAfter,useMask:t.useMask,maskConfig:t.maskConfig,detailed:"",showOverflow:e.getTooltip(t.jnpfKey)},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[item.id]"}})]:[e._v(e._s(o.row[t.id]))]]}}],null,!0)})]:"sign"===t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]&&!o.row.top?[i("JnpfSign",{attrs:{detailed:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[item.id]"}})]:[e._v(e._s(o.row[t.id]))]]}}],null,!0)})]:"rate"===t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.top?[e._v(e._s(o.row[t.id]))]:[i("JnpfRate",{attrs:{disabled:"",count:t.count},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[item.id]"}})]]}}],null,!0)})]:"slider"===t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.top?[e._v(e._s(o.row[t.id]))]:[i("JnpfSlider",{attrs:{disabled:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[item.id]"}})]]}}],null,!0)})]:"uploadFile"===t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]?[o.row[t.id]&&o.row[t.id].length?i("JnpfUploadFile",{attrs:{disabled:"",detailed:"",simple:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[item.id]"}}):e._e()]:e._e()]}}],null,!0)})]:"uploadImg"===t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]?[o.row[t.id]&&o.row[t.id].length?i("JnpfUploadImg",{attrs:{disabled:"",simple:"",detailed:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[item.id]"}}):e._e()]:e._e()]}}],null,!0)})]:"complexHeader"==t.jnpfKey?[i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,sortable:t.sortable?"custom":t.sortable}},[t.children&&t.children.length?[e._l(t.children,(function(t){return["relationForm"==t.jnpfKey?i("el-table-column",{key:t.prop,attrs:{align:t.align,prop:t.prop,label:t.label,"show-overflow-tooltip":!!e.columnData.showOverflow,width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[i("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(i){return e.toDetail(t.modelId,o.row[t.prop+"_id"])}}},[e._v("\n                          "+e._s(o.row[t.prop]))])]}}],null,!0)}):"inputNumber"===t.jnpfKey||"calculate"===t.jnpfKey?i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]?[i("JnpfNumber",{attrs:{thousands:t.thousands,precision:t.precision},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[child.id]"}})]:e._e()]}}],null,!0)}):"input"===t.jnpfKey?i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]?[i("jnpf-input",{attrs:{showOverflow:e.getTooltip(t.jnpfKey),addonBefore:t.addonBefore,addonAfter:t.addonAfter,useMask:t.useMask,maskConfig:t.maskConfig,detailed:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[child.id]"}})]:e._e()]}}],null,!0)}):"sign"===t.jnpfKey?i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]?[i("JnpfSign",{attrs:{detailed:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[child.id]"}})]:e._e()]}}],null,!0)}):"rate"===t.jnpfKey?i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[i("JnpfRate",{attrs:{disabled:"",count:t.count},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[child.id]"}})]}}],null,!0)}):"slider"===t.jnpfKey?i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[i("JnpfSlider",{attrs:{disabled:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[child.id]"}})]}}],null,!0)}):"uploadFile"===t.jnpfKey?i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]?[o.row[t.id]&&o.row[t.id].length?i("JnpfUploadFile",{attrs:{disabled:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[child.id]"}}):e._e()]:e._e()]}}],null,!0)}):"uploadImg"===t.jnpfKey?i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,sortable:t.sortable?"custom":t.sortable},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row[t.id]?[o.row[t.id]&&o.row[t.id].length?i("JnpfUploadImg",{attrs:{detailed:"",simple:"",disabled:""},model:{value:o.row[t.id],callback:function(i){e.$set(o.row,t.id,i)},expression:"scope.row[child.id]"}}):e._e()]:e._e()]}}],null,!0)}):i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,align:t.align,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable}})]}))]:e._e()],2)]:i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,align:t.align,fixed:e.getFixed(t,o),width:t.width,"show-overflow-tooltip":!!e.columnData.showOverflow,sortable:t.sortable?"custom":t.sortable}})]}))],1==e.config.enableFlow?i("el-table-column",{attrs:{fixed:!(!e.columnList.some((function(e){return"right"==e.fixed}))||2==e.columnData.childTableStyle)&&"right",prop:"flowState",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.top&&5!=e.columnData.type?void 0:[1==t.row.flowState?i("el-tag",[e._v("等待审核")]):2==t.row.flowState?i("el-tag",{attrs:{type:"success"}},[e._v("审核通过")]):3==t.row.flowState?i("el-tag",{attrs:{type:"danger"}},[e._v("审核退回")]):4==t.row.flowState||7==t.row.flowState?i("el-tag",{attrs:{type:"info"}},[e._v("流程撤回")]):5==t.row.flowState?i("el-tag",{attrs:{type:"info"}},[e._v("审核终止")]):6==t.row.flowState?i("el-tag",{attrs:{type:"danger"}},[e._v("已被挂起")]):i("el-tag",{attrs:{type:"warning"}},[e._v("等待提交")])]}}],null,!0)}):e._e(),e.columnBtnsList.length||e.customBtnsList.length?i("el-table-column",{attrs:{label:"操作",fixed:(2!=e.columnData.childTableStyle||!e.childColumnList.length)&&"right",width:e.operationWidth},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.top&&5!=e.columnData.type?void 0:[t.row.rowEdit?[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.saveForRowEdit(t.row,1)}}},[e._v("\n                保存")]),i("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(i){return e.cancelRowEdit(t.row,t.$index)}}},[e._v("取消")]),1==e.config.enableFlow?i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.submitForRowEdit(t.row)}}},[e._v("提交")]):e._e()]:[e.isPreview||!e.columnData.useBtnPermission?[e._l(e.columnBtnsList,(function(o,a){return["edit"==o.value?[4===e.columnData.type?[i("el-button",{key:a,attrs:{size:"mini",type:"text",disabled:1==e.config.enableFlow&&[1,2,4,5,6].indexOf(t.row.flowState)>-1},on:{click:function(i){return e.editForRowEdit(t.row)}}},[e._v("\n                        "+e._s(o.label))])]:[i("el-button",{key:a,attrs:{size:"mini",type:"text",disabled:1==e.config.enableFlow&&[1,2,4,5,6].indexOf(t.row.flowState)>-1},on:{click:function(i){return e.columnBtnsHandel(o.value,t.row)}}},[e._v("\n                        "+e._s(o.label))])]]:"remove"==o.value?[i("el-button",{key:a,staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text",disabled:1==e.config.enableFlow&&[1,2,3,5,6].indexOf(t.row.flowState)>-1},on:{click:function(i){return e.columnBtnsHandel(o.value,t.row,t.$index)}}},[e._v("\n                      "+e._s(o.label))])]:"detail"==o.value?[t.row.id?i("el-button",{key:a,attrs:{size:"mini",type:"text",disabled:1==e.config.enableFlow&&!t.row.flowState},on:{click:function(i){return e.columnBtnsHandel(o.value,t.row)}}},[e._v("\n                      "+e._s(o.label))]):e._e()]:e._e()]})),e.customBtnsList.length?[i("el-dropdown",{attrs:{"hide-on-click":""}},[i("span",{staticClass:"el-dropdown-link"},[i("el-button",{attrs:{type:"text",size:"mini"}},[e._v("\n                        "+e._s(e.$t("common.moreBtn"))),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.customBtnsList,(function(o,a){return i("el-dropdown-item",{key:a,nativeOn:{click:function(i){return e.customBtnsHandel(o,t.row,t.$index)}}},[e._v("\n                        "+e._s(o.label))])})),1)],1)]:e._e()]:[e._l(e.columnBtnsList,(function(o,a){return["edit"==o.value?[4===e.columnData.type?[i("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+o.value,expression:"'btn_'+item.value"}],key:a,attrs:{size:"mini",type:"text",disabled:1==e.config.enableFlow&&[1,2,4,5].indexOf(t.row.flowState)>-1},on:{click:function(e){t.row.rowEdit=!0}}},[e._v("\n                        "+e._s(o.label))])]:[i("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+o.value,expression:"'btn_'+item.value"}],key:a,attrs:{size:"mini",type:"text",disabled:1==e.config.enableFlow&&[1,2,4,5].indexOf(t.row.flowState)>-1},on:{click:function(i){return e.columnBtnsHandel(o.value,t.row)}}},[e._v("\n                        "+e._s(o.label))])]]:"remove"==o.value?[i("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+o.value,expression:"'btn_'+item.value"}],key:a,staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text",disabled:1==e.config.enableFlow&&[1,2,3,5].indexOf(t.row.flowState)>-1},on:{click:function(i){return e.columnBtnsHandel(o.value,t.row,t.$index)}}},[e._v(e._s(o.label))])]:"detail"==o.value?[i("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+o.value,expression:"'btn_'+item.value"}],key:a,attrs:{size:"mini",type:"text",disabled:1==e.config.enableFlow&&!t.row.flowState},on:{click:function(i){return e.columnBtnsHandel(o.value,t.row)}}},[e._v("\n                      "+e._s(o.label))])]:e._e()]})),e.showMoreBtn?[i("el-dropdown",{attrs:{"hide-on-click":""}},[i("span",{staticClass:"el-dropdown-link"},[i("el-button",{attrs:{type:"text",size:"mini"}},[e._v("\n                        "+e._s(e.$t("common.moreBtn"))+"\n                        "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.customBtnsList,(function(o,a){return i("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:o.value,expression:"item.value"}],key:a,nativeOn:{click:function(i){return e.customBtnsHandel(o,t.row,t.$index)}}},[e._v(e._s(o.label))])})),1)],1)]:e._e()]]]}}],null,!0)}):e._e()],2):e._e(),3!==e.columnData.type&&5!==e.columnData.type&&e.columnData.hasPage&&e.refreshTable?[i("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})]:e._e()],2)],1),i("print-browse",{attrs:{visible:e.printBrowseVisible,id:e.printId,batchIds:e.multipleSelection.join()},on:{"update:visible":function(t){e.printBrowseVisible=t}}}),i("FlowBox",{directives:[{name:"show",rawName:"v-show",value:e.flowVisible,expression:"flowVisible"}],ref:"FlowBox",on:{close:e.closeFlow}}),i("Form",{directives:[{name:"show",rawName:"v-show",value:e.formVisible,expression:"formVisible"}],ref:"Form",on:{refreshDataList:e.refresh}}),i("extraForm",{directives:[{name:"show",rawName:"v-show",value:e.extraFormVisible,expression:"extraFormVisible"}],ref:"extraForm",on:{refreshDataList:e.refresh}}),e.detailVisible?i("Detail",{ref:"Detail",on:{close:function(t){e.detailVisible=!1}}}):e._e(),e.detailsVisible?i("RelevanceDetail",{ref:"RelevanceDetail",on:{close:function(t){e.detailsVisible=!1}}}):e._e(),e.exportBoxVisible?i("ExportBox",{ref:"ExportBox",on:{download:e.download}}):e._e(),e.uploadBoxVisible?i("ImportBox",{ref:"UploadBox",on:{refresh:e.initData}}):e._e(),e.customBoxVisible?i("CustomBox",{ref:"CustomBox",on:{close:function(t){e.customBoxVisible=!1}}}):e._e(),e.superQueryVisible?i("SuperQuery",{ref:"SuperQuery",attrs:{columnOptions:e.columnOptions},on:{superQuery:e.superQuery}}):e._e(),i("candidate-form",{attrs:{visible:e.candidateVisible,candidateList:e.candidateList,branchList:e.branchList,taskId:"0",formData:e.workFlowFormData,isCustomCopy:e.isCustomCopy},on:{"update:visible":function(t){e.candidateVisible=t},submitCandidate:e.submitCandidate}}),e.printDialogVisible?i("PrintDialog",{ref:"printDialog",on:{change:e.printBrowseHandle}}):e._e(),e.flowListVisible?i("SelectFlow",{ref:"selectFlow",on:{selectFlow:e.selectFlow}}):e._e()],1)},a=[],n=(i("20d6"),i("386d"),i("ade3")),l=(i("a481"),i("28a5"),i("d263"),i("c5f6"),i("ac6a"),i("2909")),r=i("c7eb"),s=(i("55dd"),i("6762"),i("2fdb"),i("96cf"),i("1da1")),c=i("5530"),d=i("f41a"),p=i("30c2"),u=i("ef22"),f=i("826a"),m=i("bb1a"),h=i("17de"),b=i("2934"),_=i("100e"),w=i("e200"),g=i("5451"),v=i("ba53"),y=i("3424"),x=i("c5c7"),D=i("226a"),I=i("841b"),k=i("aa06"),T=i("0c2e"),j=i("20f7"),L=i("5a09"),F=i("4d3d"),S=i("a7bd"),O=i("1374"),$=i("2f62"),C=i("597c"),J={name:"dynamicModel",components:{PrintDialog:d["a"],PrintBrowse:p["a"],Form:v["default"],extraForm:x["default"],ExportBox:T["a"],Search:j["default"],Detail:I["default"],FlowBox:D["default"],ChildTableColumn:L["default"],SuperQuery:F["a"],CandidateForm:S["default"],CustomBox:O["a"],RelevanceDetail:k["default"],SelectFlow:C["a"]},props:["config","modelId","isPreview"],data:function(){return{printDialogVisible:!1,printBrowseVisible:!1,printId:"",printListOptions:[],systemComponentsList:_["j"],keyword:"",treeProps:{children:"children",label:"fullName",value:"id",isLeaf:"isLeaf"},list:[],cacheList:[],total:0,listLoading:!1,listQuery:{currentPage:1,pageSize:20,sort:"desc",sidx:"",menuId:"",queryJson:"",superQueryJson:""},defListQuery:{sort:"desc",sidx:""},defaultListQuery:{pageSize:20,sort:"desc",sidx:""},flowVisible:!1,formVisible:!1,extraFormVisible:!1,detailVisible:!1,detailsVisible:!1,importBoxVisible:!1,exportBoxVisible:!1,uploadBoxVisible:!1,customBoxVisible:!1,superQueryVisible:!1,treeData:[],expandsTree:!0,treeActiveId:"",columnData:{columnBtnsList:[]},ordersList:[],formData:{},columnList:[],childColumnList:[],columnOptions:[],exportList:[],columnBtnsList:[],customBtnsList:[],hasBatchBtn:!1,refreshTable:!1,expandsTable:!0,multipleSelection:[],settingsColumnList:[],mergeList:[],expandObj:{},flowTemplateJson:{},isCustomCopy:!1,candidateVisible:!1,candidateType:1,branchList:[],candidateList:[],currRow:{},workFlowFormData:{},rowStyle:null,cellStyle:null,refreshTree:!0,flowList:[],flowListVisible:!1,currFlow:{},treeLoading:!1,treeRelationObj:{},getLeftTreeActiveInfo:{},countersignOver:!1}},computed:Object(c["a"])(Object(c["a"])({},Object($["b"])(["userInfo"])),{},{operationWidth:function(){var e=this.customBtnsList.length?50:0;return 4==this.columnData.type&&this.config.enableFlow&&(e+=50),50*this.columnBtnsList.length+e},showMoreBtn:function(){var e=this;return this.customBtnsList.length&&this.customBtnsList.some((function(t){return e.jnpf.hasBtnP(t.value)}))}}),watch:{keyword:function(e){0==this.columnData.treeSynType&&this.$refs.treeBox.filter(e)}},created:function(){this.init()},methods:{init:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){var t,i,o,a,n,l=this;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.listLoading=!0,this.listQuery.menuId=this.$route.meta.modelId,this.refreshTable=!1,this.config.columnData&&this.config.formData){e.next=5;break}return e.abrupt("return");case 5:return this.columnData=JSON.parse(this.config.columnData),this.columnData.printIds&&this.columnData.printIds.length>0&&this.getPrintListOptions(this.columnData.printIds),3===this.columnData.type&&(this.columnData.columnList=this.columnData.columnList.filter((function(e){return e.prop!=l.columnData.groupField}))),1==this.config.enableFlow&&this.config.flowId&&this.getFlowList(),this.hasBatchBtn=this.columnData.btnsList.some((function(e){return["batchRemove","batchPrint","download"].includes(e.value)})),this.columnData.useBtnPermission&&(t=this.$store.getters.permissionList,i=this.$route.meta.modelId,o=t.filter((function(e){return e.modelId===i})),a=o[0]&&o[0].button?o[0].button:[],this.hasBatchBtn=a.some((function(e){return["btn_batchRemove","btn_batchPrint","btn_download"].includes(e.enCode)}))),this.formData=JSON.parse(this.config.formData),this.customBtnsList=this.columnData.customBtnsList||[],this.columnBtnsList=this.columnData.columnBtnsList||[],this.columnOptions=this.columnData.columnOptions||[],this.listLoading=!0,this.isPreview&&(this.listQuery.menuId="270579315303777093"),e.next=19,Object(b["d"])(this.listQuery.menuId);case 19:if(n=e.sent,this.settingsColumnList=n.data||[],this.rowStyle=this.jnpf.getScriptFunc.call(this,this.columnData.funcs&&this.columnData.funcs.rowStyle),this.cellStyle=this.jnpf.getScriptFunc.call(this,this.columnData.funcs&&this.columnData.funcs.cellStyle),this.getSearchSchemas(),this.getColumnList(),this.$nextTick((function(){l.refreshTable=!0})),4===this.columnData.type&&this.buildOptions(),!this.isPreview){e.next=29;break}return e.abrupt("return",this.listLoading=!1);case 29:this.initDefaultSearchData(),this.listQuery.pageSize=this.columnData.pageSize,this.listQuery.sort=this.columnData.sort,this.listQuery.sidx=this.columnData.defaultSidx,this.defaultListQuery.pageSize=this.columnData.pageSize,this.defaultListQuery.sort=this.columnData.sort,this.defaultListQuery.sidx=this.columnData.defaultSidx,this.setDefaultQuery(this.columnData.defaultSortConfig),3!==this.columnData.type&&this.columnData.hasPage||(this.listQuery.pageSize=1e4),2===this.columnData.type?(this.treeProps.value=this.columnData.treePropsValue||"id",this.treeProps.label=this.columnData.treePropsLabel||"fullName",this.treeProps.children=this.columnData.treePropsChildren||"children",this.getTreeView()):this.initData(),this.addSearchList();case 40:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTooltip:function(e){return!["slider","rate"].concat(Object(l["a"])(_["e"])).includes(e)&&!!this.columnData.showOverflow},setDefaultQuery:function(e){var t=(e||[]).map((function(e){return("desc"===e.sort?"-":"")+e.field}));this.defListQuery.sidx=t.join(",")},addSearchList:function(){for(var e=this.columnData.searchList,t={label:"关键词",__config__:{jnpfKey:"input"},value:void 0,id:"jnpfKeyword",prop:"jnpfKeyword"},i=0;i<e.length;i++){var o=e[i];if(o.isKeyword)return e.unshift(t)}},getPrintListOptions:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(t){var i=this;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(m["l"])({ids:t}).then((function(e){i.printListOptions=e.data}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),treeRefresh:function(){this.keyword="",this.treeActiveId="",this.$refs.treeBox.setCurrentKey(null),this.getTreeView()},printBrowseHandle:function(e){this.printDialogVisible=!1,this.handleBatchPrint(e)},printDialog:function(){var e=this;this.printDialogVisible=!0,this.$nextTick((function(){1!=e.printListOptions.length?e.$refs.printDialog.initOptions(e.printListOptions):e.printBrowseHandle(e.printListOptions[0].id)}))},handleBatchPrint:function(e){e?(this.printId=e,this.printBrowseVisible=!0):this.$message({type:"warning",message:"请配置打印模板",duration:1500})},initData:function(){var e=this;if(!this.isPreview){this.listLoading=!0;var t=Object(c["a"])(Object(c["a"])({},this.listQuery),this.defListQuery);Object(u["s"])(this.modelId,t).then((function(t){4===e.columnData.type?(e.list=t.data.list.map((function(t){return Object(c["a"])(Object(c["a"])(Object(c["a"])({},t),e.expandObj),{},{rowEdit:!1})})),e.cacheList=JSON.parse(JSON.stringify(e.list))):(e.list=t.data.list.map((function(t){return Object(c["a"])(Object(c["a"])(Object(c["a"])({},t),e.expandObj),{},{hasChildren:!0})})),3===e.columnData.type&&e.list.map((function(t){t.children&&t.children.length&&(t.children=t.children.map((function(t){return Object(c["a"])(Object(c["a"])({},t),e.expandObj)})))}))),3!==e.columnData.type&&e.columnData.hasPage&&(e.total=t.data.pagination.total),e.listLoading=!1,e.$nextTick((function(){e.columnData.funcs&&e.columnData.funcs.afterOnload&&e.setTableLoadFunc()}))}))}},getTableSummaries:function(e){var t=this,i=[];this.columnList.forEach((function(e){e.thousands&&i.push(e.id)}));var o=e.columns,a=e.data,n=[];return o.forEach((function(e,o){if(0!==o){if(t.columnData.summaryField.includes(e.property)){var l=a.map((function(t){return Number(t[e.property])}));l.every((function(e){return isNaN(e)}))?n[o]="":(n[o]=l.reduce((function(e,t){var i=Number(t);return isNaN(i)?e:e+t}),0).toFixed(2),i.includes(e.property)&&(n[o]=Object(y["l"])(n[o])))}}else n[o]="合计"})),n},toDetail:function(e,t){var i=this;t&&(this.mainLoading=!0,Object(u["m"])(e).then((function(o){if(i.mainLoading=!1,o.data&&o.data.formData){var a=JSON.parse(o.data.formData);a.popupType="general",i.detailsVisible=!0,i.$nextTick((function(){i.$refs.RelevanceDetail.init(a,e,t)}))}})).catch((function(){i.mainLoading=!1})))},getTreeView:function(){var e=this;if(this.treeLoading=!0,"dictionary"===this.columnData.treeDataSource){if(!this.columnData.treeDictionary)return this.treeLoading=!1;this.$store.dispatch("base/getDicDataSelector",this.columnData.treeDictionary).then((function(t){e.treeData=t,e.treeLoading=!1,e.initData()}))}if("organize"===this.columnData.treeDataSource&&this.$store.dispatch("generator/getDepTree").then((function(t){e.treeData=t,e.treeLoading=!1,e.initData()})),"department"===this.columnData.treeDataSource&&this.$store.dispatch("generator/getDepTree").then((function(t){e.treeData=t,e.treeLoading=!1,e.initData()})),"api"===this.columnData.treeDataSource){if(!this.columnData.treePropsUrl)return this.treeLoading=!1;Object(h["o"])(this.columnData.treePropsUrl).then((function(t){e.treeData=Array.isArray(t.data)?t.data:[],e.treeLoading=!1,e.initData()}))}},getSearchSchemas:function(){if(this.columnData.treeRelation)for(var e=0;e<this.columnData.columnOptions.length;e++){var t=this.columnData.columnOptions[e];if(t.id===this.columnData.treeRelation){this.treeRelationObj=Object(c["a"])(Object(c["a"])({},t),{},{searchMultiple:!1,jnpfKey:t.__config__.jnpfKey});break}}},getColumnList:function(){if(this.isPreview){var e=this.columnData.columnList;this.columnList=this.transformColumnList(e)}else{var t=[];if(this.columnData.useColumnPermission){for(var i=this.$store.getters.permissionList,o=this.$route.meta.modelId,a=i.filter((function(e){return e.modelId===o})),n=a[0]&&a[0].column?a[0].column:[],l=0;l<this.columnData.columnList.length;l++)e:for(var r=0;r<n.length;r++)if(this.columnData.columnList[l].prop===n[r].enCode){t.push(this.columnData.columnList[l]);break e}}else t=this.columnData.columnList;[3,5].includes(this.columnData.type)||(t=this.getComplexColumns(t)),this.columnList=this.transformColumnList(t)}},getComplexColumns:function(e){var t=this.columnData.complexHeaderList||[];if(!t.length)return e;for(var i=[],o=0;o<t.length;o++){var a=t[o];if(a.label=a.fullName,a.align=a.align,a.dataIndex=a.id,a.prop=a.id,a.children=[],a.jnpfKey="complexHeader",a.sortable=!1,a.childColumns&&a.childColumns.length){i.push.apply(i,Object(l["a"])(a.childColumns));for(var n=0;n<e.length;n++){var r=e[n];a.childColumns.includes(r.id)&&"left"!==r.fixed&&"right"!==r.fixed&&a.children.push(Object(c["a"])({},r))}}}t=t.filter((function(e){return e.children.length}));for(var s=0;s<e.length;s++){var d=e[s];i.includes(d.id)||t.push(d)}return t},transformColumnList:function(e){for(var t=this,i=[],o=function(){var o=e[a];if(o.prop.includes("-")){var n=o.prop.split("-")[0],l=o.prop.split("-")[1],r=o.label.split("-")[0],s=o.label.replace(r+"-",""),c={align:"center",jnpfKey:"table",prop:n,label:r,children:[]};o.vModel=l,o.childLabel=s,t.expandObj.hasOwnProperty("".concat(n,"Expand"))||t.$set(t.expandObj,"".concat(n,"Expand"),!1),i.some((function(e){return e.prop===n}))||i.push(c);for(var d=0;d<i.length;d++)if(i[d].prop===n){i[d].children.push(o);break}}else i.push(o)},a=0;a<e.length;a++)o();return this.getMergeList(i),this.getExportList(i),this.childColumnList=i.filter((function(e){return"table"===e.jnpfKey})),i},getExportList:function(e){for(var t=[],i=0;i<e.length;i++)"table"===e[i].jnpfKey?4!=this.columnData.type&&t.push.apply(t,Object(l["a"])(e[i].children)):"complexHeader"===e[i].jnpfKey?t.push.apply(t,Object(l["a"])(e[i].children)):t.push(e[i]);this.exportList=t.filter((function(e){return!_["e"].includes(e.__config__.jnpfKey)}))},initDefaultSearchData:function(){var e=this.columnData.searchList;if(null!=e&&e.length>0){for(var t={},i=0;i<e.length;i++){var o=e[i];o.value&&(Array.isArray(o.value)?o.value.length&&(t[o.id]=o.value):t[o.id]=o.value)}this.listQuery.queryJson="{}"===JSON.stringify(t)?"":JSON.stringify(t)}},getMergeList:function(e){var t=this;e.forEach((function(e){e.children&&e.children.length>0&&"table"==e.jnpfKey?e.children.forEach((function(i,o){0==o?t.mergeList.push({prop:i.prop,rowspan:1,colspan:e.children.length}):t.mergeList.push({prop:i.prop,rowspan:0,colspan:0})})):t.mergeList.push({prop:e.prop,rowspan:1,colspan:1})}))},arraySpanMethod:function(e){for(var t=e.column,i=0;i<this.mergeList.length;i++)if(t.property==this.mergeList[i].prop)return[this.mergeList[i].rowspan,this.mergeList[i].colspan]},toggleExpand:function(e,t){e[t]=!e[t]},getNodePath:function(e){var t=[],i=function e(i){i.level&&t.unshift(i.data),i.parent&&e(i.parent)};return i(e),t},handleNodeClick:function(e,t){var i=this;if(this.treeActiveId!=e[this.treeProps.value]){this.treeActiveId=e[this.treeProps.value],this.$refs.Search.treeReset();var o={},a=!!this.treeRelationObj&&this.treeRelationObj.searchMultiple;if(this.treeRelationObj&&this.treeRelationObj.jnpfKey&&["organizeSelect","cascader","areaSelect"].includes(this.treeRelationObj.jnpfKey)){var l=this.getNodePath(t),r=l.map((function(e){return e[i.treeProps.value]}));this.treeActiveId=r,o=Object(n["a"])({},this.columnData.treeRelation,a?[r]:r)}else o=Object(n["a"])({},this.columnData.treeRelation,a?[this.treeActiveId]:this.treeActiveId);var s=function e(t,o){t&&(t.__config__&&t.__config__.children&&Array.isArray(t.__config__.children)&&e(t.__config__.children,t),Array.isArray(t)&&t.forEach((function(t){return e(t,o)})),t.__config__&&t.__config__.jnpfKey&&t.__vModel__==i.columnData.treeRelation&&(t.__config__.defaultCurrent=!1,t.__config__.defaultValue=t.multiple?[i.treeActiveId]:i.treeActiveId,i.getLeftTreeActiveInfo=Object(n["a"])({},i.columnData.treeRelation,t.__config__.defaultValue)))};s(this.formData.fields),this.search(JSON.stringify(o))}},handleDel:function(e,t){var i=this;this.$confirm(this.$t("common.delTip"),this.$t("common.tipTitle"),{type:"warning"}).then((function(){e?Object(u["j"])(i.modelId,e).then((function(e){i.$message({type:"success",message:e.msg,duration:1e3,onClose:function(){i.initData()}})})):i.list.splice(t,1)})).catch((function(){}))},editForRowEdit:function(e){if(e.rowEdit=!0,this.addHandleForRowEdit(!0),4!==this.columnData.type){var t=e.flowId||this.flowList[0].id;if(t){var i=this.flowList.filter((function(e){return e.id===t}));this.currFlow=i.length?i[0]:this.flowList[0];var o=this.currFlow.flowTemplateJson?JSON.parse(this.currFlow.flowTemplateJson):{};this.isCustomCopy=o.properties&&o.properties.isCustomCopy}}},saveForRowEdit:function(e,t,i){var o=this;if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});if(1==this.config.enableFlow){var a={id:e.id,status:t||"1",candidateType:this.candidateType,countersignOver:this.countersignOver,formData:e,flowId:this.currFlow.id,flowUrgent:1};i&&(a=Object(c["a"])(Object(c["a"])({},a),i));var n=a.id?f["c"]:f["a"];n(a).then((function(e){o.$message({message:e.msg,type:"success",duration:1500,onClose:function(){o.candidateVisible=!1,o.initData()}})}))}else{var l={id:e.id,data:JSON.stringify(e)},r=l.id?u["y"]:u["i"];r(this.modelId,l).then((function(e){o.$message({message:e.msg,type:"success",duration:1500,onClose:function(){o.candidateVisible=!1,o.initData()}})}))}},submitForRowEdit:function(e){var t=this;if(this.currRow=e,this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.workFlowFormData={id:e.id,formData:e,flowId:this.currFlow.id},Object(w["g"])(0,this.workFlowFormData).then((function(i){var o=i.data;if(t.candidateType=o.type,t.countersignOver=o.countersignOver,1==o.type)t.branchList=i.data.list.filter((function(e){return e.isBranchFlow})),t.candidateList=i.data.list.filter((function(e){return!e.isBranchFlow&&e.isCandidates})),t.candidateVisible=!0;else if(2==o.type)t.branchList=[],t.candidateList=i.data.list.filter((function(e){return e.isCandidates})),t.candidateVisible=!0;else{if(t.isCustomCopy)return t.branchList=[],t.candidateList=[],void(t.candidateVisible=!0);t.$confirm("您确定要提交当前流程吗, 是否继续?","提示",{type:"warning"}).then((function(){t.saveForRowEdit(e,"0")})).catch((function(){}))}})).catch((function(){}))},submitCandidate:function(e){this.saveForRowEdit(this.currRow,"0",e)},cancelRowEdit:function(e,t){if(!e.id)return this.list.splice(t,1);e.rowEdit=!1;var i=JSON.parse(JSON.stringify(this.cacheList[t]));this.$set(this.list,t,i)},addHandleForRowEdit:function(e){for(var t={rowEdit:!0},i=0;i<this.columnData.columnList.length;i++){var o=this.columnData.columnList[i];t[o.id]=o.__config__.defaultValue;var a=o.__config__;if(o.__config__.defaultCurrent)if("datePicker"===o.__config__.jnpfKey){if(1==o.__config__.defaultCurrent&&(t[o.id]=(new Date).getTime()),a.startTimeRule)if(1==a.startTimeType)o.startTime=a.startTimeValue;else if(3==a.startTimeType)o.startTime=(new Date).getTime();else if(4==a.startTimeType){var n="";1==a.startTimeTarget||2==a.startTimeTarget?(n=Object(y["g"])(a.startTimeTarget,a.startTimeType,a.startTimeValue),o.startTime=new Date(n).getTime()):3==a.startTimeTarget?(n=Object(y["e"])(a.startTimeValue),o.startTime=new Date(n).getTime()):o.startTime=Object(y["f"])(a.startTimeTarget,a.startTimeValue).getTime()}else if(5==a.startTimeType){var l="";1==a.startTimeTarget||2==a.startTimeTarget?(l=Object(y["g"])(a.startTimeTarget,a.startTimeType,a.startTimeValue),o.startTime=new Date(l).getTime()):3==a.startTimeTarget?(l=Object(y["h"])(a.startTimeValue),o.startTime=new Date(l).getTime()):o.startTime=Object(y["i"])(a.startTimeTarget,a.startTimeValue).getTime()}if(a.endTimeRule)if(1==a.endTimeType)o.endTime=a.endTimeValue;else if(3==a.endTimeType)o.endTime=(new Date).getTime();else if(4==a.endTimeType){var r="";1==a.endTimeTarget||2==a.endTimeTarget?(r=Object(y["g"])(a.endTimeTarget,a.endTimeType,a.endTimeValue),o.endTime=new Date(r).getTime()):3==a.endTimeTarget?(r=Object(y["e"])(a.endTimeValue),o.endTime=new Date(r).getTime()):o.endTime=Object(y["f"])(a.endTimeTarget,a.endTimeValue).getTime()}else if(5==a.endTimeType){var s="";1==a.endTimeTarget||2==a.endTimeTarget?(s=Object(y["g"])(a.endTimeTarget,a.endTimeType,a.endTimeValue),o.endTime=new Date(s).getTime()):3==a.endTimeTarget?(s=Object(y["h"])(a.endTimeValue),o.endTime=new Date(s).getTime()):o.endTime=Object(y["i"])(a.endTimeTarget,a.endTimeValue).getTime()}}else if("organizeSelect"===o.__config__.jnpfKey&&1==o.__config__.defaultCurrent)t[o.id]=o.multiple?[this.userInfo.organizeIdList]:this.userInfo.organizeIdList;else if("depSelect"===a.jnpfKey&&this.userInfo.departmentId)t[o.id]=o.multiple?[this.userInfo.departmentId]:this.userInfo.departmentId;else if("userSelect"===a.jnpfKey&&this.userInfo.userId)t[o.id]=o.multiple?[this.userInfo.userId]:this.userInfo.userId;else if("usersSelect"===a.jnpfKey&&this.userInfo.userId)t[o.id]=o.multiple?[this.userInfo.userId+"--user"]:this.userInfo.userId+"--user";else if("posSelect"===a.jnpfKey&&this.userInfo.positionIds.length)t[o.id]=o.multiple?this.userInfo.positionIds.map((function(e){return e.id})):this.userInfo.positionIds[0].id;else if("roleSelect"===a.jnpfKey&&this.userInfo.roleIds.length)t[o.id]=o.multiple?this.userInfo.roleIds:this.userInfo.roleIds[0];else if("groupSelect"===a.jnpfKey&&this.userInfo.groupIds.length)t[o.id]=o.multiple?this.userInfo.groupIds:this.userInfo.groupIds[0];else if("timePicker"===o.__config__.jnpfKey){1==o.__config__.defaultCurrent&&(t[o.id]=this.jnpf.toDate(new Date,o.format));var c="HH:mm"===o.format?"HH:mm:00":o.format;if(a.startTimeRule)if(1==a.startTimeType)o.startTime=a.startTimeValue||"00:00:00",3==o.startTime.split(":").length?o.startTime=o.startTime:o.startTime=o.startTime+":00";else if(3==a.startTimeType)o.startTime=this.jnpf.toDate(new Date,c);else if(4==a.startTimeType){var d="";d=Object(y["f"])(a.startTimeTarget,a.startTimeValue),o.startTime=this.jnpf.toDate(d,c)}else if(5==a.startTimeType){var p="";p=Object(y["i"])(a.startTimeTarget,a.startTimeValue),o.startTime=this.jnpf.toDate(p,c)}if(a.endTimeRule)if(1==a.endTimeType)o.endTime=a.endTimeValue||"23:59:59",3==o.endTime.split(":").length?o.endTime=o.endTime:o.endTime=o.endTime+":00";else if(3==a.endTimeType)o.endTime=this.jnpf.toDate(new Date,c);else if(4==a.endTimeType){var u="";u=Object(y["f"])(a.endTimeTarget,a.endTimeValue),o.endTime=this.jnpf.toDate(u,c)}else if(5==a.endTimeType){var f="";f=Object(y["i"])(a.endTimeTarget,a.endTimeValue),o.endTime=this.jnpf.toDate(f,c)}}else"sign"===o.__config__.jnpfKey&&this.userInfo.signImg&&(t[o.id]=this.userInfo.signImg)}e||this.list.unshift(Object(y["c"])(t))},addHandle:function(){var e=this;1==this.config.enableFlow?this.flowList.length?1===this.flowList.length?this.selectFlow(this.flowList[0]):(this.flowListVisible=!0,this.$nextTick((function(){e.$refs.selectFlow.init(e.flowList)}))):this.$message({type:"error",message:"流程不存在"}):4===this.columnData.type?this.addHandleForRowEdit():(this.formVisible=!0,this.$nextTick((function(){e.$refs.Form.init(e.formData,e.modelId,"",e.isPreview,e.columnData.useFormPermission,e.list,e.columnData.type)})))},selectFlow:function(e){var t=this;if(this.currFlow=e,4===this.columnData.type){var i=e.flowTemplateJson?JSON.parse(e.flowTemplateJson):{};this.isCustomCopy=i.properties&&i.properties.isCustomCopy,this.flowListVisible=!1,this.addHandleForRowEdit()}else{var o={id:"",flowId:e.id,opType:"-1",type:1,modelId:this.modelId,isPreview:this.isPreview},a=this.columnData.treeRelation;a&&(o=Object(c["a"])(Object(c["a"])({},o),{},{getLeftTreeActiveInfo:this.getLeftTreeActiveInfo})),this.flowListVisible=!1,this.flowVisible=!0,this.$nextTick((function(){t.$refs.FlowBox.init(o)}))}},updateHandle:function(e){var t=this;if(1==this.config.enableFlow){var i={id:e.id,flowId:e.flowId||this.flowList[0].id,type:1,opType:"-1",modelId:this.modelId,isPreview:this.isPreview};this.flowVisible=!0,this.$nextTick((function(){t.$refs.FlowBox.init(i)}))}else this.formVisible=!0,this.$nextTick((function(){t.$refs.Form.init(t.formData,t.modelId,e.id,t.isPreview,t.columnData.useFormPermission,t.list,t.columnData.type)}))},headBtnsHandel:function(e){var t=this;if("add"===e&&this.addHandle(),"download"==e&&(this.exportBoxVisible=!0,this.$nextTick((function(){t.$refs.ExportBox.init(t.exportList,t.multipleSelection)}))),"upload"==e&&(this.uploadBoxVisible=!0,this.$nextTick((function(){t.$refs.UploadBox.init(t.modelId,"",t.config.enableFlow,t.flowList)}))),!this.isPreview&&("batchRemove"===e&&this.batchRemove(),"batchPrint"===e)){if(!this.multipleSelection.length)return void this.$message({type:"error",message:"请选择一条数据",duration:1500});this.printDialog()}},handleSelectionChange:function(e){var t=e.map((function(e){return e.id}));this.multipleSelection=t},batchRemove:function(){var e=this;this.multipleSelection.length?this.$confirm("您确定要删除这些数据吗, 是否继续?","提示",{type:"warning"}).then((function(){Object(u["h"])(e.modelId,e.multipleSelection).then((function(t){e.$message({type:"success",message:t.msg,duration:1500,onClose:function(){e.initData()}})}))})).catch((function(){})):this.$message({type:"error",message:"请选择一条数据",duration:1500})},download:function(e){var t=this;if(this.isPreview)return this.$message({message:"功能预览不支持数据导出",type:"warning"});var i=(this.columnData.defaultSortConfig||[]).map((function(e){return("desc"===e.sort?"-":"")+e.field}));this.listQuery.sidx=i.join(",");var o=Object(c["a"])(Object(c["a"])({},this.listQuery),e);Object(u["l"])(this.modelId,o).then((function(e){e.data.url&&(t.jnpf.downloadFile(e.data.url),t.$refs.ExportBox.visible=!1,t.exportBoxVisible=!1)}))},columnBtnsHandel:function(e,t,i){"edit"===e&&this.updateHandle(t),"detail"===e&&this.goDetail(t),"remove"==e&&this.handleDel(t.id,i)},goDetail:function(e){var t=this;if(1==this.config.enableFlow){var i={id:e.id,flowId:e.flowId,type:1,opType:0,modelId:this.modelId,isPreview:this.isPreview};this.flowVisible=!0,this.$nextTick((function(){t.$refs.FlowBox.init(i)}))}else this.detailVisible=!0,this.$nextTick((function(){t.$refs.Detail.init(t.formData,t.modelId,e.id,t.columnData.useFormPermission)}))},handleHeaderClass:function(e){var t=e.column;t.order=t.multiOrder},handleOrderChange:function(e,t){var i=this.ordersList.findIndex((function(t){return t.field===e})),o="ascending"===t?"asc":"descending"===t?"desc":"";i>-1?this.ordersList[i].sort=t:this.ordersList.push({field:e,sort:o}),this.ordersList=this.ordersList.filter((function(e){return e.sort})),this.ordersList.length?this.setDefaultQuery(this.ordersList):this.setDefaultQuery(this.columnData.defaultSortConfig),this.initData()},handleTableSort:function(e){var t=e.column;"custom"===t.sortable&&(t.multiOrder="descending"===t.multiOrder?"ascending":t.multiOrder?"":"descending",this.handleOrderChange(t.property,t.multiOrder))},refresh:function(e){this.formVisible=!1,this.extraFormVisible=!1,e&&this.initData()},closeFlow:function(e){this.flowVisible=!1,e&&this.initData()},reset:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){var t,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(2!==this.columnData.type||!this.treeActiveId){e.next=6;break}t=Object(n["a"])({},this.columnData.treeRelation,this.treeActiveId),i=this.treeActiveId?JSON.stringify(t):"",this.search(i),e.next=9;break;case 6:return e.next=8,this.initDefaultSearchData();case 8:this.search(this.listQuery.queryJson);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),searchData:function(e){2===this.columnData.type&&this.treeActiveId&&(e=e?JSON.parse(e):"",e=Object(c["a"])(Object(n["a"])({},this.columnData.treeRelation,this.treeActiveId),e),e=JSON.stringify(e)),this.search(e)},search:function(e){this.isPreview||(e||this.$refs.treeBox&&this.$refs.treeBox.setCurrentKey(null),this.listQuery.queryJson=e,this.listQuery.currentPage=1,this.initData())},openSuperQuery:function(){var e=this;this.superQueryVisible=!0,this.$nextTick((function(){e.$refs.SuperQuery.init()}))},superQuery:function(e){this.isPreview||(this.listQuery.superQueryJson=e,this.listQuery.currentPage=1,this.initData())},customBtnsHandel:function(e,t,i){1==e.event.btnType&&this.handlePopup(e.event,t,i),2==e.event.btnType&&this.handleScriptFunc(e.event,t,i),3==e.event.btnType&&this.handleInterface(e.event,t,i)},handlePopup:function(e,t,i){var o=this;this.customBoxVisible=!0,this.$nextTick((function(){o.$refs.CustomBox.init(e,o.modelId,t.id,o.isPreview)}))},handleScriptFunc:function(e,t,i){var o={data:t,index:i,refresh:this.initData,onlineUtils:this.jnpf.onlineUtils},a=this.jnpf.getScriptFunc.call(this,e.func);a&&a.call(this,o)},handleInterface:function(e,t){var i=this,o=function(){Object(u["r"])(i.modelId,t.id).then((function(o){var a=o.data||{};if(a.data){var n=Object(c["a"])(Object(c["a"])({},JSON.parse(a.data)),{},{id:t.id});e.templateJson&&e.templateJson.length&&e.templateJson.forEach((function(e){var t=n[e.relationField]||0==n[e.relationField]||0==n[e.relationField]?n[e.relationField]:"";e.defaultValue="@formId"===e.relationField&&1==e.sourceType?n.id:1==e.sourceType?t:e.relationField}));var l={paramList:e.templateJson||[]};Object(h["o"])(e.interfaceId,l).then((function(e){i.$message({message:e.msg,type:"success"})}))}}))};if(!e.useConfirm)return o();this.$confirm(e.confirmTitle||"确认执行此操作","提示",{type:"warning"}).then((function(){o()})).catch((function(){}))},setTableLoadFunc:function(){var e=this.$refs.tableRef.$refs.JNPFTable,t={data:this.list,tableRef:e,onlineUtils:this.jnpf.onlineUtils},i=this.jnpf.getScriptFunc.call(this,this.columnData.funcs.afterOnload);i&&i.call(this,t)},buildOptions:function(){var e=this;this.columnData.columnList.forEach((function(t){var i=t.__config__;if(_["b"].indexOf(i.jnpfKey)>-1&&("dictionary"===i.dataType&&i.dictionaryType&&e.$store.dispatch("base/getDicDataSelector",i.dictionaryType).then((function(e){t.options=e})),"dynamic"===i.dataType&&i.propsUrl)){var o={paramList:i.templateJson||[]};Object(h["o"])(i.propsUrl,o).then((function(e){var i=e.data;t.options=Array.isArray(i)?i:[]}))}}))},filterNode:function(e,t){return!e||-1!==t[this.treeProps.label].indexOf(e)},toggleTreeExpand:function(e){var t=this;this.keyword="",this.refreshTree=!1,this.expandsTree=e,this.$nextTick((function(){t.refreshTree=!0,t.$nextTick((function(){t.$refs.treeBox.setCurrentKey(null)}))}))},toggleExpandList:function(){var e=this;this.refreshTable=!1,this.expandsTable=!this.expandsTable,this.$nextTick((function(){e.refreshTable=!0}))},loadNode:function(e,t){var i=e.data,o=this.columnData;if(o.treeInterfaceId){if(o.treeTemplateJson&&o.treeTemplateJson.length)for(var a=0;a<o.treeTemplateJson.length;a++){var n=o.treeTemplateJson[a];n.defaultValue=i[n.relationField]||""}var l={paramList:o.treeTemplateJson||[]};Object(h["o"])(o.treeInterfaceId,l).then((function(e){var i=e.data;Array.isArray(i)?t(i):t([])}))}},treeLoad:function(e,t,i){var o=this;Object(u["t"])(this.modelId,e.id,this.listQuery).then((function(e){if(e.data.list&&Array.isArray(e.data.list)){var t=e.data.list.map((function(e){return Object(c["a"])(Object(c["a"])(Object(c["a"])({},e),o.expandObj),{},{hasChildren:!0})}));i(t)}else i([])}))},getFlowList:function(){var e=this;Object(g["v"])(this.config.flowId,"1").then((function(t){e.flowList=t.data}))},handleRowForm:function(e){var t=this;this.extraFormVisible=!0;var i=[];this.$nextTick((function(){var o=t.columnList.filter((function(e){return"table"!=e.jnpfKey}));o.forEach((function(e){var t;"complexHeader"===e.jnpfKey?(t=i).push.apply(t,Object(l["a"])(e.children)):i.push(e)})),i=i.map((function(e){return e.__config__.span=24,e.__config__.label=e.label,e.__config__.templateJson&&e.__config__.templateJson.length&&(e.__config__.templateJson=e.__config__.templateJson.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{relationField:""})}))),e.templateJson&&e.templateJson.length&&(e.templateJson=e.templateJson.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{relationField:""})}))),e}));var a=Object(c["a"])(Object(c["a"])({},t.formData),{},{fields:i});t.$refs.extraForm.init(a,t.modelId,t.isPreview,t.columnData.useFormPermission,t.list[e])}))},getFixed:function(e,t){return 0==t&&this.columnData.groupField&&3==this.columnData.type?!!this.columnList.some((function(e){return"left"==e.fixed}))&&"left":2!=this.columnData.childTableStyle&&("none"!=e.fixed&&e.fixed)}}},P=J,K=(i("a3a8"),i("2877")),B=Object(K["a"])(P,o,a,!1,null,"ef11e370",null);t["default"]=B.exports},a3a8:function(e,t,i){"use strict";i("e47a")},aa06:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"详情","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:e.formData.generalWidth,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading||e.mainLoading,expression:"loading || mainLoading"}],staticClass:"dynamicDetail"},[e.loading?e._e():i("Parser",{attrs:{formConf:e.formData,relationData:e.relationData,formValue:e.formValue},on:{toDetail:e.toDetail}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.formData.hasPrintBtn&&e.formData.printId?[i("el-button",{attrs:{type:"primary"},on:{click:e.print}},[e._v("\n          "+e._s(e.formData.printButtonText||"打 印")+"\n        ")])]:e._e(),i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))])],2)]),i("print-browse",{attrs:{visible:e.printBrowseVisible,id:e.printId,formId:e.dataForm.id},on:{"update:visible":function(t){e.printBrowseVisible=t}}}),e.printDialogVisible?i("PrintDialog",{ref:"printDialog",on:{change:e.printBrowseHandle}}):e._e()],1)},a=[],n=(i("5df3"),i("f400"),i("6762"),i("2fdb"),i("28a5"),i("ac6a"),i("f41a")),l=i("ef22"),r=i("17de"),s=i("ed08"),c=i("cb1d"),d=i("6637"),p={name:"RelevanceDetail",components:{Parser:c["default"],PrintBrowse:d["a"],PrintDialog:n["a"]},data:function(){return{printId:"",printDialogVisible:!1,visible:!1,dataForm:{id:"",data:""},modelId:"",formData:{},formValue:{},loading:!0,mainLoading:!1,detailVisible:!1,relationData:{},useFormPermission:!1,printBrowseVisible:!1,formOperates:[]}},methods:{goBack:function(){this.$emit("close")},printBrowseHandle:function(e){this.printDialogVisible=!1,this.printId=e,this.printBrowseVisible=!0},print:function(){var e=this;if(this.isPreview)return this.$message({message:"功能预览不支持打印",type:"warning"});this.printDialogVisible=!0,this.$nextTick((function(){1!=e.formData.printId.length?e.$refs.printDialog.init(e.formData.printId):e.printBrowseHandle(e.formData.printId[0])}))},init:function(e,t,i,o){var a=this;this.formData=Object(s["b"])(e),this.modelId=t,this.useFormPermission=o,this.dataForm.id=i||"",this.getFormOperates(),this.loading=!0,this.relationData={},this.$nextTick((function(){if(a.dataForm.id){var e={modelId:t,id:i,type:2};a.$store.commit("generator/SET_DYNAMIC_MODEL_EXTRA",e),Object(l["n"])(t,a.dataForm.id).then((function(e){a.dataForm=e.data,a.dataForm.data&&(a.formValue=JSON.parse(a.dataForm.data),a.fillFormData(a.formData,a.formValue),a.initRelationForm(a.formData.fields),a.visible=!0)}))}else a.formValue={},a.loading=!1,a.visible=!1,a.$emit("close")}))},initRelationForm:function(e){var t=this;e.forEach((function(i){var o=i.__config__;if("relationFormAttr"==o.jnpfKey||"popupAttr"==o.jnpfKey){var a=i.relationField.split("_jnpfTable_")[0];e.forEach((function(e){var t=Array.isArray(e.__config__.visibility)&&!e.__config__.visibility.includes("pc");a==e.__vModel__&&(t||e.__config__.noShow)&&(i.__config__.noShow=!0)}))}i.__config__.children&&i.__config__.children.length&&t.initRelationForm(i.__config__.children)}))},unique:function(e,t){var i=new Map;return e.filter((function(e){return!i.has(e[t])&&i.set(e[t],1)}))},handleAttrList:function(e){for(var t=this,i=this.unique(e,"relationField"),o=function(){var e=i[a],o="",n="",s="",c="",d={},p=e.relationField.split("_jnpfTable_")[0],u=function e(t){for(var i=0;i<t.length;i++){if(p===t[i].__vModel__){c=t[i].__config__.jnpfKey,o="relationForm"===t[i].__config__.jnpfKey?t[i].modelId:t[i].interfaceId,n=t[i].__config__.defaultValue,s=t[i].__config__.tableName?t[i].__vModel__+"_jnpfTable_"+t[i].__config__.tableName+(t[i].__config__.isSubTable?"0":"1"):t[i].__vModel__,d=t[i];break}t[i].__config__&&"table"!==t[i].__config__.jnpfKey&&t[i].__config__.children&&Array.isArray(t[i].__config__.children)&&e(t[i].__config__.children)}};if(u(t.formData.fields),!n)return t.$set(t.relationData,s,""),1;if("relationForm"===c&&Object(l["n"])(o,n).then((function(e){if(e.data&&e.data.data){var i=JSON.parse(e.data.data);t.$set(t.relationData,s,i)}else t.$set(t.relationData,s,"")})).catch((function(){t.$set(t.relationData,s,"")})),"popupSelect"===c){var f=t.getParamList(d),m={ids:[n],interfaceId:o,propsValue:d.propsValue,relationField:d.relationField,paramList:f};Object(r["i"])(o,m).then((function(e){if(!e.data)return t.$set(t.relationData,s,"");t.$set(t.relationData,s,e.data&&e.data.length?e.data[0]:{})})).catch((function(){t.$set(t.relationData,s,"")}))}},a=0;a<i.length;a++)o()},getParamList:function(e){var t=e.templateJson;if(!this.formValue)return t;for(var i=0;i<t.length;i++)if(t[i].relationField)if(t[i].relationField.includes("-")){var o=t[i].relationField.split("-")[0],a=t[i].relationField.split("-")[1];t[i].defaultValue=this.formValue[o]&&this.formValue[o][this.rowIndex]&&this.formValue[o][this.rowIndex][a]||""}else t[i].defaultValue=this.formValue[t[i].relationField]||"";return t},toDetail:function(e){var t=this;e.__config__.defaultValue&&(this.mainLoading=!0,Object(l["m"])(e.modelId).then((function(i){if(t.mainLoading=!1,i.data&&i.data.formData){var o=JSON.parse(i.data.formData);o.popupType=t.formData.popupType,t.detailVisible=!0,t.$nextTick((function(){t.$refs.Detail.init(o,e.modelId,e.__config__.defaultValue)}))}})).catch((function(){t.mainLoading=!1})))},getFormOperates:function(){if(this.useFormPermission){var e=this.$store.getters.permissionList,t=this.$route.meta.modelId,i=e.filter((function(e){return e.modelId===t}));this.formOperates=i[0]&&i[0].form?i[0].form:[]}},fillFormData:function(e,t){var i=this,o=[],a=function e(a,n){for(var l=function(){var l=a[r];if(l.__vModel__){if("relationForm"===l.__config__.jnpfKey||"popupSelect"===l.__config__.jnpfKey)l.__config__.defaultValue=t[l.__vModel__+"_id"],i.$set(l,"name",t[l.__vModel__]||"");else{var s=t.hasOwnProperty(l.__vModel__)?t[l.__vModel__]:l.__config__.defaultValue;l.__config__.defaultValue=s}if(i.useFormPermission){var c=l.__config__.isSubTable?n.__vModel__+"-"+l.__vModel__:l.__vModel__,d=!0;i.formOperates&&i.formOperates.length&&(d=!i.formOperates.some((function(e){return e.enCode===c}))),d=l.__config__.noShow?l.__config__.noShow:d,i.$set(l.__config__,"noShow",d)}}["relationFormAttr","popupAttr"].includes(l.__config__.jnpfKey)&&o.push(l),l.__config__&&l.__config__.children&&Array.isArray(l.__config__.children)&&e(l.__config__.children,l)},r=0;r<a.length;r++)l()};a(e.fields),this.handleAttrList(o),this.loading=!1}}},u=p,f=i("2877"),m=Object(f["a"])(u,o,a,!1,null,null,null);t["default"]=m.exports},b4b7:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"JNPF-common-layout"},[e.config.enableFlow?[i("FlowBox",{directives:[{name:"show",rawName:"v-show",value:e.flowVisible,expression:"flowVisible"}],ref:"FlowBox",on:{close:e.closeFlow}}),e.flowListVisible?i("SelectFlow",{ref:"selectFlow",on:{selectFlow:e.selectFlow}}):e._e()]:i("div",{staticClass:"JNPF-preview-main"},[i("div",{staticClass:"JNPF-common-page-header"},[i("p",[e._v(e._s(e.config.fullName))]),i("div",{staticClass:"options"},[i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n          "+e._s(e.formConf.confirmButtonText||"确 定"))]),i("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)]),i("div",{staticClass:"dynamic-form-main",style:{margin:"0 auto",width:e.formConf.fullScreenWidth}},[e.loading?e._e():i("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}})],1)])],2)},a=[],n=(i("6762"),i("2fdb"),i("5530")),l=i("ef22"),r=i("49aa"),s=i("226a"),c=i("5451"),d=i("2f62"),p=i("597c"),u={components:{Parser:r["a"],FlowBox:s["default"],SelectFlow:p["a"]},props:["config","modelId","isPreview"],data:function(){return{visible:!1,dataForm:{data:""},btnLoading:!1,loading:!0,key:+new Date,formConf:{},flowVisible:!1,flowListVisible:!1,flowList:[],flowItem:{}}},computed:Object(n["a"])({},Object(d["b"])(["userInfo"])),created:function(){this.init()},methods:{init:function(e){var t=this;this.config.enableFlow?this.getFlowList(e):(this.formConf=JSON.parse(this.config.formData),this.fillFormData(this.formConf,{}),this.loading=!0,this.$nextTick((function(){t.visible=!0,t.loading=!1,t.key=+new Date})))},fillFormData:function(e,t,i){var o=this,a=function e(t,i){for(var a=0;a<t.length;a++){var n=t[a];if(n.__vModel__){if(n.__config__.defaultCurrent){if("datePicker"===n.__config__.jnpfKey){var l=n.format,r=o.jnpf.toDate((new Date).getTime(),l),s="yyyy"===l?"-01-01 00:00:00":"yyyy-MM"===l?"-01 00:00:00":"yyyy-MM-dd"===l?" 00:00:00":"",c=new Date(r+s).getTime();n.__config__.defaultValue=c}"timePicker"===n.__config__.jnpfKey&&(n.__config__.defaultValue=o.jnpf.toDate(new Date,n.format)),"organizeSelect"===n.__config__.jnpfKey&&o.userInfo.organizeIdList instanceof Array&&o.userInfo.organizeIdList.length>0&&(n.__config__.defaultValue=1==n.multiple?[o.userInfo.organizeIdList]:o.userInfo.organizeIdList),"depSelect"===n.__config__.jnpfKey&&o.userInfo.departmentId&&(n.__config__.defaultValue=n.multiple?[o.userInfo.departmentId]:o.userInfo.departmentId),"posSelect"===n.__config__.jnpfKey&&o.userInfo.positionIds instanceof Array&&o.userInfo.positionIds.length>0&&(n.__config__.defaultValue=n.multiple?o.userInfo.positionIds.map((function(e){return e.id})):o.userInfo.positionIds[0].id),"roleSelect"===n.__config__.jnpfKey&&o.userInfo.roleIds instanceof Array&&o.userInfo.roleIds.length>0&&(n.__config__.defaultValue=n.multiple?o.userInfo.roleIds:o.userInfo.roleIds[0]),"groupSelect"===n.__config__.jnpfKey&&o.userInfo.groupIds instanceof Array&&o.userInfo.groupIds.length>0&&(n.__config__.defaultValue=n.multiple?o.userInfo.groupIds:o.userInfo.groupIds[0]),["userSelect"].includes(n.__config__.jnpfKey)&&o.userInfo.userId&&(n.__config__.defaultValue=n.multiple?[o.userInfo.userId]:o.userInfo.userId),"usersSelect"===n.__config__.jnpfKey&&o.userInfo.userId&&(n.__config__.defaultValue=n.multiple?[o.userInfo.userId+"--user"]:o.userInfo.userId+"--user"),"sign"==n.__config__.jnpfKey&&o.userInfo.signImg&&(n.__config__.defaultValue=o.userInfo.signImg)}if("datePicker"===n.__config__.jnpfKey&&n.__config__.defaultCurrent){var d=n.format,p=o.jnpf.toDate((new Date).getTime(),d),u="yyyy"===d?"-01-01 00:00:00":"yyyy-MM"===d?"-01 00:00:00":"yyyy-MM-dd"===d?" 00:00:00":"",f=new Date(p+u).getTime();n.__config__.defaultValue=f}else"organizeSelect"===n.__config__.jnpfKey&&n.__config__.defaultCurrent?o.userInfo.organizeIdList instanceof Array&&o.userInfo.organizeIdList.length>0?n.__config__.defaultValue=1==n.multiple?[o.userInfo.organizeIdList]:o.userInfo.organizeIdList:n.__config__.defaultValue=[]:"timePicker"===n.__config__.jnpfKey&&n.__config__.defaultCurrent&&(n.__config__.defaultValue=o.jnpf.toDate(new Date,n.format))}n.__config__&&n.__config__.children&&Array.isArray(n.__config__.children)&&e(n.__config__.children,n)}};a(e.fields),e.formData=t},getFlowList:function(e){var t=this;Object(c["v"])(this.config.flowId,"1").then((function(i){return t.flowList=i.data,e&&t.flowItem.id?t.selectFlow(t.flowItem):t.flowList.length?1===t.flowList.length?t.selectFlow(t.flowList[0]):(t.flowListVisible=!0,void t.$nextTick((function(){t.$refs.selectFlow.init(t.flowList)}))):t.$message({type:"error",message:"流程不存在"})}))},selectFlow:function(e){var t=this;this.flowItem=e;var i={id:"",enCode:this.config.flowEnCode,flowId:e.id,formType:2,opType:"-1",type:1,modelId:this.modelId,isPreview:this.isPreview,fromForm:1,hideCancelBtn:!0};this.flowListVisible=!1,this.flowVisible=!0,this.$nextTick((function(){t.$refs.FlowBox.init(i)}))},submitForm:function(e,t){var i=this;e&&(this.btnLoading=!0,this.dataForm.data=JSON.stringify(e),Object(l["i"])(this.modelId,this.dataForm).then((function(e){i.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t&&"function"===typeof t&&t(),i.btnLoading=!1,i.resetForm()}})})).catch((function(){i.btnLoading=!1})))},dataFormSubmit:function(){if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.$refs.dynamicForm&&this.$refs.dynamicForm.submitForm()},resetForm:function(){var e=this;this.formConf=JSON.parse(this.config.formData),this.fillFormData(this.formConf,{}),this.$nextTick((function(){e.$refs.dynamicForm&&e.$refs.dynamicForm.resetForm()}))},closeFlow:function(e){e&&this.init(!0)}}},f=u,m=i("2877"),h=Object(m["a"])(f,o,a,!1,null,null,null);t["default"]=h.exports},ba53:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",["general"===e.formConf.popupType&&e.dialogLoading?[i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:e.dataForm.id?"编辑":"新建","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:e.formConf.generalWidth},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.goBack()}}},[e.loading?e._e():i("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.dataForm.id&&e.showMoreBtn&&e.formConf.hasConfirmAndAddBtn?i("div",{staticClass:"upAndDown-button"},[i("el-button",{attrs:{disabled:e.prevDis},on:{click:e.prev}},[e._v("\n            "+e._s("上一条")+"\n          ")]),i("el-button",{attrs:{disabled:e.nextDis},on:{click:e.next}},[e._v("\n            "+e._s("下一条")+"\n          ")])],1):e._e(),(e.formConf.hasPrintBtn&&e.formConf.printId&&e.dataForm.id,e._e()),i("el-button",{on:{click:e.goBack}},[e._v(e._s(e.formConf.cancelButtonText||"取 消"))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading,disabled:e.continueBtnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n          "+e._s(e.formConf.confirmButtonText||"确 定"))]),!e.formConf.hasConfirmAndAddBtn||e.dataForm.id&&5==e.type?e._e():i("el-button",{attrs:{type:"primary",loading:e.continueBtnLoading,disabled:e.btnLoading},on:{click:function(t){return e.dataFormSubmit(2)}}},[e._v("\n          "+e._s(e.dataForm.id?"确定并继续":"确定并新增"))])],2)],1)]:e._e(),"fullScreen"===e.formConf.popupType?[i("transition",{attrs:{name:"el-zoom-in-center"}},[i("div",{staticClass:"JNPF-preview-main"},[i("div",{staticClass:"JNPF-common-page-header"},[i("el-page-header",{attrs:{content:e.dataForm.id?"编辑":"新建"},on:{back:e.goBack}}),i("div",{staticClass:"options"},[e.formConf.hasConfirmAndAddBtn?i("el-dropdown",{staticClass:"dropdown",attrs:{placement:"bottom"}},[i("el-button",{staticStyle:{width:"70px"},attrs:{disabled:e.continueBtnLoading}},[e._v("\n                更 多"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.dataForm.id&&e.showMoreBtn?[i("el-dropdown-item",{attrs:{disabled:e.prevDis},nativeOn:{click:function(t){return e.prev(t)}}},[e._v("\n                    "+e._s("上一条")+"\n                  ")]),i("el-dropdown-item",{attrs:{disabled:e.nextDis},nativeOn:{click:function(t){return e.next(t)}}},[e._v("\n                    "+e._s("下一条")+"\n                  ")])]:e._e(),e.dataForm.id&&5==e.type?e._e():i("el-dropdown-item",{attrs:{type:"primary",loading:e.continueBtnLoading,disabled:e.btnLoading},nativeOn:{click:function(t){return e.dataFormSubmit(2)}}},[e._v("\n                  "+e._s(e.dataForm.id?"确定并继续":"确定并新增"))])],2)],1):e._e(),(e.formConf.hasPrintBtn&&e.formConf.printId&&e.dataForm.id,e._e()),i("el-button",{attrs:{type:"primary",loading:e.btnLoading,disabled:e.continueBtnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n              "+e._s(e.formConf.confirmButtonText||"确 定"))]),i("el-button",{attrs:{disabled:e.continueBtnLoading},on:{click:e.goBack}},[e._v("\n              "+e._s(e.formConf.cancelButtonText||"取 消"))])],2)],1),e.loading?e._e():i("div",{staticClass:"dynamic-form-main",style:{margin:"0 auto",width:e.formConf.fullScreenWidth}},[i("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}})],1)])])]:e._e(),"drawer"===e.formConf.popupType?[i("el-drawer",{staticClass:"JNPF-common-drawer",attrs:{title:e.dataForm.id?"编辑":"新建",visible:e.visible,wrapperClosable:!1,size:e.formConf.drawerWidth,"append-to-body":""},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.goBack()}}},[i("div",{staticClass:"JNPF-flex-main"},[i("div",{staticClass:"dynamicForm"},[e.loading?e._e():i("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}})],1),i("div",{staticClass:"drawer-footer"},[e.dataForm.id&&e.showMoreBtn&&e.formConf.hasConfirmAndAddBtn?i("div",{staticClass:"upAndDown-button"},[i("el-button",{attrs:{disabled:e.prevDis},on:{click:e.prev}},[e._v("\n              "+e._s("上一条")+"\n            ")]),i("el-button",{attrs:{disabled:e.nextDis},on:{click:e.next}},[e._v("\n              "+e._s("下一条")+"\n            ")])],1):e._e(),(e.formConf.hasPrintBtn&&e.formConf.printId&&e.dataForm.id,e._e()),i("el-button",{on:{click:function(t){return e.goBack()}}},[e._v(e._s(e.formConf.cancelButtonText||"取 消"))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading,disabled:e.continueBtnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n            "+e._s(e.formConf.confirmButtonText||"确 定"))]),e.dataForm.id&&5==e.type||!e.formConf.hasConfirmAndAddBtn?e._e():i("el-button",{attrs:{type:"primary",loading:e.continueBtnLoading,disabled:e.btnLoading},on:{click:function(t){return e.dataFormSubmit(2)}}},[e._v("\n            "+e._s(e.dataForm.id?"确定并继续":"确定并新增"))])],2)])])]:e._e(),e.printDialogVisible?i("PrintDialog",{ref:"printDialog",on:{change:e.printBrowseHandle}}):e._e(),i("print-browse",{attrs:{visible:e.printBrowseVisible,id:e.printId,formId:e.dataForm.id},on:{"update:visible":function(t){e.printBrowseVisible=t}}})],2)},a=[],n=(i("6762"),i("2fdb"),i("20d6"),i("5530")),l=i("f41a"),r=i("ef22"),s=i("49aa"),c=i("6637"),d=i("ed08"),p=i("2f62"),u={components:{Parser:s["a"],PrintBrowse:c["a"],PrintDialog:l["a"]},data:function(){return{printId:"",printDialogVisible:!1,visible:!1,key:+new Date,formConf:{},dataForm:{id:"",data:""},modelId:"",formData:{},btnLoading:!1,loading:!0,isPreview:!1,useFormPermission:!1,printBrowseVisible:!1,formOperates:[],dialogLoading:!1,continueBtnLoading:!1,index:0,prevDis:!1,nextDis:!1,allList:[],showMoreBtn:!0,type:1,refreshDataList:!1}},computed:Object(n["a"])({},Object(p["b"])(["userInfo"])),methods:{goBack:function(){this.destroyStyle(),this.visible=!1,this.$emit("refreshDataList",this.refreshDataList)},printBrowseHandle:function(e){this.printDialogVisible=!1,this.printId=e,this.printBrowseVisible=!0},print:function(){var e=this;if(this.isPreview)return this.$message({message:"功能预览不支持打印",type:"warning"});this.printDialogVisible=!0,this.$nextTick((function(){e.formConf.printId.length>1?e.$refs.printDialog.init(e.formConf.printId):e.printBrowseHandle(e.formConf.printId)}))},init:function(e,t,i,o,a,l,s){var c=this;this.formConf=Object(d["b"])(e),this.modelId=t,this.isPreview=o,this.useFormPermission=a,this.dataForm.id=i||"",this.getFormOperates(),this.loading=!0,this.dialogLoading=!1,this.prevDis=!1,this.nextDis=!1,this.allList=l||[],this.type=s,3==s||5==s?this.showMoreBtn=!1:this.allList.length?(this.index=this.allList.findIndex((function(e){return e.id===i})),0==this.index&&(this.prevDis=!0),this.index==this.allList.length-1&&(this.nextDis=!0)):(this.prevDis=!0,this.nextDis=!0),this.$nextTick((function(){if(c.dataForm.id){var e={modelId:t,id:i,type:2};c.$store.commit("generator/SET_DYNAMIC_MODEL_EXTRA",e),Object(r["r"])(t,c.dataForm.id).then((function(e){c.dataForm=e.data,c.dataForm.data&&(c.formData=Object(n["a"])(Object(n["a"])({},JSON.parse(c.dataForm.data)),{},{id:c.dataForm.id}),c.fillFormData(c.formConf,c.formData),c.dialogLoading=!0,c.$nextTick((function(){c.visible=!0,c.loading=!1})))}))}else c.$store.commit("generator/SET_DYNAMIC_MODEL_EXTRA",{}),c.formData={},c.fillFormData(c.formConf,c.formData,"add"),c.dialogLoading=!0,c.$nextTick((function(){c.visible=!0,c.loading=!1}));c.key=+new Date}))},prev:function(){this.index--,0===this.index&&(this.prevDis=!0),this.nextDis=!1,this.renewModelInfo()},next:function(){this.index++,this.index===this.allList.length-1&&(this.nextDis=!0),this.prevDis=!1,this.renewModelInfo()},renewModelInfo:function(){var e=this;Object(r["r"])(this.modelId,this.allList[this.index].id).then((function(t){if(e.dataForm=t.data,e.dataForm.data){e.resetForm();var i=Object(n["a"])(Object(n["a"])({},JSON.parse(e.dataForm.data)),{},{id:e.dataForm.id});e.fillFormData(e.formConf,i),e.$nextTick((function(){e.key=+new Date}))}}))},getFormOperates:function(){if(!this.isPreview&&this.useFormPermission){var e=this.$store.getters.permissionList,t=this.$route.meta.modelId,i=e.filter((function(e){return e.modelId===t}));this.formOperates=i[0]&&i[0].form?i[0].form:[]}},fillFormData:function(e,t,i){var o=this,a=function e(a,n){for(var l=function(){var l=a[r];if(l.__vModel__){var s=t.hasOwnProperty(l.__vModel__)?t[l.__vModel__]:l.__config__.defaultValue;if(l.__config__.isSubTable||(l.__config__.defaultValue=s),"add"==i&&l.__config__.defaultCurrent){if("datePicker"===l.__config__.jnpfKey){var c=l.format,d=o.jnpf.toDate((new Date).getTime(),c),p="yyyy"===c?"-01-01 00:00:00":"yyyy-MM"===c?"-01 00:00:00":"yyyy-MM-dd"===c?" 00:00:00":"";l.__config__.defaultValue=new Date(d+p).getTime()}"timePicker"===l.__config__.jnpfKey&&(l.__config__.defaultValue=o.jnpf.toDate(new Date,l.format)),"organizeSelect"===l.__config__.jnpfKey&&o.userInfo.organizeIdList instanceof Array&&o.userInfo.organizeIdList.length>0&&(l.__config__.defaultValue=1==l.multiple?[o.userInfo.organizeIdList]:o.userInfo.organizeIdList),"depSelect"===l.__config__.jnpfKey&&o.userInfo.departmentId&&(l.__config__.defaultValue=l.multiple?[o.userInfo.departmentId]:o.userInfo.departmentId),"posSelect"===l.__config__.jnpfKey&&o.userInfo.positionIds instanceof Array&&o.userInfo.positionIds.length>0&&(l.__config__.defaultValue=l.multiple?o.userInfo.positionIds.map((function(e){return e.id})):o.userInfo.positionIds[0].id),"roleSelect"===l.__config__.jnpfKey&&o.userInfo.roleIds instanceof Array&&o.userInfo.roleIds.length>0&&(l.__config__.defaultValue=l.multiple?o.userInfo.roleIds:o.userInfo.roleIds[0]),"groupSelect"===l.__config__.jnpfKey&&o.userInfo.groupIds instanceof Array&&o.userInfo.groupIds.length>0&&(l.__config__.defaultValue=l.multiple?o.userInfo.groupIds:o.userInfo.groupIds[0]),["userSelect"].includes(l.__config__.jnpfKey)&&o.userInfo.userId&&(l.__config__.defaultValue=l.multiple?[o.userInfo.userId]:o.userInfo.userId),"usersSelect"===l.__config__.jnpfKey&&o.userInfo.userId&&(l.__config__.defaultValue=l.multiple?[o.userInfo.userId+"--user"]:o.userInfo.userId+"--user"),"sign"===l.__config__.jnpfKey&&o.userInfo.signImg&&(l.__config__.defaultValue=o.userInfo.signImg)}if(!o.isPreview&&o.useFormPermission){var u=l.__config__.isSubTable?n.__vModel__+"-"+l.__vModel__:l.__vModel__,f=!0;o.formOperates&&o.formOperates.length&&(f=!o.formOperates.some((function(e){return e.enCode===u}))),f=l.__config__.noShow?l.__config__.noShow:f,o.$set(l.__config__,"noShow",f)}}l.__config__&&l.__config__.children&&Array.isArray(l.__config__.children)&&e(l.__config__.children,l)},r=0;r<a.length;r++)l()};a(e.fields),e.formData=t},resetForm:function(){var e=this;this.$nextTick((function(){e.$refs.dynamicForm&&e.$refs.dynamicForm.resetForm()}))},submitForm:function(e,t,i){var o=this;if(e){2==i?(this.refreshDataList=!0,this.continueBtnLoading=!0):this.btnLoading=!0;var a=Object(n["a"])(Object(n["a"])({},this.formData),e);this.dataForm.data=JSON.stringify(a);var l=this.dataForm.id?r["y"]:r["i"];l(this.modelId,this.dataForm).then((function(e){o.dataForm.id?o.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t&&"function"===typeof t&&t(),o.$nextTick((function(){2==i?Object(r["r"])(o.modelId,o.dataForm.id).then((function(e){o.dataForm=e.data,o.continueBtnLoading=!1,o.dataForm.data&&(o.formData=Object(n["a"])(Object(n["a"])({},JSON.parse(o.dataForm.data)),{},{id:o.dataForm.id}),o.fillFormData(o.formConf,o.formData))})):(o.visible=!1,o.destroyStyle(),o.btnLoading=!1,o.$emit("refreshDataList",!0))}))}}):o.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t&&"function"===typeof t&&t(),o.$nextTick((function(){if(o.continueBtnLoading=!1,2==i)return o.resetForm(),void o.$nextTick((function(){o.key=+new Date}));o.visible=!1,o.btnLoading=!1,o.$emit("refreshDataList",!0)}))}})})).catch((function(){o.continueBtnLoading=!1,o.btnLoading=!1}))}},dataFormSubmit:function(e){if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.$refs.dynamicForm&&this.$refs.dynamicForm.submitForm(e)},destroyStyle:function(){document.getElementById("styleId")&&document.getElementById("styleId").remove()}}},f=u,m=i("2877"),h=Object(m["a"])(f,o,a,!1,null,null,null);t["default"]=h.exports},ba61:function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return l})),i.d(t,"c",(function(){return r}));var o=i("b775");function a(e){return Object(o["a"])({url:"/api/system/AdvancedQuery/".concat(e,"/List"),method:"get"})}function n(e){return Object(o["a"])({url:"/api/system/AdvancedQuery/".concat(e),method:"DELETE"})}function l(e){return Object(o["a"])({url:"/api/system/AdvancedQuery",method:"post",data:e})}function r(e){return Object(o["a"])({url:"/api/system/AdvancedQuery/".concat(e.id),method:"put",data:e})}},c5c7:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.dialogLoading?[i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:e.dataForm.id?"编辑":"新建","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.goBack()}}},[e.loading?e._e():i("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.goBack}},[e._v(e._s(e.formConf.cancelButtonText||"取 消"))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n          "+e._s(e.formConf.confirmButtonText||"确 定"))])],1)],1)]:e._e()],2)},a=[],n=(i("6762"),i("2fdb"),i("5530")),l=i("ef22"),r=i("49aa"),s=i("ed08"),c=i("2f62"),d={components:{Parser:r["a"]},data:function(){return{visible:!1,key:+new Date,formConf:{},dataForm:{id:"",data:""},modelId:"",formData:{},btnLoading:!1,loading:!0,isPreview:!1,useFormPermission:!1,formOperates:[],dialogLoading:!1}},computed:Object(n["a"])({},Object(c["b"])(["userInfo"])),methods:{goBack:function(){this.visible=!1},init:function(e,t,i,o,a){var n=this;this.formConf=Object(s["b"])(e),this.modelId=t,this.isPreview=i,this.useFormPermission=o,this.getFormOperates(),this.loading=!0,this.dialogLoading=!1,this.$nextTick((function(){n.$store.commit("generator/SET_DYNAMIC_MODEL_EXTRA",{}),n.formData={},a&&(n.formData=a,n.dataForm.id=a.id||"",n.showMoreBtn=!1),n.fillFormData(n.formConf,n.formData),n.dialogLoading=!0,n.$nextTick((function(){n.visible=!0,n.loading=!1})),n.key=+new Date}))},getFormOperates:function(){if(!this.isPreview&&this.useFormPermission){var e=this.$store.getters.permissionList,t=this.$route.meta.modelId,i=e.filter((function(e){return e.modelId===t}));this.formOperates=i[0]&&i[0].form?i[0].form:[]}},fillFormData:function(e,t){var i=this,o=function e(o,a){for(var n=function(){var n=o[l];if(n.__vModel__){if(n.__config__.defaultCurrent){if("datePicker"===n.__config__.jnpfKey){var r=n.format,s=i.jnpf.toDate((new Date).getTime(),r),c="yyyy"===r?"-01-01 00:00:00":"yyyy-MM"===r?"-01 00:00:00":"yyyy-MM-dd"===r?" 00:00:00":"";n.__config__.defaultValue=new Date(s+c).getTime()}"timePicker"===n.__config__.jnpfKey&&(n.__config__.defaultValue=i.jnpf.toDate(new Date,n.format)),"organizeSelect"===n.__config__.jnpfKey&&i.userInfo.organizeIdList instanceof Array&&i.userInfo.organizeIdList.length>0&&(n.__config__.defaultValue=1==n.multiple?[i.userInfo.organizeIdList]:i.userInfo.organizeIdList),"depSelect"===n.__config__.jnpfKey&&i.userInfo.departmentId&&(n.__config__.defaultValue=n.multiple?[i.userInfo.departmentId]:i.userInfo.departmentId),"posSelect"===n.__config__.jnpfKey&&i.userInfo.positionIds instanceof Array&&i.userInfo.positionIds.length>0&&(n.__config__.defaultValue=n.multiple?i.userInfo.positionIds.map((function(e){return e.id})):i.userInfo.positionIds[0].id),"roleSelect"===n.__config__.jnpfKey&&i.userInfo.roleIds instanceof Array&&i.userInfo.roleIds.length>0&&(n.__config__.defaultValue=n.multiple?i.userInfo.roleIds:i.userInfo.roleIds[0]),"groupSelect"===n.__config__.jnpfKey&&i.userInfo.groupIds instanceof Array&&i.userInfo.groupIds.length>0&&(n.__config__.defaultValue=n.multiple?i.userInfo.groupIds:i.userInfo.groupIds[0]),["userSelect"].includes(n.__config__.jnpfKey)&&i.userInfo.userId&&(n.__config__.defaultValue=n.multiple?[i.userInfo.userId]:i.userInfo.userId),"usersSelect"===n.__config__.jnpfKey&&i.userInfo.userId&&(n.__config__.defaultValue=n.multiple?[i.userInfo.userId+"--user"]:i.userInfo.userId+"--user"),"sign"===n.__config__.jnpfKey&&i.userInfo.signImg&&(n.__config__.defaultValue=i.userInfo.signImg)}var d=t.hasOwnProperty(n.__vModel__)?t[n.__vModel__]:n.__config__.defaultValue;if(n.__config__.isSubTable||(n.__config__.defaultValue=d),!i.isPreview&&i.useFormPermission){var p=n.__config__.isSubTable?a.__vModel__+"-"+n.__vModel__:n.__vModel__,u=!0;i.formOperates&&i.formOperates.length&&(u=!i.formOperates.some((function(e){return e.enCode===p}))),u=n.__config__.noShow?n.__config__.noShow:u,i.$set(n.__config__,"noShow",u)}}n.__config__&&n.__config__.children&&Array.isArray(n.__config__.children)&&e(n.__config__.children,n)},l=0;l<o.length;l++)n()};o(e.fields),e.formData=t},resetForm:function(){var e=this;this.$nextTick((function(){e.$refs.dynamicForm&&e.$refs.dynamicForm.resetForm()}))},submitForm:function(e,t,i){var o=this;if(e){this.btnLoading=!0;var a=Object(n["a"])(Object(n["a"])({},this.formData),e);this.dataForm.data=JSON.stringify(a);var r=this.dataForm.id?l["y"]:l["i"];r(this.modelId,this.dataForm).then((function(e){o.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t&&"function"===typeof t&&t(),o.$nextTick((function(){o.visible=!1,o.btnLoading=!1,o.$emit("refreshDataList",!0)}))}})})).catch((function(){o.btnLoading=!1}))}},dataFormSubmit:function(e){if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.$refs.dynamicForm&&this.$refs.dynamicForm.submitForm(e)}}},p=d,u=i("2877"),f=Object(u["a"])(p,o,a,!1,null,null,null);t["default"]=f.exports},e47a:function(e,t,i){}}]);