(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c6a3935"],{"19ac":function(t,e,a){"use strict";a.d(e,"i",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"g",(function(){return o})),a.d(e,"h",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return c})),a.d(e,"f",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return m}));var n=a("b775");function s(t){return Object(n["a"])({url:"/api/oauth/Login/socials",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})}function i(){return Object(n["a"])({url:"/api/oauth/getLoginConfig",method:"get"})}function o(){return Object(n["a"])({url:"/api/oauth/getTicket",method:"get"})}function r(t){return Object(n["a"])({url:"/api/oauth/getTicketStatus/".concat(t),method:"get"})}function l(t){return Object(n["a"])({url:"/api/permission/socials/login",method:"GET",data:t})}function c(){return Object(n["a"])({url:"/api/permission/socials",method:"GET"})}function u(t){return Object(n["a"])({url:"/api/permission/socials?userId="+t,method:"GET"})}function d(t){return Object(n["a"])({url:"/api/permission/socials/render/".concat(t),method:"GET"})}function m(t,e){return Object(n["a"])({url:"/api/permission/socials/".concat(e,"?userId=").concat(t),method:"DELETE"})}},"28c0":function(t,e,a){"use strict";a("6aac")},"2fd7":function(t,e,a){"use strict";a("f84d")},"2ff2":function(t,e,a){},3239:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container Profile-container"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.userLoading,expression:"userLoading"}],staticClass:"profile-tabs",staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"个人资料",name:"user"}},[t.visible.user?a("UserInfo",{ref:"user",attrs:{user:t.user},on:{updateInfo:t.getInfo}}):t._e()],1),t.isTenant?a("el-tab-pane",{attrs:{label:"租户信息",name:"tenantInfo"}},[t.visible.tenantInfo?a("TenantInfo",{ref:"tenantInfo",attrs:{tenantData:t.tenantData}}):t._e()],1):t._e(),a("el-tab-pane",{attrs:{label:"修改密码",name:"password"}},[t.visible.password?a("Password",{ref:"password"}):t._e()],1),a("el-tab-pane",{attrs:{disabled:"",name:"line"}}),a("el-tab-pane",{attrs:{label:"我的组织",name:"organize"}},[a("div",{staticClass:"JNPF-common-title mb-10  "},[a("h2",{staticClass:"bold"},[t._v("我的组织\n          "),a("el-tooltip",{attrs:{content:"用户可以自行切换组织信息，我的组织默认只能进行单选",placement:"right"}},[a("a",{staticClass:"tooltip-question el-icon-question"})])],1)]),a("div",{staticClass:"organize-list"},[t.organizeList.length?a("el-row",{attrs:{gutter:80}},t._l(t.organizeList,(function(e,n){return a("el-col",{key:n,staticClass:"organize-item",attrs:{span:12}},[a("div",{staticClass:"organize-item-main",class:{active:t.activeOrganize===e.id},on:{click:function(a){return t.changeMajor(e.id,"Organize")}}},[a("i",{staticClass:"icon-ym icon-ym-organization"}),a("p",{staticClass:"organize-name"},[t._v(t._s(e.fullName))]),a("p",{staticClass:"btn"},[t._v("默认")]),a("div",{staticClass:"icon-checked"},[a("i",{staticClass:"el-icon-check"})])])])})),1):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],1)]),a("el-tab-pane",{attrs:{label:"我的岗位",name:"position"}},[a("div",{staticClass:"JNPF-common-title mb-10"},[a("h2",{staticClass:"bold"},[t._v("我的岗位\n          "),a("el-tooltip",{attrs:{content:"用户可以自行切换我的组织内的岗位信息，我的岗位默认只能进行单选",placement:"right"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)]),a("div",{staticClass:"organize-list"},[t.positionList.length?a("el-row",{attrs:{gutter:80}},t._l(t.positionList,(function(e,n){return a("el-col",{key:n,staticClass:"organize-item",attrs:{span:12}},[a("div",{staticClass:"organize-item-main",class:{active:t.activePosition===e.id},on:{click:function(a){return t.changeMajor(e.id,"Position")}}},[a("i",{staticClass:"icon-ym icon-ym-wf-outgoingApply"}),a("p",{staticClass:"organize-name"},[t._v(t._s(e.fullName))]),a("p",{staticClass:"btn"},[t._v("主岗")]),a("div",{staticClass:"icon-checked"},[a("i",{staticClass:"el-icon-check"})])])])})),1):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],1)]),a("el-tab-pane",{attrs:{label:"我的下属",name:"subordinate"}},[a("div",{staticClass:"JNPF-common-title mb-10"},[a("h2",{staticClass:"bold"},[t._v("我的下属")])]),a("div",{staticClass:"subordinate-list"},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"JNPF-common-el-tree subordinate-tree",attrs:{data:t.treeData,props:t.props,"check-on-click-node":"","node-key":"id",lazy:"",load:t.loadNode},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return a("el-card",{staticClass:"subordinate-tree-node",attrs:{shadow:"never"}},[a("el-avatar",{attrs:{size:50,src:t.define.comUrl+n.avatar}}),a("div",{staticClass:"text"},[a("p",[t._v(t._s(n.userName))]),a("p",{staticClass:"user-text"},[t._v(t._s(n.department)+t._s(n.position?"/"+n.position:""))])])],1)}}])})],1)]),t.useSocials?a("el-tab-pane",{attrs:{label:"绑定设置",name:"justAuth"}},[t.visible.justAuth?a("JustAuth",{ref:"justAuth"}):t._e()],1):t._e(),a("el-tab-pane",{staticClass:"el-tab-pane-authorize",attrs:{label:"系统权限",name:"authorize"}},[t.visible.authorize?a("Authorize",{ref:"authorize"}):t._e()],1),a("el-tab-pane",{attrs:{label:"登录日志",name:"sysLog"}},[t.visible.sysLog?a("SysLog",{ref:"sysLog"}):t._e()],1)],1),a("div",{staticClass:"head"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.define.comUploadUrl+"/userAvatar",headers:t.uploadHeaders,"on-success":t.handleSuccess,"show-file-list":!1,accept:"image/*","before-upload":t.beforeUpload}},[a("div",{staticClass:"avatar-box"},[t.user.avatar?a("el-avatar",{staticClass:"avatar",attrs:{size:50,src:t.define.comUrl+t.user.avatar}}):t._e(),a("div",{staticClass:"avatar-hover"},[t._v("更换头像")])],1)]),a("span",{staticClass:"username"},[t._v(t._s(t.user.realName))])],1)],1)},s=[],i=(a("7f7f"),a("3b2b"),a("ac6a"),a("456d"),a("1e85")),o=a("933c"),r=a("6110"),l=a("5fbb"),c=a("6a12"),u=a("5a0d"),d=a("999e"),m={name:"profile",components:{UserInfo:o["default"],Password:r["default"],Authorize:l["default"],SysLog:c["default"],JustAuth:u["default"],TenantInfo:d["default"]},data:function(){return{user:{},treeData:[],activeTab:"",organizeList:[],positionList:[],activeOrganize:"",activePosition:"",visible:{tenantInfo:!1,user:!0,password:!1,theme:!1,authorize:!1,sysLog:!1,justAuth:!1},props:{children:"children",label:"userName",isLeaf:"isLeaf"},loading:!1,userLoading:!1,nodeId:"0",uploadHeaders:{Authorization:this.$store.getters.token},tenantData:{},isTenant:!1}},watch:{$route:"getInfo",activeTab:function(t){for(var e=0,a=Object.keys(this.visible);e<a.length;e++){var n=a[e];this.visible[n]=!1}if(this.visible[t]=!0,"subordinate"===t)return this.nodeId="0",void this.getSubordinate();"organize"!==t?"position"!==t||this.getUserPositions():this.getUserOrganizes()}},created:function(){this.getInfo()},computed:{useSocials:function(){return localStorage.getItem("useSocials")&&"0"!=localStorage.getItem("useSocials")}},methods:{beforeUpload:function(t){var e=new RegExp("image/*").test(t.type);return e||this.$message.error("请上传图片"),e},getInfo:function(){var t=this;this.userLoading=!0,Object(i["h"])().then((function(e){t.user=e.data,t.activeTab="user",t.userLoading=!1,t.tenantData=t.user.currentTenantInfo,t.isTenant=t.user.isTenant;var a=t.$router.history.current.query.flag;"1"==a&&(t.activeTab="justAuth")}))},getSubordinate:function(){var t=this;this.loading=!0,Object(i["l"])(this.nodeId).then((function(e){t.treeData=e.data,t.loading=!1}))},loadNode:function(t,e){if(0===t.level)return this.nodeId="0",e(this.treeData);this.nodeId=t.data.id,Object(i["l"])(this.nodeId).then((function(t){e(t.data)}))},handleSuccess:function(t,e){200==t.code?this.updateAvatar(t.data):this.$message({message:"上传失败",type:"error",duration:1e3})},updateAvatar:function(t){var e=this;Object(i["c"])(t.name).then((function(a){e.user.avatar=t.url,e.$store.commit("user/SET_USERINFO_HEADICON",t.url),e.$message({message:a.msg,type:"success",duration:1e3})}))},getUserOrganizes:function(){var t=this;Object(i["m"])().then((function(e){t.organizeList=e.data||[];var a=t.organizeList.filter((function(t){return t.isDefault}));if(!a.length)return t.activeOrganize="";var n=a[0];t.activeOrganize=n.id}))},getUserPositions:function(){var t=this;Object(i["n"])().then((function(e){t.positionList=e.data||[];var a=t.positionList.filter((function(t){return t.isDefault}));if(!a.length)return t.activePosition="";var n=a[0];t.activePosition=n.id}))},changeMajor:function(t,e){var a=this;if(this["active"+e]!==t){var n={majorId:t,majorType:e};Object(i["o"])(n).then((function(n){a["active"+e]=t,a.$message({message:n.msg,type:"success",duration:1500,onClose:function(){location.reload()}})}))}}}},f=m,p=(a("b56e"),a("2877")),g=Object(p["a"])(f,n,s,!1,null,"8b35df7a",null);e["default"]=g.exports},"5a0d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"justAuth"},[t._m(0),a("el-col",{staticClass:"mt-20",attrs:{span:22,offset:1}},[t._l(t.socialsList,(function(e,n){return[a("el-row",{key:n},[a("el-col",{staticClass:"col-img",attrs:{span:1}},[e.enname?a("img",{staticClass:"row-img",attrs:{src:e.logo,alt:""}}):t._e(),e.enname?t._e():a("img",{staticClass:"row-img",attrs:{src:"",alt:""}})]),a("el-col",{attrs:{span:21}},[a("div",{staticClass:"tag-group-div"},[a("span",{staticClass:"tag-group-span"},[t._v(t._s(e.name))]),e.entity?a("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v(" 已绑定 ")]):t._e(),e.entity?t._e():a("el-tag",{attrs:{type:"warning",effect:"dark"}},[t._v(" 未绑定 ")])],1),a("div",{staticClass:"tag-group-con"},[a("span",[t._v(t._s(e.describetion))])])]),a("el-col",{staticClass:"col-line-height",attrs:{span:1}},[e.entity?a("el-button",{attrs:{size:"small",type:""},on:{click:function(a){return t.deleteSocials(e.entity.userId,e.entity.id)}}},[t._v("解绑")]):t._e(),e.entity?t._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.binding(e.enname)}}},[t._v("绑定")])],1)],1),a("el-divider",{key:n,staticClass:"divider-margin"})]}))],2)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"JNPF-common-title mb-20"},[a("h2",{staticClass:"bold"},[t._v("第三方服务绑定")])])}],i=(a("a481"),a("19ac")),o={data:function(){return{socialsList:[],dialogVisible:!1,dialogSrt:"",listenerLoad:!1}},created:function(){this.init(),this.bindListener()},beforeDestroy:function(){window.removeEventListener("message",(function(){}))},methods:{init:function(){var t=this;this.loading=!0,Object(i["e"])().then((function(e){t.socialsList=e.data,t.loading=!1}))},binding:function(t){var e=this;Object(i["a"])(t).then((function(t){if(e.winURL&&!e.winURL.closed)return e.winURL.location.replace(t.msg),void e.winURL.focus();var a=750,n=500,s=(window.screen.width-a)/2,i=(window.screen.height-n)/2;e.winURL=window.open(t.msg,"_blank","height="+n+",innerHeight="+n+",width="+a+",innerWidth="+a+",top="+i+",left="+s+",toolbar=no,menubar=no,scrollbars=auto,resizeable=no,location=no,status=no")}))},bindListener:function(){var t=this;this.listenerLoad||window.addEventListener("message",(function(e){var a="string"===typeof e.data?JSON.parse(e.data):e.data;"200"==a.code&&t.$message({message:a.message,type:"success",duration:1e3,onClose:function(){t.init()}}),"201"==a.code&&t.$message({message:a.message,type:"error",duration:3e3,onClose:function(){t.init()}})})),this.listenerLoad=!0},deleteSocials:function(t,e){var a=this;this.$confirm("确定要解除该账号绑定?","提示",{type:"warning"}).then((function(){Object(i["b"])(t,e).then((function(t){a.$message({message:t.msg,type:"success",duration:1e3,onClose:function(){a.init()}})})),a.init()})).catch((function(){}))},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},iframeLoad:function(){window.addEventListener("message",this.handleMessage)},handleMessage:function(t){console.log(t)}}},r=o,l=(a("9ca0"),a("2877")),c=Object(l["a"])(r,n,s,!1,null,"00812894",null);e["default"]=c.exports},"5fbb":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"authorize"},[a("el-tabs",{staticClass:"JNPF-el_tabs",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"菜单权限",name:"module"}}),a("el-tab-pane",{attrs:{label:"按钮权限",name:"button"}}),a("el-tab-pane",{attrs:{label:"列表权限",name:"column"}}),a("el-tab-pane",{attrs:{label:"表单权限",name:"form"}}),a("el-tab-pane",{attrs:{label:"数据权限",name:"resource"}}),a("el-tab-pane",{attrs:{label:"门户权限",name:"portal"}}),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"treeBox",staticClass:"JNPF-common-el-tree",attrs:{data:t.treeData,props:t.defaultProps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1,"node-key":"id"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,s=e.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:s.icon}),a("span",{staticClass:"text"},[t._v(t._s(n.label))])])}}])})],1)],1)},s=[],i=a("1e85"),o={data:function(){return{treeData:[],info:[],activeTab:"module",defaultProps:{children:"children",label:"fullName"},loading:!1}},watch:{activeTab:function(t){this.treeData=this.info[t]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(i["a"])().then((function(e){t.info=e.data,t.treeData=t.info[t.activeTab],t.loading=!1}))}}},r=o,l=(a("2fd7"),a("2877")),c=Object(l["a"])(r,n,s,!1,null,"4f67ae91",null);e["default"]=c.exports},6110:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"password"},[t._m(0),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[a("el-input",{attrs:{placeholder:"旧密码","show-password":""},model:{value:t.dataForm.oldPassword,callback:function(e){t.$set(t.dataForm,"oldPassword",e)},expression:"dataForm.oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"新密码","show-password":""},model:{value:t.dataForm.password,callback:function(e){t.$set(t.dataForm,"password",e)},expression:"dataForm.password"}})],1),a("el-form-item",{attrs:{label:"重复密码",prop:"password2"}},[a("el-input",{attrs:{placeholder:"重复密码","show-password":""},model:{value:t.dataForm.password2,callback:function(e){t.$set(t.dataForm,"password2",e)},expression:"dataForm.password2"}})],1),a("el-form-item",{attrs:{label:"验证码",prop:"code"}},[a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{placeholder:"验证码"},model:{value:t.dataForm.code,callback:function(e){t.$set(t.dataForm,"code",e)},expression:"dataForm.code"}})],1),a("el-col",{staticStyle:{height:"32px"},attrs:{span:6,offset:1}},[a("img",{attrs:{id:"imgcode",alt:"点击切换验证码",title:"点击切换验证码",src:t.define.comUrl+t.imgUrl},on:{click:t.changeImg}})])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("保 存")])],1)],1)],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"JNPF-common-title mb-20"},[a("h2",{staticClass:"bold"},[t._v("修改密码")])])}],i=a("8237"),o=a.n(i),r=a("1e85"),l=a("f888"),c={data:function(){var t=this,e=function(e,a,n){var s=/[0-9]+/,i=/[a-z]+/,o=/[A-Z]+/,r=/\W/,l=/_/;""===a?n(new Error("新密码不能为空")):1==t.baseForm.passwordStrengthLimit?(t.baseForm.passwordLengthMin&&a.length<t.baseForm.passwordLengthMinNumber&&n(new Error("新密码长度不能小于"+t.baseForm.passwordLengthMinNumber+"位")),t.baseForm.containsNumbers&&(s.test(a)||n(new Error("新密码必须包含数字"))),t.baseForm.includeLowercaseLetters&&(i.test(a)||n(new Error("新密码必须包含小写字母"))),t.baseForm.includeUppercaseLetters&&(o.test(a)||n(new Error("新密码必须包含大写字母"))),t.baseForm.containsCharacters&&(r.test(a)||l.test(a)||n(new Error("新密码必须包含字符"))),""!==t.dataForm.password2&&t.$refs.dataForm.validateField("password2"),n()):(""!==t.dataForm.password2&&t.$refs.dataForm.validateField("password2"),n())},a=function(e,a,n){a!==t.dataForm.password?n(new Error("两次密码输入不一致")):n()};return{listLoading:!1,dataForm:{oldPassword:"",password:"",password2:"",code:""},baseForm:{passwordStrengthLimit:0,passwordLengthMin:!1,passwordLengthMinNumber:0,containsNumbers:!1,includeLowercaseLetters:!1,includeUppercaseLetters:!1,containsCharacters:!1},imgUrl:"",timestamp:"",dataRule:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],password:[{required:!0,validator:e,trigger:"blur"}],password2:[{required:!0,message:"重复密码不能为空",trigger:"blur"},{validator:a,trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},created:function(){this.changeImg(),this.initData()},methods:{initData:function(){var t=this;this.listLoading=!0,this.$nextTick((function(){Object(l["c"])().then((function(e){t.baseForm=e.data,t.baseForm.passwordLengthMin=!!t.baseForm.passwordLengthMin,t.baseForm.containsNumbers=!!t.baseForm.containsNumbers,t.baseForm.includeLowercaseLetters=!!t.baseForm.includeLowercaseLetters,t.baseForm.includeUppercaseLetters=!!t.baseForm.includeUppercaseLetters,t.baseForm.containsCharacters=!!t.baseForm.containsCharacters,t.listLoading=!1})).catch((function(){t.listLoading=!1}))}))},dataFormSubmit:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={oldPassword:o()(t.dataForm.oldPassword),password:o()(t.dataForm.password),code:t.dataForm.code,timestamp:t.timestamp};Object(r["e"])(a).then((function(e){t.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t.$store.dispatch("user/resetToken").then((function(){t.$router.push("/login")}))}})})).catch((function(){t.changeImg()}))}}))},changeImg:function(){var t=Math.random();this.timestamp=t,this.imgUrl="/api/file/ImageCode/".concat(t)}}},u=c,d=(a("dd1e"),a("2877")),m=Object(d["a"])(u,n,s,!1,null,"71503da3",null);e["default"]=m.exports},"6a12":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sysLog JNPF-flex-main"},[a("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[a("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择类型",clearable:""},model:{value:t.loginType,callback:function(e){t.loginType=e},expression:"loginType"}},[a("el-option",{attrs:{label:"登录",value:0}}),a("el-option",{attrs:{label:"退出",value:1}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:""},model:{value:t.loginMark,callback:function(e){t.loginMark=e},expression:"loginMark"}},[a("el-option",{attrs:{label:"成功",value:1}}),a("el-option",{attrs:{label:"失败",value:0}})],1)],1)],1),t.showAll?[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"timestamp",editable:!1,clearable:"","default-time":["00:00:00","23:59:59"],align:"right"},model:{value:t.pickerVal,callback:function(e){t.pickerVal=e},expression:"pickerVal"}})],1)],1)]:t._e(),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.search()}}},[t._v("\n            "+t._s(t.$t("common.search"))+"\n          ")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(e){return t.reset()}}},[t._v("\n            "+t._s(t.$t("common.reset"))+"\n          ")]),t.showAll?a("el-button",{attrs:{type:"text",icon:"el-icon-arrow-up"},on:{click:function(e){t.showAll=!1}}},[t._v("\n            收起")]):a("el-button",{attrs:{type:"text",icon:"el-icon-arrow-down"},on:{click:function(e){t.showAll=!0}}},[t._v("展开")])],1)],1)],2)],1),a("div",{staticClass:"JNPF-common-head"},[a("div",[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",loading:t.btnLoading},on:{click:t.handleDel}},[t._v("删除")]),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",underline:!1,disabled:t.btnLoading},on:{click:t.batchDel}},[t._v("\n        一键清空")])],1)]),a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.loginLogData,"tooltip-effect":"dark","has-c":""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"loginType",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"login-type-box"},[a("span",{staticClass:"circle-box",class:0==e.row.loginType?"circle-box-primary":"circle-box-error"}),t._v("\n          "+t._s(0==e.row.loginType?"登录":"退出")+"\n        ")])]}}])}),a("el-table-column",{attrs:{prop:"creatorTime",label:"时间",formatter:t.jnpf.tableDateFormat,width:"140"}}),a("el-table-column",{attrs:{prop:"userName",label:"用户"}}),a("el-table-column",{attrs:{prop:"ipAddress",label:"IP地址"}}),a("el-table-column",{attrs:{prop:"ipAddressName",label:"地点"}}),a("el-table-column",{attrs:{prop:"browser",label:"浏览器"}}),a("el-table-column",{attrs:{prop:"platForm",label:"操作系统"}}),a("el-table-column",{attrs:{prop:"requestDuration",label:"耗时(毫秒)","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"loginMark",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1==e.row.loginMark?"success":"danger"}},[t._v("\n          "+t._s(1==e.row.loginMark?"成功":"失败")+"\n        ")])]}}])}),a("el-table-column",{attrs:{prop:"abstracts",label:"操作说明",width:"120","show-overflow-tooltip":""}})],1),a("pagination",{attrs:{total:t.total,page:t.listQuery.currentPage,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"currentPage",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.initData}})],1)},s=[],i=a("5530"),o=a("1e85"),r=a("a457"),l={name:"sysLog",data:function(){return{btnLoading:!1,showAll:!1,keyword:"",loginMark:"",loginType:"",startTime:"",endTime:"",loginLogData:[],multipleSelection:[],total:0,listLoading:!0,listQuery:{currentPage:1,pageSize:20,sort:"desc"},pickerVal:[]}},created:function(){this.initData()},methods:{initData:function(){var t=this,e=1;this.listLoading=!0;var a=Object(i["a"])(Object(i["a"])({},this.listQuery),{},{keyword:this.keyword,startTime:this.startTime,endTime:this.endTime,loginMark:this.loginMark,loginType:this.loginType,category:e});Object(o["b"])(a).then((function(e){t.loginLogData=e.data.list,t.total=e.data.pagination.total,t.listLoading=!1,t.btnLoading=!1}))},handleSelectionChange:function(t){var e=t.map((function(t){return t.id}));this.multipleSelection=e},search:function(){this.btnLoading=!0,this.pickerVal&&this.pickerVal.length?(this.startTime=this.pickerVal[0],this.endTime=this.pickerVal[1]):(this.startTime="",this.endTime=""),this.initData()},batchDel:function(){var t=this;this.loginLogData.length&&(this.btnLoading=!0,this.$confirm("此操作会将所有日志删除，是否继续?","提示",{type:"warning"}).then((function(){Object(r["c"])().then((function(e){t.$message({type:"success",message:e.msg,duration:1500,onClose:function(){t.initData()}})})).catch((function(){t.btnLoading=!1}))})).catch((function(){t.btnLoading=!1})))},handleDel:function(){var t=this;if(this.multipleSelection.length){var e={ids:this.multipleSelection};this.$confirm("您确定要删除这些数据吗, 是否继续?","提示",{type:"warning"}).then((function(){t.btnLoading=!0,Object(r["b"])(e).then((function(e){t.$message({type:"success",message:e.msg,duration:1500,onClose:function(){t.initData()}})})).catch((function(){t.btnLoading=!1}))})).catch((function(){t.btnLoading=!1}))}else this.$message({type:"error",message:"请选择一条数据",duration:1500})},reset:function(){this.btnLoading=!0,this.keyword="",this.list=[],this.pickerVal=[],this.startTime="",this.endTime="",this.loginMark="",this.loginType="",this.listQuery={currentPage:1,pageSize:20,sort:"desc"},this.initData()}}},c=l,u=(a("28c0"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"4234db8e",null);e["default"]=d.exports},"6aac":function(t,e,a){},8623:function(t,e,a){"use strict";a("f3d9")},9305:function(t,e,a){},"933c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userInfo"},[a("el-tabs",{staticClass:"JNPF-el_tabs"},[a("el-tab-pane",{attrs:{label:"账户信息"}},[a("el-col",{attrs:{span:12}},[a("el-form",{attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账户"}},[a("el-input",{attrs:{readonly:""},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("el-form-item",{attrs:{label:"所属组织"}},[a("el-input",{attrs:{readonly:""},model:{value:t.form.organize,callback:function(e){t.$set(t.form,"organize",e)},expression:"form.organize"}})],1),a("el-form-item",{attrs:{label:"直属主管"}},[a("el-input",{attrs:{readonly:""},model:{value:t.form.manager,callback:function(e){t.$set(t.form,"manager",e)},expression:"form.manager"}})],1),a("el-form-item",{attrs:{label:"岗位"}},[a("el-input",{attrs:{readonly:""},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),a("el-form-item",{attrs:{label:"职级"}},[a("el-input",{attrs:{readonly:""},model:{value:t.form.ranks,callback:function(e){t.$set(t.form,"ranks",e)},expression:"form.ranks"}})],1),a("el-form-item",{attrs:{label:"角色"}},[a("el-input",{attrs:{readonly:""},model:{value:t.form.roleId,callback:function(e){t.$set(t.form,"roleId",e)},expression:"form.roleId"}})],1),a("el-form-item",{attrs:{label:"注册时间"}},[a("el-input",{attrs:{readonly:""},model:{value:t.creatorTime,callback:function(e){t.creatorTime=e},expression:"creatorTime"}})],1),a("el-form-item",{attrs:{label:"上次登录"}},[a("el-input",{attrs:{readonly:""},model:{value:t.prevLogTime,callback:function(e){t.prevLogTime=e},expression:"prevLogTime"}})],1),a("el-form-item",{attrs:{label:"入职日期"}},[a("el-input",{attrs:{readonly:""},model:{value:t.entryDate,callback:function(e){t.entryDate=e},expression:"entryDate"}})],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"个人资料"}},[a("el-form",{ref:"dataForm",attrs:{model:t.form2,rules:t.form2Rule,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{model:{value:t.form2.realName,callback:function(e){t.$set(t.form2,"realName",e)},expression:"form2.realName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别"}},[a("el-select",{attrs:{placeholder:"选择性别"},model:{value:t.form2.gender,callback:function(e){t.$set(t.form2,"gender",e)},expression:"form2.gender"}},t._l(t.genderOptions,(function(t){return a("el-option",{key:t.enCode,attrs:{label:t.fullName,value:t.enCode}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"民族"}},[a("el-select",{attrs:{placeholder:"选择民族",filterable:""},model:{value:t.form2.nation,callback:function(e){t.$set(t.form2,"nation",e)},expression:"form2.nation"}},t._l(t.nationOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.fullName,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"籍贯"}},[a("el-input",{model:{value:t.form2.nativePlace,callback:function(e){t.$set(t.form2,"nativePlace",e)},expression:"form2.nativePlace"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"证件类型"}},[a("el-select",{attrs:{placeholder:"请选择类型",filterable:""},model:{value:t.form2.certificatesType,callback:function(e){t.$set(t.form2,"certificatesType",e)},expression:"form2.certificatesType"}},t._l(t.certificatesTypeOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.fullName,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"证件号码"}},[a("el-input",{model:{value:t.form2.certificatesNumber,callback:function(e){t.$set(t.form2,"certificatesNumber",e)},expression:"form2.certificatesNumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"文化程度"}},[a("el-select",{attrs:{placeholder:"请选择学历",filterable:""},model:{value:t.form2.education,callback:function(e){t.$set(t.form2,"education",e)},expression:"form2.education"}},t._l(t.educationOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.fullName,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出生年月"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp",format:"yyyy-MM-dd"},model:{value:t.form2.birthday,callback:function(e){t.$set(t.form2,"birthday",e)},expression:"form2.birthday"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办公电话"}},[a("el-input",{model:{value:t.form2.telePhone,callback:function(e){t.$set(t.form2,"telePhone",e)},expression:"form2.telePhone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办公座机"}},[a("el-input",{model:{value:t.form2.landline,callback:function(e){t.$set(t.form2,"landline",e)},expression:"form2.landline"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{model:{value:t.form2.mobilePhone,callback:function(e){t.$set(t.form2,"mobilePhone",e)},expression:"form2.mobilePhone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电子邮箱"}},[a("el-input",{model:{value:t.form2.email,callback:function(e){t.$set(t.form2,"email",e)},expression:"form2.email"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"紧急联系"}},[a("el-input",{model:{value:t.form2.urgentContacts,callback:function(e){t.$set(t.form2,"urgentContacts",e)},expression:"form2.urgentContacts"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"紧急电话"}},[a("el-input",{model:{value:t.form2.urgentTelePhone,callback:function(e){t.$set(t.form2,"urgentTelePhone",e)},expression:"form2.urgentTelePhone"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"通讯地址"}},[a("el-input",{model:{value:t.form2.postalAddress,callback:function(e){t.$set(t.form2,"postalAddress",e)},expression:"form2.postalAddress"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"自我介绍"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.form2.signature,callback:function(e){t.$set(t.form2,"signature",e)},expression:"form2.signature"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("保 存")])],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"个人签名"}},[a("el-row",{staticClass:"sign",attrs:{gutter:40}},[a("div",{staticStyle:{cursor:"pointer"},on:{click:t.addSign}},[a("el-col",{staticClass:"sign-item",attrs:{span:6}},[a("div",{staticClass:"add-sign"},[a("i",{staticClass:"add-icon el-icon-plus"})])])],1),t._l(t.signList,(function(e,n){return[a("el-col",{key:n,staticClass:"sign-item",attrs:{span:6}},[a("div",{class:e.isDefault?"add-sign active":"add-sign"},[a("img",{staticClass:"sign-img",attrs:{src:e.signImg,alt:""}}),e.isDefault?a("div",{staticClass:"icon-checked1"},[a("i",{staticClass:" el-icon-check"})]):t._e(),e.isDefault?t._e():a("div",{staticClass:"add-button"},[a("el-button",{on:{click:function(a){return t.deleteSign(e.id)}}},[t._v("删除")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.updateDefault(e.id,e.signImg)}}},[t._v("设为默认\n                ")])],1)])])]}))],2)],1)],1),t.signVisible?a("SignImgDialog",{ref:"SignImg",attrs:{lineWidth:3,userInfo:t.userInfo,isDefault:0},on:{close:t.closeDialog}}):t._e()],1)},s=[],i=(a("ac6a"),a("456d"),a("5530")),o=a("1e85"),r=a("2f62"),l=a("a84c"),c={components:{SignImgDialog:l["a"]},props:{user:{type:Object,default:function(){return{}}}},data:function(){return{form:{},form2:{realName:"",signature:"",gender:1,nation:"",nativePlace:"",certificatesType:"",certificatesNumber:"",education:"",birthday:null,telePhone:"",landline:"",mobilePhone:"",email:"",urgentContacts:"",urgentTelePhone:"",postalAddress:""},form2Rule:{realName:[{required:!0,message:"姓名不能为空",trigger:"blur"}]},certificatesTypeOptions:[],educationOptions:[],genderOptions:[],nationOptions:[],signVisible:!1,signImg:"",signList:[]}},computed:Object(i["a"])({creatorTime:function(){return this.jnpf.toDate(this.form.creatorTime)},entryDate:function(){return this.jnpf.toDate(this.form.entryDate)},prevLogTime:function(){return this.jnpf.toDate(this.form.prevLogTime)}},Object(r["b"])(["userInfo"])),created:function(){this.getOptions(),this.getInfo(),this.getSign()},methods:{closeDialog:function(){this.signVisible=!1,this.getSign()},getSign:function(){var t=this;Object(o["k"])().then((function(e){t.signList=e.data||[]}))},deleteSign:function(t){var e=this;Object(o["j"])(t).then((function(t){e.$message({message:t.msg,type:"success",duration:1500}),e.getSign()}))},updateDefault:function(t,e){var a=this;Object(o["p"])(t).then((function(t){a.$message({message:t.msg,type:"success",duration:1500}),a.$store.commit("user/SET_USERINFO_SIGNIMG",e),a.getSign()})).catch((function(t){a.getSign()}))},addSign:function(){var t=this;this.signVisible=!0,this.$nextTick((function(){t.$refs.SignImg.init()}))},getOptions:function(){var t=this;this.$store.dispatch("base/getDictionaryData",{sort:"Education"}).then((function(e){t.educationOptions=JSON.parse(JSON.stringify(e)),t.$store.dispatch("base/getDictionaryData",{sort:"certificateType"}).then((function(e){t.certificatesTypeOptions=JSON.parse(JSON.stringify(e))})),t.$store.dispatch("base/getDictionaryData",{sort:"sex"}).then((function(e){t.genderOptions=JSON.parse(JSON.stringify(e))})),t.$store.dispatch("base/getDictionaryData",{sort:"Nation"}).then((function(e){t.nationOptions=JSON.parse(JSON.stringify(e))}))}))},getInfo:function(){this.form=this.user;for(var t=0,e=Object.keys(this.form2);t<e.length;t++){var a=e[t];this.form2[a]=this.form[a]}},dataFormSubmit:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&Object(o["g"])(t.form2).then((function(e){t.$message({message:e.msg,type:"success",duration:1500}),t.$emit("updateInfo"),t.$store.commit("user/SET_USERINFO_USERNAME",t.form2.realName)}))}))}}},u=c,d=(a("8623"),a("2877")),m=Object(d["a"])(u,n,s,!1,null,"7fd9453e",null);e["default"]=m.exports},"999e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,"label-width":"100px"}},[a("div",{staticClass:"JNPF-common-title mb-20"},[a("h2",{staticClass:"bold"},[t._v("租户信息")])]),a("el-row",{staticClass:"custom-row",attrs:{gutter:20}},[a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"租户名称",prop:"tenantName"}},[a("p",[t._v(t._s(t.tenantData.tenantName))])])],1),a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"租户号",prop:"tenantId"}},[a("p",[t._v(t._s(t.tenantData.tenantId))])])],1),a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"有效期",prop:"validTime"}},[a("p",[t._v(t._s(t.tenantData.validTime))])])],1),a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"域名",prop:"domain"}},[a("p",[t._v(t._s(t.tenantData.domain))])])],1)],1),a("div",{staticClass:"JNPF-common-title mb-20"},[a("h2",{staticClass:"bold"},[t._v("单位信息")])]),a("el-row",{staticClass:"custom-row",attrs:{gutter:20}},[a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"单位简称",prop:"unitShortName"}},[a("p",[t._v(t._s(t.tenantData.unitInfoJson.unitShortName))])])],1),a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"信用代码"}},[a("p",[t._v(t._s(t.tenantData.unitInfoJson.unitCreditCode))])])],1),a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"单位性质"}},[a("p",[t._v(t._s(t.unitNature))])])],1),a("el-col",{attrs:{sm:24,xs:24}},[a("el-form-item",{attrs:{label:"详细地址",prop:"account"}},[a("p",[t._v(t._s(t.tenantData.unitInfoJson.unitAddress))])])],1),a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"单位简介",prop:"unitDescription"}},[a("p",[t._v(t._s(t.tenantData.unitInfoJson.unitDescription))])])],1)],1),a("div",{staticClass:"JNPF-common-title mb-20"},[a("h2",{staticClass:"bold"},[t._v("联系人信息")])]),a("el-row",{staticClass:"custom-row",attrs:{gutter:20}},[a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"联系人",prop:"contacts"}},[a("p",[t._v(t._s(t.tenantData.userInfoJson.contacts))])])],1),a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"联系邮箱",prop:"contactEmail"}},[a("p",[t._v(t._s(t.tenantData.userInfoJson.contactEmail))])])],1),a("el-col",{attrs:{sm:12,xs:24}},[a("el-form-item",{attrs:{label:"联系电话",prop:"contactPhone"}},[a("p",[t._v(t._s(t.tenantData.userInfoJson.contactPhone))])])],1)],1)],1)],1)},s=[],i=(a("ac6a"),{props:{tenantData:{type:Object,default:function(){return{}}}},data:function(){return{formLoading:!1,dataForm:{},unitNatureList:[{fullName:"个体户",id:0},{fullName:"合伙企业",id:1},{fullName:"集体企业",id:2},{fullName:"私营企业",id:3},{fullName:"国有企业",id:4}]}},computed:{unitNature:function(){var t=this,e="";return this.unitNatureList.forEach((function(a){a.id===t.tenantData.unitInfoJson.unitNature&&(e=a.fullName)})),e}},created:function(){},methods:{}}),o=i,r=a("2877"),l=Object(r["a"])(o,n,s,!1,null,null,null);e["default"]=l.exports},"9ca0":function(t,e,a){"use strict";a("2ff2")},a457:function(t,e,a){"use strict";a.d(e,"e",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return l}));var n=a("b775");function s(t){return Object(n["a"])({url:"/api/system/Log",method:"GET",data:t})}function i(t){return Object(n["a"])({url:"/api/system/Log/".concat(t),method:"GET"})}function o(t){return Object(n["a"])({url:"/api/system/Log",method:"DELETE",data:t})}function r(t){return Object(n["a"])({url:"/api/system/Log/".concat(t),method:"DELETE"})}function l(t){return Object(n["a"])({url:"/api/system/Log/deleteLoginLog",method:"DELETE"})}},b56e:function(t,e,a){"use strict";a("9305")},dd1e:function(t,e,a){"use strict";a("fc81")},f3d9:function(t,e,a){},f84d:function(t,e,a){},fc81:function(t,e,a){}}]);