(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b0f38de6"],{"0287":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"popupSelect-container"},[i("div",{staticClass:"el-select",on:{click:function(t){return t.stopPropagation(),e.openDialog(t)}}},[e.multiple?i("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%",cursor:"pointer"}},[e.collapseTags&&e.tagsList.length?i("span",[i("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,type:"info","disable-transitions":""},on:{close:function(t){return e.deleteTag(t,0)}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.tagsList[0].fullName))])]),e.tagsList.length>1?i("el-tag",{attrs:{closable:!1,type:"info","disable-transitions":""}},[i("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.tagsList.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():i("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.tagsList,(function(t,n){return i("el-tag",{key:t.id,attrs:{size:e.collapseTagSize,closable:!e.selectDisabled,type:"info","disable-transitions":""},on:{close:function(t){return e.deleteTag(t,n)}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.fullName))])])})),1)],1):e._e(),i("el-input",{ref:"reference",attrs:{type:"text",placeholder:e.currentPlaceholder,disabled:e.selectDisabled,readonly:"","validate-event":!1,tabindex:e.multiple?"-1":null},nativeOn:{mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}},[i("template",{slot:"suffix"},[i("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-arrow-up"]}),e.showClose?i("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2)],1),i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center transfer-dialog",attrs:{title:"候选人员","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"800px","modal-append-to-body":!1},on:{"update:visible":function(t){e.visible=t},close:e.onClose}},[i("div",{staticClass:"transfer__body"},[i("div",{staticClass:"transfer-pane"},[i("div",{staticClass:"transfer-pane__tools"},[i("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),i("div",{staticClass:"transfer-pane__body left-pane"},[i("div",{staticClass:"custom-title"},[e._v("全部数据")]),i("div",{ref:"candidate",staticClass:"single-list"},[e.list.length?e._l(e.list,(function(t,n){return i("div",{key:n,staticClass:"selected-item-user",on:{click:function(i){return e.handleNodeClick(t)}}},[i("div",{staticClass:"selected-item-main"},[i("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),i("div",{staticClass:"selected-item-text"},[i("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),i("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])])],1)])})):i("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)])]),i("div",{staticClass:"transfer-pane"},[i("div",{staticClass:"transfer-pane__tools"},[i("span",[e._v("已选")]),i("el-button",{staticClass:"removeAllBtn",attrs:{type:"text"},on:{click:e.removeAll}},[e._v("清空列表")])],1),i("div",{staticClass:"transfer-pane__body shadow right-pane"},[e.selectedData.length?e._l(e.selectedData,(function(t,n){return i("div",{key:n,staticClass:"selected-item-user"},[i("div",{staticClass:"selected-item-main"},[i("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),i("div",{staticClass:"selected-item-text"},[i("p",{staticClass:"name"},[e._v(e._s(t.fullName)+"\n                    "),i("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.removeData(n)}}})]),i("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])])],1)])})):i("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])],1)},a=[],o=i("ade3"),s=i("2909"),r=i("5530"),l=(i("386d"),i("e200")),c=i("b3f4"),d=i("2f7b"),u={name:"CandidateUser",inject:{elForm:{default:""},elFormItem:{default:""}},props:{value:{type:[String,Array],default:""},placeholder:{type:String,default:"请选择"},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},collapseTags:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},taskId:{type:String,default:""},nodeId:{type:String,default:""},formData:{type:Object,default:function(){return{}}},size:String},data:function(){return{visible:!1,innerValue:"",loading:!1,listQuery:{keyword:"",currentPage:1,pageSize:20},total:0,list:[],listLoading:!0,selectedData:[],tagsList:[],inputHovering:!1,inputWidth:0,initialInputHeight:0,finish:!1}},watch:{value:function(e){this.setDefault()},selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))}},computed:{showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.selectDisabled&&this.inputHovering&&e;return t},currentPlaceholder:function(){return this.multiple&&Array.isArray(this.value)&&this.value.length?"":this.placeholder},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"}},created:function(){this.setDefault()},mounted:function(){var e=this;Object(d["a"])(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var i={medium:36,small:32,mini:28},n=t.$el.querySelector("input");this.initialInputHeight=n.getBoundingClientRect().height||i[this.selectSize]}this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setDefault()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(d["b"])(this.$el,this.handleResize)},methods:Object(o["a"])(Object(o["a"])({onClose:function(){},clear:function(){this.disabled||(this.innerValue="",this.selectedData=[],this.$emit("input",""),this.$emit("change","",""))},openDialog:function(){var e=this;this.disabled||(this.visible=!0,this.finish=!1,this.listQuery.keyword="",this.$nextTick((function(){e.bindScroll(),e.search(),e.setDefault()})))},confirm:function(){if(this.multiple){this.innerValue="",this.tagsList=JSON.parse(JSON.stringify(this.selectedData));var e=this.selectedData.map((function(e){return e.id}));this.$emit("input",e),this.$emit("change",e,this.selectedData)}else{if(!this.selectedData.length)return this.innerValue="",this.$emit("input",""),this.$emit("change","",{}),void(this.visible=!1);this.innerValue=this.selectedData[0].fullName;var t=this.selectedData.map((function(e){return e.id}));this.$emit("input",t[0]),this.$emit("change",t[0],this.selectedData[0])}this.visible=!1},bindScroll:function(){var e=this,t=e.$refs.candidate;t.addEventListener("scroll",(function(){t.scrollHeight-t.clientHeight-t.scrollTop<=200&&!e.listLoading&&!e.finish&&(e.listQuery.currentPage+=1,e.initData())}))},search:function(){this.listQuery.currentPage=1,this.listQuery.pageSize=20,this.list=[],this.finish=!1,this.initData()},initData:function(){var e=this;this.listLoading=!0;var t=Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.listQuery),this.formData),{},{nodeCode:this.nodeId});Object(l["f"])(this.taskId||0,t).then((function(t){t.data.list.length<e.listQuery.pageSize&&(e.finish=!0),e.list=[].concat(Object(s["a"])(e.list),Object(s["a"])(t.data.list)),e.total=t.data.pagination.total,e.listLoading=!1}))},handleNodeClick:function(e){var t=this.selectedData.some((function(t){return t.id===e.id}));t||(this.multiple?this.selectedData.push(e):this.selectedData=[e])},removeAll:function(){this.selectedData=[]},removeData:function(e){this.selectedData.splice(e,1)},setDefault:function(){var e=this;if(!this.value||!this.value.length)return this.innerValue="",this.selectedData=[],void(this.tagsList=[]);var t=this.multiple?this.value:[this.value];Object(c["q"])(t).then((function(t){e.selectedData=t.data.list,e.multiple?(e.innerValue="",e.tagsList=JSON.parse(JSON.stringify(e.selectedData))):e.innerValue=e.selectedData.length?e.selectedData[0].fullName:"",e.$nextTick((function(){e.multiple&&e.resetInputHeight()}))}))},deleteTag:function(e,t){this.selectedData.splice(t,1),this.confirm(),e.stopPropagation()},handleClearClick:function(e){this.selectedData=[],this.confirm(),e.stopPropagation()},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,i=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],n=e.$refs.tags,a=n?Math.round(n.getBoundingClientRect().height):0,o=e.initialInputHeight||40;i.style.height=0===e.selectedData.length?o+"px":Math.max(n?a+(a>o?6:0):0,o)+"px"}}))}},"resetInputWidth",(function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width})),"handleResize",(function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()}))},f=u,p=i("2877"),m=Object(p["a"])(f,n,a,!1,null,null,null);t["default"]=m.exports},"0292":function(e,t,i){"use strict";i("deb4")},"0723":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:e.setting.title,"close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"1000px","destroy-on-close":""},on:{"update:visible":function(t){e.visible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main"},[i(e.currentView,{ref:"form",tag:"component",attrs:{config:e.setting},on:{setLoad:e.setLoad,setCandidateLoad:e.setCandidateLoad,setPageLoad:e.setPageLoad}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)])},a=[],o=(i("a481"),i("e200")),s={data:function(){return{currentView:"",setting:{},flowFormInfo:{},flowTaskInfo:{},visible:!1,loading:!1,btnLoading:!1}},methods:{init:function(e){this.loading=!0,this.setting=e,this.visible=!0,this.getBeforeInfo(e)},getBeforeInfo:function(e){var t=this;Object(o["h"])(e.id,{taskNodeId:e.taskNodeId,flowId:e.flowId}).then((function(n){t.flowFormInfo=n.data.flowFormInfo,t.flowTaskInfo=n.data.flowTaskInfo,e.fullName=t.flowTaskInfo.fullName,t.flowUrgent=t.flowTaskInfo.flowUrgent||1,e.status=t.flowTaskInfo.status,e.type=t.flowTaskInfo.type,e.formData=n.data.formData||{},e.draftData=n.data.draftData||null;var a=2==t.flowFormInfo.formType?"workFlow/workFlowForm/dynamicForm":t.flowFormInfo.urlAddress?t.flowFormInfo.urlAddress.replace(/\s*/g,""):"workFlow/workFlowForm/".concat(t.flowFormInfo.enCode);if(t.currentView=function(e){return Promise.all([i.e("chunk-commons"),i.e("chunk-0a3199aa"),i.e("chunk-c4505e8c"),i.e("chunk-07f03f03"),i.e("chunk-369a0e14")]).then(function(){var t=[i("4b3b")("./".concat(a))];e.apply(null,t)}.bind(this)).catch(i.oe)},e.formConf=n.data.flowFormInfo.propertyJson,1!=e.opType&&(e.readonly=!0),e.formOperates=n.data.formOperates||[],0==e.opType)for(var o=0;o<e.formOperates.length;o++)e.formOperates[o].write=!1;t.setting=e})).catch((function(){t.loading=!1}))},setPageLoad:function(e){this.loading=!!e},setCandidateLoad:function(e){this.candidateLoading=!!e},setLoad:function(e){this.btnLoading=!!e}}},r=s,l=(i("1cba"),i("2877")),c=Object(l["a"])(r,n,a,!1,null,"2a094ef0",null);t["default"]=c.exports},"0d29":function(e,t,i){},"19e4":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-center"}},[i("div",{staticClass:"JNPF-preview-main order-form"},[i("div",{staticClass:"JNPF-common-page-header"},[i("el-page-header",{attrs:{content:e.title},on:{back:e.goBack}}),i("div",{staticClass:"options"},[i("el-button",{on:{click:function(t){return e.goBack()}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)],1),i("div",{staticClass:"main"},[i("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,hasNO:!1}},[i("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),i("el-table-column",{attrs:{prop:"fullName",label:"事件名称","show-overflow-tooltip":"",width:"150"}}),i("el-table-column",{attrs:{prop:"interfaceName",label:"接口名称","show-overflow-tooltip":"",width:"150"}}),i("el-table-column",{attrs:{prop:"interfaceCode",label:"接口编码",width:"150"}}),i("el-table-column",{attrs:{prop:"creatorTime",label:"执行时间",width:"140",formatter:e.jnpf.tableDateFormat}}),i("el-table-column",{attrs:{label:"执行结果","min-width":"200",prop:"result"}})],1)],1)])])},a=[],o=i("e200"),s={components:{},data:function(){return{title:"",taskNodeId:"",listLoading:!1,list:[]}},methods:{goBack:function(){this.$emit("close")},init:function(e,t){this.taskNodeId=e||"",this.title=t+"审批节点名称",this.initData()},initData:function(){var e=this;this.listLoading=!0,Object(o["s"])(this.taskNodeId).then((function(t){e.list=t.data.list||[],e.listLoading=!1}))}}},r=s,l=i("2877"),c=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=c.exports},"1cba":function(e,t,i){"use strict";i("3bc4")},"1dbd":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,"append-to-body":"",title:"加签",width:"600px"},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[i("el-form",{ref:"hasFreeApproverForm",attrs:{rules:e.rules,model:e.hasFreeApproverForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"加签人员",prop:"freeApproverUserId"}},[i("JnpfUserSelect",{attrs:{placeholder:"请选择加签人员"},model:{value:e.hasFreeApproverForm.freeApproverUserId,callback:function(t){e.$set(e.hasFreeApproverForm,"freeApproverUserId",t)},expression:"hasFreeApproverForm.freeApproverUserId"}})],1),i("el-form-item",{attrs:{label:"加签类型"}},[i("el-radio-group",{model:{value:e.hasFreeApproverForm.freeApproverType,callback:function(t){e.$set(e.hasFreeApproverForm,"freeApproverType",t)},expression:"hasFreeApproverForm.freeApproverType"}},[i("el-radio-button",{attrs:{label:1}},[e._v("审批前")]),i("el-radio-button",{attrs:{label:2}},[e._v("审批后")])],1),1==e.hasFreeApproverForm.freeApproverType?i("div",[e._v("加签后，流程先经过加签审批人，再由我审批")]):i("div",[e._v("审批后加签，即表示同意该申请并增加审批人员")])],1),e.branchList.length&&2===e.hasFreeApproverForm.freeApproverType?i("el-form-item",{attrs:{label:"分支选择",prop:"branchList"}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择审批分支",clearable:"",filterable:""},on:{change:e.onBranchChange},model:{value:e.hasFreeApproverForm.branchList,callback:function(t){e.$set(e.hasFreeApproverForm,"branchList",t)},expression:"hasFreeApproverForm.branchList"}},e._l(e.branchList,(function(e){return i("el-option",{key:e.nodeId,attrs:{label:e.nodeName,value:e.nodeId}})})),1)],1):e._e(),2==e.hasFreeApproverForm.freeApproverType?i("div",e._l(e.hasFreeApproverForm.candidateList,(function(t,n){return i("el-form-item",{key:n,attrs:{label:t.nodeName+t.label,prop:"candidateList."+n+".value",rules:t.rules}},[t.hasCandidates?i("candidate-user-select",{attrs:{multiple:"",placeholder:"请选择"+t.label,taskId:e.taskId,formData:e.formData,nodeId:t.nodeId},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):i("JnpfUserSelect",{attrs:{multiple:"",placeholder:"请选择"+t.label,title:"候选人员"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1)})),1):e._e(),e.properties&&e.properties.hasOpinion?i("el-form-item",{attrs:{label:"加签原因",prop:"handleOpinion"}},[i("el-input",{attrs:{placeholder:"请输入加签原因",type:"textarea",rows:4},model:{value:e.hasFreeApproverForm.handleOpinion,callback:function(t){e.$set(e.hasFreeApproverForm,"handleOpinion",t)},expression:"hasFreeApproverForm.handleOpinion"}})],1):e._e(),e.properties&&e.properties.hasOpinion?i("el-form-item",{attrs:{label:"加签附件",prop:"fileList"}},[i("JnpfUploadFile",{attrs:{limit:3},model:{value:e.hasFreeApproverForm.fileList,callback:function(t){e.$set(e.hasFreeApproverForm,"fileList",t)},expression:"hasFreeApproverForm.fileList"}})],1):e._e(),e.properties&&e.properties.hasSign?i("el-form-item",{attrs:{label:"手写签名",required:""}},[i("div",{staticClass:"sign-main"},[e.signImg?i("img",{staticClass:"sign-img",attrs:{src:e.signImg,alt:""}}):e._e(),i("div",{staticClass:"sign-style",on:{click:e.addSign}},[i("i",{staticClass:"icon-ym icon-ym-signature add-sign"}),e.signImg?e._e():i("span",{staticClass:"sign-title"},[e._v("手写签名")])])])]):e._e()],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.close}},[e._v(e._s(e.formConf.cancelButtonText||"取 消"))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton")))])],1),e.signVisible?i("SignImgDialog",{ref:"SignImg",attrs:{lineWidth:3,userInfo:e.userInfo,isDefault:1},on:{close:e.signDialog}}):e._e()],1)},a=[],o=i("2909"),s=i("5530"),r=i("e200"),l=i("a84c"),c=i("0287"),d=i("2f62"),u={components:{CandidateUserSelect:c["default"],SignImgDialog:l["a"]},props:["taskId","formData","properties"],data:function(){return{key:+new Date,formConf:{},currentView:"",hasFreeApproverForm:{freeApproverUserId:"",freeApproverType:1,handleOpinion:"",fileList:[],branchList:[],candidateList:[]},branchList:[],candidateType:1,btnLoading:!1,freeApproverUserId:"",rules:{freeApproverUserId:[{required:!0,message:"加签人员不能为空",trigger:"change"}],branchList:[{required:!0,message:"选择分支不能为空",trigger:"click"}]},signImg:"",signVisible:!1}},computed:Object(s["a"])({},Object(d["b"])(["userInfo"])),methods:{onOpen:function(){var e=this;this.signImg="",this.properties&&this.properties.hasSign&&(this.signImg=this.userInfo.signImg),Object(r["g"])(this.taskId,this.formData).then((function(t){var i=t.data;if(e.candidateType=i.type,e.candidateLoading=!1,e.branchList=[],1==i.type){e.branchList=t.data.list.filter((function(e){return e.isBranchFlow}));var n=t.data.list.filter((function(e){return!e.isBranchFlow&&e.isCandidates}));e.hasFreeApproverForm.candidateList=n.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{isDefault:!0,label:"审批人",value:[],rules:[{required:!0,message:"审批人不能为空",trigger:"click"}]})})),e.$nextTick((function(){e.$refs["hasFreeApproverForm"].resetFields()}))}else if(2==i.type){var a=t.data.list.filter((function(e){return e.isCandidates}));e.hasFreeApproverForm.candidateList=a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{label:"审批人",value:[],rules:[{required:!0,message:"审批人不能为空",trigger:"click"}]})})),e.$nextTick((function(){e.$refs["hasFreeApproverForm"].resetFields()}))}}))},onClose:function(){this.$emit("update:visible",!1)},close:function(e){this.$emit("update:visible",!1)},onBranchChange:function(e){var t=this.hasFreeApproverForm.candidateList.filter((function(e){return e.isDefault}));if(!e.length)return this.hasFreeApproverForm.candidateList=t;for(var i=[],n=0;n<e.length;n++)e:for(var a=0;a<this.branchList.length;a++){var r=this.branchList[a];if(e[n]===r.nodeId&&r.isCandidates){i.push(Object(s["a"])(Object(s["a"])({},r),{},{label:"审批人",value:[],rules:[{required:!0,message:"审批人不能为空",trigger:"click"}]}));break e}}this.hasFreeApproverForm.candidateList=[].concat(Object(o["a"])(t),i)},dataFormSubmit:function(){var e=this;this.$refs["hasFreeApproverForm"].validate((function(t){if(t){e.btnLoading=!0;var i={handleOpinion:e.hasFreeApproverForm.handleOpinion,fileList:e.hasFreeApproverForm.fileList,freeApproverType:e.hasFreeApproverForm.freeApproverType,freeApproverUserId:e.hasFreeApproverForm.freeApproverUserId,branchList:e.hasFreeApproverForm.branchList,formData:e.formData.formData};if(e.hasFreeApproverForm.candidateList.length){for(var n={},a=0;a<e.hasFreeApproverForm.candidateList.length;a++)n[e.hasFreeApproverForm.candidateList[a].nodeId]=e.hasFreeApproverForm.candidateList[a].value;i.candidateList=n}e.signImg&&(i.signImg=e.signImg),Object(r["j"])(e.taskId,i).then((function(t){e.$message({type:"success",message:t.msg,duration:1e3,onClose:function(){e.btnLoading=!1,e.$emit("close",!0)}})})).catch((function(){e.btnLoading=!1}))}}))},addSign:function(){var e=this;this.signVisible=!0,this.$nextTick((function(){e.$refs.SignImg.init()}))},signDialog:function(e){this.signVisible=!1,e&&(this.signImg=e)}}},f=u,p=(i("8ebd"),i("2877")),m=Object(p["a"])(f,n,a,!1,null,"bfe2c2d6",null);t["default"]=m.exports},"226a":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"JNPF-preview-main flow-form-main"},[i("div",{staticClass:"JNPF-common-page-header"},[e.setting.fromForm?i("div",[e._v(e._s(e.title))]):i("el-page-header",{on:{back:e.goBack}},[i("template",{slot:"content"},[i("div",{staticClass:"JNPF-page-header-content"},[e._v(e._s(e.title))])])],2),!e.loading||e.title?[i("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:"-1"==e.setting.opType,expression:"setting.opType=='-1'"}],attrs:{placement:"bottom",trigger:"click"},on:{command:e.handleFlowUrgent}},[i("div",{staticClass:"flow-urgent-value",staticStyle:{cursor:"pointer"}},[i("span",{staticClass:"color-box",style:{"background-color":e.flowUrgentList[e.selectState].color}}),i("span",{style:{color:e.flowUrgentList[e.selectState].color}},[e._v("\n            "+e._s(e.flowUrgentList[e.selectState].name))])]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.flowUrgentList,(function(t,n){return i("el-dropdown-item",{key:n,attrs:{command:t.state}},[i("span",{staticClass:"color-box",style:{"background-color":t.color}}),e._v("\n            "+e._s(t.name)+"\n          ")])})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"-1"!==e.setting.opType,expression:"setting.opType!=='-1'"}],staticClass:"flow-urgent-value"},[i("span",{staticClass:"color-box",style:{"background-color":e.flowUrgentList[e.selectState].color}}),i("span",{style:{color:e.flowUrgentList[e.selectState].color}},[e._v(e._s(e.flowUrgentList[e.selectState].name))])])]:e._e(),e.subFlowVisible?e._e():i("div",{staticClass:"options"},[e.moreBtnList.length?i("el-dropdown",{staticClass:"dropdown",attrs:{placement:"bottom"},on:{command:e.handleMore}},[i("el-button",{staticStyle:{width:"70px"},attrs:{disabled:e.allBtnDisabled}},[e._v("\n          更 多"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.moreBtnList,(function(t,n){return i("el-dropdown-item",{key:n,staticClass:"dropdown-item",attrs:{command:t.key}},[e._v(e._s(t.label))])})),1)],1):e._e(),"-1"==e.setting.opType?i("el-button",{attrs:{type:"primary",loading:e.candidateLoading,disabled:e.allBtnDisabled},on:{click:function(t){return e.eventLauncher("submit")}}},[e._v("\n        "+e._s(e.properties.submitBtnText||"提 交"))]):e._e(),1==e.setting.opType&&e.properties.hasAuditBtn?i("el-button",{attrs:{type:"primary",loading:e.candidateLoading},on:{click:function(t){return e.eventLauncher("audit")}}},[e._v(e._s(e.properties.auditBtnText||"通 过")+"\n      ")]):e._e(),0!=e.setting.opType||1!=e.setting.status||!e.properties.hasPressBtn&&void 0!==e.properties.hasPressBtn?e._e():i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.press()}}},[e._v("\n        "+e._s(e.properties.pressBtnText||"催 办"))]),2==e.setting.opType&&e.properties.hasRevokeBtn?i("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.actionLauncher("recall")}}},[e._v(e._s(e.properties.revokeBtnText||"撤 回"))]):e._e(),4!=e.setting.opType||1!=e.setting.status||e.noOperateAuth?e._e():i("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.actionLauncher("cancel")}}},[e._v("\n        终 止")]),e.setting.hideCancelBtn?e._e():i("el-button",{attrs:{disabled:e.allBtnDisabled},on:{click:function(t){return e.goBack()}}},[e._v("\n        "+e._s(e.$t("common.cancelButton"))+"\n      ")])],1)],2),0!=e.setting.opType&&4!=e.setting.opType||"0"!==e.activeTab||e.subFlowVisible?e._e():i("div",{staticClass:"approve-result"},[i("div",{staticClass:"approve-result-img",class:e._f("flowStatus")(e.flowTaskInfo.status)})]),i("el-tabs",{staticClass:"JNPF-el_tabs",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},["4"==e.setting.opType||e.subFlowVisible?e._e():i("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{label:"表单信息"}},[i(e.currentView,{ref:"form",tag:"component",attrs:{config:e.setting},on:{close:e.goBack,eventReceiver:e.eventReceiver,setLoad:e.setLoad,setCandidateLoad:e.setCandidateLoad,setPageLoad:e.setPageLoad}})],1),i("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{label:"流程信息"}},[e.subFlowVisible?[i("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.activeClick},model:{value:e.subFlowTab,callback:function(t){e.subFlowTab=t},expression:"subFlowTab"}},e._l(e.subFlowInfoList,(function(t,n){return i("el-tab-pane",{key:n,attrs:{label:t.flowTaskInfo.fullName,name:t.flowTaskInfo.id}},[i("Process",{key:e.processKey,attrs:{conf:t.flowTemplateInfo.flowTemplateJson}})],1)})),1)]:[e.flowTemplateJson.nodeId?i("Process",{key:e.processKey,attrs:{conf:e.flowTemplateJson,id:"Process"},on:{subFlow:e.subFlow}}):e._e()]],2),"-1"!=e.setting.opType||"-1"==e.setting.opType&&7==e.setting.status?i("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{label:"流转记录"}},[i("recordList",{attrs:{list:e.flowTaskOperatorRecordList,endTime:e.endTime,flowId:e.setting.flowId,opType:e.setting.opType},on:{handelNodeLog:e.handelNodeLog}})],1):e._e(),"-1"!=e.setting.opType&&e.isSummary?i("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{label:"审批汇总",name:"recordSummary"}},[i("RecordSummary",{ref:"recordSummary",attrs:{id:e.setting.id,summaryType:e.summaryType}})],1):e._e(),"-1"!=e.setting.opType&&e.isComment?i("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{label:"流程评论",name:"comment"}},[i("Comment",{ref:"comment",attrs:{id:e.setting.id}})],1):e._e()],1),i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"audit"===e.eventType?"审批通过":"审批退回","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"","before-close":e.beforeClose,width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"candidateForm",attrs:{model:e.candidateForm,"label-width":e.candidateForm.candidateList.length||e.branchList.length?"130px":"80px"}},["audit"===e.eventType?[e.branchList.length?i("el-form-item",{attrs:{label:"分支选择",prop:"branchList",rules:[{required:!0,message:"分支不能为空",trigger:"change"}]}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择审批分支",clearable:""},on:{change:e.onBranchChange},model:{value:e.candidateForm.branchList,callback:function(t){e.$set(e.candidateForm,"branchList",t)},expression:"candidateForm.branchList"}},e._l(e.branchList,(function(e){return i("el-option",{key:e.nodeId,attrs:{label:e.nodeName,value:e.nodeId}})})),1)],1):e._e(),e._l(e.candidateForm.candidateList,(function(t,n){return i("el-form-item",{key:n,attrs:{label:t.nodeName+t.label,prop:"candidateList."+n+".value",rules:t.rules}},[t.hasCandidates?i("candidate-user-select",{attrs:{multiple:"",placeholder:"请选择"+t.label,taskId:e.setting.taskId,formData:e.formData,nodeId:t.nodeId},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):i("JnpfUserSelect",{attrs:{multiple:"",placeholder:"请选择"+t.label,title:"候选人员"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1)}))]:e._e(),e.properties.rejectType&&"audit"!==e.eventType&&e.showReject?[i("el-form-item",{attrs:{label:"退回节点",prop:"rejectStep"}},[i("el-select",{attrs:{placeholder:"请选择退回节点",disabled:"2"!==e.properties.rejectStep},model:{value:e.candidateForm.rejectStep,callback:function(t){e.$set(e.candidateForm,"rejectStep",t)},expression:"candidateForm.rejectStep"}},e._l(e.rejectList,(function(e){return i("el-option",{key:e.nodeCode,attrs:{label:e.nodeName,value:e.nodeCode}})})),1)],1),3==e.properties.rejectType?[i("el-form-item",{attrs:{prop:"rejectRadio"}},[i("el-radio-group",{staticClass:"form-item-content",model:{value:e.candidateForm.rejectType,callback:function(t){e.$set(e.candidateForm,"rejectType",t)},expression:"candidateForm.rejectType"}},[i("el-radio",{attrs:{label:1}},[e._v("重新审批\n                "),i("el-tooltip",{attrs:{content:"若流程为A->B->C,C退回至A，则C->A->B->C",placement:"top"}},[i("i",{staticClass:"el-icon-question tooltip-question"})])],1),i("el-radio",{attrs:{label:2}},[e._v("直接提交给我\n                "),i("el-tooltip",{attrs:{content:"若流程为A->B->C,C退回至A，则C->A->C",placement:"top"}},[i("i",{staticClass:"el-icon-question tooltip-question"})])],1)],1)],1)]:e._e()]:e._e(),e.properties.hasOpinion?[i("el-form-item",{attrs:{label:"审批意见",prop:"handleOpinion"}},[i("el-input",{attrs:{placeholder:"请输入审批意见",type:"textarea",rows:4},model:{value:e.candidateForm.handleOpinion,callback:function(t){e.$set(e.candidateForm,"handleOpinion",t)},expression:"candidateForm.handleOpinion"}}),i("CommonWordsDialog",{ref:"commonWordsDialog",on:{change:e.common}})],1),i("el-form-item",{attrs:{label:"审批附件",prop:"fileList"}},[i("JnpfUploadFile",{attrs:{limit:3},model:{value:e.candidateForm.fileList,callback:function(t){e.$set(e.candidateForm,"fileList",t)},expression:"candidateForm.fileList"}})],1)]:e._e(),e.properties.hasSign?i("el-form-item",{attrs:{label:"手写签名",required:""}},[i("div",{staticClass:"sign-main"},[e.signImg?i("img",{staticClass:"sign-img",attrs:{src:e.signImg,alt:""}}):e._e(),i("div",{staticClass:"sign-style",on:{click:e.addSign}},[i("i",{staticClass:"icon-ym icon-ym-signature add-sign"}),e.signImg?e._e():i("span",{staticClass:"sign-title"},[e._v("手写签名")])])])]):e._e(),e.properties.isCustomCopy?i("el-form-item",{attrs:{label:"抄送人员"}},[i("JnpfUserSelect",{attrs:{placeholder:"请选择",multiple:""},model:{value:e.copyIds,callback:function(t){e.copyIds=t},expression:"copyIds"}})],1):e._e()],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.approvalBtnLoading},on:{click:function(t){return e.handleApproval()}}},[e._v("\n        "+e._s(e.$t("common.confirmButton"))+"\n      ")])],1)],1),i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:100==e.flowTaskInfo.completion?"复活":"变更","close-on-click-modal":!1,visible:e.resurgenceVisible,"lock-scroll":"","append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.resurgenceVisible=t}}},[i("el-form",{ref:"resurgenceForm",attrs:{"label-width":"80px",model:e.resurgenceForm,rules:e.resurgenceRules}},[i("el-form-item",{attrs:{label:100==e.flowTaskInfo.completion?"复活节点":"变更节点",prop:"taskNodeId"}},[i("el-select",{attrs:{placeholder:100==e.flowTaskInfo.completion?"请选择复活节点":"请选择变更节点"},model:{value:e.resurgenceForm.taskNodeId,callback:function(t){e.$set(e.resurgenceForm,"taskNodeId",t)},expression:"resurgenceForm.taskNodeId"}},e._l(e.resurgenceNodeList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.nodeName,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:100==e.flowTaskInfo.completion?"复活意见":"变更意见",prop:"handleOpinion"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-input",{attrs:{type:"textarea",placeholder:"请填写意见",rows:4},model:{value:e.resurgenceForm.handleOpinion,callback:function(t){e.$set(e.resurgenceForm,"handleOpinion",t)},expression:"resurgenceForm.handleOpinion"}})],1)],1)],1),i("el-form-item",{attrs:{label:100==e.flowTaskInfo.completion?"复活附件":"变更附件",prop:"fileList"}},[i("JnpfUploadFile",{attrs:{limit:3},model:{value:e.resurgenceForm.fileList,callback:function(t){e.$set(e.resurgenceForm,"fileList",t)},expression:"resurgenceForm.fileList"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.resurgenceVisible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.resurgenceBtnLoading},on:{click:function(t){return e.handleResurgence()}}},[e._v("\n        "+e._s(e.$t("common.confirmButton"))+"\n      ")])],1)],1),i("print-browse",{attrs:{visible:e.printBrowseVisible,id:e.printTemplateId,formId:e.setting.id,fullName:e.setting.fullName},on:{"update:visible":function(t){e.printBrowseVisible=t}}}),i("candidate-form",{ref:"candidateForm",attrs:{visible:e.candidateVisible,candidateList:e.candidateList,branchList:e.branchList,taskId:e.setting.taskId,formData:e.formData,isCustomCopy:e.properties.isCustomCopy},on:{"update:visible":function(t){e.candidateVisible=t},submitCandidate:e.submitCandidate}}),i("error-form",{attrs:{visible:e.errorVisible,nodeList:e.errorNodeList},on:{"update:visible":function(t){e.errorVisible=t},submit:e.handleError}}),e.actionVisible?i("actionDialog",{ref:"actionDialog",attrs:{assignNodeList:e.assignNodeList},on:{submit:e.actionReceiver}}):e._e(),e.suspendVisible?i("SuspendDialog",{ref:"suspendDialog",on:{submit:e.suspendReceiver}}):e._e(),i("HasFreeApprover",{attrs:{visible:e.hasFreeApproverVisible,taskId:e.setting.taskId,formData:e.formData,properties:e.properties},on:{"update:visible":function(t){e.hasFreeApproverVisible=t},close:e.approverDialog}}),e.signVisible?i("SignImgDialog",{ref:"SignImg",attrs:{lineWidth:3,userInfo:e.userInfo,isDefault:1},on:{close:e.signDialog}}):e._e(),e.flowBoxVisible?i("FlowBox",{ref:"FlowBox",on:{close:function(t){e.flowBoxVisible=!1}}}):e._e(),e.printDialogVisible?i("PrintDialog",{ref:"printDialog",on:{change:e.printBrowseHandle}}):e._e(),e.logVisible?i("EventLog",{ref:"EventLog",on:{close:function(t){e.logVisible=!1}}}):e._e()],1)},a=[],o=i("2909"),s=(i("a481"),i("ac6a"),i("20d6"),i("6762"),i("2fdb"),i("5530")),r=i("f41a"),l=i("a84c"),c=i("19e4"),d=i("e200"),u=i("7361"),f=i("826a"),p=i("ce76"),m=i("5130"),h=i("95ee"),g=i("a7bd"),b=i("4b16"),v=i("0287"),w=i("94ab"),y=i("6637"),F=i("9e6f"),k=i("1dbd"),L=i("ad29"),T=i("4085"),C=i("2f62"),I={name:"FlowBox",components:{PrintDialog:r["a"],SignImgDialog:l["a"],HasFreeApprover:k["default"],recordList:p["default"],Process:w["a"],PrintBrowse:y["a"],Comment:m["default"],RecordSummary:h["default"],CandidateForm:g["default"],CandidateUserSelect:v["default"],ErrorForm:b["default"],ActionDialog:F["default"],SuspendDialog:L["default"],CommonWordsDialog:T["default"],EventLog:c["default"]},data:function(){return{printTemplateId:"",printDialogVisible:!1,subFlowTab:"",resurgenceVisible:!1,actionVisible:!1,resurgenceForm:{taskNodeId:"",handleOpinion:"",fileList:[]},resurgenceRules:{taskNodeId:[{required:!0,message:"请选择节点",trigger:"change"}]},logVisible:!1,previewVisible:!1,assignNodeList:[],resurgenceNodeList:[],currentView:"",previewTitle:"",formData:{},setting:{},monitorList:[{fullName:"1",flowName:"1",startTime:"1",userName:"1",thisStep:"1"},{fullName:"1",flowName:"1",startTime:"1",userName:"1",thisStep:"1"}],flowFormInfo:{},flowTemplateInfo:{},flowTaskInfo:{},flowTaskNodeList:[],flowTemplateJson:{},flowTaskOperatorRecordList:[],properties:{},endTime:0,suspendVisible:!1,visible:!1,handleId:"",activeTab:"0",isComment:!1,isSummary:!1,summaryType:0,loading:!1,btnLoading:!1,approvalBtnLoading:!1,resurgenceBtnLoading:!1,candidateLoading:!1,candidateVisible:!1,hasFreeApproverVisible:!1,signVisible:!1,candidateType:1,countersignOver:!1,branchList:[],candidateList:[],candidateForm:{branchList:[],candidateList:[],fileList:[],handleOpinion:"",rejectStep:"",rejectType:1},printBrowseVisible:!1,rejectList:[],showReject:!1,eventType:"",signImg:"",copyIds:[],fullName:"",thisStep:"",allBtnDisabled:!1,flowUrgent:1,flowUrgentList:[{name:"普通",color:"#409EFF",state:1},{name:"重要",color:"#E6A23C",state:2},{name:"紧急",color:"#F56C6C",state:3}],errorVisible:!1,errorNodeList:[],isValidate:!1,moreBtnList:[],subFlowVisible:!1,flowBoxVisible:!1,subFlowInfoList:[],commonWordsVisible:!1,noOperateAuth:!0,processKey:0}},computed:Object(s["a"])({title:function(){return[2,3,4].includes(this.setting.opType)?this.fullName:this.thisStep?this.fullName+"/"+this.thisStep:this.fullName},selectState:function(){var e=this,t=this.flowUrgentList.findIndex((function(t){return e.flowUrgent===t.state}));return t}},Object(C["b"])(["userInfo"])),watch:{activeTab:function(e){"comment"===e?(this.$refs.comment&&this.$refs.comment.init(),this.moreBtnList.push({label:"评 论",key:"comment"})):this.moreBtnList=this.moreBtnList.filter((function(e){return"comment"!=e.key})),"recordSummary"===e&&this.$refs.recordSummary&&this.$refs.recordSummary.init()}},methods:{common:function(e){this.commonWordsVisible=!1,e&&(this.resurgenceVisible?this.resurgenceForm.handleOpinion+=e.commonWordsText:this.candidateForm.handleOpinion+=e.commonWordsText)},beforeClose:function(){this.visible=!1,this.$refs.commonWordsDialog.close()},addSign:function(){var e=this;this.signVisible=!0,this.$nextTick((function(){e.$refs.SignImg.init()}))},signDialog:function(e){this.signVisible=!1,e&&(this.signImg=e)},approverDialog:function(e){e&&this.$emit("close",!0)},handelNodeLog:function(e){var t=this;this.logVisible=!0,this.$nextTick((function(){t.$refs.EventLog.init(e.taskNodeId,e.nodeName)}))},activeClick:function(){var e=this,t=this.subFlowInfoList.filter((function(t){return t.flowTaskInfo.id==e.subFlowTab}))||[];if(t.length){this.fullName=t[0].flowTaskInfo.fullName,this.flowTaskOperatorRecordList=t[0].flowTaskOperatorRecordList||[];var i=t[0].flowTemplateInfo.flowTemplateJson&&"string"===typeof t[0].flowTemplateInfo.flowTemplateJson?JSON.parse(t[0].flowTemplateInfo.flowTemplateJson||null):t[0].flowTemplateInfo.flowTemplateJson;if(t[0].flowTemplateInfo.flowTemplateJson=i,this.isComment=i.properties.isComment,this.isSummary=i.properties.isSummary,this.summaryType=i.properties.summaryType,this.flowUrgent=t[0].flowTaskInfo.flowUrgent||1,this.setting.id=t[0].flowTaskInfo.id,t[0].flowTaskNodeList.length){for(var n=[],a=function(){var e=t[0].flowTaskNodeList[o];4==t.opType&&1==e.type&&"approver"===e.nodeType&&n.push(e);var i=function t(i){if(Array.isArray(i)&&i.forEach((function(e){return t(e)})),i.nodeId===e.nodeCode)return 0==e.type&&(i.state="state-past"),1==e.type&&(i.state="state-curr"),void("approver"!==e.nodeType&&"start"!==e.nodeType&&"subFlow"!==e.nodeType||(i.content=e.userName));i.conditionNodes&&Array.isArray(i.conditionNodes)&&t(i.conditionNodes),i.childNode&&t(i.childNode)};i(t[0].flowTemplateInfo.flowTemplateJson)},o=0;o<t[0].flowTaskNodeList.length;o++)a();this.assignNodeList=n}else t[0].flowTemplateInfo.flowTemplateJson.state="state-curr";this.processKey=+new Date}},subFlow:function(e){var t=this,i=this.flowTaskNodeList.filter((function(t){return t.nodeCode==e}));if(i.length&&i[0].type&&"subFlow"==i[0].nodeType){var n=Object(s["a"])(Object(s["a"])({subFlowVisible:!0},i),this.setting);document.getElementById("Process")&&(document.getElementById("Process").style.display="none"),this.flowBoxVisible=!0,this.$nextTick((function(){t.$refs.FlowBox.init(n)}))}},handleResurgence:function(e){var t=this;this.$refs["resurgenceForm"].validate((function(i){if(i){var n=Object(s["a"])(Object(s["a"])({},t.resurgenceForm),{},{taskId:t.setting.taskId,resurgence:100==t.flowTaskInfo.completion});e&&(n.errorRuleUserList=e),t.resurgenceBtnLoading=!0,Object(d["n"])(n).then((function(e){var i=e.data;i&&Array.isArray(i)&&i.length?(t.errorNodeList=i,t.eventType="resurgence",t.errorVisible=!0,t.resurgenceBtnLoading=!1):t.$message({type:"success",message:e.msg,duration:1e3,onClose:function(){t.resurgenceBtnLoading=!1,t.visible=!1,t.errorVisible=!1,t.$emit("close",!0)}})})).catch((function(){t.resurgenceBtnLoading=!1}))}}))},flowResurgence:function(){var e=this;this.resurgenceVisible=!0,Object(d["o"])(this.setting.taskId).then((function(t){e.resurgenceNodeList=t.data}))},goBack:function(e){this.subFlowVisible&&(document.getElementById("Process").style.display="block"),this.$emit("close",e)},init:function(e){this.loading=!0,this.activeTab="0",this.setting=e,e.subFlowVisible?this.subFlowInfo(e):this.getBeforeInfo(e)},getBeforeInfo:function(e){var t=this;Object(d["h"])(e.id||0,{taskNodeId:e.taskNodeId,taskOperatorId:e.taskId,flowId:e.flowId}).then((function(n){t.flowFormInfo=n.data.flowFormInfo,t.flowTaskInfo=n.data.flowTaskInfo||{},t.flowTemplateInfo=n.data.flowTemplateInfo,t.noOperateAuth=n.data.noOperateAuth||!1;var a="-1"==e.opType?t.flowTemplateInfo.fullName:t.flowTaskInfo.fullName;e.fullName=a,t.fullName=a,t.thisStep=t.flowTaskInfo.thisStep,t.flowUrgent=t.flowTaskInfo.flowUrgent||1,e.status=t.flowTaskInfo.status,e.type=t.flowTemplateInfo.type,e.draftData=n.data.draftData||null,e.formData=n.data.formData||{},e.formEnCode=t.flowFormInfo.enCode;var o=2==t.flowFormInfo.formType?"workFlow/workFlowForm/dynamicForm":t.flowFormInfo.urlAddress?t.flowFormInfo.urlAddress.replace(/\s*/g,""):"workFlow/workFlowForm/".concat(t.flowFormInfo.enCode);if(t.currentView=function(e){return Promise.all([i.e("chunk-commons"),i.e("chunk-0a3199aa"),i.e("chunk-c4505e8c"),i.e("chunk-07f03f03"),i.e("chunk-369a0e14")]).then(function(){var t=[i("4b3b")("./".concat(o))];e.apply(null,t)}.bind(this)).catch(i.oe)},t.flowTaskNodeList=n.data.flowTaskNodeList||[],t.flowTemplateJson=t.flowTemplateInfo.flowTemplateJson?JSON.parse(t.flowTemplateInfo.flowTemplateJson):null,t.isComment=t.flowTemplateJson.properties.isComment,t.isSummary=t.flowTemplateJson.properties.isSummary,t.summaryType=t.flowTemplateJson.properties.summaryType,t.flowTaskOperatorRecordList=n.data.flowTaskOperatorRecordList||[],t.flowTaskOperatorRecordList=t.flowTaskOperatorRecordList.reverse(),t.properties=n.data.approversProperties||{},t.candidateForm.rejectType=3==t.properties.rejectType?1:t.properties.rejectType,t.endTime=100==t.flowTaskInfo.completion?t.flowTaskInfo.endTime:0,e.formConf=t.flowFormInfo.propertyJson,1!=e.opType&&"-1"!=e.opType&&(e.readonly=!0),e.formOperates=n.data.formOperates||[],0==e.opType)for(var s=0;s<e.formOperates.length;s++)e.formOperates[s].write=!1;if(e.flowTemplateJson=t.flowTemplateJson,t.flowTaskNodeList.length){for(var r=[],l=function(){var i=t.flowTaskNodeList[c];4==e.opType&&1==i.type&&"approver"===i.nodeType&&r.push(i);var n=function e(t){if(Array.isArray(t)&&t.forEach((function(t){return e(t)})),t.nodeId===i.nodeCode)return 0==i.type&&(t.state="state-past"),1==i.type&&(t.state="state-curr"),void("approver"!==i.nodeType&&"start"!==i.nodeType&&"subFlow"!==i.nodeType||(t.content=i.userName));t.conditionNodes&&Array.isArray(t.conditionNodes)&&e(t.conditionNodes),t.childNode&&e(t.childNode)};n(t.flowTemplateJson)},c=0;c<t.flowTaskNodeList.length;c++)l();t.assignNodeList=r}else t.flowTemplateJson.state="state-curr";t.processKey=+new Date,t.setting=e,t.initBtnList()})).catch((function(){t.loading=!1}))},initBtnList:function(){var e=[],t=this.setting,i=this.setting.opType,n=this.properties,a=this.flowTaskInfo;if("-1"!=i||t.hideCancelBtn||e.push({label:n.saveBtnText||"暂 存",key:"save"}),0!=i||1!=t.status||!n.hasRevokeBtn&&void 0!==n.hasRevokeBtn||e.push({label:n.revokeBtnText||"撤 回",key:"revoke"}),4!=i&&t.id&&n.hasPrintBtn&&n.printId&&e.push({label:n.printBtnText||"打 印",key:"print"}),1==i&&(n.hasTransferBtn&&e.push({label:n.transferBtnText||"转 审",key:"transfer"}),n.hasSaveBtn&&e.push({label:n.saveBtnText||"暂 存",key:"saveAudit"}),n.hasRejectBtn&&e.push({label:n.rejectBtnText||"退 回",key:"reject"}),n.hasFreeApproverBtn&&e.push({label:n.hasFreeApproverBtnText||"加 签",key:"hasFreeApprover"}),n.hasCancelBtn&&e.push({label:n.cancelBtnText||"驳回",key:"approvalCancel"})),4==i){if(this.noOperateAuth)return state.moreBtnList=[];100==a.completion&&e.push({label:"复 活",key:"resurgence"}),a.completion>0&&a.completion<100&&!a.rejectDataId&&(1==t.status||3==t.status)&&e.push({label:"变 更",key:"resurgence"}),1==t.status&&this.assignNodeList.length&&e.push({label:"指 派",key:"assign"}),1==a.status&&e.push({label:"挂 起",key:"suspend"}),6!=a.status||a.suspend||e.push({label:"恢 复",key:"recovery"})}this.moreBtnList=e},subFlowInfo:function(e){var t=this;this.loading=!1,this.activeTab="0",this.subFlowVisible=!0,Object(d["y"])(e[0].id).then((function(i){t.subFlowInfoList=i.data||[],t.subFlowTab=t.subFlowInfoList[0].flowTaskInfo.id,t.flowUrgent=t.subFlowInfoList[0].flowTaskInfo.flowUrgent||1,t.fullName=t.subFlowInfoList[0].flowTaskInfo.fullName,t.flowTaskOperatorRecordList=t.subFlowInfoList[0].flowTaskOperatorRecordList||[],t.flowTaskOperatorRecordList=t.flowTaskOperatorRecordList.reverse();for(var n=0;n<t.subFlowInfoList.length;n++){var a=t.subFlowInfoList[n];if(a.flowTemplateInfo.flowTemplateJson=a.flowTemplateInfo&&a.flowTemplateInfo.flowTemplateJson?JSON.parse(a.flowTemplateInfo.flowTemplateJson):{},a.flowTaskNodeList.length){for(var o=[],s=function(){var t=a.flowTaskNodeList[r];4==e.opType&&1==t.type&&"approver"===t.nodeType&&o.push(t);var i=function e(i){if(Array.isArray(i)&&i.forEach((function(t){return e(t)})),i.nodeId===t.nodeCode)return 0==t.type&&(i.state="state-past"),1==t.type&&(i.state="state-curr"),void("approver"!==t.nodeType&&"start"!==t.nodeType&&"subFlow"!==t.nodeType||(i.content=t.userName));i.conditionNodes&&Array.isArray(i.conditionNodes)&&e(i.conditionNodes),i.childNode&&e(i.childNode)};i(a.flowTemplateInfo.flowTemplateJson)},r=0;r<a.flowTaskNodeList.length;r++)s();a.assignNodeList=o}else a.flowTemplateInfo.flowTemplateJson.state="state-curr";var l=a.flowTemplateInfo.flowTemplateJson;t.isComment=l.properties.isComment,t.isSummary=l.properties.isSummary,t.summaryType=l.properties.summaryType,t.setting.id=t.subFlowInfoList[0].flowTaskInfo.id}})).catch((function(){t.loading=!1}))},printBrowseHandle:function(e){this.printTemplateId=e,this.printDialogVisible=!1,this.printBrowseVisible=!0},printDialog:function(){var e=this;this.printDialogVisible=!0,this.$nextTick((function(){e.$refs.printDialog.init(e.properties.printId)}))},handleMore:function(e){return"revoke"==e?this.actionLauncher("revoke"):"transfer"==e?this.actionLauncher("transfer"):"saveAudit"==e?this.eventLauncher("saveAudit"):"reject"==e?this.eventReceiver({},"reject"):"resurgence"==e?this.flowResurgence():"assign"==e?this.actionLauncher("assign"):"approvalCancel"==e?this.actionLauncher("approvalCancel"):"comment"==e?this.addComment():"print"==e?this.printDialog():"suspend"==e?this.suspend():"recovery"==e?this.recovery():void this.eventLauncher(e)},suspend:function(){var e=this;this.suspendVisible=!0,this.$nextTick((function(){e.$refs.suspendDialog.init(e.setting.id)}))},recovery:function(){var e=this,t={handleOpinion:"",fileList:[]};Object(d["x"])(this.setting.id,t).then((function(t){e.$message({message:t.msg,type:"success",duration:1500,onClose:function(){e.$emit("close",!0)}})})).catch((function(){e.$refs.suspendDialog.btnLoading=!1}))},suspendReceiver:function(e){var t=this;Object(d["z"])(this.setting.id,e).then((function(e){t.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t.$emit("close",!0)}})}))},eventLauncher:function(e){this.$refs.form&&this.$refs.form.dataFormSubmit(e,this.flowUrgent)},eventReceiver:function(e,t){var i=this;if(this.formData=e,this.formData.flowId=this.setting.flowId,this.formData.id=this.setting.id,this.eventType=t,"save"===t||"submit"===t)return this.submitOrSave();if("saveAudit"===t)return this.saveAudit();if("hasFreeApprover"===t)return this.hasFreeApproverVisible=!0;if("audit"===t||"reject"===t){if(this.handleId="",this.candidateForm.handleOpinion="",this.candidateForm.fileList=[],this.copyIds=[],this.isValidate=!1,this.properties.hasSign&&(this.signImg=this.userInfo.signImg),"reject"===t)return void Object(d["m"])(this.setting.taskId).then((function(e){i.showReject=e.data.isLastAppro,i.rejectList=e.data.list||[],i.candidateForm.rejectStep=i.rejectList.length&&i.rejectList[0].nodeCode||"",i.properties.hasSign||i.properties.hasOpinion||i.properties.isCustomCopy||i.showReject?(i.isValidate=!0,i.visible=!0):i.$confirm("此操作将退回该审批单，是否继续？","提示",{type:"warning"}).then((function(){i.handleApproval()})).catch((function(){}))})).catch({});this.candidateLoading=!0,Object(d["g"])(this.setting.taskId,this.formData).then((function(e){var t=e.data;if(i.candidateType=t.type,i.countersignOver=t.countersignOver,i.candidateLoading=!1,i.candidateForm.branchList=[],i.branchList=[],1==t.type){i.branchList=e.data.list.filter((function(e){return e.isBranchFlow}));var n=e.data.list.filter((function(e){return!e.isBranchFlow&&e.isCandidates}));i.candidateForm.candidateList=n.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{isDefault:!0,label:"审批人",value:[],rules:[{required:!0,message:"审批人不能为空",trigger:"click"}]})})),i.$nextTick((function(){i.$refs["candidateForm"].resetFields()})),i.isValidate=!0,i.visible=!0}else if(2==t.type){var a=e.data.list.filter((function(e){return e.isCandidates}));i.candidateForm.candidateList=a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{label:"审批人",value:[],rules:[{required:!0,message:"审批人不能为空",trigger:"click"}]})})),i.$nextTick((function(){i.$refs["candidateForm"].resetFields()})),i.isValidate=!0,i.visible=!0}else{if(i.candidateForm.candidateList=[],!i.properties.hasSign&&!i.properties.hasOpinion&&!i.properties.hasFreeApprover&&!i.properties.isCustomCopy)return void i.$confirm("此操作将通过该审批单，是否继续？","提示",{type:"warning"}).then((function(){i.handleApproval()})).catch((function(){}));i.isValidate=!0,i.visible=!0}})).catch((function(){i.candidateLoading=!1}))}},onBranchChange:function(e){var t=this.candidateForm.candidateList.filter((function(e){return e.isDefault}));if(!e.length)return this.candidateForm.candidateList=t;for(var i=[],n=0;n<e.length;n++)e:for(var a=0;a<this.branchList.length;a++){var r=this.branchList[a];if(e[n]===r.nodeId&&r.isCandidates){i.push(Object(s["a"])(Object(s["a"])({},r),{},{label:"审批人",value:[],rules:[{required:!0,message:"审批人不能为空",trigger:"click"}]}));break e}}this.candidateForm.candidateList=[].concat(Object(o["a"])(t),i)},saveAudit:function(){var e=this;this.btnLoading=!0,Object(d["p"])(this.setting.taskId,this.formData).then((function(t){e.$message({message:t.msg,type:"success",duration:1500,onClose:function(){e.btnLoading=!1,e.$emit("close",!0)}})})).catch((function(){e.btnLoading=!1}))},submitOrSave:function(){var e=this;if(this.formData.status="submit"===this.eventType?0:1,this.formData.flowUrgent=this.flowUrgent,this.setting.delegateUserList&&(this.formData.delegateUserList=this.setting.delegateUserList),"save"===this.eventType)return this.handleRequest();this.candidateLoading=!0,Object(d["g"])(0,this.formData).then((function(t){var i=t.data;if(e.candidateLoading=!1,e.candidateType=i.type,e.countersignOver=i.countersignOver,1==i.type)e.branchList=t.data.list.filter((function(e){return e.isBranchFlow})),e.candidateList=t.data.list.filter((function(e){return!e.isBranchFlow&&e.isCandidates})),e.candidateVisible=!0;else if(2==i.type)e.branchList=[],e.candidateList=t.data.list.filter((function(e){return e.isCandidates})),e.candidateVisible=!0;else{if(e.properties.isCustomCopy)return e.branchList=[],e.candidateList=[],void(e.candidateVisible=!0);e.$confirm("您确定要提交当前流程吗, 是否继续?","提示",{type:"warning"}).then((function(){e.handleRequest()})).catch((function(){}))}})).catch((function(){e.candidateLoading=!1}))},handleRequest:function(e){var t=this;e&&(this.formData=Object(s["a"])(Object(s["a"])({},this.formData),e)),this.formData.candidateType=this.candidateType,this.formData.countersignOver=this.countersignOver,this.formData.id||delete this.formData.id,"save"===this.eventType&&(this.btnLoading=!0),this.allBtnDisabled=!0;var i=this.formData.id?f["c"]:f["a"];i(this.formData).then((function(e){var i=e.data;i&&Array.isArray(i)&&i.length?(t.errorNodeList=i,t.errorVisible=!0,t.allBtnDisabled=!1):t.$message({message:e.msg,type:"success",duration:1500,onClose:function(){"save"===t.eventType&&(t.btnLoading=!1),t.candidateVisible=!1,t.allBtnDisabled=!1,t.errorVisible=!1,t.$emit("close",!0)}})})).catch((function(){"save"===t.eventType&&(t.btnLoading=!1),t.$refs.candidateForm&&(t.$refs.candidateForm.btnLoading=!1),t.allBtnDisabled=!1,t.errorVisible=!1}))},submitCandidate:function(e){this.handleRequest(e)},actionLauncher:function(e){var t=this;if(this.eventType=e,["revoke","recall","approvalCancel"].includes(e)&&!this.properties.hasOpinion&&!this.properties.hasSign){var i="";return"revoke"==e&&(i="此操作将撤回该流程，是否继续？"),"recall"==e&&(i="此操作将撤回该审批单，是否继续？"),"approvalCancel"==e&&(i="此操作将审批驳回终止流程，是否继续？"),void this.$confirm(i,"提示",{type:"warning"}).then((function(){t.actionReceiver()})).catch((function(){}))}this.showActionDialog()},showActionDialog:function(){var e=this;this.actionVisible=!0,this.$nextTick((function(){e.$refs.actionDialog.init(e.properties,e.eventType)}))},actionReceiver:function(e){var t=this;e||(e={handleOpinion:"",signImg:"",fileList:[]}),"approvalCancel"==this.eventType&&(e=Object(s["a"])(Object(s["a"])({},e),{},{eventType:"approvalCancel"}));var i="revoke"==this.eventType||"approvalCancel"==this.eventType?this.setting.id:this.setting.taskId,n=this.getActionMethod();this.approvalBtnLoading=!0,n(i,e).then((function(e){t.approvalBtnLoading=!1,t.$message({type:"success",message:e.msg,duration:1e3,onClose:function(){t.$emit("close",!0)}})})).catch((function(){t.$refs.actionDialog.btnLoading=!1,t.approvalBtnLoading=!1}))},getActionMethod:function(){return"transfer"===this.eventType?d["q"]:"assign"===this.eventType?d["a"]:"revoke"===this.eventType?u["d"]:"recall"===this.eventType?d["k"]:"cancel"===this.eventType||"approvalCancel"===this.eventType?d["e"]:void 0},press:function(){var e=this;this.$confirm("此操作将提示该节点尽快处理，是否继续?","提示",{type:"warning"}).then((function(){Object(u["c"])(e.setting.id).then((function(t){e.$message({type:"success",message:t.msg,duration:1e3})}))})).catch((function(){}))},handleError:function(e){if("submit"===this.eventType)return this.formData.errorRuleUserList=e,void this.handleRequest();"audit"!==this.eventType&&"reject"!==this.eventType?"resurgence"!==this.eventType||this.handleResurgence(e):this.handleApproval(e)},handleApproval:function(e){var t=this,i=function(){if(!t.properties.hasSign||t.signImg){var i=Object(s["a"])(Object(s["a"])({handleOpinion:t.candidateForm.handleOpinion,fileList:t.candidateForm.fileList},t.formData),{},{enCode:t.setting.enCode,signImg:t.signImg,copyIds:t.copyIds.join(","),branchList:t.candidateForm.branchList,candidateType:t.candidateType,countersignOver:t.countersignOver,rejectType:t.candidateForm.rejectType});if("reject"===t.eventType&&(i.rejectStep=t.candidateForm.rejectStep),e&&(i.errorRuleUserList=e),t.candidateForm.candidateList.length){for(var n={},a=0;a<t.candidateForm.candidateList.length;a++)n[t.candidateForm.candidateList[a].nodeId]=t.candidateForm.candidateList[a].value;i.candidateList=n}"audit"===t.eventType&&t.properties.hasFreeApprover&&(i=Object(s["a"])({freeApproverUserId:t.handleId},i));var o="audit"===t.eventType?d["b"]:d["l"];t.approvalBtnLoading=!0,o(t.setting.taskId,i).then((function(e){var i=e.data;i&&Array.isArray(i)&&i.length?(t.errorNodeList=i,t.errorVisible=!0,t.approvalBtnLoading=!1):t.$message({type:"success",message:e.msg,duration:1e3,onClose:function(){t.approvalBtnLoading=!1,t.visible=!1,t.errorVisible=!1,t.$emit("close",!0)}})})).catch((function(){t.approvalBtnLoading=!1}))}else t.$message({message:"请签名",type:"error"})};if(!this.isValidate)return i();this.$refs["candidateForm"].validate((function(e){e&&i()}))},addComment:function(){this.$refs.comment&&this.$refs.comment.showCommentDialog()},setPageLoad:function(e){this.loading=!!e},setCandidateLoad:function(e){this.candidateLoading=!!e,this.allBtnDisabled=!!e},setLoad:function(e){this.btnLoading=!!e},handleFlowUrgent:function(e){this.flowUrgent=e}}},_=I,O=(i("0292"),i("2877")),$=Object(O["a"])(_,n,a,!1,null,"7d5054ec",null);t["default"]=$.exports},"37eba":function(e,t,i){"use strict";i("4e31")},"3bc4":function(e,t,i){},4085:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-popover",{ref:"popover",staticClass:"popover-container",attrs:{placement:"bottom-start",width:"500",trigger:"manual"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("JNPF-table",{staticClass:"table",attrs:{data:e.list,border:!1,hasNO:!1,"show-header":!1},on:{"row-click":e.rowClick}},[i("el-table-column",{attrs:{label:"字段",prop:"commonWordsText",align:"left"}}),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.commonWordsType?i("el-button",{staticClass:"outline",attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(i){return e.addOrUpdateHandle(t.row.id)}}}):e._e(),t.row.commonWordsType?i("el-button",{staticClass:"JNPF-table-delBtn outline",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDel(t.row.id)}}}):e._e()]}}])})],1),i("div",{staticClass:"actions"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("\n        新 增\n      ")])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.select()}}},[e._v("\n        "+e._s(e.$t("common.confirmButton"))+"\n      ")])],1),i("el-button",{attrs:{slot:"reference",type:"text",icon:"el-icon-plus"},on:{click:e.openDialog},slot:"reference"},[e._v("常用语")])],1),i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:this.dataForm.id?"编辑审批常用语":"新增审批常用语","close-on-click-modal":!1,width:"600px",visible:e.commonWordsVisible,"lock-scroll":"","append-to-body":""},on:{"update:visible":function(t){e.commonWordsVisible=t},close:function(t){return e.cancel()}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"常用语",prop:"commonWordsText"}},[i("el-input",{attrs:{placeholder:"输入常用语"},model:{value:e.dataForm.commonWordsText,callback:function(t){e.$set(e.dataForm,"commonWordsText",t)},expression:"dataForm.commonWordsText"}})],1),i("el-form-item",{attrs:{label:"排序",prop:"sortCode"}},[i("el-input-number",{attrs:{min:0,max:999999,"controls-position":"right"},model:{value:e.dataForm.sortCode,callback:function(t){e.$set(e.dataForm,"sortCode",t)},expression:"dataForm.sortCode"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.dataFormBtnLoading,disabled:e.commonBtnLoading},on:{click:function(t){return e.dataFormSubmit(1)}}},[e._v("\n        "+e._s(e.$t("common.confirmButton")))]),this.dataForm.id?e._e():i("el-button",{attrs:{type:"primary",loading:e.commonBtnLoading,disabled:e.dataFormBtnLoading},on:{click:function(t){return e.dataFormSubmit(2)}}},[e._v("\n        保存并新增\n      ")])],1)],1)],1)},a=[],o=i("d342"),s={components:{},props:{},data:function(){return{visible:!1,eventType:"",dataForm:{systemNames:[],systemIds:[],commonWordsText:"",commonWordsType:1,sortCode:"",enabledMark:1},dataRule:{commonWordsText:[{required:!0,message:"请输入常用语",trigger:"blur"}]},list:[],listQuery:{keyword:"",currentPage:1,pageSize:20},checked:"",checkedRow:{},signVisible:!1,signImg:"",btnLoading:!1,title:"",label:"",commonWordsVisible:!1,commonBtnLoading:!1,formLoading:!1,dataFormBtnLoading:!1,state:!1}},computed:{},methods:{close:function(){this.visible=!1},openDialog:function(){this.state=!1,this.visible=!0,this.initData()},addOrUpdateHandle:function(e){var t=this;e&&(this.state=!0),this.commonWordsVisible=!0,this.formLoading=!0,this.dataForm.id=e||0,this.$nextTick((function(){t.$refs["dataForm"].resetFields(),t.dataForm.id&&Object(o["e"])(t.dataForm.id).then((function(e){t.dataForm=e.data||{},t.formLoading=!1})),t.formLoading=!1}))},select:function(){this.state||(this.$emit("input",this.checked),this.$emit("change",this.checkedRow),this.visible=!1)},initData:function(){var e=this;Object(o["f"])().then((function(t){e.list=t.data.list||[],e.listLoading=!1})).catch((function(){e.listLoading=!1}))},cancel:function(){this.commonWordsVisible=!1,this.checked="",this.checkedRow={},this.openDialog()},clear:function(){this.checked="",this.checkedRow={},this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow)},closeDialog:function(){this.btnLoading=!1,this.visible=!1},rowClick:function(e){console.log(222),this.checked=e.id,this.checkedRow=e,this.select()},handleDel:function(e){var t=this;this.state=!0,this.$confirm(this.$t("common.delTip"),this.$t("common.tipTitle"),{type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(e,i,n){"confirm"===e?(i.confirmButtonLoading=!0,setTimeout((function(){i.confirmButtonLoading=!1,n()}),1e3)):(t.state=!1,n())}}).then((function(){Object(o["c"])(e).then((function(e){t.$message({type:"success",message:e.msg,duration:1500,onClose:function(){t.checked="",t.checkedRow={},t.openDialog()}})}))})).catch((function(){}))},dataFormSubmit:function(e){var t=this;this.$refs["dataForm"].validate((function(i){if(i){2==e?t.continueBtnLoading=!0:t.dataFormBtnLoading=!0;var n=t.dataForm.id?o["b"]:o["a"];n(t.dataForm).then((function(i){2==e?(t.$message({message:i.msg,type:"success",duration:1500}),t.$nextTick((function(){t.continueBtnLoading=!1,t.$refs["dataForm"].resetFields()}))):t.$message({message:i.msg,type:"success",duration:1500,onClose:function(){t.commonWordsVisible=!1,t.commonBtnLoading=!1,t.dataFormBtnLoading=!1,t.state=!1,t.checked="",t.checkedRow={},t.openDialog()}})})).catch((function(){t.btnLoading=!1,t.commonWordsVisible=!1}))}}))}}},r=s,l=(i("b7ef"),i("2877")),c=Object(l["a"])(r,n,a,!1,null,"6dab5e1f",null);t["default"]=c.exports},"4b16":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"异常处理","close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"600px","modal-append-to-body":!1},on:{open:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),[i("el-form",{ref:"dataForm",attrs:{"label-width":"100px",model:e.dataForm}},e._l(e.dataForm.nodeList,(function(t,n){return i("el-form-item",{key:n,attrs:{label:t.nodeName,prop:"nodeList."+n+".value",rules:t.rules}},[i("JnpfUserSelect",{attrs:{multiple:"",placeholder:"请选择异常处理人员"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1)})),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v(e._s(e.$t("common.confirmButton"))+"\n    ")])],1)],1)},a=[],o=i("5530"),s={props:["nodeList"],data:function(){return{dataForm:{nodeList:[]}}},methods:{onOpen:function(){var e=this;this.dataForm.nodeList=this.nodeList.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{value:[],rules:[{required:!0,message:"异常处理人员不能为空",trigger:"click"}]})})),this.$nextTick((function(){e.$refs["dataForm"].resetFields()}))},submit:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){for(var i={},n=0;n<e.dataForm.nodeList.length;n++)i[e.dataForm.nodeList[n].nodeId]=e.dataForm.nodeList[n].value;e.$emit("submit",i)}}))},closeDialog:function(){this.$emit("update:visible",!1)}}},r=s,l=i("2877"),c=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=c.exports},"4e31":function(e,t,i){},5130:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"comment-container"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading&&1==e.listQuery.currentPage,expression:"listLoading && listQuery.currentPage==1"}],ref:"infiniteBody",staticClass:"comment-list"},[e.list.length?e._l(e.list,(function(t,n){return i("div",{key:n,staticClass:"item"},[i("div",{staticClass:"head"},[i("el-avatar",{staticClass:"avatar",attrs:{size:40,src:e.define.comUrl+t.creatorUserHeadIcon}}),i("p",{staticClass:"username"},[e._v(e._s(t.creatorUser))]),t.isDel?i("el-link",{staticClass:"del-btn",attrs:{underline:!1,type:"danger"},on:{click:function(i){return e.delComment(t.id,n)}}},[e._v("删除")]):e._e(),i("span",{staticClass:"time"},[e._v(e._s(e._f("toDate")(t.creatorTime)))])],1),i("div",{staticClass:"content"},[i("p",{staticClass:"text"},[e._v(e._s(t.text))]),t.imageList.length?i("div",{staticClass:"img-list"},e._l(t.imageList,(function(n,a){return i("el-image",{key:a,staticClass:"img-item",attrs:{src:e.define.comUrl+n.url,"preview-src-list":e.getImgList(t.imageList),"z-index":1e4}})})),1):e._e(),t.fileList.length?i("div",{staticClass:"file-List"},[i("JnpfUploadFile",{attrs:{detailed:"",disabled:""},model:{value:t.fileList,callback:function(i){e.$set(t,"fileList",i)},expression:"item.fileList"}})],1):e._e()])])})):i("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2),i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"流程评论",visible:e.dialogVisible,"close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"0"}},[i("el-form-item",{attrs:{prop:"text"}},[i("el-input",{attrs:{placeholder:"请输入评论",type:"textarea",rows:4},model:{value:e.dataForm.text,callback:function(t){e.$set(e.dataForm,"text",t)},expression:"dataForm.text"}})],1),i("el-form-item",[i("el-upload",{ref:"elUploadImg",staticClass:"upload-btn",attrs:{action:e.define.comUploadUrl+"/annexpic",headers:e.uploadHeaders,"on-success":e.handleImgSuccess,multiple:"","show-file-list":!1,accept:"image/*","before-upload":e.beforeImgUpload,"on-exceed":e.handleImgExceed,limit:9}},[i("el-button",{attrs:{size:"small",icon:"el-icon-picture"}},[e._v("图片")])],1),i("el-button",{attrs:{size:"small",icon:"el-icon-upload"},on:{click:e.uploadFile}},[e._v("附件")])],1),e.dataForm.image.length?i("el-form-item",{attrs:{prop:"image"}},[i("div",{staticClass:"img-list"},e._l(e.dataForm.image,(function(t,n){return i("div",{key:n,staticClass:"img-item"},[i("el-image",{attrs:{src:e.define.comUrl+t.url,"preview-src-list":e.getImgList(e.dataForm.image),"z-index":100}}),i("div",{staticClass:"badge",on:{click:function(t){return t.stopPropagation(),e.handleImgRemove(n)}}},[i("i",{staticClass:"el-icon-close"})])],1)})),0)]):e._e(),i("el-form-item",{attrs:{prop:"file"}},[i("ul",{staticClass:"el-upload-list el-upload-list el-upload-list--text"},e._l(e.dataForm.file,(function(t,n){return i("li",{key:t.fileId,staticClass:"el-upload-list__item is-success"},[i("a",{staticClass:"el-upload-list__item-name"},[i("i",{staticClass:"el-icon-paperclip"}),e._v("\n              "+e._s(t.name)+e._s(t.fileSize?"（"+e.jnpf.toFileSize(t.fileSize)+"）":"")+"\n            ")]),i("i",{staticClass:"el-icon-view",attrs:{title:"查看"},on:{click:function(i){return e.handleFilePreview(t)}}}),i("i",{staticClass:"el-icon-download",attrs:{title:"下载"},on:{click:function(i){return e.handleFileClick(t)}}}),i("label",{staticClass:"el-upload-list__item-status-label"},[i("i",{staticClass:"el-icon-upload-success el-icon-circle-check"})]),i("i",{staticClass:"el-icon-close",attrs:{title:"删除"},on:{click:function(t){return e.handleFileRemove(n)}}})])})),0),i("fileUploader",{ref:"fileUploader",attrs:{limit:2,fileSize:50,type:"annex",accept:e.fileAccept},on:{fileSuccess:e.fileSuccess}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("common.cancelButton"))+"\n      ")]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.addComment()}}},[e._v("\n        "+e._s(e.$t("common.confirmButton")))])],1)],1),i("Preview",{attrs:{visible:e.previewVisible,file:e.activeFile},on:{"update:visible":function(t){e.previewVisible=t}}})],1)},a=[],o=(i("7f7f"),i("3b2b"),i("2909")),s=i("5530"),r=i("5451"),l=i("2934"),c=i("b285"),d=i("95d2"),u={name:"comments",components:{Preview:c["a"],FileUploader:d["default"]},props:{id:{type:String,default:""}},data:function(){return{list:[],listQuery:{currentPage:1,pageSize:20,sort:"desc",sidx:""},total:0,listLoading:!1,btnLoading:!1,dataRule:{},dataForm:{text:"",file:[],image:[]},dialogVisible:!1,finish:!1,uploadHeaders:{Authorization:this.$store.getters.token},imgUploading:!1,previewVisible:!1,fileAccept:".xls,.xlsx,.doc,.docx,.pdf,.txt,.ppt,.pptx",activeFile:{}}},methods:{init:function(){var e=this;this.list=[],this.listQuery={currentPage:1,pageSize:20,sort:"desc",sidx:""},this.finish=!1,this.initData(),this.$nextTick((function(){e.bindScroll()}))},bindScroll:function(){var e=this,t=e.$refs.infiniteBody;t.addEventListener("scroll",(function(){t.scrollHeight-t.clientHeight-t.scrollTop<=600&&!e.listLoading&&!e.finish&&(e.listQuery.currentPage+=1,e.initData())}))},initData:function(){var e=this;this.listLoading=!0;var t=Object(s["a"])(Object(s["a"])({},this.listQuery),{},{taskId:this.id});Object(r["s"])(t).then((function(t){var i=t.data.list.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{fileList:e.file?JSON.parse(e.file):[],imageList:e.image?JSON.parse(e.image):[]})}));t.data.list.length<e.listQuery.pageSize&&(e.finish=!0),e.list=[].concat(Object(o["a"])(e.list),Object(o["a"])(i)),e.total=t.data.pagination.total,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},showCommentDialog:function(){var e=this;this.dialogVisible=!0,this.dataForm.image=[],this.dataForm.file=[],this.$nextTick((function(){e.$refs.elUploadImg.uploadFiles=[],e.$refs["dataForm"].resetFields()}))},getImgList:function(e){var t=this,i=e.map((function(e){return t.define.comUrl+e.url}));return i},addComment:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){e.btnLoading=!0;var i={text:e.dataForm.text,file:JSON.stringify(e.dataForm.file),image:JSON.stringify(e.dataForm.image),taskId:e.id};Object(r["n"])(i).then((function(t){e.$message({message:t.msg,type:"success",duration:1500,onClose:function(){e.dialogVisible=!1,e.btnLoading=!1,e.init()}})})).catch((function(){e.btnLoading=!1}))}}))},delComment:function(e,t){var i=this;this.$confirm(this.$t("common.delTip"),this.$t("common.tipTitle"),{type:"warning"}).then((function(){Object(r["o"])(e).then((function(e){i.list.splice(t,1),i.$message({type:"success",message:e.msg})}))})).catch((function(){}))},beforeImgUpload:function(e){var t=e.size<52428800;if(!t)return this.$message.error("图片大小超过50MB"),t;var i=new RegExp("image/*").test(e.type);return i?(t&&i&&(this.imgUploading=!0),t&&i):(this.$message.error("请上传图片"),i)},handleImgSuccess:function(e,t,i){200==e.code?this.dataForm.image.push({name:t.name,fileId:e.data.name,url:e.data.url,thumbUrl:e.data.thumbUrl}):(this.$refs.elUploadImg.uploadFiles.splice(i.length-1,1),i.filter((function(e){return e.uid!=t.uid})),this.$message({message:e.msg,type:"error",duration:1500})),this.imgUploading=!1},handleImgExceed:function(e,t){this.$message.warning("当前限制最多可以上传9张图片")},handleImgRemove:function(e){this.dataForm.image.splice(e,1),this.$refs.elUploadImg.uploadFiles.splice(e,1)},uploadFile:function(){var e=this.dataForm.file.length>=2;if(e)return this.$message.error("当前限制最多可以上传2个文件"),!1;this.$refs.fileUploader&&this.$refs.fileUploader.openUploader()},fileSuccess:function(e){var t=this.dataForm.file.length>=2;if(t)return this.$message.error("当前限制最多可以上传2个文件"),!1;this.dataForm.file.push(e)},handleFileRemove:function(e){this.dataForm.file.splice(e,1)},handleFileClick:function(e){var t=this;e.fileId&&Object(l["e"])("annex",e.fileId).then((function(i){t.jnpf.downloadFile(i.data.url,e.name)}))},handleFilePreview:function(e){this.activeFile=e,this.previewVisible=!0}}},f=u,p=(i("9413"),i("2877")),m=Object(p["a"])(f,n,a,!1,null,"15bbc374",null);t["default"]=m.exports},5451:function(e,t,i){"use strict";i.d(t,"f",(function(){return a})),i.d(t,"e",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return r})),i.d(t,"m",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"q",(function(){return d})),i.d(t,"k",(function(){return u})),i.d(t,"l",(function(){return f})),i.d(t,"u",(function(){return p})),i.d(t,"g",(function(){return m})),i.d(t,"j",(function(){return h})),i.d(t,"i",(function(){return g})),i.d(t,"t",(function(){return b})),i.d(t,"s",(function(){return v})),i.d(t,"n",(function(){return w})),i.d(t,"o",(function(){return y})),i.d(t,"r",(function(){return F})),i.d(t,"w",(function(){return k})),i.d(t,"p",(function(){return L})),i.d(t,"d",(function(){return T})),i.d(t,"h",(function(){return C})),i.d(t,"v",(function(){return I}));var n=i("b775");function a(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate",method:"get",data:e})}function o(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e),method:"get"})}function s(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e),method:"DELETE"})}function r(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e.id),method:"PUT",data:e})}function c(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e,"/Actions/Copy"),method:"post"})}function d(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e,"/Actions/Export"),method:"GET"})}function u(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/Release/".concat(e),method:"post"})}function f(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/Stop/".concat(e),method:"post"})}function p(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/getFlowIdByCode/".concat(e),method:"get"})}function m(){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/ListAll",method:"get"})}function h(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/PageListAll",method:"get",data:e})}function g(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/PageChildListAll",method:"get",data:e})}function b(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e,"/FormInfo"),method:"get"})}function v(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowComment",method:"get",data:e})}function w(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowComment",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowComment/".concat(e),method:"delete"})}function F(e,t){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e,"/FlowJsonList"),method:"get",data:t})}function k(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e,"/MainVersion"),method:"post"})}function L(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/".concat(e,"/FlowJson"),method:"delete"})}function T(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/getflowAll",method:"get",data:e})}function C(e){return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/getflowList",method:"post",data:e})}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(n["a"])({url:"/api/workflow/Engine/flowTemplate/FlowJsonList/".concat(e),method:"get",data:{type:t}})}},7361:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"c",(function(){return r}));var n=i("b775");function a(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowLaunch",method:"get",data:e})}function o(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowLaunch/".concat(e),method:"DELETE"})}function s(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowLaunch/".concat(e,"/Actions/Withdraw"),method:"PUT",data:t})}function r(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowLaunch/Press/".concat(e),method:"post"})}},"826a":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return o}));var n=i("b775");function a(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowTask",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowTask/".concat(e.id),method:"put",data:e})}},"8c62":function(e,t,i){},"8ebd":function(e,t,i){"use strict";i("f9fc")},9413:function(e,t,i){"use strict";i("0d29")},"95d2":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{hasDefault:!!e.value.length},attrs:{id:"common-file-uploader"}},[i("uploader",{ref:"uploader",staticClass:"uploader-app",attrs:{options:e.options,autoStart:!1,"file-status-text":e.statusText},on:{"file-added":e.onFileAdded,"file-success":e.onFileSuccess,"file-progress":e.onFileProgress,"file-error":e.onFileError,complete:e.onComplete}},[i("uploader-unsupport"),i("uploader-btn",{ref:"uploadBtn",attrs:{id:"file-uploader-btn",attrs:e.attrs}},[e._v("选择文件")]),i("uploader-list",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.fileList;return[i("ul",{staticClass:"el-upload-list el-upload-list el-upload-list--text"},e._l(n,(function(t){return i("li",{key:t.id,staticClass:"el-upload-list__item"},[i("uploader-file",{ref:"files",refInFor:!0,class:"file_"+t.id,attrs:{file:t,list:!0},scopedSlots:e._u([{key:"default",fn:function(e){return[i("FileItem",{attrs:{file:e.file,list:e.list}})]}}],null,!0)})],1)})),0)]}}])})],1)],1)},a=[],o=(i("7f7f"),i("c5f6"),i("2934")),s=i("61bc"),r=i("4328"),l=i.n(r),c={KB:1024,MB:1048576,GB:1073741824},d={props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:"annex"},limit:{type:Number,default:0},accept:{type:String,default:"*"},sizeUnit:{type:String,default:"MB"},fileSize:{default:5}},mixins:[s["a"]],data:function(){return{}},computed:{acceptText:function(){var e="";switch(this.accept){case"image/*":e="图片";break;case"video/*":e="视频";break;case"audio/*":e="音频";break;case".xls,.xlsx":e="excel";break;case".doc,.docx":e="word";break;case".pdf":e="pdf";break;case".txt":e="txt";break;default:e="";break}return e}},methods:{beforeUpload:function(e){var t=!!this.limit&&this.value.length>=this.limit;if(t)return this.$message.error("当前限制最多可以上传".concat(this.limit,"个文件")),!1;var i=c[this.sizeUnit],n=!this.fileSize||e.size/i<this.fileSize;if(!n)return this.$message.error("文件大小超过".concat(this.fileSize).concat(this.sizeUnit)),n;var a=e.getExtension(),o=this.accept.indexOf(a)>-1;return!!o||(this.$message.error("请选择".concat(this.accept,"类型的文件")),o)},handelSuccess:function(e){var t=this,i={identifier:e.uniqueIdentifier,fileName:e.name.replaceAll("#",""),fileSize:e.size,fileType:e.getType(),extension:e.getExtension(),type:this.type};Object(o["b"])(l.a.stringify(i)).then((function(i){t.$set(e,"customCompleted",!0);var n={name:e.name,fileId:i.data.name,fileSize:i.data.fileSize,fileExtension:i.data.fileExtension,fileVersionId:i.data.fileVersionId,url:i.data.url};t.$emit("fileSuccess",n),e.cancel()})).catch((function(){e.cancel()}))}}},u=d,f=(i("da02"),i("2877")),p=Object(f["a"])(u,n,a,!1,null,"4fc51458",null);t["default"]=p.exports},"95ee":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-tabs",{staticClass:"recordSummary",staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[i("el-tab-pane",{attrs:{label:"按部门汇总",name:"1"}}),i("el-tab-pane",{attrs:{label:"按岗位汇总",name:"3"}}),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"recordSummary-list"},[e.list.length?e._l(e.list,(function(t,n){return i("el-card",{directives:[{name:"show",rawName:"v-show",value:t.list&&t.list.length,expression:"item.list&&item.list.length"}],key:n,staticClass:"recordSummary-item"},[i("div",{staticClass:"recordSummary-item-main"},[i("div",{staticClass:"cap"},[e._v(e._s(t.fullName)+"意见")]),i("div",{staticClass:"content"},e._l(t.list,(function(t,n){return i("div",{key:n,staticClass:"child-item"},[i("div",{staticClass:"child-item-block"},[i("div",{staticClass:"avatar"},[i("el-avatar",{attrs:{src:e.define.comUrl+t.headIcon}})],1),i("div",{staticClass:"child-item-title"},[i("div",{staticClass:"child-item-line"},[i("div",{staticClass:"name"},[e._v("\n                      "+e._s(t.userName)),i("span",[e._v(" 于 "+e._s(e._f("toDate")(t.handleTime)))])]),i("el-tag",{staticClass:"tag",attrs:{type:t.tagType}},[e._v(e._s(t.txt))])],1),t.handleOpinion&&2!=t.handleStatus?i("div",{staticClass:"child-item-option"},[e._v("\n                    "+e._s(t.handleOpinion)+"\n                  ")]):e._e(),t.fileList.length&&2!=t.handleStatus?i("div",{staticClass:"file-List"},[i("JnpfUploadFile",{attrs:{detailed:"",disabled:"",showIcon:!1},model:{value:t.fileList,callback:function(i){e.$set(t,"fileList",i)},expression:"child.fileList"}})],1):e._e()])])])})),0)])])})):i("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)],1)},a=[],o=i("5530"),s=(i("ac6a"),i("e200")),r={name:"comments",props:{id:{type:String,default:""},summaryType:{default:"0"}},data:function(){return{list:[],activeTab:"1",loading:!1}},watch:{activeTab:function(e){this.init()}},methods:{init:function(){var e=this;this.loading=!0;var t={category:this.activeTab,type:this.summaryType};Object(s["w"])(this.id,t).then((function(t){e.list=t.data,e.list.length&&e.list.forEach((function(e,t){e.list.forEach((function(e){e.fileList=e.fileList?JSON.parse(e.fileList):[]})),e.list=e.list.map((function(e){return Object(o["a"])({txt:0==e.handleStatus?"退回":1==e.handleStatus?"同意":2==e.handleStatus?"发起":3==e.handleStatus?"撤回":4==e.handleStatus?"终止":5==e.handleStatus?"指派":6==e.handleStatus?"后加签":10==e.handleStatus?"前加签":8==e.handleStatus?"变更":11==e.handleStatus?"挂起":12==e.handleStatus?"恢复":13==e.handleStatus?"转向":"转审",tagType:0==e.handleStatus||11==e.handleStatus?"danger":1==e.handleStatus||12==e.handleStatus?"success":3==e.handleStatus||4==e.handleStatus||8==e.handleStatus||13==e.handleStatus?"warning":""},e)}))})),e.loading=!1})).catch((function(){e.loading=!1}))}}},l=r,c=(i("37eba"),i("2877")),d=Object(c["a"])(l,n,a,!1,null,"15e746d2",null);t["default"]=d.exports},"96da":function(e,t,i){"use strict";i("ffa7")},"9e6f":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:e.title,"close-on-click-modal":!1,width:"600px",visible:e.visible,"lock-scroll":"","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.fromRules}},["transfer"===e.eventType||"assign"===e.eventType||"cancel"===e.eventType?["assign"===e.eventType?i("el-form-item",{attrs:{label:"指派节点",prop:"nodeCode"}},[i("el-select",{attrs:{placeholder:"请选择指派节点"},model:{value:e.dataForm.nodeCode,callback:function(t){e.$set(e.dataForm,"nodeCode",t)},expression:"dataForm.nodeCode"}},e._l(e.assignNodeList,(function(e){return i("el-option",{key:e.nodeCode,attrs:{label:e.nodeName,value:e.nodeCode}})})),1)],1):e._e(),"transfer"===e.eventType||"assign"===e.eventType?i("el-form-item",{attrs:{label:e.label+"给谁",prop:"freeApproverUserId",rules:[{required:!0,message:"请选择"+e.label+"给谁",trigger:"click"}]}},[i("JnpfUserSelect",{attrs:{placeholder:"请选择"+e.label+"给谁"},model:{value:e.dataForm.freeApproverUserId,callback:function(t){e.$set(e.dataForm,"freeApproverUserId",t)},expression:"dataForm.freeApproverUserId"}})],1):e._e(),"assign"===e.eventType||"cancel"===e.eventType||"transfer"===e.eventType&&e.properties&&e.properties.hasOpinion?i("el-form-item",{attrs:{label:e.label+"原因",prop:"handleOpinion"}},[i("el-input",{attrs:{placeholder:"请输入"+e.label+"原因",type:"textarea",rows:4},model:{value:e.dataForm.handleOpinion,callback:function(t){e.$set(e.dataForm,"handleOpinion",t)},expression:"dataForm.handleOpinion"}})],1):e._e(),"assign"===e.eventType||"cancel"===e.eventType||"transfer"===e.eventType&&e.properties&&e.properties.hasOpinion?i("el-form-item",{attrs:{label:e.label+"附件",prop:"fileList"}},[i("JnpfUploadFile",{attrs:{limit:3},model:{value:e.dataForm.fileList,callback:function(t){e.$set(e.dataForm,"fileList",t)},expression:"dataForm.fileList"}})],1):e._e(),e.properties.hasSign&&"transfer"===e.eventType?i("el-form-item",{attrs:{label:"手写签名",required:""}},[i("div",{staticClass:"sign-main"},[e.signImg?i("img",{staticClass:"sign-img",attrs:{src:e.signImg,alt:""}}):e._e(),i("div",{staticClass:"sign-style",on:{click:e.addSign}},[i("i",{staticClass:"icon-ym icon-ym-signature add-sign"}),e.signImg?e._e():i("span",{staticClass:"sign-title"},[e._v("手写签名")])])])]):e._e()]:[e.properties.hasOpinion?[i("el-form-item",{attrs:{label:e.label+"原因",prop:"handleOpinion"}},[i("el-input",{attrs:{placeholder:"请输入"+e.label+"原因",type:"textarea",rows:4},model:{value:e.dataForm.handleOpinion,callback:function(t){e.$set(e.dataForm,"handleOpinion",t)},expression:"dataForm.handleOpinion"}})],1),i("el-form-item",{attrs:{label:e.label+"附件",prop:"fileList"}},[i("JnpfUploadFile",{attrs:{limit:3},model:{value:e.dataForm.fileList,callback:function(t){e.$set(e.dataForm,"fileList",t)},expression:"dataForm.fileList"}})],1)]:e._e(),e.properties.hasSign?i("el-form-item",{attrs:{label:"手写签名",required:""}},[i("div",{staticClass:"sign-main"},[e.signImg?i("img",{staticClass:"sign-img",attrs:{src:e.signImg,alt:""}}):e._e(),i("div",{staticClass:"sign-style",on:{click:e.addSign}},[i("i",{staticClass:"icon-ym icon-ym-signature add-sign"}),e.signImg?e._e():i("span",{staticClass:"sign-title"},[e._v("手写签名")])])])]):e._e()]],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handleSure()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton"))+"\n    ")])],1),e.signVisible?i("SignImgDialog",{ref:"SignImg",attrs:{lineWidth:3,userInfo:e.userInfo,isDefault:1},on:{close:e.signDialog}}):e._e()],1)},a=[],o=i("5530"),s=i("a84c"),r=i("2f62"),l={components:{SignImgDialog:s["a"]},props:{assignNodeList:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1,properties:{},eventType:"",dataForm:{handleOpinion:"",freeApproverUserId:"",nodeCode:"",fileList:[]},signVisible:!1,fromRules:{nodeCode:[{required:!0,message:"请选择指派节点",trigger:"change"}]},signImg:"",btnLoading:!1,title:"",label:""}},computed:Object(o["a"])({},Object(r["b"])(["userInfo"])),methods:{init:function(e,t){var i=this;switch(this.visible=!0,this.properties=e,this.eventType=t||"",this.dataForm.handleOpinion="",this.dataForm.freeApproverUserId="",this.dataForm.nodeCode="",this.dataForm.fileList=[],this.signImg="",this.properties.hasSign&&(this.signImg=this.userInfo.signImg),t){case"transfer":this.title="转审",this.label="转审";break;case"revoke":this.title="撤回流程",this.label="撤回";break;case"recall":this.title="撤回审核",this.label="撤回";break;case"assign":this.title="指派",this.label="指派";break;case"cancel":this.title="终止审核不可恢复",this.label="终止";break;case"approvalCancel":this.title="审批驳回终止流程",this.label="驳回";break;default:break}this.$nextTick((function(){i.$refs["dataForm"].resetFields()}))},addSign:function(){var e=this;this.signVisible=!0,this.$nextTick((function(){e.$refs.SignImg.init()}))},signDialog:function(e){this.signVisible=!1,e&&(this.signImg=e)},handleSure:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){if(e.properties.hasSign&&!e.signImg&&"assign"!=e.eventType&&"cancel"!=e.eventType)return void e.$message({message:"请签名",type:"error"});var i=Object(o["a"])({signImg:e.signImg},e.dataForm);e.btnLoading=!0,e.$emit("submit",i),e.closeDialog()}}))},closeDialog:function(){this.btnLoading=!1,this.visible=!1}}},c=l,d=i("2877"),u=Object(d["a"])(c,n,a,!1,null,null,null);t["default"]=u.exports},a7bd:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center form-script-dialog",attrs:{title:"提交审核","close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"600px","modal-append-to-body":!1},on:{open:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),[i("el-form",{ref:"candidateForm",attrs:{model:e.candidateForm,"label-width":e.candidateForm.candidateList.length||e.branchList.length?"130px":"80px"}},[e.branchList&&e.branchList.length?i("el-form-item",{attrs:{label:"分支选择",prop:"branchList",rules:[{required:!0,message:"分支不能为空",trigger:"change"}]}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择审批分支",clearable:""},on:{change:e.onBranchChange},model:{value:e.candidateForm.branchList,callback:function(t){e.$set(e.candidateForm,"branchList",t)},expression:"candidateForm.branchList"}},e._l(e.branchList,(function(e){return i("el-option",{key:e.nodeId,attrs:{label:e.nodeName,value:e.nodeId}})})),1)],1):e._e(),e._l(e.candidateForm.candidateList,(function(t,n){return i("el-form-item",{key:n,attrs:{label:t.nodeName+t.label,prop:"candidateList."+n+".value",rules:t.rules}},[t.hasCandidates?i("candidate-user-select",{attrs:{multiple:"",placeholder:"请选择"+t.label,taskId:e.taskId,formData:e.formData,nodeId:t.nodeId},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):i("JnpfUserSelect",{attrs:{multiple:"",placeholder:"请选择"+t.label,title:"候选人员"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1)})),e.isCustomCopy?i("el-form-item",{attrs:{label:"抄送人员"}},[i("JnpfUserSelect",{attrs:{placeholder:"请选择",multiple:""},model:{value:e.candidateForm.copyIds,callback:function(t){e.$set(e.candidateForm,"copyIds",t)},expression:"candidateForm.copyIds"}})],1):e._e()],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.submitCandidate()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton"))+"\n    ")])],1)],1)},a=[],o=i("2909"),s=i("5530"),r=i("0287"),l={components:{CandidateUserSelect:r["default"]},props:["candidateList","branchList","taskId","formData","isCustomCopy"],data:function(){return{candidateForm:{copyIds:[],branchList:[],candidateList:[]},btnLoading:!1}},methods:{onOpen:function(){var e=this;this.btnLoading=!1,this.candidateForm.candidateList=this.candidateList.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{isDefault:!0,label:"审批人",value:[],rules:[{required:!0,message:"审批人不能为空",trigger:"click"}]})})),this.candidateForm.branchList=[],this.$nextTick((function(){e.$refs["candidateForm"].resetFields()}))},onBranchChange:function(e){var t=this.candidateForm.candidateList.filter((function(e){return e.isDefault}));if(!e.length)return this.candidateForm.candidateList=t;for(var i=[],n=0;n<e.length;n++)e:for(var a=0;a<this.branchList.length;a++){var r=this.branchList[a];if(e[n]===r.nodeId&&r.isCandidates){i.push(Object(s["a"])(Object(s["a"])({},r),{},{label:"审批人",value:[],rules:[{required:!0,message:"审批人不能为空",trigger:"click"}]}));break e}}this.candidateForm.candidateList=[].concat(Object(o["a"])(t),i)},submitCandidate:function(){var e=this;this.$refs["candidateForm"].validate((function(t){if(t){e.btnLoading=!0;for(var i={},n=0;n<e.candidateForm.candidateList.length;n++)i[e.candidateForm.candidateList[n].nodeId]=e.candidateForm.candidateList[n].value;e.$emit("submitCandidate",{candidateList:i,branchList:e.candidateForm.branchList,copyIds:e.candidateForm.copyIds.join(",")})}}))},closeDialog:function(){this.$emit("update:visible",!1)}}},c=l,d=i("2877"),u=Object(d["a"])(c,n,a,!1,null,null,null);t["default"]=u.exports},ad29:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"挂起流程暂停","close-on-click-modal":!1,width:"600px",visible:e.visible,"lock-scroll":"","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.fromRules}},[i("el-form-item",{attrs:{label:"挂起类型",prop:"suspend"}},[i("el-select",{attrs:{placeholder:"挂起类型",filterable:""},model:{value:e.dataForm.suspend,callback:function(t){e.$set(e.dataForm,"suspend",t)},expression:"dataForm.suspend"}},e._l(e.suspendOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"挂起原因",prop:"handleOpinion"}},[i("el-input",{attrs:{placeholder:"请输入挂起原因",type:"textarea",rows:4},model:{value:e.dataForm.handleOpinion,callback:function(t){e.$set(e.dataForm,"handleOpinion",t)},expression:"dataForm.handleOpinion"}})],1),i("el-form-item",{attrs:{label:"挂起附件",prop:"fileList"}},[i("JnpfUploadFile",{attrs:{limit:3},model:{value:e.dataForm.fileList,callback:function(t){e.$set(e.dataForm,"fileList",t)},expression:"dataForm.fileList"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handleSure()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton"))+"\n    ")])],1)],1)},a=[],o=i("e200"),s={components:{},props:{},data:function(){return{visible:!1,eventType:"",dataForm:{suspend:!1,handleOpinion:"",fileList:[]},signVisible:!1,fromRules:{nodeCode:[{required:!0,message:"请选择指派节点",trigger:"change"}]},signImg:"",btnLoading:!1,title:"",label:"",suspendOptions:[]}},computed:{},methods:{init:function(e){var t=this;this.visible=!0,this.dataForm.suspend=!1,this.dataForm.handleOpinion="",this.dataForm.fileList=[],this.suspendOptions=[],this.$nextTick((function(){t.$refs["dataForm"].resetFields(),Object(o["A"])(e).then((function(e){var i=[];i=e.data?[{value:!1,label:"全部流程挂起"},{value:!0,label:"主流程挂起"}]:[{value:!1,label:"全部流程挂起"}],t.suspendOptions=i}))}))},handleSure:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&(e.btnLoading=!0,e.$emit("submit",e.dataForm))}))},closeDialog:function(){this.btnLoading=!1,this.visible=!1}}},r=s,l=i("2877"),c=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=c.exports},b7ef:function(e,t,i){"use strict";i("dfe6")},bee2:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("a38e");function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Object(n["a"])(a.key),a)}}function o(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}},ce76:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"JNPF-common-layout"},[i("JNPF-table",{staticClass:"recordListTable",attrs:{data:e.list,hasNO:!1,height:"100%"}},[4==e.opType?i("el-table-column",{attrs:{prop:"nodeName",label:"节点名称","show-overflow-tooltip":"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(i){return e.handelNodeDetail(t.row)}}},[e._v("\n          "+e._s(t.row.nodeName))])]}}],null,!1,1947200307)}):i("el-table-column",{attrs:{prop:"nodeName",label:"节点名称",width:"200"}}),i("el-table-column",{attrs:{prop:"userName",label:"操作人员",width:"150"}}),i("el-table-column",{attrs:{prop:"creatorTime",label:"接收时间",width:"140",formatter:e.jnpf.tableDateFormat}}),i("el-table-column",{attrs:{prop:"handleTime",label:"操作时间",width:"140",formatter:e.jnpf.tableDateFormat}}),i("el-table-column",{attrs:{prop:"handleStatus",label:"执行动作",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"item"},[i("span",{style:{background:e.colorList[t.row.handleStatus||0]}}),e._v("\n          "+e._s(e.statusList[t.row.handleStatus||0])+"\n          "),5==t.row.handleStatus||6==t.row.handleStatus||7==t.row.handleStatus||10==t.row.handleStatus?i("div",[e._v("\n            ："+e._s(t.row.operatorId)+"\n          ")]):e._e()])]}}])}),i("el-table-column",{attrs:{prop:"signImg",label:"签名",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.signImg?i("el-image",{staticStyle:{width:"80px"},attrs:{src:t.row.signImg,"preview-src-list":[t.row.signImg]}}):e._e()]}}])}),i("el-table-column",{attrs:{prop:"fileList",label:"附件",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(JSON.parse(t.row.fileList),(function(t,n){return i("div",{key:n,on:{click:function(i){return e.handlePreview(t)}}},[i("el-link",{attrs:{type:"primary",underline:!1}},[e._v(e._s(t.name))])],1)}))}}])}),i("el-table-column",{attrs:{prop:"handleOpinion",label:"备注","min-width":"200","show-overflow-tooltip":""}}),4==e.opType?i("el-table-column",{attrs:{prop:"handleOpinion",label:"事件日志",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isLog?[i("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(i){return e.handelNodeLog(t.row)}}},[e._v("\n            查看日志")])]:e._e()]}}],null,!1,1427655740)}):e._e()],1),i("Preview",{attrs:{visible:e.previewVisible,file:e.activeFile,showDownload:!0},on:{"update:visible":function(t){e.previewVisible=t}}}),e.formVisible?i("FormBox",{ref:"FormBox",on:{close:function(t){e.formVisible=!1}}}):e._e()],1)},a=[],o=(i("c5f6"),i("b285")),s=i("0723"),r={components:{Preview:o["a"],FormBox:s["default"]},props:{list:{type:Array,default:[]},endTime:{type:Number,default:0},flowId:{type:String,default:""},opType:{type:Number,default:0}},name:"recordList",data:function(){return{colorList:["rgba(242,68,68,0.39)","rgba(35,162,5,0.39)","rgba(0,0,255,0.39)","rgba(21,21,157,0.39)","rgba(186,33,33,0.39)","rgba(25,185,185,0.39)","rgba(50,191,61,0.39)","rgba(49,151,214,0.39)","rgba(185,123,6,0.39)","rgba(45,94,186,0.39)","rgba(50,191,61,0.39)","rgba(255,0,0,0.39)","rgba(0,128,0,0.39)","rgba(172,214,58,0.39)"],statusList:["退回","同意","发起","撤回","终止","指派","后加签","转办","变更","复活","前加签","挂起","恢复","转向"],previewVisible:!1,formVisible:!1,activeFile:{},logVisible:!1}},methods:{handlePreview:function(e){this.activeFile=e,this.previewVisible=!0},handelNodeDetail:function(e){var t=this,i={id:e.taskId,taskNodeId:e.taskNodeId,enCode:e.flowCode,flowId:this.flowId,formType:e.formType,opType:0,status:e.status,title:e.nodeName};this.formVisible=!0,this.$nextTick((function(){t.$refs.FormBox.init(i)}))},handelNodeLog:function(e){this.$emit("handelNodeLog",e)}}},l=r,c=(i("96da"),i("2877")),d=Object(c["a"])(l,n,a,!1,null,"369557ac",null);t["default"]=d.exports},d342:function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return c}));var n=i("b775");function a(e){return Object(n["a"])({url:"/api/system/CommonWords",method:"get",data:e})}function o(e){return Object(n["a"])({url:"/api/system/CommonWords/".concat(e),method:"get"})}function s(){return Object(n["a"])({url:"/api/system/CommonWords/Selector",method:"get"})}function r(e){return Object(n["a"])({url:"/api/system/CommonWords/".concat(e),method:"DELETE"})}function l(e){return Object(n["a"])({url:"/api/system/CommonWords",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/api/system/CommonWords/".concat(e.id),method:"put",data:e})}},d4ec:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",(function(){return n}))},da02:function(e,t,i){"use strict";i("8c62")},deb4:function(e,t,i){},dfe6:function(e,t,i){},e200:function(e,t,i){"use strict";i.d(t,"i",(function(){return a})),i.d(t,"h",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"p",(function(){return r})),i.d(t,"l",(function(){return l})),i.d(t,"k",(function(){return c})),i.d(t,"e",(function(){return d})),i.d(t,"q",(function(){return u})),i.d(t,"a",(function(){return f})),i.d(t,"o",(function(){return p})),i.d(t,"n",(function(){return m})),i.d(t,"w",(function(){return h})),i.d(t,"g",(function(){return g})),i.d(t,"f",(function(){return b})),i.d(t,"d",(function(){return v})),i.d(t,"u",(function(){return w})),i.d(t,"t",(function(){return y})),i.d(t,"v",(function(){return F})),i.d(t,"c",(function(){return k})),i.d(t,"r",(function(){return L})),i.d(t,"m",(function(){return T})),i.d(t,"j",(function(){return C})),i.d(t,"A",(function(){return I})),i.d(t,"z",(function(){return _})),i.d(t,"x",(function(){return O})),i.d(t,"y",(function(){return $})),i.d(t,"s",(function(){return x}));var n=i("b775");function a(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/List/".concat(e),method:"get",data:t})}function o(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/".concat(e),method:"get",data:t})}function s(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Audit/".concat(e),method:"post",data:t})}function r(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/SaveAudit/".concat(e),method:"post",data:t})}function l(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Reject/".concat(e),method:"post",data:t})}function c(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Recall/".concat(e),method:"post",data:t})}function d(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Cancel/".concat(e),method:"post",data:t})}function u(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Transfer/".concat(e),method:"post",data:t})}function f(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Assign/".concat(e),method:"post",data:t})}function p(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Selector/".concat(e),method:"get"})}function m(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Change",method:"post",data:e})}function h(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/RecordList/".concat(e),method:"get",data:t})}function g(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Candidates/".concat(e),method:"post",data:t})}function b(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/CandidateUser/".concat(e),method:"post",data:t})}function v(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/BatchOperation",method:"post",data:e})}function w(){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/BatchFlowSelector",method:"get"})}function y(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/BatchFlowJsonList/".concat(e),method:"get"})}function F(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/NodeSelector/".concat(e),method:"get"})}function k(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/BatchCandidate",method:"get",data:e})}function L(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/".concat(e,"/Info"),method:"get"})}function T(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/RejectList/".concat(e),method:"get"})}function C(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/freeApprover/".concat(e),method:"post",data:t})}function I(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Suspend/".concat(e),method:"get"})}function _(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Suspend/".concat(e),method:"post",data:t})}function O(e,t){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/Restore/".concat(e),method:"post",data:t})}function $(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowBefore/SubFlowInfo/".concat(e),method:"get"})}function x(e){return Object(n["a"])({url:"/api/workflow/Engine/FlowMonitor/".concat(e,"/EventLog"),method:"get"})}},f9fc:function(e,t,i){},ffa7:function(e,t,i){}}]);