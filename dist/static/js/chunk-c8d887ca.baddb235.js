(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8d887ca"],{"079b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-notice",attrs:{title:"详情","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"80%","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"notice-wrapper"},[i("div",{staticClass:"notice-hd"},[i("h1",{staticClass:"title"},[e._v(e._s(e.info.title))]),i("div",{staticClass:"info"},[i("span",[e._v(e._s(e._f("toDate")(e.info.releaseTime)))]),i("span",[e._v(e._s(e.info.releaseUser))])])]),i("p",{staticClass:"excerpt"},[e._v(e._s(e.info.excerpt))]),i("div",{staticClass:"main"},[i("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.info.bodyText)}})]),e.files.length?i("div",{staticClass:"file-list"},[i("JnpfUploadFile",{attrs:{disabled:"",detailed:""},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1):e._e()])])},n=[],s=i("0503"),o={data:function(){return{visible:!1,loading:!1,files:[],info:{}}},methods:{init:function(e){var t=this;this.visible=!0,this.loading=!0,Object(s["c"])(e).then((function(e){t.info=e.data,t.files=e.data.files?JSON.parse(e.data.files):[],t.loading=!1}))}}},l=o,r=(i("3cfc"),i("2877")),c=Object(r["a"])(l,a,n,!1,null,"c6053eba",null);t["default"]=c.exports},"3cfc":function(e,t,i){"use strict";i("8192")},"7def":function(e,t,i){},8192:function(e,t,i){},bae5:function(e,t,i){"use strict";i("7def")},ff88:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"JNPF-common-layout MessageRecord-container"},[i("div",{staticClass:"JNPF-common-layout-center"},[i("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[i("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"关键词"}},[i("el-input",{attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("\n              "+e._s(e.$t("common.search")))]),i("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v(e._s(e.$t("common.reset"))+"\n            ")])],1)],1)],1)],1),i("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[i("el-tabs",{staticClass:"messageRecord-tab",attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.messageList,(function(e){return i("el-tab-pane",{key:e.enCode,attrs:{label:e.fullName,name:e.enCode}})})),i("div",{staticClass:"box"},[i("div",{staticClass:"JNPF-common-head"},[i("div",{staticClass:"left-btn"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.handleDel}},[e._v("删除")])],1),i("div",{staticClass:"JNPF-common-head-right"},[i("el-tooltip",{attrs:{effect:"dark",content:e.$t("common.refresh"),placement:"top"}},[i("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)]),i("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,hasC:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{prop:"title",label:"消息标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{staticStyle:{"font-size":"12px"},on:{click:function(i){return e.readInfo(t.row)}}},[e._v(e._s(t.row.title)+"\n                ")])]}}])}),i("el-table-column",{attrs:{prop:"type",label:"消息类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.getType(t.row.type))+"\n              ")]}}])}),i("el-table-column",{attrs:{prop:"releaseUser",label:"发送人员",width:"120"}}),i("el-table-column",{attrs:{prop:"releaseTime",label:"发送时间",formatter:e.jnpf.tableDateFormat,width:"140"}}),i("el-table-column",{attrs:{prop:"isRead",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.isRead?i("el-tag",{attrs:{type:"success"}},[e._v("已读")]):i("el-tag",{attrs:{type:"info"}},[e._v("未读")])]}}])})],1),i("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})],1)],2)],1)],1),e.formVisible?i("Form",{ref:"Form",on:{refreshDataList:e.initData}}):e._e(),e.scheduleVisible?i("ScheduleView",{ref:"schedule"}):e._e()],1)},n=[],s=i("5530"),o=i("2909"),l=(i("386d"),i("0503")),r=i("079b"),c=i("6e2c"),d={name:"messageRecord",components:{Form:r["default"],ScheduleView:c["a"]},data:function(){return{visible:!1,formVisible:!1,keyword:"",activeName:"0",list:[],multipleSelection:[],total:0,listLoading:!0,listQuery:{currentPage:1,pageSize:20,sort:"desc"},scheduleVisible:!1,messageList:[]}},watch:{activeName:function(e){this.keyword="",this.search()}},created:function(){this.getDictionaryData(),this.initData()},methods:{search:function(){this.listQuery={currentPage:1,pageSize:20,sort:"desc"},this.initData()},reset:function(){this.keyword="",this.search()},getDictionaryData:function(){var e=this;this.messageList=[],this.$store.dispatch("base/getDictionaryData",{sort:"msgSourceType"}).then((function(t){var i,a={id:"0",fullName:"全部",enCode:"0"};(i=e.messageList).push.apply(i,[a].concat(Object(o["a"])(t)))}))},getType:function(e){var t=this.messageList.filter((function(t){return t.enCode==e}))[0];return t&&t.fullName||""},initData:function(){var e=this;this.listLoading=!0;var t=Object(s["a"])(Object(s["a"])({},this.listQuery),{},{keyword:this.keyword,type:"0"==this.activeName?"":this.activeName});this.list=[],Object(l["h"])(t).then((function(t){e.list=t.data.list,e.total=t.data.pagination.total,e.listLoading=!1}))},handleDel:function(){var e=this;if(this.multipleSelection.length){var t={ids:this.multipleSelection.join(",")};this.$confirm("您确定要删除这些数据吗, 是否继续?","提示",{type:"warning"}).then((function(){Object(l["b"])(t).then((function(t){e.$message({type:"success",message:t.msg}),e.initData()}))})).catch((function(){}))}else this.$message({type:"error",message:"请选择一条数据"})},handleSelectionChange:function(e){this.multipleSelection=e.map((function(e){return e.id}))},readInfo:function(e){var t=this;Object(l["c"])(e.id).then((function(a){if(t.info=a.data,t.files=a.data.files?JSON.parse(a.data.files):[],"0"==e.isRead&&(e.isRead="1",t.$emit("read")),4==e.type){var n=JSON.parse(a.data.bodyText);if(3==n.type)return;return t.scheduleVisible=!0,void t.$nextTick((function(){t.$refs.schedule.init(n.id,"",n.groupId)}))}if(2==e.type&&2==e.flowType){var s=JSON.parse(a.data.bodyText);t.drawer=!1,t.$router.push("/workFlow/entrust?config="+s.type)}else if(1==e.type||3==e.type)t.formVisible=!0,t.$nextTick((function(){t.$refs.Form.init(e.id)}));else{if(!a.data.bodyText)return;t.drawer=!1;var o=i("27ae").Base64;t.$router.push("/workFlowDetail?config="+encodeURIComponent(o.encode(a.data.bodyText)))}}))}}},u=d,f=(i("bae5"),i("2877")),p=Object(f["a"])(u,a,n,!1,null,"48ca6d6a",null);t["default"]=p.exports}}]);