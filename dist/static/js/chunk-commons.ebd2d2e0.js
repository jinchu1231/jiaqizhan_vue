(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"00d3":function(e,t,a){"use strict";a("e235")},"014bb":function(e,t,a){},"02b3":function(e,t,a){},"0373":function(e,t,a){"use strict";a("eec5")},"03e8":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popupSelect-container"},[a("div",{on:{click:e.openDialog}},[a("el-input",{attrs:{placeholder:"请选择"+e.popupTitle,readonly:"","validate-event":!1},nativeOn:{mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},[a("template",{slot:"suffix"},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-arrow-down"]}),e.showClose?a("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}):e._e()]),a("el-button",{attrs:{slot:"append"},on:{click:function(t){return t.stopPropagation(),e.goDataInterface()}},slot:"append"},[e._v("\n        添加")])],2)],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{title:e.popupTitle,"close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"1000px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"JNPF-common-layout"},[a("div",{staticClass:"JNPF-common-layout-left"},[a("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"JNPF-common-el-tree-scrollbar"},[a("el-tree",{ref:"treeBox",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1,"node-key":"id"},on:{"node-click":e.handleNodeClick}})],1)],1),a("div",{staticClass:"JNPF-common-layout-center"},[a("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}})],1)],1),e.dataType?e._e():a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.query.dataType,callback:function(t){e.$set(e.query,"dataType",t)},expression:"query.dataType"}},[a("el-option",{attrs:{label:"静态数据",value:"2"}}),a("el-option",{attrs:{label:"SQL操作",value:"1"}}),a("el-option",{attrs:{label:"API操作",value:"3"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"JNPF-common-search-box-right"},[a("el-tooltip",{attrs:{effect:"dark",content:"刷新",placement:"top"}},[a("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)],1),a("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,border:!1,"highlight-current-row":"",hasNO:!1},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" ")])]}}])}),a("el-table-column",{attrs:{type:"expand",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{data:t.row.templateJson,size:"mini"}},[a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                        "+e._s(t.row.field)+e._s(t.row.fieldName?"("+t.row.fieldName+")":"")+"\n                      ")])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"dataType",label:"参数类型",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["varchar"===t.row.dataType?a("span",[e._v("字符串")]):e._e(),"int"===t.row.dataType?a("span",[e._v("整型")]):e._e(),"datetime"===t.row.dataType?a("span",[e._v("日期时间")]):e._e(),"decimal"===t.row.dataType?a("span",[e._v("浮点")]):e._e(),"bigint"===t.row.dataType?a("span",[e._v("长整型")]):e._e(),"text"===t.row.dataType?a("span",[e._v("文本")]):e._e()]}}],null,!0)}),a("el-table-column",{attrs:{prop:"defaultValue",label:"默认值",width:"200"}})],1)]}}])}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"fullName",label:"名称"}}),a("el-table-column",{attrs:{prop:"enCode",label:"编码"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}})],1),a("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])],1)},l=[],o=(a("386d"),a("5530")),n=(a("c5f6"),a("17de")),s={components:{},props:{value:{default:""},title:{type:String,default:""},dataType:{type:String,default:""},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},popupTitle:{type:String,default:"接口模板"},hasPage:{type:Number,default:0}},model:{prop:"value",event:"input"},data:function(){return{list:[],innerValue:"",listQuery:{currentPage:1,pageSize:20,sort:"desc",sidx:""},total:0,checked:"",checkedRow:{},listLoading:!1,defaultProps:{children:"children",label:"fullName"},query:{category:"",keyword:"",dataType:null},treeLoading:!1,treeData:[],inputHovering:!1,visible:!1}},computed:{showClose:function(){var e=void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.disabled&&this.inputHovering&&e;return t}},methods:{initData:function(){var e=this;this.listLoading=!0;var t=Object(o["a"])(Object(o["a"])(Object(o["a"])({},this.listQuery),this.query),{},{type:this.dataType?this.dataType:this.query.dataType,hasPage:this.hasPage});this.$emit("clearValidate"),Object(n["q"])(t).then((function(t){e.list=t.data.list.map((function(e){var t=e.parameterJson?JSON.parse(e.parameterJson):[];t||(t=[]);var a=Object(o["a"])({templateJson:t},e);return a})),e.total=t.data.pagination.total,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},handleNodeClick:function(e){this.query.category!==e.id&&(this.query.category=e.id,this.reset())},reset:function(){this.query.keyword="",this.query.dataType=null,this.search()},search:function(){this.listQuery.currentPage=1,this.listQuery.pageSize=20,this.listQuery.sort="desc",this.initData()},openDialog:function(){var e=this;this.disabled||(this.checked=this.value,this.visible=!0,this.treeLoading=!0,this.listLoading=!0,this.$store.dispatch("base/getDictionaryData",{sort:"DataInterfaceType"}).then((function(t){if(e.treeData=t,!e.treeData.length)return e.treeLoading=!1;e.$nextTick((function(){e.query.category=e.treeData[0].id,e.$refs.treeBox.setCurrentKey(e.query.category),e.treeLoading=!1,e.reset()}))})))},clear:function(){this.checked="",this.checkedRow={},this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow)},select:function(){this.checked&&(this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow),this.visible=!1)},rowClick:function(e){this.checked=e.id,this.checkedRow=e},goDataInterface:function(){var e=window.location.protocol+"//"+window.location.host+"/systemData/dataInterface";window.open(e,"_blank")}}},r=s,c=a("2877"),d=Object(c["a"])(r,i,l,!1,null,null,null);t["a"]=d.exports},"05fc":function(e,t,a){"use strict";a("a99e")},"07bc":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__),D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ade3"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("2638"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_5__),D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("2909"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_9__),D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("5530"),_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ed08"),_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("3424"),_utils_jnpf__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("2d7c"),_components_Generator_render_render_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("e287"),_components_Generator_generator_comConfig__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("100e"),_api_systemData_dataInterface__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("17de"),vuex__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("2f62"),formClass="form-"+_utils_jnpf__WEBPACK_IMPORTED_MODULE_13__["default"].idGenerator(),layouts={colFormItem:function(e,t){var a=this,i=t.__config__,l=buildListeners.call(this,t),o=i.labelWidth?"".concat(i.labelWidth,"px"):null,n=i.label?i.label+(this.formConf.labelSuffix||""):"";!1===i.showLabel&&(o="0");var s="cascader"===i.jnpfKey?e("JnpfCascader",_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_5___default()([{},{props:{props:t.props}},{attrs:{placeholder:t.placeholder,options:t.options,disabled:t.disabled,"show-all-levels":t.showAllLevels,separator:t.separator,clearable:t.clearable,filterable:t.filterable,multiple:t.multiple},style:t.style,on:{change:function(e){return a.onCascaderChange(e,t.on)},blur:function(e){return a.onCascaderBlur(e,t.on)}},key:t.__config__.renderKey,model:{value:a[a.formConf.formModel][t.__vModel__],callback:function(e){a.$set(a[a.formConf.formModel],t.__vModel__,e)}}}])):e(_components_Generator_render_render_js__WEBPACK_IMPORTED_MODULE_14__["a"],{attrs:{formData:this[this.formConf.formModel],conf:t,relations:"table"===i.jnpfKey?this.relations:void 0},on:Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},l),ref:"table"===i.jnpfKey?t.__vModel__:void 0,key:t.__config__.renderKey}),r=!i.visibility||Array.isArray(i.visibility)&&i.visibility.includes("pc");if(r&&!i.noShow){var c=e("el-col",{attrs:{span:i.span},class:i.className},[e("jnpf-form-tip-item",{attrs:{"label-width":o,prop:t.__vModel__,"tip-label":i.label&&i.showLabel?i.tipLabel:"",label:i.showLabel?n:""},key:i.renderKey},[s])]);return"alert"===i.jnpfKey&&(c=e("el-col",{attrs:{span:i.span},class:i.className},[e("jnpf-form-tip-item",{attrs:{"label-width":o,prop:t.__vModel__,"tip-label":i.label&&i.showLabel?i.tipLabel:"",label:i.showLabel?i.label:""},key:i.renderKey},[e("div",{style:"word-break: break-all"},[s])])])),"table"===i.jnpfKey&&(c=e("el-col",{attrs:{span:i.span},class:i.className},[e("el-form-item",{attrs:{"label-width":o,prop:t.__vModel__,label:i.showLabel?i.label:""},key:i.renderKey},[s])])),c}},rowFormItem:function(e,t){var a=this,i=buildListeners.call(this,t),l=t.__config__,o=!l.visibility||Array.isArray(l.visibility)&&l.visibility.includes("pc");if(o&&!l.noShow){if("tab"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span},class:"mb-10"},[e("el-tabs",{attrs:{type:t.type,"tab-position":t.tabPosition},on:Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},i),model:{value:t.__config__.active,callback:function(e){a.$set(t.__config__,"active",e)}}},[t.__config__.children.map((function(t,i){var l=renderChildren.call(a,e,t);return e("el-tab-pane",{attrs:{name:t.name,label:t.title}},[e("el-row",[l])])}))])]);if("collapse"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span},class:"mb-20"},[e("el-collapse",{attrs:{accordion:t.accordion},on:Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},i),model:{value:t.__config__.active,callback:function(e){a.$set(t.__config__,"active",e)}}},[t.__config__.children.map((function(t,i){var l=renderChildren.call(a,e,t);return e("el-collapse-item",{key:t.name,attrs:{title:t.title,name:t.name}},[e("el-row",[l])])}))])]);if("tableGrid"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.__config__.gutter}},[e("table",{class:"table-grid-box",style:{"--borderType":t.__config__.borderType,"--borderColor":t.__config__.borderColor,"--borderWidth":t.__config__.borderWidth+"px"}},[e("tbody",[t.__config__.children.map((function(i){return e("tr",[i.__config__.children.map((function(i,l){var o=renderChildren.call(a,e,i);return i.__config__.merged?"":e("td",{attrs:{colspan:i.__config__.colspan||1,rowspan:i.__config__.rowspan||1},style:{"--backgroundColor":i.__config__.backgroundColor}},[e("el-col",[e("el-row",{attrs:{gutter:t.__config__.gutter}},[o])])])}))])}))])])])]);var n=renderChildren.apply(this,arguments);if("table"===t.__config__.jnpfKey){t.__config__.noShow||(this.tableRefs[t.__vModel__]=t);var s=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},t),{},{config:t});return layouts.colFormItem.call(this,e,s)}if("card"===t.__config__.jnpfKey){var r=t.header;t.__config__.tipLabel&&(r=e("span",{slot:"label"},[t.header,e("el-tooltip",{attrs:{placement:"top",content:t.__config__.tipLabel}},[e("a",{class:"el-icon-question tooltip-question",style:"margin-left:4px"})])]));var c="";return t.header&&(c=e("div",{slot:"header"},[e("span",[r])])),e("el-col",{attrs:{span:t.__config__.span},class:"item-card"},[e("el-card",{attrs:{shadow:t.shadow,header:t.header},class:"mb-20"},[c,n])])}return"row"===t.__config__.jnpfKey?("flex"===t.type&&(n=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[n])),e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.gutter}},[n])])):void 0}}};function renderFrom(e){var t=this.formConfCopy,a=[formClass];return t.formStyle&&a.push(t.formStyle),t.className&&(a=[].concat(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_6__["a"])(a),Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_6__["a"])(t.className))),e("el-row",{attrs:{gutter:t.gutter},class:a},[e("el-form",_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_5___default()([{attrs:{size:t.size,"label-position":t.labelPosition,disabled:t.disabled,"label-width":"".concat(t.labelWidth,"px")},ref:t.formRef},{props:{model:this[t.formModel]}},{attrs:{rules:this[t.formRules]},nativeOn:{submit:function(e){e.preventDefault()}}}]),[renderFormItem.call(this,e,t.fields)])])}function formBtns(e){return e("el-col",[e("el-form-item",{attrs:{size:"large"}},[e("el-button",{attrs:{type:"primary"},on:{click:this.submitForm}},["提交"]),e("el-button",{on:{click:this.resetForm}},["重置"])])])}function renderFormItem(e,t){var a=this;return t.map((function(t){var i=t.__config__,l=layouts[i.layout];if(l)return l.call(a,e,t);throw new Error("没有与".concat(i.layout,"匹配的layout"))}))}function renderChildren(e,t){var a=t.__config__;return Array.isArray(a.children)?renderFormItem.call(this,e,a.children):null}function setValue(e,t,a){this.$set(t,"defaultValue",e),this.$set(this[this.formConf.formModel],a.__vModel__,e)}function buildListeners(e){var t=this,a=e.__config__,i={};return e.on&&Object.keys(e.on).forEach((function(l){var o=e.on[l],n=t.jnpf.getScriptFunc.call(t,o);n&&(i[l]=function(i){if("change"===l){var o="";if(["select","radio","checkbox"].includes(a.jnpfKey)){var s=e.options;if(e.multiple||"checkbox"===a.jnpfKey){for(var r=[],c=0;c<i[0].length;c++)e:for(var d=0;d<s.length;d++)if(i[0][c]===s[d][e.props.value]){r.push(s[d]);break e}o=r}else{for(var u={},p=0;p<s.length;p++)if(i[0]===s[p][e.props.value]){u=s[p];break}o=u}}else o="inputNumber"===a.jnpfKey?i[0]:i.length>1?i[1]:i[0];"popupSelect"!==a.jnpfKey&&"relationForm"!==a.jnpfKey||t.setTransferFormData(o,a,a.jnpfKey),n.call(t,Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({data:o},t.parameter)),t.handleRelation(e.__vModel__)}else n.call(t,Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({data:i[0]},t.parameter))})})),i.input=function(i){return setValue.call(t,i,a,e)},i}__webpack_exports__["a"]={components:{render:_components_Generator_render_render_js__WEBPACK_IMPORTED_MODULE_14__["a"]},props:{formConf:{type:Object,required:!0}},data:function(){var e=this,t=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__["a"])({formConfCopy:Object(_utils__WEBPACK_IMPORTED_MODULE_11__["b"])(this.formConf)},this.formConf.formModel,{}),this.formConf.formRules,{}),"options",{}),"tableRefs",{}),"relations",{}),"isTableValid",!1);return this.initCss(t.formConfCopy),this.initFormData(t.formConfCopy.fields,t[this.formConf.formModel]),this.initRelationForm(t.formConfCopy.fields),this.buildRules(t.formConfCopy.fields,t[this.formConf.formRules]),this.buildOptions(t.formConfCopy.fields,t.options,t[this.formConf.formModel]),this.buildRelations(t.formConfCopy.fields,t.relations),this.$nextTick((function(){e.onLoad(t.formConfCopy)})),t},provide:function(){return{parameter:this.parameter}},computed:Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_17__["b"])(["userInfo"])),{},{formDataConf:function(){var e=this.formConf.formModel;return this[e]},parameter:function(){var e=this.formConfCopy.formData?this.formConfCopy.formData:{};return this[this.formConf.formModel].id=e.id||"",this[this.formConf.formModel].flowId=e.flowId||"",{formData:this[this.formConf.formModel],setFormData:this.setFormData,setShowOrHide:this.setShowOrHide,setRequired:this.setRequired,setDisabled:this.setDisabled,onlineUtils:this.jnpf.onlineUtils}}}),mounted:function(){var e=this;this.initRelationData(),this.$nextTick((function(){e.$refs[e.formConf.formRef].clearValidate()}))},methods:{setTransferFormData:function(e,t,a){if(t.transferList&&t.transferList.length)for(var i=0;i<t.transferList.length;i++){var l=t.transferList[i];this.setFormData(l.sourceValue,e[l.targetField])}},initRelationData:function(){var e=this,t=function t(a){a.forEach((function(a){e.handleDefaultRelation(a.__vModel__),a.__config__.children&&t(a.__config__.children)}))};t(this.formConfCopy.fields)},initCss:function(e){document.getElementById("styleId")&&document.getElementById("styleId").remove();var t=document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",a.id="styleId",a.innerText=this.buildCSS(e.classJson),t.appendChild(a)},buildCSS:function(e){e=e.trim();var t="",a=e.split("}");return a.forEach((function(e){e&&(e="."+formClass+" "+e+"}",t+=e)})),t},initFormData:function(e,t){var a=this;this.$store.commit("generator/UPDATE_RELATION_DATA",{}),e.forEach((function(e){var i=e.__config__;e.__vModel__&&(t[e.__vModel__]=i.defaultValue),"table"!=e.__config__.jnpfKey&&i.children&&a.initFormData(i.children,t)}))},buildRelations:function(e,t){var a=this;e.forEach((function(e){var i=e.__config__;if(_components_Generator_generator_comConfig__WEBPACK_IMPORTED_MODULE_15__["b"].indexOf(i.jnpfKey)>-1&&"dynamic"===i.dataType&&i.templateJson&&i.templateJson.length)for(var l=0;l<i.templateJson.length;l++){var o=i.templateJson[l];if(o.relationField){var n=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setOptions"});if(t.hasOwnProperty(o.relationField)){var s=t[o.relationField].some((function(t){return t.realVModel===e.realVModel}));s||t[o.relationField].push(n)}else t[o.relationField]=[n]}}if("userSelect"===i.jnpfKey&&["dep","pos","role","group"].includes(e.selectType)&&e.relationField){var r=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setUserOptions"});if(t.hasOwnProperty(e.relationField)){var c=t[e.relationField].some((function(t){return t.realVModel===e.realVModel}));c||t[e.relationField].push(r)}else t[e.relationField]=[r]}if("areaSelect"===i.jnpfKey&&["address","cities"].includes(e.selectType)&&e.relationField){var d=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setAddressOptions"});if(t.hasOwnProperty(e.relationField)){var u=t[e.relationField].some((function(t){return t.realVModel===e.realVModel}));u||t[e.relationField].push(d)}else t[e.relationField]=[d]}if("popupSelect"===i.jnpfKey&&e.templateJson&&e.templateJson.length)for(var p=0;p<e.templateJson.length;p++){var f=e.templateJson[p];if(f.relationField){var m=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setPopupOptions"});if(t.hasOwnProperty(f.relationField)){var _=t[f.relationField].some((function(t){return t.realVModel===e.realVModel}));_||t[f.relationField].push(m)}else t[f.relationField]=[m]}}if("datePicker"===i.jnpfKey){if(i.startTimeRule)if(1==i.startTimeType)e.startTime=i.startTimeValue;else if(3==i.startTimeType)e.startTime=(new Date).getTime();else if(4==i.startTimeType){var h="";1==i.startTimeTarget||2==i.startTimeTarget?(h=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["g"])(i.startTimeTarget,i.startTimeType,i.startTimeValue),e.startTime=new Date(h).getTime()):3==i.startTimeTarget?(h=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["e"])(i.startTimeValue),e.startTime=new Date(h).getTime()):e.startTime=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["f"])(i.startTimeTarget,i.startTimeValue).getTime()}else if(5==i.startTimeType){var v="";1==i.startTimeTarget||2==i.startTimeTarget?(v=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["g"])(i.startTimeTarget,i.startTimeType,i.startTimeValue),e.startTime=new Date(v).getTime()):3==i.startTimeTarget?(v=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["h"])(i.startTimeValue),e.startTime=new Date(v).getTime()):e.startTime=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["i"])(i.startTimeTarget,i.startTimeValue).getTime()}if(i.endTimeRule)if(1==i.endTimeType)e.endTime=i.endTimeValue;else if(3==i.endTimeType)e.endTime=(new Date).getTime();else if(4==i.endTimeType){var b="";1==i.endTimeTarget||2==i.endTimeTarget?(b=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["g"])(i.endTimeTarget,i.endTimeType,i.endTimeValue),e.endTime=new Date(b).getTime()):3==i.endTimeTarget?(b=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["e"])(i.endTimeValue),e.endTime=new Date(b).getTime()):e.endTime=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["f"])(i.endTimeTarget,i.endTimeValue).getTime()}else if(5==i.endTimeType){var g="";1==i.endTimeTarget||2==i.endTimeTarget?(g=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["g"])(i.endTimeTarget,i.endTimeType,i.endTimeValue),e.endTime=new Date(g).getTime()):3==i.endTimeTarget?(g=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["h"])(i.endTimeValue),e.endTime=new Date(g).getTime()):e.endTime=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["i"])(i.endTimeTarget,i.endTimeValue).getTime()}if(e.__config__.startRelationField){var y=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setDate"});if(t.hasOwnProperty(e.__config__.startRelationField)){var D=t[e.__config__.startRelationField].some((function(t){return t.realVModel===e.realVModel}));D||t[e.__config__.startRelationField].push(y)}else t[e.__config__.startRelationField]=[y]}if(e.__config__.endRelationField){var w=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setDate"});if(t.hasOwnProperty(e.__config__.endRelationField)){var x=t[e.__config__.endRelationField].some((function(t){return t.realVModel===e.realVModel}));x||t[e.__config__.endRelationField].push(w)}else t[e.__config__.endRelationField]=[w]}}if("timePicker"===i.jnpfKey){var C="HH:mm"===e.format?"HH:mm:00":e.format;if(i.startTimeRule)if(1==i.startTimeType)e.startTime=i.startTimeValue||"00:00:00",3==e.startTime.split(":").length?e.startTime=e.startTime:e.startTime=e.startTime+":00";else if(3==i.startTimeType)e.startTime=a.jnpf.toDate(new Date,C);else if(4==i.startTimeType){var k="";k=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["f"])(i.startTimeTarget,i.startTimeValue),e.startTime=a.jnpf.toDate(k,C)}else if(5==i.startTimeType){var T="";T=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["i"])(i.startTimeTarget,i.startTimeValue),e.startTime=a.jnpf.toDate(T,C)}if(i.endTimeRule)if(1==i.endTimeType)e.endTime=i.endTimeValue||"23:59:59",3==e.endTime.split(":").length?e.endTime=e.endTime:e.endTime=e.endTime+":00";else if(3==i.endTimeType)e.endTime=a.jnpf.toDate(new Date,C);else if(4==i.endTimeType){var F="";F=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["f"])(i.endTimeTarget,i.endTimeValue),e.endTime=a.jnpf.toDate(F,C)}else if(5==i.endTimeType){var S="";S=Object(_components_Generator_utils_index_js__WEBPACK_IMPORTED_MODULE_12__["i"])(i.endTimeTarget,i.endTimeValue),e.endTime=a.jnpf.toDate(S,C)}if(e.__config__.startRelationField){var N=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setTime"});if(t.hasOwnProperty(e.__config__.startRelationField)){var L=t[e.__config__.startRelationField].some((function(t){return t.realVModel===e.realVModel}));L||t[e.__config__.startRelationField].push(N)}else t[e.__config__.startRelationField]=[N]}if(e.__config__.endRelationField){var O=Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])(Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({},e),{},{realVModel:e.__config__.isSubTable?e.__config__.parentVModel+"-"+e.__vModel__:e.__vModel__,opType:"setTime"});if(t.hasOwnProperty(e.__config__.endRelationField)){var $=t[e.__config__.endRelationField].some((function(t){return t.realVModel===e.realVModel}));$||t[e.__config__.endRelationField].push(O)}else t[e.__config__.endRelationField]=[O]}}i.children&&a.buildRelations(i.children,t)}))},handleRelation:function(e){var t=this;if(e){var a=this.relations;for(var i in a)if(i===e)for(var l=function(){var e=a[i][o],l=e.realVModel||e.__vModel__,n=e.__config__,s=n.jnpfKey,r="";if((["checkbox","cascader"].includes(s)||["select","treeSelect","popupSelect","popupTableSelect","userSelect"].includes(s)&&e.multiple)&&(r=[]),l.includes("-")){var c=l.split("-")[0];t.$refs[c]&&t.$refs[c].$children[0]&&t.$refs[c].$children[0].handleRelationForParent(e,r)}else{if(t.setFormData(e.__vModel__,r),"setOptions"===e.opType){var d={paramList:t.getParamList(n.templateJson,t[t.formConf.formModel])};Object(_api_systemData_dataInterface__WEBPACK_IMPORTED_MODULE_16__["o"])(n.propsUrl,d).then((function(a){var i=a.data;t.setFieldOptions(e.__vModel__,i)}))}if("setUserOptions"===e.opType){var u=t[t.formConf.formModel][e.relationField]||[];t.comSet("ableRelationIds",e.__vModel__,Array.isArray(u)?u:[u])}if("setAddressOptions"===e.opType){var p=t[t.formConf.formModel][e.relationField]||[];t.comSet("ableAddressIds",e.__vModel__,Array.isArray(p)?p:[p])}if(e.opType,"setDate"===e.opType){var f="",m="";f=2==e.__config__.startTimeType?t[t.formConf.formModel][e.__config__.startRelationField]||0:e.startTime,m=2==e.__config__.endTimeType?t[t.formConf.formModel][e.__config__.endRelationField]||0:e.endTime,t.comSet("startTime",e.__vModel__,f),t.comSet("endTime",e.__vModel__,m)}if("setTime"===e.opType){var _="",h="";2==e.__config__.startTimeType?(_=t[t.formConf.formModel][e.__config__.startRelationField]||"00:00:00",_&&3==_.split(":").length?_=_:_+=":00"):_=e.startTime,2==e.__config__.endTimeType?(h=t[t.formConf.formModel][e.__config__.endRelationField]||"23:59:59",h&&3==h.split(":").length?h=h:h+=":00"):h=e.endTime,t.comSet("startTime",e.__vModel__,_),t.comSet("endTime",e.__vModel__,h)}}},o=0;o<a[i].length;o++)l()}},handleDefaultRelation:function(e){if(e){var t=this.relations;for(var a in t)if(a===e)for(var i=0;i<t[a].length;i++){var l=t[a][i],o=l.realVModel||l.__vModel__;l.__config__;if(o.includes("-")){var n=o.split("-")[0];this.$refs[n]&&this.$refs[n].$children[0]&&this.$refs[n].$children[0].handleRelationForParent(l,"",!0)}else{if("setUserOptions"===l.opType){var s=this[this.formConf.formModel][l.relationField]||[];this.comSet("ableRelationIds",l.__vModel__,Array.isArray(s)?s:[s])}if("setAddressOptions"===l.opType){var r=this[this.formConf.formModel][l.relationField]||[];this.comSet("ableAddressIds",l.__vModel__,Array.isArray(r)?r:[r])}if("setDate"===l.opType){var c="",d="";c=2==l.__config__.startTimeType?this[this.formConf.formModel][l.__config__.startRelationField]||0:l.startTime,d=2==l.__config__.endTimeType?this[this.formConf.formModel][l.__config__.endRelationField]||0:l.endTime,this.comSet("startTime",l.__vModel__,c),this.comSet("endTime",l.__vModel__,d)}if("setTime"===l.opType){var u="",p="";u=2==l.__config__.startTimeType?this[this.formConf.formModel][l.__config__.startRelationField]||"00:00:00":l.startTime,2==l.__config__.endTimeType?(p=this[this.formConf.formModel][l.__config__.endRelationField]||"23:59:59",p&&3==p.split(":").length?p=p:p+=":00"):p=l.endTime,u&&(3==u.split(":").length?u=u:u+=":00"),p&&(3==p.split(":").length?p=p:p+=":00"),this.comSet("startTime",l.__vModel__,u),this.comSet("endTime",l.__vModel__,p)}}}}},getParamList:function(e,t){for(var a=0;a<e.length;a++)e[a].relationField&&(e[a].defaultValue=t[e[a].relationField]||"");return e},initRelationForm:function(e){var t=this;e.forEach((function(a){var i=a.__config__;if("relationFormAttr"==i.jnpfKey||"popupAttr"==i.jnpfKey){var l=a.relationField.split("_jnpfTable_")[0];e.forEach((function(e){var t=Array.isArray(e.__config__.visibility)&&!e.__config__.visibility.includes("pc");l!=e.__vModel__||!t&&!e.__config__.noShow||a.__vModel__||(a.__config__.noShow=!0)}))}a.__config__.children&&a.__config__.children.length&&t.initRelationForm(a.__config__.children)}))},buildOptions:function(e,t,a){var i=this;e.forEach((function(e){var l=e.__config__;if(_components_Generator_generator_comConfig__WEBPACK_IMPORTED_MODULE_15__["b"].indexOf(l.jnpfKey)>-1)if("dictionary"===l.dataType&&l.dictionaryType)e.options=[],i.$store.dispatch("base/getDicDataSelector",l.dictionaryType).then((function(a){e.options=a,t[e.__vModel__+"Options"]=e.options}));else if("dynamic"===l.dataType&&l.propsUrl){e.options=[];var o={paramList:l.templateJson?i.getParamList(l.templateJson,a):[]};Object(_api_systemData_dataInterface__WEBPACK_IMPORTED_MODULE_16__["o"])(l.propsUrl,o).then((function(a){e.options=Array.isArray(a.data)?a.data:[],t[e.__vModel__+"Options"]=e.options}))}else t[e.__vModel__+"Options"]=e.options;l.children&&"table"!==l.jnpfKey&&i.buildOptions(l.children,t,a)}))},buildRules:function buildRules(componentList,rules){var _this13=this;componentList.forEach((function(cur){var config=JSON.parse(JSON.stringify(cur.__config__));if(Array.isArray(config.regList)||(config.regList=[]),config.required){var required={required:config.required,message:cur.placeholder};Array.isArray(config.defaultValue)&&(required.type="array",required.message="请至少选择一个".concat(config.label)),void 0===required.message&&(required.message="".concat(config.label,"不能为空")),config.regList.push(required)}rules[cur.__vModel__]=config.regList.map((function(item){return item.pattern&&_this13.isRegExp(item.pattern)&&(item.pattern=eval(item.pattern)),item.trigger=config.trigger||"blur",item})),config.children&&"table"!==config.jnpfKey&&_this13.buildRules(config.children,rules)}))},isRegExp:function isRegExp(val){try{return"[object RegExp]"===Object.prototype.toString.call(eval(val))}catch(_unused){return!1}},onLoad:function(e){if(e&&e.funcs&&e.funcs.onLoad){var t=this.jnpf.getScriptFunc.call(this,e.funcs.onLoad);t&&t(this.parameter)}},resetForm:function(){var e=this;this.$store.commit("generator/UPDATE_RELATION_DATA",{}),this.formConfCopy=Object(_utils__WEBPACK_IMPORTED_MODULE_11__["b"])(this.formConf),this.$refs[this.formConf.formRef].resetFields(),Object.keys(this.tableRefs).forEach((function(t){e.$refs[t]&&e.$refs[t].$children&&e.$refs[t].$children[0].resetTable()}))},checkTableData:function(){var e=this,t=!0;return Object.keys(this.tableRefs).forEach((function(a){if(e.$refs[a]&&e.$refs[a].$children){var i=e.$refs[a].$children[0].submit();i?e[e.formConf.formModel][a]=i:t=!1}})),t},getFieldOptions:function(e){if(!e)return[];var t=e.indexOf(".")>-1;if(t){var a=e.split(".");if(this.$refs[a[0]]&&this.$refs[a[0]].$children[0]){var i=this.$refs[a[0]].$children[0].getTableFieldOptions(a[1]);return i}return[]}return this.options[e+"Options"]||[]},setFormData:function(e,t){if(e&&this[this.formConf.formModel][e]!==t){var a=e.indexOf(".")>-1;if(a){var i=e.split(".");this.$refs[i[0]]&&this.$refs[i[0]].$children[0]&&this.$refs[i[0]].$children[0].setTableFormData(i[1],t)}else this.comSet("defaultValue",e,t),this[this.formConf.formModel][e]=t;this.handleRelation(e)}},setShowOrHide:function(e,t){var a=!!t,i=e.indexOf(".")>-1;if(i){var l=e.split(".");this.$refs[l[0]]&&this.$refs[l[0]].$children[0]&&this.$refs[l[0]].$children[0].setTableShowOrHide(l[1],!a)}else this.comSet("noShow",e,!a)},setRequired:function(e,t){var a=!!t,i=e.indexOf(".")>-1;i||(this.comSet("required",e,a),this.buildRules(this.formConfCopy.fields,this[this.formConf.formRules]))},setDisabled:function(e,t){var a=!!t,i=e.indexOf(".")>-1;i||this.comSet("disabled",e,a)},setFieldOptions:function(e,t){var a=Array.isArray(t)?t:[],i=e.indexOf(".")>-1;i||this.comSet("options",e,a)},comSet:function(e,t,a){var i=this;if(t){var l=function l(o){for(var n=0;n<o.length;n++){var s=o[n];if(s.__vModel__&&s.__vModel__===t){switch(e){case"disabled":i.$set(s,e,a);break;case"ableRelationIds":i.$set(s,e,a);break;case"ableAddressIds":i.$set(s,e,a);break;case"startTime":i.$set(s,e,a);break;case"endTime":i.$set(s,e,a);break;case"options":_components_Generator_generator_comConfig__WEBPACK_IMPORTED_MODULE_15__["b"].indexOf(s.__config__.jnpfKey)>-1&&(s.options=a);break;default:i.$set(s.__config__,e,a);break}s.__config__.renderKey=+new Date+s.__vModel__;break}s.__config__&&"table"!==s.__config__.jnpfKey&&s.__config__.children&&Array.isArray(s.__config__.children)&&l(s.__config__.children)}};l(this.formConfCopy.fields)}},beforeSubmit:function(){if(!this.formConfCopy||!this.formConfCopy.funcs||!this.formConfCopy.funcs.beforeSubmit)return Promise.resolve();var e=this.jnpf.getScriptFunc.call(this,this.formConfCopy.funcs.beforeSubmit);return e?e(this.parameter):Promise.resolve()},afterSubmit:function(){if(this.formConfCopy&&this.formConfCopy.funcs&&this.formConfCopy.funcs.afterSubmit){var e=this.jnpf.getScriptFunc.call(this,this.formConfCopy.funcs.afterSubmit);e&&e(this.parameter)}},submitForm:function(e){var t=this;this.isTableValid=this.checkTableData();try{this.beforeSubmit().then((function(){t.submit(e)}))}catch(a){this.submit(e)}},submit:function(e){var t=this;this.$refs[this.formConf.formRef].validate((function(a){return!!a&&(!!t.isTableValid&&(t.$emit("submit",t[t.formConf.formModel],t.afterSubmit,e),!0))}))},onCascaderChange:function(e,t){if(t&&t.change){var a=this.jnpf.getScriptFunc.call(this,t.change);a&&a.call(this,Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({data:e},this.parameter))}},onCascaderBlur:function(e,t){if(t&&t.blur){var a=this.jnpf.getScriptFunc.call(this,t.blur);a&&a.call(this,Object(D_Work_sxjt_project_jiaqizhan_gas_vue_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_10__["a"])({data:e},this.parameter))}}},render:function(e){return renderFrom.call(this,e)}}},"0891":function(e,t,a){},"092a":function(e,t,a){},"0977":function(e,t,a){},"0c2e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-export",attrs:{title:"导出","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"导出方式"}},[a("p",{staticClass:"export-label",attrs:{slot:"label"},slot:"label"},[e._v("导出方式")]),a("el-radio-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-radio",{attrs:{label:0}},[e._v("当前页面数据")]),a("el-radio",{attrs:{label:1}},[e._v("全部页面数据")]),a("el-radio",{attrs:{label:2,disabled:!e.selectIds||!e.selectIds.length}},[e._v("当前选择数据")])],1)],1),a("el-form-item",{staticClass:"export-line"},[a("p",{staticClass:"export-label",attrs:{slot:"label"},slot:"label"},[e._v("列表数据"),a("span",[e._v("请选择导出字段")])]),a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.columns,callback:function(t){e.columns=t},expression:"columns"}},e._l(e.columnList,(function(t){return a("el-checkbox",{key:t.prop,staticClass:"column-item",attrs:{label:t.prop,title:t.label}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("p",{staticClass:"footer-tip"},[e._v("提示:系统将导出列表中选中的数据")]),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.downLoad}},[e._v("导 出")])],1)],1)},l=[],o=(a("6762"),a("2fdb"),a("100e")),n={data:function(){return{visible:!1,btnLoading:!1,type:0,columns:[],checkAll:!0,isIndeterminate:!1,columnList:[],selectIds:[]}},methods:{init:function(e,t){this.visible=!0,this.checkAll=!0,this.isIndeterminate=!1,e=JSON.parse(JSON.stringify(e)),this.columnList=e.filter((function(e){return!o["e"].includes(e.__config__.jnpfKey)})),this.selectIds=t||[],this.columns=e.map((function(e){return e.prop}))},handleCheckAllChange:function(e){this.columns=e?this.columnList.map((function(e){return e.prop})):[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.columnList.length,this.isIndeterminate=t>0&&t<this.columnList.length},downLoad:function(){if(!this.columns.length)return this.$message.warning("请至少选择一个导出字段");this.$emit("download",{dataType:this.type,selectKey:this.columns,selectIds:this.selectIds})}}},s=n,r=a("2877"),c=Object(r["a"])(s,i,l,!1,null,null,null);t["a"]=c.exports},"0c2ed":function(e,t,a){},"0cc1":function(e,t,a){"use strict";a("7cd5")},"0d69":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center previewDialog",attrs:{title:e.title,"lock-scroll":"",width:"600px"}},"el-dialog",e.$attrs,!1),e.$listeners),[a("div",{staticClass:"preview-main"},[a("div",{staticClass:"preview-item preview-item-pc",on:{click:function(t){return e.previewPc()}}},[a("i",{staticClass:"preview-icon icon-ym icon-ym-pc"}),a("div",{staticClass:"preview-txt"},[a("p",{staticClass:"preview-title"},[e._v("Web预览")])])]),a("div",{staticClass:"preview-item",on:{click:function(t){return e.previewApp()}}},[a("i",{staticClass:"preview-icon icon-ym icon-ym-mobile"}),a("div",{staticClass:"preview-txt"},[a("p",{staticClass:"preview-title"},[e._v("App预览")])])])]),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center code-dialog",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,"append-to-body":"",visible:e.previewAppVisible,title:e.title,width:"400px"},on:{"update:visible":function(t){e.previewAppVisible=t},opened:e.getQRimg}},[a("div",{staticClass:"qrcode-img"},[a("div",{ref:"qrCode",attrs:{id:"qrcode"}})]),a("p",{staticClass:"tip"},[e._v("打开手机APP扫码预览")])])],1)},l=[],o=a("d044"),n=a.n(o),s={props:["id","type","fullName","dataSource","previewType"],data:function(){return{previewAppVisible:!1,qrCodeText:""}},computed:{title:function(){return"webDesign"===this.type||"flow"===this.type?0==this.previewType?"预览设计中的表单":"预览已发布的表单":"预览"}},methods:{closeDialog:function(){this.$emit("update:visible",!1)},previewPc:function(){var e=this;if(this.closeDialog(),"flow"!==this.type&&"report"!==this.type&&"portal"!==this.type||setTimeout((function(){e.$emit("previewPc")}),300),"webDesign"===this.type){if(!this.id)return;this.$router.push("/previewModel?isPreview=1&id=".concat(this.id,"&previewType=").concat(this.previewType))}},previewApp:function(){var e=this,t={t:"flow"===this.type?"WFP":"webDesign"===this.type?"ADP":"report",id:this.id};"report"===this.type&&(t.fullName=this.fullName),"flow"===this.type&&(t.ds=this.dataSource),"webDesign"==this.type&&(t.previewType=this.previewType),"portal"==this.type&&(t.t="portal"),this.qrCodeText=JSON.stringify(t),this.closeDialog(),setTimeout((function(){e.previewAppVisible=!0}),300)},getQRimg:function(){if(this.qrCodeText){this.$refs.qrCode.innerHTML="";var e=new n.a(this.$refs.qrCode,{width:260,height:260,text:this.qrCodeText,correctLevel:n.a.CorrectLevel.H});e._el.title=""}}}},r=s,c=(a("e1bb"),a("2877")),d=Object(c["a"])(r,i,l,!1,null,"f0a374be",null);t["a"]=d.exports},1130:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return s}));var i={baseBarData:[{name:"苹果",type:"手机品牌",value:1000879},{name:"三星",type:"手机品牌",value:3400879},{name:"小米",type:"手机品牌",value:2300879},{name:"oppo",type:"手机品牌",value:5400879},{name:"vivo",type:"手机品牌",value:3400879}],mulBarData:[{name:"1991",value:3,type:"Lon"},{name:"1992",value:4,type:"Lon"},{name:"1993",value:3.5,type:"Lon"},{name:"1994",value:5,type:"Lon"},{name:"1995",value:4.9,type:"Lon"},{name:"1996",value:6,type:"Lon"},{name:"1997",value:7,type:"Lon"},{name:"1998",value:9,type:"Lon"},{name:"1999",value:13,type:"Lon"},{name:"1991",value:3,type:"Bor"},{name:"1992",value:4,type:"Bor"},{name:"1993",value:3.5,type:"Bor"},{name:"1994",value:5,type:"Bor"},{name:"1995",value:4.9,type:"Bor"},{name:"1996",value:6,type:"Bor"},{name:"1997",value:7,type:"Bor"},{name:"1998",value:9,type:"Bor"},{name:"1999",value:13,type:"Bor"}],plusMinusBarData:[{name:"周一",value:200,type:"利润"},{name:"周二",value:170,type:"利润"},{name:"周三",value:240,type:"利润"},{name:"周四",value:244,type:"利润"},{name:"周五",value:200,type:"利润"},{name:"周六",value:220,type:"利润"},{name:"周日",value:210,type:"利润"},{name:"周一",value:320,type:"收入"},{name:"周二",value:302,type:"收入"},{name:"周三",value:341,type:"收入"},{name:"周四",value:374,type:"收入"},{name:"周五",value:390,type:"收入"},{name:"周六",value:450,type:"收入"},{name:"周日",value:420,type:"收入"},{name:"周一",value:-120,type:"支出"},{name:"周二",value:-132,type:"支出"},{name:"周三",value:-101,type:"支出"},{name:"周四",value:-134,type:"支出"},{name:"周五",value:-190,type:"支出"},{name:"周六",value:-230,type:"支出"},{name:"周日",value:-210,type:"支出"}],brokenColumnBarData:[{name:"1991",value:110,type:"降水量"},{name:"1992",value:130,type:"降水量"},{name:"1993",value:113.5,type:"降水量"},{name:"1994",value:150,type:"降水量"},{name:"1995",value:240.9,type:"降水量"},{name:"1996",value:160,type:"降水量"},{name:"1997",value:97,type:"降水量"},{name:"1998",value:290,type:"降水量"},{name:"1999",value:230,type:"降水量"},{name:"1991",value:33,type:"温度"},{name:"1992",value:35,type:"温度"},{name:"1993",value:37,type:"温度"},{name:"1994",value:35,type:"温度"},{name:"1995",value:34.9,type:"温度"},{name:"1996",value:36,type:"温度"},{name:"1997",value:37,type:"温度"},{name:"1998",value:39,type:"温度"},{name:"1999",value:33,type:"温度"}],radarData:[{value:75,name:"销售",type:"预算分配",max:100},{value:65,name:"管理",type:"预算分配",max:100},{value:55,name:"信息技术",type:"预算分配",max:100},{value:74,name:"客服",type:"预算分配",max:100},{value:38,name:"研发",type:"预算分配",max:100},{value:88,name:"市场",type:"预算分配",max:100},{value:35,name:"销售",type:"实际开销",max:100},{value:62,name:"管理",type:"实际开销",max:100},{value:44,name:"信息技术",type:"实际开销",max:100},{value:66,name:"客服",type:"实际开销",max:100},{value:28,name:"研发",type:"实际开销",max:100},{value:58,name:"市场",type:"实际开销",max:100}]},l=[{label:"北京-销售部",value:"¥ 895560880"},{label:"上海-销售部",value:"¥ 829546160"},{label:"深圳-销售部",value:"¥ 46564535"},{label:"厦门-销售部",value:"¥ 146564535"},{label:"广州-销售部",value:"¥ 125264330"}],o=[{timestamp:"2012-04-12 08:46",content:"节点发起"},{timestamp:"2012-04-12 10:10",content:"节点加签"},{timestamp:"2012-04-12 11:46",content:"节点审批"},{timestamp:"2012-04-12 13:20",content:"结束"}],n=[{inputField101:"01",inputField102:"xx门店",inputField103:"2598元",inputField104:"85%",inputField105:"2012-04-12 08:46"},{inputField101:"02",inputField102:"xx门店",inputField103:"2598元",inputField104:"85%",inputField105:"2012-04-12 08:46"},{inputField101:"03",inputField102:"xx门店",inputField103:"2598元",inputField104:"85%",inputField105:"2012-04-12 08:46"},{inputField101:"04",inputField102:"xx门店",inputField103:"2598元",inputField104:"85%",inputField105:"2012-04-12 08:46"},{inputField101:"05",inputField102:"xx门店",inputField103:"2598元",inputField104:"85%",inputField105:"2012-04-12 08:46"}],s=[{name:"北京市",value:190,long:116.46,lat:39.92},{name:"上海市",value:180,long:121.48,lat:31.22},{name:"成都市",value:90,long:104.06,lat:30.65},{name:"深圳市",value:120,long:114.07,lat:22.62},{name:"厦门市",value:80,long:118.11,lat:24.49}]},"120f":function(e,t,a){},1374:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},["dialog"===e.config.popupType?[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:e.config.popupTitle,"close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:e.config.popupWidth},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("close")}}},[e.loading?e._e():a("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.dataFormSubmit}},[e._v("\n          "+e._s(e.$t("common.confirmButton")))])],1)],1)]:e._e(),"drawer"===e.config.popupType?[a("el-drawer",{ref:"drawer",staticClass:"JNPF-common-drawer",attrs:{title:e.config.popupTitle,visible:e.visible,wrapperClosable:!1,size:e.config.popupWidth,"append-to-body":""},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("close")}}},[a("div",{staticClass:"JNPF-flex-main"},[a("div",{staticClass:"dynamicForm"},[e.loading?e._e():a("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}})],1),a("div",{staticClass:"drawer-footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.dataFormSubmit}},[e._v("\n            "+e._s(e.$t("common.confirmButton")))])],1)])])]:e._e()],2)},l=[],o=(a("ac6a"),a("6762"),a("2fdb"),a("5530")),n=a("49aa"),s=a("ef22"),r=a("17de"),c=a("2f62"),d={name:"popup",components:{Parser:n["a"]},props:{},data:function(){return{visible:!1,btnLoading:!1,loading:!1,config:{},formConf:{},formData:{},isPreview:!1,key:+new Date,id:"",dataForm:{id:"",data:""},modelId:"",isAdd:!1}},computed:Object(o["a"])({},Object(c["b"])(["userInfo"])),methods:{init:function(e,t,a){var i=this,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4?arguments[4]:void 0;this.loading=!0,this.config=e,this.id=a,this.isPreview=l,this.modelId=t,this.isAdd=!0,this.$nextTick((function(){i.config.modelId&&i.getConfigData(o)}))},getConfigData:function(e){var t=this;Object(s["m"])(this.config.modelId).then((function(a){if(200===a.code&&a.data){t.formConf=JSON.parse(a.data.formData);var i=function(e){if(t.config.formOptions.length)for(var a in e)for(var i=0;i<t.config.formOptions.length;i++){var l=t.config.formOptions[i];"@formId"==l.currentField&&(t.formData[l.field]=e.id),l.currentField==a&&(t.formData[l.field]=e[a])}t.fillFormData(t.formConf,t.formData),t.$nextTick((function(){t.visible=!0,t.loading=!1}))};if(t.id)Object(s["r"])(t.modelId,t.id).then((function(e){var a=e.data;if(a.data){var l=JSON.parse(a.data);t.formData={},i(Object(o["a"])(Object(o["a"])({},l),{},{id:t.id}))}}));else{var l=e;i(l)}}else t.$message({message:a.msg||"请求出错，请重试",type:"error",duration:1500})})).catch((function(){}))},fillFormData:function(e,t){var a=this,i=function e(i,l){for(var o=function(){var o=i[n];if(o.__vModel__){var s=t.hasOwnProperty(o.__vModel__)?t[o.__vModel__]:o.__config__.defaultValue;if(o.__config__.isSubTable||(o.__config__.defaultValue=s),(a.isAdd||o.__config__.isSubTable)&&o.__config__.defaultCurrent){if("datePicker"===o.__config__.jnpfKey){var r=o.format,c=a.jnpf.toDate((new Date).getTime(),r),d="yyyy"===r?"-01-01 00:00:00":"yyyy-MM"===r?"-01 00:00:00":"yyyy-MM-dd"===r?" 00:00:00":"";o.__config__.defaultValue=new Date(c+d).getTime()}"timePicker"===o.__config__.jnpfKey&&(o.__config__.defaultValue=a.jnpf.toDate(new Date,o.format)),"organizeSelect"===o.__config__.jnpfKey&&a.userInfo.organizeIdList instanceof Array&&a.userInfo.organizeIdList.length>0&&(o.__config__.defaultValue=1==o.multiple?[a.userInfo.organizeIdList]:a.userInfo.organizeIdList),"depSelect"===o.__config__.jnpfKey&&a.userInfo.departmentId&&(o.__config__.defaultValue=o.multiple?[a.userInfo.departmentId]:a.userInfo.departmentId),"posSelect"===o.__config__.jnpfKey&&a.userInfo.positionIds instanceof Array&&a.userInfo.positionIds.length>0&&(o.__config__.defaultValue=o.multiple?a.userInfo.positionIds.map((function(e){return e.id})):a.userInfo.positionIds[0].id),"roleSelect"===o.__config__.jnpfKey&&a.userInfo.roleIds instanceof Array&&a.userInfo.roleIds.length>0&&(o.__config__.defaultValue=o.multiple?a.userInfo.roleIds:a.userInfo.roleIds[0]),"groupSelect"===o.__config__.jnpfKey&&a.userInfo.groupIds instanceof Array&&a.userInfo.groupIds.length>0&&(o.__config__.defaultValue=o.multiple?a.userInfo.groupIds:a.userInfo.groupIds[0]),["userSelect"].includes(o.__config__.jnpfKey)&&a.userInfo.userId&&(o.__config__.defaultValue=o.multiple?[a.userInfo.userId]:a.userInfo.userId),"usersSelect"===o.__config__.jnpfKey&&a.userInfo.userId&&(o.__config__.defaultValue=o.multiple?[a.userInfo.userId+"--user"]:a.userInfo.userId+"--user"),"sign"==o.__config__.jnpfKey&&a.userInfo.signImg&&(o.__config__.defaultValue=a.userInfo.signImg)}}if(!a.isPreview&&a.useFormPermission){var u=o.__config__.isSubTable?l.__vModel__+"-"+o.__vModel__:o.__vModel__,p=!0;a.formOperates&&a.formOperates.length&&(p=!a.formOperates.some((function(e){return e.enCode===u}))),p=o.__config__.noShow?o.__config__.noShow:p,a.$set(o.__config__,"noShow",p)}o.__config__&&o.__config__.children&&Array.isArray(o.__config__.children)&&e(o.__config__.children,o)},n=0;n<i.length;n++)o()};i(e.fields),e.formData=t},submitForm:function(e,t){var a=this;if(console.log(e),e){this.btnLoading=!0;var i=function(e,t){a.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t&&"function"===typeof t&&t(),a.visible=!1,a.btnLoading=!1}})};if(this.config.customBtn){this.config.templateJson&&this.config.templateJson.length&&this.config.templateJson.forEach((function(t){var a=e[t.relationField]||0==e[t.relationField]||0==e[t.relationField]?e[t.relationField]:"";t.defaultValue="@formId"===t.relationField&&1==t.sourceType?e.id:1==t.sourceType?a:t.relationField}));var l={paramList:this.config.templateJson||[]};Object(r["o"])(this.config.interfaceId,l).then((function(e){i(e,t)})).catch((function(){a.btnLoading=!1}))}else{var n=Object(o["a"])(Object(o["a"])({},this.formData),e);this.dataForm.data=JSON.stringify(n),Object(s["i"])(this.config.modelId,this.dataForm).then((function(e){i(e,t)})).catch((function(){a.btnLoading=!1}))}}},dataFormSubmit:function(){if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.$refs.dynamicForm&&this.$refs.dynamicForm.submitForm()}}},u=d,p=a("2877"),f=Object(p["a"])(u,i,l,!1,null,null,null);t["a"]=f.exports},"13bd":function(e,t,a){"use strict";a("8388")},"149a":function(e,t,a){},"14cc":function(e,t,a){"use strict";a("8ec8")},"15a9":function(e,t,a){"use strict";a("0891")},"15f4":function(e,t,a){"use strict";a("acd9")},1822:function(e,t,a){},"19d0":function(e,t,a){},"1aab":function(e,t,a){},"1bd2":function(e,t,a){},"1cd5":function(e,t,a){},"1e90":function(e,t,a){},"1ed7":function(e,t,a){},"1fff":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"left-board"},[i("el-scrollbar",{staticClass:"left-scrollbar"},[i("div",{staticClass:"components-list"},e._l(e.leftComponents,(function(t,a){return i("div",{key:a,staticClass:"components-part"},[i("div",{staticClass:"components-title"},[e._v(e._s(t.title))]),i("draggable",{staticClass:"components-draggable",attrs:{list:t.list,group:{name:"componentsGroup",pull:"clone",put:!1},clone:e.cloneComponent,draggable:".components-item",filter:".disabled",sort:!1},on:{end:e.onEnd}},e._l(t.list,(function(t,a){return i("div",{key:a,staticClass:"components-item",class:{disabled:t.__config__.dragDisabled},on:{click:function(a){return e.addComponent(t)}}},[i("div",{staticClass:"components-body"},[i("i",{class:t.__config__.tagIcon}),e._v("\n                "+e._s(t.__config__.label)+"\n              ")])])})),0)],1)})),0)])],1),i("div",{staticClass:"center-board"},[i("div",{staticClass:"action-bar"},[i("div",{staticClass:"action-bar-right"},[i("el-button",{class:{"unActive-btn":"pc"!=e.showType},attrs:{icon:"icon-ym icon-ym-pc",type:"text",size:"medium"},on:{click:function(t){e.showType="pc"}}},[e._v("桌面端")]),i("el-button",{class:{"unActive-btn":"app"!=e.showType},attrs:{icon:"icon-ym icon-ym-mobile",type:"text",size:"medium"},on:{click:function(t){e.showType="app"}}},[e._v("移动端")]),i("el-button",{staticClass:"unActive-btn",attrs:{icon:"el-icon-video-play",type:"text",size:"medium"},on:{click:e.preview}},[e._v("预览")]),i("el-button",{staticClass:"delete-btn unActive-btn",attrs:{icon:"icon-ym icon-ym-clean",type:"text",size:"medium"},on:{click:e.empty}},[e._v("清空")])],1)]),i("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],staticClass:"center-scrollbar"},[i("el-row",{staticClass:"center-board-row",attrs:{gutter:e.formConf.gutter}},[i("el-form",{attrs:{size:e.formConf.size,"label-position":e.formConf.labelPosition,disabled:e.formConf.disabled,"label-width":e.formConf.labelWidth+"px"}},[i("draggable",{staticClass:"drawing-board",attrs:{list:e.drawingList,animation:340,group:"componentsGroup"},on:{end:e.onCenterEnd}},e._l(e.drawingList,(function(t,a){return i("draggable-item",{key:t.renderKey,attrs:{"drawing-list":e.drawingList,element:t,index:a,"active-id":e.activeId,"form-conf":e.formConf,mergeLeftColDisabled:e.mergeLeftColDisabled,mergeRightColDisabled:e.mergeRightColDisabled,mergeWholeRowDisabled:e.mergeWholeRowDisabled,mergeAboveRowDisabled:e.mergeAboveRowDisabled,mergeBelowRowDisabled:e.mergeBelowRowDisabled,mergeWholeColDisabled:e.mergeWholeColDisabled,undoMergeRowDisabled:e.undoMergeRowDisabled,undoMergeColDisabled:e.undoMergeColDisabled,deleteWholeColDisabled:e.deleteWholeColDisabled,deleteWholeRowDisabled:e.deleteWholeRowDisabled,put:e.shouldClone,end:e.onTableEnd},on:{activeItem:e.activeFormItem,copyItem:e.drawingItemCopy,deleteItem:e.drawingItemDelete,addRow:e.handleTableAddRow,addCol:e.handleTableAddCol,handleTableSetting:e.handleTableSetting,handleShowMenu:e.handleShowMenu}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.drawingList.length,expression:"!drawingList.length"}],staticClass:"empty-info"},[i("img",{staticClass:"empty-img",attrs:{src:a("074b"),alt:""}})])],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"app"===e.showType,expression:"showType==='app'"}],attrs:{id:"ipad"}},[i("div",{staticClass:"outeripad"},[i("div",{staticClass:"ipadbody"},[i("el-scrollbar",{staticClass:"center-scrollbar"},[i("el-row",{staticClass:"center-board-row",attrs:{gutter:e.formConf.gutter}},[i("el-form",{attrs:{size:e.formConf.size,"label-position":e.formConf.labelPosition,disabled:e.formConf.disabled,"label-width":e.formConf.labelWidth+"px"}},[i("draggable",{staticClass:"drawing-board",attrs:{list:e.drawingList,animation:340,group:"componentsGroup"},on:{end:e.onCenterEnd}},e._l(e.drawingList,(function(t,a){return i("draggable-item-app",{key:t.renderKey,attrs:{"drawing-list":e.drawingList,element:t,index:a,"active-id":e.activeId,"form-conf":e.formConf,put:e.shouldClone,end:e.onTableEnd},on:{activeItem:e.activeFormItem,copyItem:e.drawingItemCopy,deleteItem:e.drawingItemDelete}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.drawingList.length,expression:"!drawingList.length"}],staticClass:"empty-info app-empty-info"},[i("img",{staticClass:"empty-img",attrs:{src:a("074b"),alt:""}})])],1)],1)],1)],1)])])],1),i("right-panel",{attrs:{"active-data":e.activeData,"form-conf":e.formConf,"show-field":!!e.drawingList.length,modelType:e.modelType,webType:e.webType,formInfo:e.getFormInfo,drawingList:e.drawingList},on:{"tag-change":e.tagChange,relationChange:e.relationChange,setVModel:e.setVModel,copyItem:e.drawingItemCopy}}),i("json-drawer",{attrs:{size:"550px",visible:e.jsonDrawerVisible,jsonData:e.formData},on:{"update:visible":function(t){e.jsonDrawerVisible=t},refresh:e.refreshJson}}),i("Preview",{attrs:{visible:e.previewVisible,"form-data":e.formData},on:{"update:visible":function(t){e.previewVisible=t}}})],1)},l=[],o=(a("20d6"),a("456d"),a("ac6a"),a("5530")),n=(a("6762"),a("2fdb"),a("2909")),s=a("53ca"),r=a("1980"),c=a.n(r),d=a("7a1a"),u=a("e287"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",e._g(e._b({attrs:{"modal-append-to-body":!1,"append-to-body":""},on:{opened:e.onOpen,close:e.onClose}},"el-drawer",e.$attrs,!1),e.$listeners),[a("div",{staticClass:"action-bar"},[a("el-button",{staticClass:"copy-json-btn",attrs:{icon:"el-icon-document-copy",type:"text"}},[e._v("复制JSON")]),a("el-button",{attrs:{icon:"el-icon-download",type:"text"},on:{click:e.exportJsonFile}},[e._v("导出JSON文件")]),a("el-button",{staticClass:"delete-btn",attrs:{icon:"el-icon-circle-close",type:"text"},on:{click:function(t){return e.$emit("update:visible",!1)}}},[e._v("关闭")])],1),a("JSONEditor",{staticClass:"json-editor",attrs:{mode:"json"},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}})],1)},f=[],m=a("b311"),_=a.n(m),h=a("21a6"),v=a("fa7e"),b={components:{JSONEditor:v["a"]},props:{jsonData:{type:Object,default:function(){}}},data:function(){return{template:"",clipboard:null}},methods:{onOpen:function(){var e=this;this.clipboard=new _.a(".copy-json-btn",{text:function(t){return e.$notify({title:"复制成功",message:"代码已复制到剪切板，可粘贴。",type:"success"}),e.template}}),this.clipboard.on("error",(function(t){e.$message.error("代码复制失败")})),this.template=JSON.stringify(this.jsonData,null,2)},onClose:function(){this.clipboard&&this.clipboard.destroy()},exportJsonFile:function(){var e=this;this.$prompt("文件名:","导出文件",{inputValue:"".concat(+new Date,".json"),closeOnClickModal:!1,inputPlaceholder:"请输入文件名"}).then((function(t){var a=t.value;a||(a="".concat(+new Date,".json"));var i=new Blob([e.template],{type:"text/plain;charset=utf-8"});Object(h["saveAs"])(i,a)}))},refresh:function(){try{this.$emit("refresh",this.template)}catch(e){this.$notify({title:"错误",message:"JSON格式错误，请检查",type:"error"})}}}},g=b,y=(a("8d50"),a("2877")),D=Object(y["a"])(g,p,f,!1,null,"274482e6",null),w=D.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right-board"},[a("el-tabs",{staticClass:"center-tabs",model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:"组件属性",name:"field"}}),a("el-tab-pane",{attrs:{label:"组件样式",name:"style"}}),a("el-tab-pane",{attrs:{label:"表单属性",name:"form"}})],1),a("div",{staticClass:"field-box"},[a("el-scrollbar",{staticClass:"right-scrollbar"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"field"===e.currentTab&&e.showField,expression:"currentTab==='field' && showField"}],attrs:{size:"small","label-width":"90px",labelPosition:"left"}},[e.activeData.__config__&&e.activeData.__config__.jnpfKey?[["tableGridTr","tableGridTd"].includes(e.activeData.__config__.jnpfKey)?e._e():[a("el-form-item",{attrs:{label:"控件类型","label-width":"card"===e.activeData.__config__.jnpfKey?"76px":""}},[a("el-input",{attrs:{value:e.getCompName,disabled:""}})],1)],e.$store.getters.hasTable?["table"===e.activeData.__config__.jnpfKey?[void 0!==e.activeData.__vModel__&&!e.noVModelList.includes(e.activeData.__config__.jnpfKey)||1==e.activeData.isStorage?a("el-form-item",{attrs:{label:"控件字段"}},[a("el-input",{attrs:{placeholder:"请输入数据库字段",disabled:""},model:{value:e.activeData.__vModel__,callback:function(t){e.$set(e.activeData,"__vModel__",t)},expression:"activeData.__vModel__"}})],1):e._e()]:[e.activeData.__config__.isSubTable?e._e():["calculate"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"控件用途"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:e.changeStorage},model:{value:e.activeData.isStorage,callback:function(t){e.$set(e.activeData,"isStorage",t)},expression:"activeData.isStorage"}},e._l(e.storageType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),void 0!==e.activeData.__vModel__&&!e.noVModelList.includes(e.activeData.__config__.jnpfKey)||1==e.activeData.isStorage?a("el-form-item",{attrs:{label:"数据库表"}},[a("el-select",{attrs:{placeholder:"请选择数据库表",filterable:""},on:{change:e.tableChange},model:{value:e.activeData.__config__.tableName,callback:function(t){e.$set(e.activeData.__config__,"tableName",t)},expression:"activeData.__config__.tableName"}},e._l(e.allTable,(function(t){return a("el-option",{key:t.table,attrs:{value:t.table,label:t.tableName?t.table+"("+t.tableName+")":t.table}},[a("span",{staticClass:"custom-option-left"},[e._v("\n                        "+e._s(t.tableName?t.table+"("+t.tableName+")":t.table)+"\n                      ")]),a("span",{staticClass:"custom-option-right"},[e._v(e._s("1"==t.typeId?"主表":"从表"))])])})),1)],1):e._e(),void 0!==e.activeData.__vModel__&&!e.noVModelList.includes(e.activeData.__config__.jnpfKey)||1==e.activeData.isStorage?a("el-form-item",{attrs:{label:"控件字段"}},[a("el-select",{attrs:{placeholder:"请选择数据库字段",clearable:"",filterable:"","popper-class":"field-select-popper"},on:{change:e.fieldChange},model:{value:e.activeData.__vModel__,callback:function(t){e.$set(e.activeData,"__vModel__",t)},expression:"activeData.__vModel__"}},[a("p",{staticClass:"el-select-dropdown__empty",attrs:{slot:"empty"},slot:"empty"},[a("span",[e._v("无匹配数据，")]),a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openFieldDialog}},[e._v("添加字段\n                      ")])],1),e.fieldOptions.length?a("el-option-group",{attrs:{label:""}},[a("el-option",{attrs:{disabled:"",value:"-"}},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openFieldDialog}},[e._v("添加字段\n                        ")])],1)],1):e._e(),a("el-option-group",{attrs:{label:""}},e._l(e.fieldOptions,(function(e){return a("el-option",{key:e.realField,attrs:{value:e.realField,label:e.fieldName?e.field+"("+e.fieldName+")":e.field}})})),1)],1)],1):e._e()],e.activeData.__config__.isSubTable&&e.subTable.length?["calculate"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"控件用途"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:e.changeStorage},model:{value:e.activeData.isStorage,callback:function(t){e.$set(e.activeData,"isStorage",t)},expression:"activeData.isStorage"}},e._l(e.storageType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),e.noVModelList.includes(e.activeData.__config__.jnpfKey)&&1!=e.activeData.isStorage?e._e():a("el-form-item",{attrs:{label:"数据库表"}},[a("el-select",{attrs:{placeholder:"请选择数据库表",filterable:"",disabled:""},model:{value:e.activeData.__config__.relationTable,callback:function(t){e.$set(e.activeData.__config__,"relationTable",t)},expression:"activeData.__config__.relationTable"}},e._l(e.allTable,(function(e){return a("el-option",{key:e.table,attrs:{value:e.table,label:e.tableName?e.table+"("+e.tableName+")":e.table}})})),1)],1),void 0!==e.activeData.__vModel__&&!e.noVModelList.includes(e.activeData.__config__.jnpfKey)||1==e.activeData.isStorage?a("el-form-item",{attrs:{label:"控件字段"}},[a("el-select",{attrs:{placeholder:"请选择数据库字段",clearable:"",filterable:""},on:{change:e.fieldChange1},model:{value:e.activeData.__vModel__,callback:function(t){e.$set(e.activeData,"__vModel__",t)},expression:"activeData.__vModel__"}},[a("p",{staticClass:"el-select-dropdown__empty",attrs:{slot:"empty"},slot:"empty"},[a("span",[e._v("无匹配数据，")]),a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openFieldDialog}},[e._v("添加字段\n                      ")])],1),e.getSubTableFiled(e.activeData.__config__.relationTable).length?a("el-option-group",{attrs:{label:""}},[a("el-option",{attrs:{disabled:"",value:"-"}},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openFieldDialog}},[e._v("添加字段\n                        ")])],1)],1):e._e(),a("el-option-group",{attrs:{label:""}},e._l(e.getSubTableFiled(e.activeData.__config__.relationTable),(function(e){return a("el-option",{key:e.field,attrs:{value:e.field,label:e.fieldName?e.field+"("+e.fieldName+")":e.field}})})),1)],1)],1):e._e()]:e._e()]]:["calculate"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"控件用途"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:e.changeStorage},model:{value:e.activeData.isStorage,callback:function(t){e.$set(e.activeData,"isStorage",t)},expression:"activeData.isStorage"}},e._l(e.storageType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),void 0!==e.activeData.__vModel__&&!e.noVModelList.includes(e.activeData.__config__.jnpfKey)||1==e.activeData.isStorage?a("el-form-item",{attrs:{label:"控件字段"}},[a("el-input",{attrs:{placeholder:"请输入数据库字段",disabled:"table"===e.activeData.__config__.jnpfKey},on:{change:function(t){return e.inputFieldChange(t,e.activeData.__config__.formId,e.activeData.__config__.parentVModel)}},model:{value:e.activeData.__vModel__,callback:function(t){e.$set(e.activeData,"__vModel__",t)},expression:"activeData.__vModel__"}})],1):e._e()],"input"===e.activeData.__config__.jnpfKey?a("RInput",{attrs:{"active-data":e.activeData}}):e._e(),"textarea"===e.activeData.__config__.jnpfKey?a("RTextarea",{attrs:{"active-data":e.activeData}}):e._e(),"link"===e.activeData.__config__.jnpfKey?a("RLink",{attrs:{"active-data":e.activeData}}):e._e(),"text"===e.activeData.__config__.jnpfKey?a("RText",{attrs:{"active-data":e.activeData}}):e._e(),"alert"===e.activeData.__config__.jnpfKey?a("RAlert",{attrs:{"active-data":e.activeData}}):e._e(),"inputNumber"===e.activeData.__config__.jnpfKey?a("RInputNumber",{attrs:{"active-data":e.activeData}}):e._e(),"radio"===e.activeData.__config__.jnpfKey?a("RRadio",{attrs:{"active-data":e.activeData,dictionaryOptions:e.dictionaryOptions,dataInterfaceOptions:e.dataInterfaceOptions},on:{changeSelect:e.getDictionaryType}}):e._e(),"checkbox"===e.activeData.__config__.jnpfKey?a("RCheckbox",{attrs:{"active-data":e.activeData,dictionaryOptions:e.dictionaryOptions,dataInterfaceOptions:e.dataInterfaceOptions},on:{changeSelect:e.getDictionaryType}}):e._e(),"select"===e.activeData.__config__.jnpfKey?a("RSelect",{key:e.activeData.__config__.renderKey,attrs:{"active-data":e.activeData,dictionaryOptions:e.dictionaryOptions,dataInterfaceOptions:e.dataInterfaceOptions},on:{changeSelect:e.getDictionaryType}}):e._e(),"cascader"===e.activeData.__config__.jnpfKey?a("RCascader",{attrs:{"active-data":e.activeData,dictionaryOptions:e.dictionaryOptions,dataInterfaceOptions:e.dataInterfaceOptions},on:{changeSelect:e.getDictionaryType}}):e._e(),"timePicker"===e.activeData.__config__.jnpfKey?a("RTimePicker",{attrs:{"active-data":e.activeData}}):e._e(),"timeRange"===e.activeData.__config__.jnpfKey?a("RTimeRange",{attrs:{"active-data":e.activeData}}):e._e(),"datePicker"===e.activeData.__config__.jnpfKey?a("RDatePicker",{attrs:{"active-data":e.activeData}}):e._e(),"dateRange"===e.activeData.__config__.jnpfKey?a("RDateRange",{attrs:{"active-data":e.activeData}}):e._e(),"colorPicker"===e.activeData.__config__.jnpfKey?a("RColorPicker",{attrs:{"active-data":e.activeData}}):e._e(),"rate"===e.activeData.__config__.jnpfKey?a("RRate",{attrs:{"active-data":e.activeData}}):e._e(),"switch"===e.activeData.__config__.jnpfKey?a("RSwitch",{attrs:{"active-data":e.activeData}}):e._e(),"slider"===e.activeData.__config__.jnpfKey?a("RSlider",{attrs:{"active-data":e.activeData}}):e._e(),"divider"===e.activeData.__config__.jnpfKey?a("RDivider",{attrs:{"active-data":e.activeData}}):e._e(),"uploadFile"===e.activeData.__config__.jnpfKey?a("RUploadFile",{attrs:{"active-data":e.activeData}}):e._e(),"uploadImg"===e.activeData.__config__.jnpfKey?a("RUploadImg",{attrs:{"active-data":e.activeData}}):e._e(),e.isCommon?a("ComRight",{attrs:{"active-data":e.activeData}}):e._e(),"areaSelect"===e.activeData.__config__.jnpfKey?a("RAreaSelect",{attrs:{"active-data":e.activeData}}):e._e(),"treeSelect"===e.activeData.__config__.jnpfKey?a("RTreeSelect",{attrs:{"active-data":e.activeData,dictionaryOptions:e.dictionaryOptions,dataInterfaceOptions:e.dataInterfaceOptions},on:{changeSelect:e.getDictionaryType}}):e._e(),"groupTitle"===e.activeData.__config__.jnpfKey?a("RGroupTitle",{attrs:{"active-data":e.activeData}}):e._e(),"relationForm"===e.activeData.__config__.jnpfKey?a("RRelationForm",e._g({key:e.activeData.__config__.renderKey,attrs:{modelType:e.modelType,"active-data":e.activeData}},e.$listeners)):e._e(),"relationFormAttr"===e.activeData.__config__.jnpfKey?a("RRelationFormAttr",{ref:"relationFormAttr",attrs:{"active-data":e.activeData}}):e._e(),"calculate"===e.activeData.__config__.jnpfKey?a("RCalculate",{ref:"calculate",attrs:{"active-data":e.activeData}}):e._e(),"popupSelect"===e.activeData.__config__.jnpfKey||"popupTableSelect"===e.activeData.__config__.jnpfKey?a("RPopupSelect",{ref:"popupAll",attrs:{"active-data":e.activeData,modelType:e.modelType}}):e._e(),"popupAttr"===e.activeData.__config__.jnpfKey?a("RPopupAttr",{ref:"popupAttr",attrs:{"active-data":e.activeData}}):e._e(),"autoComplete"===e.activeData.__config__.jnpfKey?a("RAutoComplete",{ref:"AutoComplete",attrs:{"active-data":e.activeData}}):e._e(),"tab"===e.activeData.__config__.jnpfKey?a("RTab",{attrs:{"active-data":e.activeData}}):e._e(),"collapse"===e.activeData.__config__.jnpfKey?a("RCollapse",{attrs:{"active-data":e.activeData}}):e._e(),"iframe"===e.activeData.__config__.jnpfKey?a("RIframe",{ref:"Iframe",attrs:{"active-data":e.activeData}}):e._e(),"sign"===e.activeData.__config__.jnpfKey?a("RSign",{ref:"Sign",attrs:{"active-data":e.activeData}}):e._e(),"location"===e.activeData.__config__.jnpfKey?a("RLocation",{ref:"location",attrs:{"active-data":e.activeData}}):e._e(),"barcode"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"编码格式"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.activeData.format,callback:function(t){e.$set(e.activeData,"format",t)},expression:"activeData.format"}},e._l(e.barcodeFormatOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"条码颜色"}},[a("el-color-picker",{model:{value:e.activeData.lineColor,callback:function(t){e.$set(e.activeData,"lineColor",t)},expression:"activeData.lineColor"}})],1),a("el-form-item",{attrs:{label:"宽度"}},[a("el-input-number",{attrs:{placeholder:"宽度",min:0,precision:0,"controls-position":"right"},model:{value:e.activeData.width,callback:function(t){e.$set(e.activeData,"width",t)},expression:"activeData.width"}})],1),a("el-form-item",{attrs:{label:"高度"}},[a("el-input-number",{attrs:{placeholder:"高度",min:0,precision:0,"controls-position":"right"},model:{value:e.activeData.height,callback:function(t){e.$set(e.activeData,"height",t)},expression:"activeData.height"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.activeData.dataType,callback:function(t){e.$set(e.activeData,"dataType",t)},expression:"activeData.dataType"}},[a("el-option",{attrs:{label:"固定值",value:"static"}}),a("el-option",{attrs:{label:"组件联动",value:"relation"}})],1)],1),"static"===e.activeData.dataType?a("el-form-item",{attrs:{label:"固定值"}},[a("el-input",{attrs:{placeholder:"请输入固定值"},on:{change:e.onBarcodeTextChange},model:{value:e.activeData.staticText,callback:function(t){e.$set(e.activeData,"staticText",t)},expression:"activeData.staticText"}})],1):e._e(),"relation"===e.activeData.dataType?a("el-form-item",{attrs:{label:"选择组件"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.activeData.relationField,callback:function(t){e.$set(e.activeData,"relationField",t)},expression:"activeData.relationField"}},e._l(e.drawingOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1):e._e()]:e._e(),"qrcode"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"实点颜色"}},[a("el-color-picker",{model:{value:e.activeData.colorDark,callback:function(t){e.$set(e.activeData,"colorDark",t)},expression:"activeData.colorDark"}})],1),a("el-form-item",{attrs:{label:"尺寸"}},[a("el-input-number",{attrs:{placeholder:"尺寸",min:0,precision:0,"controls-position":"right"},model:{value:e.activeData.size,callback:function(t){e.$set(e.activeData,"size",t)},expression:"activeData.size"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.activeData.dataType,callback:function(t){e.$set(e.activeData,"dataType",t)},expression:"activeData.dataType"}},[a("el-option",{attrs:{label:"固定值",value:"static"}}),a("el-option",{attrs:{label:"组件联动",value:"relation"}}),a("el-option",{attrs:{label:"当前表单路径",value:"form"}})],1)],1),"static"===e.activeData.dataType?a("el-form-item",{attrs:{label:"固定值"}},[a("el-input",{attrs:{placeholder:"请输入固定值"},model:{value:e.activeData.staticText,callback:function(t){e.$set(e.activeData,"staticText",t)},expression:"activeData.staticText"}})],1):e._e(),"relation"===e.activeData.dataType?a("el-form-item",{attrs:{label:"选择组件"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.activeData.relationField,callback:function(t){e.$set(e.activeData,"relationField",t)},expression:"activeData.relationField"}},e._l(e.drawingOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1):e._e()]:e._e(),"button"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"控件文本"}},[a("el-input",{attrs:{placeholder:"请输入控件文本"},model:{value:e.activeData.buttonText,callback:function(t){e.$set(e.activeData,"buttonText",t)},expression:"activeData.buttonText"}})],1),a("el-form-item",{attrs:{label:"对齐方式"}},[a("el-radio-group",{model:{value:e.activeData.align,callback:function(t){e.$set(e.activeData,"align",t)},expression:"activeData.align"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("左对齐")]),a("el-radio-button",{attrs:{label:"center"}},[e._v("居中对齐")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右对齐")])],1)],1),a("el-form-item",{attrs:{label:"按钮类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.activeData.type,callback:function(t){e.$set(e.activeData,"type",t)},expression:"activeData.type"}},[a("el-option",{attrs:{label:"默认按钮",value:""}}),a("el-option",{attrs:{label:"主要按钮",value:"primary"}}),a("el-option",{attrs:{label:"成功按钮",value:"success"}}),a("el-option",{attrs:{label:"信息按钮",value:"info"}}),a("el-option",{attrs:{label:"警告按钮",value:"warning"}}),a("el-option",{attrs:{label:"危险按钮",value:"danger"}})],1)],1)]:e._e(),e.isSystem?[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),"billRule"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1):e._e(),"billRule"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"单据模板"}},[a("BillRule",{attrs:{value:e.activeData.__config__.rule,title:e.activeData.__config__.ruleName},on:{change:e.onRuleChange}})],1):e._e(),"currOrganize"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"显示内容"}},[a("el-select",{attrs:{placeholder:"请选择显示内容"},model:{value:e.activeData.showLevel,callback:function(t){e.$set(e.activeData,"showLevel",t)},expression:"activeData.showLevel"}},[a("el-option",{attrs:{label:"显示组织",value:"all"}}),a("el-option",{attrs:{label:"显示部门",value:"last"}})],1)],1):e._e(),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1)]:e._e(),!e.activeData.on||1!=e.modelType&&6!=e.modelType?e._e():[a("el-divider",[e._v("脚本事件")]),e._l(e.activeData.on,(function(t,i){return a("div",{key:i},[a("el-form-item",{attrs:{label:i}},[a("el-button",{staticStyle:{width:"100%"},on:{click:function(a){return e.editFunc(t,i)}}},[e._v("\n                  "+e._s(e.getTipText(i))+"\n                ")])],1)],1)}))],"table"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),e.$store.getters.hasTable?a("el-form-item",{attrs:{label:"关联子表"}},[a("el-select",{attrs:{placeholder:"请选择关联子表",filterable:""},on:{change:e.onTableNameChange},model:{value:e.activeData.__config__.tableName,callback:function(t){e.$set(e.activeData.__config__,"tableName",t)},expression:"activeData.__config__.tableName"}},e._l(e.subTable,(function(t){return a("el-option",{key:t.table,attrs:{label:t.tableName?t.table+"("+t.tableName+")":t.table,value:t.table}},[a("span",{staticClass:"custom-option-left"},[e._v("\n                    "+e._s(t.tableName?t.table+"("+t.tableName+")":t.table)+"\n                  ")]),a("span",{staticClass:"custom-option-right"},[e._v(e._s("1"==t.typeId?"主表":"从表"))])])})),1)],1):e._e(),a("table-config",{attrs:{"active-data":e.activeData,showType:e.showType,modelType:e.modelType},on:{addComponent:e.addComponent}})]:e._e(),"card"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"卡片标题","label-width":"76px"}},[a("el-input",{attrs:{placeholder:"请输入卡片标题"},model:{value:e.activeData.header,callback:function(t){e.$set(e.activeData,"header",t)},expression:"activeData.header"}})],1),a("el-form-item",{attrs:{label:"标题提示","label-width":"76px"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"显示阴影","label-width":"76px"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.shadow,callback:function(t){e.$set(e.activeData,"shadow",t)},expression:"activeData.shadow"}},[a("el-radio-button",{attrs:{label:"always"}},[e._v("一直显示")]),a("el-radio-button",{attrs:{label:"hover"}},[e._v("移入显示")]),a("el-radio-button",{attrs:{label:"never"}},[e._v("永不显示")])],1)],1)]:e._e(),"row"===e.activeData.__config__.jnpfKey?[void 0!==e.activeData.__config__.componentName?a("el-form-item",{attrs:{label:"组件名"}},[e._v("\n              "+e._s(e.activeData.__config__.componentName)+"\n            ")]):e._e()]:e._e(),"rowFormItem"===e.activeData.__config__.layout&&void 0!==e.activeData.gutter?a("el-form-item",{attrs:{label:"栅格间隔"}},[a("el-input-number",{attrs:{min:0,placeholder:"栅格间隔","controls-position":"right"},model:{value:e.activeData.gutter,callback:function(t){e.$set(e.activeData,"gutter",t)},expression:"activeData.gutter"}})],1):e._e(),"tableGrid"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"表格边框"}},[a("el-radio-group",{model:{value:e.activeData.__config__.borderType,callback:function(t){e.$set(e.activeData.__config__,"borderType",t)},expression:"activeData.__config__.borderType"}},[a("el-radio-button",{attrs:{label:"none"}},[e._v("无")]),a("el-radio-button",{attrs:{label:"solid"}},[e._v("实线")]),a("el-radio-button",{attrs:{label:"dashed"}},[e._v("虚线")]),a("el-radio-button",{attrs:{label:"dotted"}},[e._v("点状")])],1)],1),"none"!=e.activeData.__config__.borderType?[a("el-form-item",{attrs:{label:"边框颜色"}},[a("el-color-picker",{model:{value:e.activeData.__config__.borderColor,callback:function(t){e.$set(e.activeData.__config__,"borderColor",t)},expression:"activeData.__config__.borderColor"}})],1),a("el-form-item",{attrs:{label:"边框宽度"}},[a("el-input-number",{attrs:{min:1,max:10,precision:0,"controls-position":"right"},on:{change:e.onBorderWidthChange},model:{value:e.activeData.__config__.borderWidth,callback:function(t){e.$set(e.activeData.__config__,"borderWidth",t)},expression:"activeData.__config__.borderWidth"}})],1)]:e._e()]:e._e(),"tableGridTd"===e.activeData.__config__.jnpfKey?[a("el-form-item",{attrs:{label:"背景颜色"}},[a("el-color-picker",{model:{value:e.activeData.__config__.backgroundColor,callback:function(t){e.$set(e.activeData.__config__,"backgroundColor",t)},expression:"activeData.__config__.backgroundColor"}})],1)]:e._e()]:e._e()],2),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"style"===e.currentTab,expression:"currentTab === 'style'"}],attrs:{size:"small","label-width":"90px",labelPosition:"left"}},[e.activeData.__config__&&"tableGridTr"!=e.activeData.__config__.jnpfKey&&"tableGridTd"!=e.activeData.__config__.jnpfKey?[e.activeData.__config__.isSubTable?e._e():[a("el-form-item",{attrs:{label:"控件栅格"}},[a("el-slider",{attrs:{max:24,min:2,"show-stops":"",step:2,"show-tooltip":""},model:{value:e.activeData.__config__.span,callback:function(t){e.$set(e.activeData.__config__,"span",t)},expression:"activeData.__config__.span"}})],1),["divider","text","link","alert","button","table","groupTitle","card","row","tab","collapse"].includes(e.activeData.__config__.jnpfKey)?e._e():a("el-form-item",{attrs:{label:"标题宽度"}},[a("el-input-number",{attrs:{placeholder:"标题宽度",min:0,precision:0,"controls-position":"right"},model:{value:e.activeData.__config__.labelWidth,callback:function(t){e.$set(e.activeData.__config__,"labelWidth",t)},expression:"activeData.__config__.labelWidth"}})],1)],e.activeData.__config__.isSubTable||e.noWithList.includes(e.activeData.__config__.jnpfKey)||"pc"!==e.showType||!e.activeData.style?e._e():a("jnpf-form-tip-item",{attrs:{"tip-label":"支持%和px两种宽度设置",label:"控件宽度"}},[a("el-input",{attrs:{placeholder:"控件宽度"},model:{value:e.activeData.style.width,callback:function(t){e.$set(e.activeData.style,"width",t)},expression:"activeData.style.width"}})],1),e.activeData.__config__.isSubTable&&"pc"===e.showType?[a("el-form-item",{attrs:{label:"冻结方式"}},[a("el-radio-group",{model:{value:e.activeData.__config__.tableFixed,callback:function(t){e.$set(e.activeData.__config__,"tableFixed",t)},expression:"activeData.__config__.tableFixed"}},[a("el-radio-button",{attrs:{label:"none"}},[e._v("无")]),a("el-radio-button",{attrs:{label:"left"}},[e._v("左冻结")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右冻结")])],1)],1),a("el-form-item",{attrs:{label:"对齐方式"}},[a("el-radio-group",{model:{value:e.activeData.__config__.tableAlign,callback:function(t){e.$set(e.activeData.__config__,"tableAlign",t)},expression:"activeData.__config__.tableAlign"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("左对齐")]),a("el-radio-button",{attrs:{label:"center"}},[e._v("居中对齐")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右对齐")])],1)],1)]:e._e(),e.activeData.__config__.isSubTable?a("el-form-item",{attrs:{label:"控件宽度"}},[a("el-input-number",{attrs:{placeholder:"控件宽度",min:0,precision:0,"controls-position":"right"},model:{value:e.activeData.__config__.columnWidth,callback:function(t){e.$set(e.activeData.__config__,"columnWidth",t)},expression:"activeData.__config__.columnWidth"}})],1):e._e(),1==e.modelType||6==e.modelType?a("el-form-item",{attrs:{label:"控件Class"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择",filterable:""},model:{value:e.activeData.__config__.className,callback:function(t){e.$set(e.activeData.__config__,"className",t)},expression:"activeData.__config__.className"}},e._l(e.formConf.classNames,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"多端显示"}},[a("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.activeData.__config__.visibility,callback:function(t){e.$set(e.activeData.__config__,"visibility",t)},expression:"activeData.__config__.visibility"}},[a("el-checkbox",{attrs:{label:"pc"}},[e._v("Web")]),a("el-checkbox",{attrs:{label:"app"}},[e._v("App")])],1)],1)]:e._e()],2),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"form"===e.currentTab,expression:"currentTab === 'form'"}],attrs:{size:"small","label-width":"100px",labelPosition:"left"}},[a("el-form-item",{attrs:{label:"表单尺寸"}},[a("el-radio-group",{model:{value:e.formConf.size,callback:function(t){e.$set(e.formConf,"size",t)},expression:"formConf.size"}},[a("el-radio-button",{attrs:{label:"medium"}},[e._v("中等")]),a("el-radio-button",{attrs:{label:"small"}},[e._v("较小")]),a("el-radio-button",{attrs:{label:"mini"}},[e._v("迷你")])],1)],1),a("el-form-item",{attrs:{label:"标签对齐"}},[a("el-radio-group",{model:{value:e.formConf.labelPosition,callback:function(t){e.$set(e.formConf,"labelPosition",t)},expression:"formConf.labelPosition"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("左对齐")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右对齐")]),a("el-radio-button",{attrs:{label:"top",disabled:"word-form"===e.formConf.formStyle}},[e._v("顶部对齐\n            ")])],1)],1),a("el-form-item",{attrs:{label:"标题宽度"}},[a("el-input-number",{attrs:{min:0,placeholder:"标题宽度","controls-position":"right"},model:{value:e.formConf.labelWidth,callback:function(t){e.$set(e.formConf,"labelWidth",t)},expression:"formConf.labelWidth"}})],1),a("el-form-item",{attrs:{label:"标题后缀"}},[a("el-input",{attrs:{placeholder:"标题后缀"},model:{value:e.formConf.labelSuffix,callback:function(t){e.$set(e.formConf,"labelSuffix",t)},expression:"formConf.labelSuffix"}})],1),a("el-form-item",{attrs:{label:"栅格间隔"}},[a("el-input-number",{attrs:{min:0,placeholder:"栅格间隔","controls-position":"right"},model:{value:e.formConf.gutter,callback:function(t){e.$set(e.formConf,"gutter",t)},expression:"formConf.gutter"}})],1),3==e.modelType||6==e.modelType||2!=e.webType||e.enableFlow?e._e():a("el-form-item",{attrs:{label:"弹窗类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formConf.popupType,callback:function(t){e.$set(e.formConf,"popupType",t)},expression:"formConf.popupType"}},[a("el-option",{attrs:{label:"居中弹窗",value:"general"}}),a("el-option",{attrs:{label:"右侧弹窗",value:"drawer"}}),a("el-option",{attrs:{label:"全屏弹窗",value:"fullScreen"}})],1)],1),3!=e.modelType?a("el-form-item",{attrs:{label:"表单样式"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formConf.formStyle,callback:function(t){e.$set(e.formConf,"formStyle",t)},expression:"formConf.formStyle"}},[a("el-option",{attrs:{label:"默认风格",value:""}}),a("el-option",{attrs:{label:"公文风格",value:"word-form"}})],1)],1):e._e(),"general"===e.formConf.popupType?a("el-form-item",{attrs:{label:"表单宽度"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.formConf.generalWidth,callback:function(t){e.$set(e.formConf,"generalWidth",t)},expression:"formConf.generalWidth"}},e._l(e.generalWidthOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),"fullScreen"===e.formConf.popupType?a("el-form-item",{attrs:{label:"表单宽度"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.formConf.fullScreenWidth,callback:function(t){e.$set(e.formConf,"fullScreenWidth",t)},expression:"formConf.fullScreenWidth"}},e._l(e.fullScreenWidthOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),"drawer"===e.formConf.popupType?a("el-form-item",{attrs:{label:"表单宽度"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.formConf.drawerWidth,callback:function(t){e.$set(e.formConf,"drawerWidth",t)},expression:"formConf.drawerWidth"}},e._l(e.generalWidthOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),1==e.modelType||6==e.modelType?a("el-form-item",{attrs:{label:"表单Css"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:e.addStyle}},[e._v("编写样式")])],1):e._e(),1==e.modelType||6==e.modelType?a("el-form-item",{attrs:{label:"表单Class"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择",filterable:""},model:{value:e.formConf.className,callback:function(t){e.$set(e.formConf,"className",t)},expression:"formConf.className"}},e._l(e.formConf.classNames,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"主键策略"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!e.getFormInfo().id},model:{value:e.formConf.primaryKeyPolicy,callback:function(t){e.$set(e.formConf,"primaryKeyPolicy",t)},expression:"formConf.primaryKeyPolicy"}},[a("el-option",{attrs:{label:"雪花ID",value:1}}),a("el-option",{attrs:{label:"自增长ID",value:2}})],1)],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("并发锁定\n            "),a("el-tooltip",{attrs:{content:"并发提交表单时候，加乐观锁机制以保证数据提交准确性",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.formConf.concurrencyLock,callback:function(t){e.$set(e.formConf,"concurrencyLock",t)},expression:"formConf.concurrencyLock"}})],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("逻辑删除\n            "),a("el-tooltip",{attrs:{content:"表单是否增加删除标志、删除时间和删除用户字段",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.formConf.logicalDelete,callback:function(t){e.$set(e.formConf,"logicalDelete",t)},expression:"formConf.logicalDelete"}})],1),3==e.modelType||6==e.modelType||3==e.webType||e.enableFlow?e._e():[a("el-divider",[e._v("表单按钮")]),a("div",{staticClass:"per-cell"},[a("el-checkbox",{attrs:{disabled:""},model:{value:e.formConf.hasConfirmBtn,callback:function(t){e.$set(e.formConf,"hasConfirmBtn",t)},expression:"formConf.hasConfirmBtn"}},[e._v("确定")]),a("el-input",{model:{value:e.formConf.confirmButtonText,callback:function(t){e.$set(e.formConf,"confirmButtonText",t)},expression:"formConf.confirmButtonText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{attrs:{disabled:""},model:{value:e.formConf.hasCancelBtn,callback:function(t){e.$set(e.formConf,"hasCancelBtn",t)},expression:"formConf.hasCancelBtn"}},[e._v("取消")]),a("el-input",{model:{value:e.formConf.cancelButtonText,callback:function(t){e.$set(e.formConf,"cancelButtonText",t)},expression:"formConf.cancelButtonText"}})],1),2!=e.webType||e.enableFlow||"pc"!==e.showType?e._e():[a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.formConf.hasPrintBtn,callback:function(t){e.$set(e.formConf,"hasPrintBtn",t)},expression:"formConf.hasPrintBtn"}},[e._v("打印\n                "),a("el-tooltip",{attrs:{content:"启用流程后,操作按钮以流程节点为准",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-input",{model:{value:e.formConf.printButtonText,callback:function(t){e.$set(e.formConf,"printButtonText",t)},expression:"formConf.printButtonText"}})],1),e.formConf.hasPrintBtn?a("el-form-item",{attrs:{label:""}},[a("JnpfTreeSelect",{attrs:{options:e.printTplList,multiple:"",placeholder:"请选择打印模板",lastLevel:"",clearable:""},model:{value:e.formConf.printId,callback:function(t){e.$set(e.formConf,"printId",t)},expression:"formConf.printId"}},[a("div",{staticClass:"printWrap",attrs:{slot:"header"},slot:"header"},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openPrint}},[e._v("添加打印模板\n                  ")]),a("el-link",{staticStyle:{position:"absolute",right:"8px",top:"18px"},attrs:{type:"info",underline:!1},on:{click:e.refreshPrintOptions}},[a("i",{staticClass:"el-icon-refresh el-icon--right"})]),a("el-divider",{staticStyle:{"margin-top":"10px"}})],1)])],1):e._e()],"pc"===e.showType?a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.formConf.hasConfirmAndAddBtn,callback:function(t){e.$set(e.formConf,"hasConfirmAndAddBtn",t)},expression:"formConf.hasConfirmAndAddBtn"}},[e._v("\n              "+e._s(e.formConf.confirmAndAddText)+"\n              "),a("el-tooltip",{attrs:{content:"选中后显示“确定并新增”、“确定并继续”、“上一条”、“下一条”按钮",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1):e._e()],!e.formConf.funcs||1!=e.modelType&&6!=e.modelType?e._e():[a("el-divider",[e._v("脚本事件")]),a("el-form-item",{attrs:{label:"onLoad"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:function(t){return e.editFunc(e.formConf.funcs.onLoad,"onLoad",!0)}}},[e._v("表单加载触发\n            ")])],1),a("el-form-item",{attrs:{label:"beforeSubmit"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:function(t){return e.editFunc(e.formConf.funcs.beforeSubmit,"beforeSubmit",!0)}}},[e._v("提交前置触发\n            ")])],1),a("el-form-item",{attrs:{label:"afterSubmit"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:function(t){return e.editFunc(e.formConf.funcs.afterSubmit,"afterSubmit",!0)}}},[e._v("提交后置触发")])],1)]],2)],1)],1),a("form-script",{attrs:{visible:e.formScriptVisible,tpl:e.activeScript,fields:e.drawingList,type:e.getScriptType},on:{"update:visible":function(t){e.formScriptVisible=t},updateScript:e.updateScript}}),a("field-dialog",{ref:"fieldDialog",attrs:{visible:e.fieldDialogVisible},on:{"update:visible":function(t){e.fieldDialogVisible=t},close:function(t){e.fieldDialogVisible=!1},updateOptions:e.updateFieldOptions}}),a("StyleScript",{attrs:{visible:e.styleScriptVisible,value:e.formConf.classJson},on:{"update:visible":function(t){e.styleScriptVisible=t},updateStyleScript:e.updateStyleScript}})],1)},C=[],k=a("c7eb"),T=(a("96cf"),a("1da1")),F=(a("a481"),a("3b2b"),a("28a5"),a("100e")),S=a("97c0"),N=a("3424"),L=a("fa72"),O=a("9b6f"),$=a("17de"),I=a("326b"),j=a("bb1a"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center form-script-dialog",attrs:{"close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"1100px","modal-append-to-body":!1},on:{open:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),[a("span",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v("表单脚本\n      "),a("el-tooltip",{attrs:{content:"小程序不支持在线JS脚本",placement:"top-start"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)]),a("div",{staticClass:"form-script-dialog-body"},[a("div",{staticClass:"left-tree"},[a("el-tree",{attrs:{data:e.treeData,"default-expand-all":"","expand-on-click-node":!1,props:e.treeProps},on:{"node-click":e.handleNodeClick}})],1),a("div",{staticClass:"right-main"},[a("div",{staticClass:"codeEditor"},[a("JNPFCodeEditor",{ref:"CodeEditor",attrs:{options:e.options},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),a("div",{staticClass:"tips"},[a("p",[e._v("请从左侧面板选择的字段名，支持JavaScript的脚本，\n          "),a("ScriptDemo",{attrs:{type:e.type}})],1)])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onClose()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])},V=[],A=a("ade3"),P=a("7c37"),J=a("f2c3"),R={components:{JNPFCodeEditor:P["a"],ScriptDemo:J["a"]},props:["tpl","fields","type"],inject:["getFormInfo"],data:function(){return Object(A["a"])(Object(A["a"])({text:"",treeData:[],treeProps:{children:"children",label:"label"}},"treeData",[]),"options",{language:"javascript"})},methods:{onOpen:function(){var e=this;this.text=this.tpl,this.getTree(),this.$nextTick((function(){e.$refs.CodeEditor.changeEditor({value:e.text,options:e.options})}))},getTree:function(){var e=[],t=function t(a,i){if(a&&(a.__config__&&"table"!==a.__config__.jnpfKey&&a.__config__.children&&Array.isArray(a.__config__.children)&&t(a.__config__.children,a),Array.isArray(a)&&a.forEach((function(e){return t(e,i)})),a.__vModel__))if("table"===a.__config__.jnpfKey){var l={value:a.__vModel__,label:a.__config__.label,children:[]},o=[];if(a.__config__.children&&Array.isArray(a.__config__.children)&&a.__config__.children.length)for(var n=0;n<a.__config__.children.length;n++){var s=a.__config__.children[n];s.__vModel__&&o.push({value:a.__vModel__+"."+s.__vModel__,label:s.__config__.label})}l.children=o,e.push(l)}else e.push({value:a.__vModel__,label:a.__config__.label})};t(this.fields);var a={value:+new Date,label:this.getFormInfo().fullName,top:!0,children:e};this.treeData=[a]},onClose:function(){this.$emit("updateScript",this.text),this.closeDialog()},closeDialog:function(){this.$emit("update:visible",!1)},handleNodeClick:function(e,t){e.top||e.children||this.$refs.CodeEditor.insert(e.value)}}},K=R,B=Object(y["a"])(K,M,V,!1,null,null,null),E=B.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center field-dialog",attrs:{title:"字段设置","close-on-click-modal":!1,width:"1000px","lock-scroll":"","append-to-body":"",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"main"},[a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"field",label:"列名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled?a("span",{staticClass:"table-cell"},[e._v(e._s(t.row.field))]):a("el-input",{attrs:{placeholder:"请输入列名",maxlength:"50"},model:{value:t.row.field,callback:function(a){e.$set(t.row,"field",a)},expression:"scope.row.field"}})]}}])}),a("el-table-column",{attrs:{prop:"dataType",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled?a("span",{staticClass:"table-cell"},[e._v(e._s(e._f("dataType")(t.row.dataType)))]):a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.dataType,callback:function(a){e.$set(t.row,"dataType",a)},expression:"scope.row.dataType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"dataLength",label:"长度"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled?a("span",{staticClass:"table-cell"},[e._v(e._s(t.row.dataLength))]):a("el-input",{attrs:{placeholder:"请输入长度",disabled:"varchar"!==t.row.dataType&&"decimal"!==t.row.dataType},model:{value:t.row.dataLength,callback:function(a){e.$set(t.row,"dataLength",a)},expression:"scope.row.dataLength"}})]}}])}),a("el-table-column",{attrs:{prop:"allowNull",label:"允许空",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled?a("el-checkbox",{attrs:{value:!!t.row.allowNull}}):a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.row.allowNull,callback:function(a){e.$set(t.row,"allowNull",a)},expression:"scope.row.allowNull"}})]}}])}),a("el-table-column",{attrs:{prop:"fieldName",label:"说明"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled?a("span",{staticClass:"table-cell"},[e._v(e._s(t.row.fieldName))]):a("el-input",{attrs:{placeholder:"请输入说明"},model:{value:t.row.fieldName,callback:function(a){e.$set(t.row,"fieldName",a)},expression:"scope.row.fieldName"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled?e._e():a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index)}}},[e._v("删除\n          ")])]}}])})],1),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addHandle()}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("新建")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton")))])],1)])},q=[],W={data:function(){return{visible:!1,listLoading:!0,btnLoading:!1,options:[{label:"字符串",value:"varchar"},{label:"整型",value:"int"},{label:"日期时间",value:"datetime"},{label:"浮点",value:"decimal"},{label:"长整型",value:"bigint"},{label:"文本",value:"text"}],list:[],dataForm:{},dataBase:"0"}},methods:{init:function(e,t){this.visible=!0,this.dataBase=e,e&&t&&this.initData(t)},closeDialog:function(){this.$emit("close"),this.visible=!1},initData:function(e){var t=this;this.listLoading=!0,Object(I["e"])(this.dataBase,e).then((function(e){t.dataForm=e.data.tableInfo,t.$set(t.dataForm,"newTable",t.dataForm.table),t.list=e.data.tableFieldList.map((function(e,t){return Object(o["a"])({disabled:!0},e)})),t.listLoading=!1}))},dataFormSubmit:function(){var e=this,t=this.list.filter((function(e){return!e.disabled}));if(t.length){if(this.exist()){this.btnLoading=!0;var a={tableFieldList:t,tableInfo:this.dataForm};Object(I["i"])(this.dataBase,a).then((function(t){e.$message({message:t.msg,type:"success",duration:1500,onClose:function(){e.visible=!1,e.btnLoading=!1,e.$emit("updateOptions",e.list),e.$emit("close")}})})).catch((function(){e.btnLoading=!1}))}}else this.$message({message:"请至少新增一个字段",type:"error",duration:1e3})},exist:function(){for(var e,t=this,a=!0,i=function(){var e=t.list[l];if(e.disabled)return 0;if(!e.field)return t.$message({message:"第".concat(l+1,"行列名不能为空"),type:"error",duration:1e3}),a=!1,1;var i=/(^_([a-zA-Z0-9]_?)*$)|(^[a-zA-Z](_?[a-zA-Z0-9])*_?$)/;if(!i.test(e.field))return t.$message({message:"第".concat(l+1,"行列名格式错误，请重新输入"),type:"error",duration:1e3}),a=!1,1;var o=t.list.filter((function(t){return t.field==e.field}));return o.length>1?(t.$message({message:"第".concat(l+1,"行列名'").concat(e.field,"'已重复"),type:"error",duration:1e3}),a=!1,1):e.fieldName?void 0:(t.$message({message:"第".concat(l+1,"行说明不能为空"),type:"error",duration:1e3}),a=!1,1)},l=0;l<this.list.length;l++)if(e=i(),0!==e&&1===e)break;return a},handleDel:function(e){this.list.splice(e,1)},addHandle:function(e){var t={};t=e?{field:e.field,dataType:e.dataType,dataLength:e.dataLength,allowNull:e.allowNull,fieldName:e.fieldName,primaryKey:0,disabled:!1}:{field:"",dataType:"varchar",dataLength:50,allowNull:1,primaryKey:0,fieldName:"",disabled:!1},this.list.push(t)}}},U=W,H=(a("933e"),Object(y["a"])(U,z,q,!1,null,"14f26904",null)),G=H.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-input",{attrs:{placeholder:"请输入默认值"},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"前缀"}},[a("el-input",{attrs:{placeholder:"请输入前缀"},model:{value:e.activeData.addonBefore,callback:function(t){e.$set(e.activeData,"addonBefore",t)},expression:"activeData.addonBefore"}})],1),a("el-form-item",{attrs:{label:"后缀"}},[a("el-input",{attrs:{placeholder:"请输入后缀"},model:{value:e.activeData.addonAfter,callback:function(t){e.$set(e.activeData,"addonAfter",t)},expression:"activeData.addonAfter"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"前图标"}},[a("el-input",{attrs:{placeholder:"请输入前图标名称"},model:{value:e.activeData.prefixIcon,callback:function(t){e.$set(e.activeData,"prefixIcon",t)},expression:"activeData.prefixIcon"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(t){return e.openIconsDialog("prefixIcon")}},slot:"append"},[e._v("\n        选择\n      ")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"后图标"}},[a("el-input",{attrs:{placeholder:"请输入后图标名称"},model:{value:e.activeData.suffixIcon,callback:function(t){e.$set(e.activeData,"suffixIcon",t)},expression:"activeData.suffixIcon"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(t){return e.openIconsDialog("suffixIcon")}},slot:"append"},[e._v("\n        选择\n      ")])],1)],1),a("el-form-item",{attrs:{label:"最多输入"}},[a("el-input",{attrs:{placeholder:"请输入字符长度",type:"number"},model:{value:e.activeData.maxlength,callback:function(t){e.$set(e.activeData,"maxlength",t)},expression:"activeData.maxlength"}},[a("template",{slot:"append"},[e._v("个字符")])],2)],1),a("el-form-item",{attrs:{label:"掩码显示"}},[a("el-switch",{model:{value:e.activeData.useMask,callback:function(t){e.$set(e.activeData,"useMask",t)},expression:"activeData.useMask"}})],1),e.activeData.useMask?a("el-form-item",{attrs:{label:"掩码规则"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{block:""},on:{click:e.editMaskConfig}},[e._v("掩码设置")])],1):e._e(),a("jnpf-form-tip-item",{attrs:{label:"扫码输入","tip-label":"支持常规二维码和条形码；桌面端和H5不支持扫码"}},[a("el-switch",{on:{change:e.onUseScanChange},model:{value:e.activeData.useScan,callback:function(t){e.$set(e.activeData,"useScan",t)},expression:"activeData.useScan"}})],1),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{attrs:{label:"是否密码"}},[a("el-switch",{attrs:{disabled:e.activeData.useScan},model:{value:e.activeData.showPassword,callback:function(t){e.$set(e.activeData,"showPassword",t)},expression:"activeData.showPassword"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"是否只读"}},[a("el-switch",{model:{value:e.activeData.readonly,callback:function(t){e.$set(e.activeData,"readonly",t)},expression:"activeData.readonly"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-divider",[e._v("校验规则")]),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("是否唯一\n      "),a("el-tooltip",{attrs:{content:"输入值唯一性校验",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.activeData.__config__.unique,callback:function(t){e.$set(e.activeData.__config__,"unique",t)},expression:"activeData.__config__.unique"}})],1),e._l(e.activeData.__config__.regList,(function(t,i){return a("div",{key:i,staticClass:"reg-item"},[a("span",{staticClass:"close-btn",on:{click:function(t){return e.activeData.__config__.regList.splice(i,1)}}},[a("i",{staticClass:"el-icon-close"})]),a("el-form-item",{attrs:{label:"表达式"}},[a("el-input",{attrs:{placeholder:"请输入正则"},on:{change:e.onPatternChange},model:{value:t.pattern,callback:function(a){e.$set(t,"pattern",a)},expression:"item.pattern"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"错误提示"}},[a("el-input",{attrs:{placeholder:"请输入错误提示"},model:{value:t.message,callback:function(a){e.$set(t,"message",a)},expression:"item.message"}})],1)],1)})),a("div",{staticClass:"mt-10"},[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v("添加常用校验"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.ruleList,(function(t,i){return a("el-dropdown-item",{key:i,nativeOn:{click:function(a){return e.addHandle(t)}}},[e._v("\n          "+e._s(t.label))])})),1)],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.addReg}},[e._v("\n      自定义规则\n    ")])],1),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.activeData[e.currentIconModel]},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}}),a("MaskConfigDialog",{ref:"maskConfigRef",on:{confirm:e.updateMaskConfig}})],2)},Y=[],Z=a("78b1"),X=Z["a"],ee=Object(y["a"])(X,Q,Y,!1,null,null,null),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-input",{attrs:{value:e.setDefaultValue(e.activeData.__config__.defaultValue),placeholder:"请输入默认值"},on:{input:e.onDefaultValueInput}})],1),e.activeData.autoSize?a("el-form-item",{attrs:{label:"最小行数"}},[a("el-input-number",{attrs:{min:1,placeholder:"最小行数","controls-position":"right"},model:{value:e.activeData.autoSize.minRows,callback:function(t){e.$set(e.activeData.autoSize,"minRows",t)},expression:"activeData.autoSize.minRows"}})],1):e._e(),e.activeData.autoSize?a("el-form-item",{attrs:{label:"最大行数"}},[a("el-input-number",{attrs:{min:1,placeholder:"最大行数","controls-position":"right"},model:{value:e.activeData.autoSize.maxRows,callback:function(t){e.$set(e.activeData.autoSize,"maxRows",t)},expression:"activeData.autoSize.maxRows"}})],1):e._e(),a("el-form-item",{attrs:{label:"最多输入"}},[a("el-input",{attrs:{placeholder:"请输入字符长度",type:"number"},model:{value:e.activeData.maxlength,callback:function(t){e.$set(e.activeData,"maxlength",t)},expression:"activeData.maxlength"}},[a("template",{slot:"append"},[e._v("个字符")])],2)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"是否只读"}},[a("el-switch",{model:{value:e.activeData.readonly,callback:function(t){e.$set(e.activeData,"readonly",t)},expression:"activeData.readonly"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},ie=[],le=a("9266"),oe={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){},methods:{}},ne=oe,se=Object(y["a"])(ne,ae,ie,!1,null,null,null),re=se.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"链接文本"}},[a("el-input",{attrs:{placeholder:"请输入链接文本"},model:{value:e.activeData.content,callback:function(t){e.$set(e.activeData,"content",t)},expression:"activeData.content"}})],1),a("jnpf-form-tip-item",{attrs:{label:"链接地址","tip-label":"地址以http://或https://为开头"}},[a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:e.activeData.href,callback:function(t){e.$set(e.activeData,"href",t)},expression:"activeData.href"}},[a("el-select",{staticStyle:{width:"85px"},attrs:{slot:"append",placeholder:"请选择"},slot:"append",model:{value:e.activeData.target,callback:function(t){e.$set(e.activeData,"target",t)},expression:"activeData.target"}},[a("el-option",{attrs:{label:"_self",value:"_self"}}),a("el-option",{attrs:{label:"_blank",value:"_blank"}})],1)],1)],1),a("el-form-item",{attrs:{label:"对齐方式"}},[a("el-radio-group",{model:{value:e.activeData.textStyle["text-align"],callback:function(t){e.$set(e.activeData.textStyle,"text-align",t)},expression:"activeData.textStyle['text-align']"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("左对齐")]),a("el-radio-button",{attrs:{label:"center"}},[e._v("居中对齐")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右对齐")])],1)],1)],1)},de=[],ue={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){},methods:{}},pe=ue,fe=Object(y["a"])(pe,ce,de,!1,null,null,null),me=fe.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"文本内容"}},[a("el-input",{attrs:{placeholder:"请输入文本内容"},model:{value:e.activeData.content,callback:function(t){e.$set(e.activeData,"content",t)},expression:"activeData.content"}})],1),a("el-form-item",{attrs:{label:"行高"}},[a("el-input-number",{attrs:{min:12,placeholder:"请输入行高","controls-position":"right"},model:{value:e.activeData.textStyle["line-height"],callback:function(t){e.$set(e.activeData.textStyle,"line-height",t)},expression:"activeData.textStyle['line-height']"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{min:12,placeholder:"请输入字体大小","controls-position":"right"},model:{value:e.activeData.textStyle["font-size"],callback:function(t){e.$set(e.activeData.textStyle,"font-size",t)},expression:"activeData.textStyle['font-size']"}})],1),a("el-form-item",{attrs:{label:"对齐方式"}},[a("el-radio-group",{model:{value:e.activeData.textStyle["text-align"],callback:function(t){e.$set(e.activeData.textStyle,"text-align",t)},expression:"activeData.textStyle['text-align']"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("左对齐")]),a("el-radio-button",{attrs:{label:"center"}},[e._v("居中对齐")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右对齐")])],1)],1),a("el-form-item",{attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.textStyle["color"],callback:function(t){e.$set(e.activeData.textStyle,"color",t)},expression:"activeData.textStyle['color']"}})],1),a("el-form-item",{attrs:{label:"是否加粗"}},[a("el-switch",{attrs:{"active-value":"bold","inactive-value":"normal"},model:{value:e.activeData.textStyle["font-weight"],callback:function(t){e.$set(e.activeData.textStyle,"font-weight",t)},expression:"activeData.textStyle['font-weight']"}})],1),a("el-form-item",{attrs:{label:"是否斜体"}},[a("el-switch",{attrs:{"active-value":"italic","inactive-value":"normal"},model:{value:e.activeData.textStyle["font-style"],callback:function(t){e.$set(e.activeData.textStyle,"font-style",t)},expression:"activeData.textStyle['font-style']"}})],1),a("el-form-item",{attrs:{label:"下划线样式"}},[a("el-radio-group",{model:{value:e.activeData.textStyle["text-decoration"],callback:function(t){e.$set(e.activeData.textStyle,"text-decoration",t)},expression:"activeData.textStyle['text-decoration']"}},[a("el-radio-button",{attrs:{label:"none"}},[e._v("无样式")]),a("el-radio-button",{attrs:{label:"underline"}},[e._v("下划线")]),a("el-radio-button",{attrs:{label:"line-through"}},[e._v("删除线")])],1)],1)],1)},he=[],ve={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){},methods:{}},be=ve,ge=Object(y["a"])(be,_e,he,!1,null,null,null),ye=ge.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"提示文本"}},[a("el-input",{attrs:{placeholder:"请输入提示文本"},model:{value:e.activeData.title,callback:function(t){e.$set(e.activeData,"title",t)},expression:"activeData.title"}})],1),a("el-form-item",{attrs:{label:"辅助文本"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入辅助文本"},model:{value:e.activeData.description,callback:function(t){e.$set(e.activeData,"description",t)},expression:"activeData.description"}})],1),a("el-form-item",{attrs:{label:"样式效果"}},[a("div",{staticClass:"type-list"},e._l(e.typeList,(function(t,i){return a("div",{key:i,staticClass:"type-list-item",class:{active:e.activeData.type===t.id},on:{click:function(a){e.activeData.type=t.id}}},[a("el-alert",{attrs:{title:t.fullName,type:t.id,closable:!1,center:""}})],1)})),0)]),a("el-form-item",{attrs:{label:"提示图标"}},[a("el-switch",{model:{value:e.activeData.showIcon,callback:function(t){e.$set(e.activeData,"showIcon",t)},expression:"activeData.showIcon"}})],1),a("el-form-item",{attrs:{label:"提示可关闭"}},[a("el-switch",{model:{value:e.activeData.closable,callback:function(t){e.$set(e.activeData,"closable",t)},expression:"activeData.closable"}})],1),e.activeData.closable?a("el-form-item",{attrs:{label:"按钮文字"}},[a("el-input",{attrs:{maxlength:"10",placeholder:"请输入按钮文字"},model:{value:e.activeData.closeText,callback:function(t){e.$set(e.activeData,"closeText",t)},expression:"activeData.closeText"}})],1):e._e()],1)},we=[],xe={props:["activeData"],mixins:[le["a"]],data:function(){return{typeList:[{id:"success",fullName:"成功提示"},{id:"info",fullName:"消息提示"},{id:"warning",fullName:"警告提示"},{id:"error",fullName:"错误提示"}]}},created:function(){},methods:{}},Ce=xe,ke=(a("6b6e"),Object(y["a"])(Ce,De,we,!1,null,"3e943b1c",null)),Te=ke.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-input-number",{attrs:{placeholder:"默认值",min:e.activeData.min,max:e.activeData.max,step:e.activeData.step,precision:e.activeData.precision,"controls-position":"right"},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"最小值"}},[a("el-input-number",{attrs:{placeholder:"最小值","controls-position":"right"},model:{value:e.activeData.min,callback:function(t){e.$set(e.activeData,"min",t)},expression:"activeData.min"}})],1),a("el-form-item",{attrs:{label:"最大值"}},[a("el-input-number",{attrs:{placeholder:"最大值","controls-position":"right"},model:{value:e.activeData.max,callback:function(t){e.$set(e.activeData,"max",t)},expression:"activeData.max"}})],1),a("el-form-item",{attrs:{label:"精度"}},[a("el-input-number",{attrs:{min:0,placeholder:"精度",max:15,"controls-position":"right",precision:0},model:{value:e.activeData.precision,callback:function(t){e.$set(e.activeData,"precision",t)},expression:"activeData.precision"}})],1),a("el-form-item",{attrs:{label:"按钮"}},[a("el-radio-group",{on:{change:e.controlsPositionChange},model:{value:e.controlsPosition,callback:function(t){e.controlsPosition=t},expression:"controlsPosition"}},[a("el-radio-button",{attrs:{label:""}},[e._v("无")]),a("el-radio-button",{attrs:{label:"bothSides"}},[e._v("左右")]),a("el-radio-button",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"right"}},[e._v("右侧")])],1)],1),e.activeData.controls?[a("el-form-item",{attrs:{label:"步长"}},[a("el-input-number",{attrs:{placeholder:"步数",precision:e.activeData.precision,"controls-position":"right"},model:{value:e.activeData.step,callback:function(t){e.$set(e.activeData,"step",t)},expression:"activeData.step"}})],1)]:[a("el-form-item",{attrs:{label:"前缀"}},[a("el-input",{attrs:{placeholder:"请输入前缀"},model:{value:e.activeData.addonBefore,callback:function(t){e.$set(e.activeData,"addonBefore",t)},expression:"activeData.addonBefore"}})],1),a("el-form-item",{attrs:{label:"后缀"}},[a("el-input",{attrs:{placeholder:"请输入后缀"},model:{value:e.activeData.addonAfter,callback:function(t){e.$set(e.activeData,"addonAfter",t)},expression:"activeData.addonAfter"}})],1),a("el-form-item",{attrs:{label:"千位分隔"}},[a("el-switch",{model:{value:e.activeData.thousands,callback:function(t){e.$set(e.activeData,"thousands",t)},expression:"activeData.thousands"}})],1)],a("el-form-item",{attrs:{label:"大写金额"}},[a("el-switch",{model:{value:e.activeData.isAmountChinese,callback:function(t){e.$set(e.activeData,"isAmountChinese",t)},expression:"activeData.isAmountChinese"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],2)},Se=[],Ne={props:["activeData"],mixins:[le["a"]],data:function(){return{}},computed:{controlsPosition:{get:function(){return this.activeData.controls?""===this.activeData.controlsPosition?"bothSides":"right":""},set:function(e){this.activeData.controls=!!e,this.activeData.controlsPosition="right"===e?"right":""}}},methods:{controlsPositionChange:function(){this.activeData.thousands=!1,this.activeData.addonBefore="",this.activeData.addonAfter=""}}},Le=Ne,Oe=Object(y["a"])(Le,Fe,Se,!1,null,null,null),$e=Oe.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("jnpf-select",{attrs:{placeholder:"请选择默认值",options:e.activeData.options,props:e.activeData.props,clearable:""},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"排列方式"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},model:{value:e.activeData.direction,callback:function(t){e.$set(e.activeData,"direction",t)},expression:"activeData.direction"}},[a("el-radio-button",{attrs:{label:"horizontal"}},[e._v("水平排列")]),a("el-radio-button",{attrs:{label:"vertical"}},[e._v("垂直排列")])],1)],1),a("el-divider",[e._v("数据选项")]),a("el-form-item",{attrs:{label:"","label-width":"40px"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.__config__.dataType,callback:function(t){e.$set(e.activeData.__config__,"dataType",t)},expression:"activeData.__config__.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dictionary"}},[e._v("数据字典")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.__config__.dataType?[a("draggable",{attrs:{list:e.activeData.options,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.options,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"选项名",size:"small"},model:{value:t.fullName,callback:function(a){e.$set(t,"fullName",a)},expression:"item.fullName"}}),a("el-input",{attrs:{placeholder:"选项值",size:"small"},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.options.splice(i,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addSelectItem}},[e._v("\n        添加选项\n      ")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{type:"text"},on:{click:e.updateSelectItem}},[e._v("\n        批量编辑\n      ")])],1)]:e._e(),"dictionary"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"数据字典"}},[a("el-row",{staticClass:"jnpf-el-row"},[a("el-col",{attrs:{span:18}},[a("JnpfTreeSelect",{attrs:{options:e.dicOptions,placeholder:"请选择数据字典",lastLevel:"",clearable:""},on:{change:e.dictionaryTypeChange,selectChange:e.selectChange},model:{value:e.activeData.__config__.dictionaryType,callback:function(t){e.$set(e.activeData.__config__,"dictionaryType",t)},expression:"activeData.__config__.dictionaryType"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{staticStyle:{float:"right"},on:{click:function(t){return e.goDictionary()}}},[e._v("\n            添加")])],1)],1)],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-select",{attrs:{placeholder:"请选择存储字段"},model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}},[a("el-option",{attrs:{label:"id",value:"id"}}),a("el-option",{attrs:{label:"enCode",value:"enCode"}})],1)],1)]:e._e(),"dynamic"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"远端数据"}},[a("interface-dialog",{attrs:{value:e.activeData.__config__.propsUrl,title:e.activeData.__config__.propsName,popupTitle:"远端数据"},on:{change:e.propsUrlChange}})],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:function(t){return e.handleSelect(t,"value")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:function(t){return e.handleSelect(t,"label")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.label,callback:function(t){e.$set(e.activeData.props,"label",t)},expression:"activeData.props.label"}})],1),e.activeData.__config__.templateJson&&e.activeData.__config__.templateJson.length?a("el-table",{attrs:{data:e.activeData.__config__.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n          "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n        ")]}}],null,!1,284133495)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.realVModel,attrs:{label:e.realLabel,value:e.realVModel}})})),1)]}}],null,!1,3708884993)})],1):e._e()]:e._e(),a("el-divider"),"pc"===e.showType?[a("el-form-item",{attrs:{label:"选项样式"}},[a("el-radio-group",{model:{value:e.activeData.optionType,callback:function(t){e.$set(e.activeData,"optionType",t)},expression:"activeData.optionType"}},[a("el-radio-button",{attrs:{label:"default"}},[e._v("默认")]),a("el-radio-button",{attrs:{label:"button"}},[e._v("按钮")])],1)],1),"default"===e.activeData.optionType?a("el-form-item",{attrs:{label:"是否边框"}},[a("el-switch",{model:{value:e.activeData.border,callback:function(t){e.$set(e.activeData,"border",t)},expression:"activeData.border"}})],1):e._e(),"button"===e.activeData.optionType||e.activeData.border?a("el-form-item",{attrs:{label:"组件尺寸"}},[a("el-radio-group",{model:{value:e.activeData.size,callback:function(t){e.$set(e.activeData,"size",t)},expression:"activeData.size"}},[a("el-radio-button",{attrs:{label:"medium"}},[e._v("中等")]),a("el-radio-button",{attrs:{label:"small"}},[e._v("较小")]),a("el-radio-button",{attrs:{label:"mini"}},[e._v("迷你")])],1)],1):e._e()]:e._e(),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{visible:e.dicVisible,"append-to-body":"","lock-scroll":"",width:"80%"},on:{"update:visible":function(t){e.dicVisible=t},close:e.defaultValueChange}},[a("dicIndex",{ref:"dicIndex"})],1)],1),e.updateVisible?a("BatchEditing",{ref:"batchEditing",on:{change:e.handleSure}}):e._e()],2)},je=[],Me=a("03e8"),Ve={props:["activeData","dictionaryOptions","dataInterfaceOptions"],components:{draggable:c.a,InterfaceDialog:Me["a"]},data:function(){return{dictionaryId:""}},computed:{dicOptions:function(){return this.dictionaryOptions},interfaceOptions:function(){return this.dataInterfaceOptions},defaultValue:function(){var e="";return("checkbox"===this.activeData.__config__.jnpfKey||this.activeData.multiple)&&(e=[]),e},formFieldsOptions:function(){var e=this,t=[],a=function a(i,l){if(i&&(i.__config__&&e.isIncludesTable(i)&&i.__config__.children&&Array.isArray(i.__config__.children)&&a(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return a(e,l)})),i.__vModel__&&!F["c"].includes(i.__config__.jnpfKey)&&i.__vModel__!==e.activeData.__vModel__)){var n=l&&l.__config__&&"table"===l.__config__.jnpfKey;t.push(Object(o["a"])({realVModel:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__,realLabel:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label},i))}};return a(Object(L["a"])()),t}},methods:{isIncludesTable:function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(this.activeData.__config__.isSubTable?this.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)},onRelationFieldChange:function(e,t){if(!e)return t.jnpfKey="";var a=this.formFieldsOptions.filter((function(t){return t.realVModel===e}));if(!a.length)return t.jnpfKey="";var i=a[0];t.jnpfKey=i.__config__.jnpfKey},multipleChange:function(e){this.$set(this.activeData.__config__,"defaultValue",e?[]:"")},addSelectItem:function(){var e=this.jnpf.idGenerator();this.activeData.options.push({id:e,fullName:"选项"+e})},dataTypeChange:function(e){this.activeData.__config__.defaultValue=this.defaultValue,this.activeData.options=[],this.activeData.__config__.props.value="id",this.activeData.__config__.props.label="fullName",this.activeData.__config__.dictionaryType="",this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[]},dictionaryTypeChange:function(e){var t=this;this.dictionaryId=e,this.activeData.__config__.defaultValue=this.defaultValue,e?Object(O["i"])(e).then((function(e){t.activeData.options=e.data.list})):this.activeData.options=[]},propsUrlChange:function(e,t){var a=this,i=this.activeData.__config__.jnpfKey;if(this.activeData.__config__.defaultValue="cascader"===i?[]:"treeSelect"===i?this.activeData.multiple?[]:"":this.defaultValue,!e)return this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[],this.activeData.options=[],void this.getDataInterfaceInfo();var l=t.parameterJson?JSON.parse(t.parameterJson):[];this.activeData.__config__.propsUrl=e,this.activeData.__config__.propsName=t.fullName,this.activeData.__config__.templateJson=l.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{relationField:""})}));var n={paramList:this.activeData.__config__.templateJson||[]};Object($["o"])(e,n).then((function(e){var t=e.data;Array.isArray(t)?a.activeData.options=t:a.activeData.options=[],a.getDataInterfaceInfo()})).catch((function(){a.activeData.__config__.propsUrl="",a.activeData.__config__.propsName="",a.activeData.__config__.templateJson=[],a.activeData.options=[],a.getDataInterfaceInfo()}))}}},Ae=["treeSelect","radio","checkbox","select","cascader"],Pe={data:function(){return{fieldJsonList:[],hasPage:!1}},methods:{getDataInterfaceInfo:function(){var e=this,t=this.activeData.interfaceId?this.activeData.interfaceId:this.activeData.__config__.propsUrl;Object($["k"])(t).then((function(t){e.fieldJsonList=t.data&&t.data.fieldJson&&(JSON.parse(t.data.fieldJson)||[])||[],e.hasPage=!(!t.data||1!=t.data.hasPage),e.activeData.interfaceHasPage=e.hasPage,e.activeData.hasPage=e.hasPage}))},querySearch:function(e,t){var a=this.fieldJsonList||[],i=e?a.filter(this.createStateFilter(e)):a;t(i)},createStateFilter:function(e){return function(t){return 0===t.defaultValue.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e,t,a){var i=this.activeData.__config__.jnpfKey;"autoComplete"===i&&(this.activeData[t]=e.defaultValue),"popupSelect"!==i&&"popupTableSelect"!==i||(isNaN(a)?this.activeData[t]=e.defaultValue:this.activeData.columnOptions[a][t]=e.defaultValue),Ae.includes(i)&&(this.activeData.props[t]=e.defaultValue),this.activeData.__config__.renderKey=+new Date}}},Je=a("7cf1"),Re=a("5ea0"),Ke={components:{dicIndex:Je["default"],BatchEditing:Re["a"]},mixins:[le["a"],Ve,Pe],data:function(){return{dicVisible:!1,updateVisible:!1}},mounted:function(){this.getDataInterfaceInfo()},methods:{selectChange:function(){this.$emit("changeSelect"),this.dictionaryTypeChange(this.dictionaryId)},defaultValueChange:function(){this.selectChange()},goDictionary:function(){var e=this;this.dicVisible=!0,this.$nextTick((function(){e.$refs.dicIndex.initData()}))},updateSelectItem:function(){var e=this;this.updateVisible=!0,this.$nextTick((function(){e.$refs.batchEditing.init(e.activeData.options)}))},handleSure:function(e){this.activeData.options=e||[]},dataTypeChange:function(e){this.activeData.__config__.defaultValue="",this.activeData.options=[],this.activeData.props.value="id",this.activeData.props.label="fullName",this.activeData.__config__.dictionaryType="",this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[]}}},Be=Ke,Ee=(a("94b5"),Object(y["a"])(Be,Ie,je,!1,null,"4bf0ba42",null)),ze=Ee.exports,qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-checkbox-group",{attrs:{min:e.activeData.min,max:e.activeData.max},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}},e._l(e.activeData.options,(function(t,i){return a("el-checkbox",{key:i,attrs:{label:t[e.activeData.props.value]}},[e._v("\n        "+e._s(t[e.activeData.props.label]))])})),1)],1),a("el-form-item",{attrs:{label:"排列方式"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},model:{value:e.activeData.direction,callback:function(t){e.$set(e.activeData,"direction",t)},expression:"activeData.direction"}},[a("el-radio-button",{attrs:{label:"horizontal"}},[e._v("水平排列")]),a("el-radio-button",{attrs:{label:"vertical"}},[e._v("垂直排列")])],1)],1),a("el-divider",[e._v("数据选项")]),a("el-form-item",{attrs:{label:"","label-width":"40px"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.__config__.dataType,callback:function(t){e.$set(e.activeData.__config__,"dataType",t)},expression:"activeData.__config__.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dictionary"}},[e._v("数据字典")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.__config__.dataType?[a("draggable",{attrs:{list:e.activeData.options,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.options,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"选项名",size:"small"},model:{value:t.fullName,callback:function(a){e.$set(t,"fullName",a)},expression:"item.fullName"}}),a("el-input",{attrs:{placeholder:"选项值",size:"small"},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.options.splice(i,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addSelectItem}},[e._v("\n        添加选项\n      ")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{type:"text"},on:{click:e.updateSelectItem}},[e._v("\n        批量编辑\n      ")])],1)]:e._e(),"dictionary"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"数据字典"}},[a("el-row",{staticClass:"jnpf-el-row"},[a("el-col",{attrs:{span:18}},[a("JnpfTreeSelect",{attrs:{options:e.dicOptions,placeholder:"请选择数据字典",lastLevel:"",clearable:""},on:{change:e.dictionaryTypeChange,selectChange:e.selectChange},model:{value:e.activeData.__config__.dictionaryType,callback:function(t){e.$set(e.activeData.__config__,"dictionaryType",t)},expression:"activeData.__config__.dictionaryType"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{staticStyle:{float:"right"},on:{click:function(t){return e.goDictionary()}}},[e._v("\n            添加")])],1)],1)],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-select",{attrs:{placeholder:"请选择存储字段"},model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}},[a("el-option",{attrs:{label:"id",value:"id"}}),a("el-option",{attrs:{label:"enCode",value:"enCode"}})],1)],1)]:e._e(),"dynamic"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"远端数据"}},[a("interface-dialog",{attrs:{value:e.activeData.__config__.propsUrl,title:e.activeData.__config__.propsName,popupTitle:"远端数据"},on:{change:e.propsUrlChange}})],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:function(t){return e.handleSelect(t,"value")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:function(t){return e.handleSelect(t,"label")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.label,callback:function(t){e.$set(e.activeData.props,"label",t)},expression:"activeData.props.label"}})],1),e.activeData.__config__.templateJson&&e.activeData.__config__.templateJson.length?a("el-table",{attrs:{data:e.activeData.__config__.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n          "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n        ")]}}],null,!1,284133495)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.realVModel,attrs:{label:e.realLabel,value:e.realVModel}})})),1)]}}],null,!1,3708884993)})],1):e._e()]:e._e(),a("el-divider"),"pc"===e.showType?[a("el-form-item",{attrs:{label:"选项样式"}},[a("el-radio-group",{model:{value:e.activeData.optionType,callback:function(t){e.$set(e.activeData,"optionType",t)},expression:"activeData.optionType"}},[a("el-radio-button",{attrs:{label:"default"}},[e._v("默认")]),a("el-radio-button",{attrs:{label:"button"}},[e._v("按钮")])],1)],1),"default"===e.activeData.optionType?a("el-form-item",{attrs:{label:"是否边框"}},[a("el-switch",{model:{value:e.activeData.border,callback:function(t){e.$set(e.activeData,"border",t)},expression:"activeData.border"}})],1):e._e(),"button"===e.activeData.optionType||e.activeData.border?a("el-form-item",{attrs:{label:"组件尺寸"}},[a("el-radio-group",{model:{value:e.activeData.size,callback:function(t){e.$set(e.activeData,"size",t)},expression:"activeData.size"}},[a("el-radio-button",{attrs:{label:"medium"}},[e._v("中等")]),a("el-radio-button",{attrs:{label:"small"}},[e._v("较小")]),a("el-radio-button",{attrs:{label:"mini"}},[e._v("迷你")])],1)],1):e._e()]:e._e(),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{visible:e.dicVisible,"append-to-body":"","lock-scroll":"",width:"80%"},on:{"update:visible":function(t){e.dicVisible=t},close:e.defaultValueChange}},[a("dicIndex",{ref:"dicIndex"})],1)],1),e.updateVisible?a("BatchEditing",{ref:"batchEditing",on:{change:e.handleSure}}):e._e()],2)},We=[],Ue={components:{dicIndex:Je["default"],BatchEditing:Re["a"]},mixins:[le["a"],Ve,Pe],data:function(){return{dicVisible:!1,updateVisible:!1}},mounted:function(){this.getDataInterfaceInfo(),this.activeData.optionType=this.activeData.optionType||"default"},methods:{selectChange:function(){this.$emit("changeSelect"),this.dictionaryTypeChange(this.dictionaryId)},defaultValueChange:function(){this.selectChange()},goDictionary:function(){var e=this;this.dicVisible=!0,this.$nextTick((function(){e.$refs.dicIndex.initData()}))},updateSelectItem:function(){var e=this;this.updateVisible=!0,this.$nextTick((function(){e.$refs.batchEditing.init(e.activeData.options)}))},handleSure:function(e){this.activeData.options=e||[]},dataTypeChange:function(e){this.activeData.__config__.defaultValue="",this.activeData.options=[],this.activeData.props.value="id",this.activeData.props.label="fullName",this.activeData.__config__.dictionaryType="",this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[]}}},He=Ue,Ge=(a("bf55"),Object(y["a"])(He,qe,We,!1,null,"ded8bda4",null)),Qe=Ge.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-select",{attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,filterable:""},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}},e._l(e.activeData.options,(function(t,i){return a("el-option",{key:i,attrs:{label:t[e.activeData.props.label],value:t[e.activeData.props.value]}})})),1)],1),a("el-divider",[e._v("数据选项")]),a("el-form-item",{attrs:{label:"","label-width":"40px"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.__config__.dataType,callback:function(t){e.$set(e.activeData.__config__,"dataType",t)},expression:"activeData.__config__.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dictionary"}},[e._v("数据字典")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.__config__.dataType?[a("draggable",{attrs:{list:e.activeData.options,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.options,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"选项名",size:"small"},model:{value:t.fullName,callback:function(a){e.$set(t,"fullName",a)},expression:"item.fullName"}}),a("el-input",{attrs:{placeholder:"选项值",size:"small"},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.options.splice(i,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addSelectItem}},[e._v("\n        添加选项\n      ")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{type:"text"},on:{click:e.updateSelectItem}},[e._v("\n        批量编辑\n      ")])],1)]:e._e(),"dictionary"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"数据字典"}},[a("el-row",{staticClass:"jnpf-el-row"},[a("el-col",{attrs:{span:18}},[a("JnpfTreeSelect",{attrs:{options:e.dicOptions,placeholder:"请选择数据字典",lastLevel:"",clearable:""},on:{change:e.dictionaryTypeChange,selectChange:e.selectChange},model:{value:e.activeData.__config__.dictionaryType,callback:function(t){e.$set(e.activeData.__config__,"dictionaryType",t)},expression:"activeData.__config__.dictionaryType"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{on:{click:function(t){return e.goDictionary()}}},[e._v("\n            添加")])],1)],1)],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-select",{attrs:{placeholder:"请选择存储字段"},model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}},[a("el-option",{attrs:{label:"id",value:"id"}}),a("el-option",{attrs:{label:"enCode",value:"enCode"}})],1)],1)]:e._e(),"dynamic"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"远端数据"}},[a("interface-dialog",{attrs:{value:e.activeData.__config__.propsUrl,title:e.activeData.__config__.propsName,popupTitle:"远端数据"},on:{change:e.propsUrlChange}})],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入存储字段"},on:{select:function(t){return e.handleSelect(t,"value")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入显示字段"},on:{select:function(t){return e.handleSelect(t,"label")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.label,callback:function(t){e.$set(e.activeData.props,"label",t)},expression:"activeData.props.label"}})],1),e.activeData.__config__.templateJson&&e.activeData.__config__.templateJson.length?a("el-table",{attrs:{data:e.activeData.__config__.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n          "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n        ")]}}],null,!1,284133495)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.realVModel,attrs:{label:e.realLabel,value:e.realVModel}})})),1)]}}],null,!1,3708884993)})],1):e._e()]:e._e(),a("el-divider"),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"能否搜索"}},[a("el-switch",{model:{value:e.activeData.filterable,callback:function(t){e.$set(e.activeData,"filterable",t)},expression:"activeData.filterable"}})],1),a("el-form-item",{attrs:{label:"能否多选"}},[a("el-switch",{on:{change:e.multipleChange},model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{visible:e.dicVisible,"append-to-body":"","lock-scroll":"",width:"80%"},on:{"update:visible":function(t){e.dicVisible=t},close:e.defaultValueChange}},[a("dicIndex",{ref:"dicIndex"})],1)],1),e.updateVisible?a("BatchEditing",{ref:"batchEditing",on:{change:e.handleSure}}):e._e()],2)},Ze=[],Xe={components:{dicIndex:Je["default"],BatchEditing:Re["a"]},mixins:[le["a"],Ve,Pe],data:function(){return{dicVisible:!1,updateVisible:!1,resultInfo:"",separator:"|"}},mounted:function(){this.getDataInterfaceInfo()},methods:{selectChange:function(){this.$emit("changeSelect"),this.dictionaryTypeChange(this.dictionaryId)},defaultValueChange:function(){this.selectChange()},goDictionary:function(){var e=this;this.dicVisible=!0,this.$nextTick((function(){e.$refs.dicIndex.initData()}))},updateSelectItem:function(){var e=this;this.updateVisible=!0,this.$nextTick((function(){e.$refs.batchEditing.init(e.activeData.options)}))},handleSure:function(e){this.activeData.options=e||[]},dataTypeChange:function(e){this.activeData.__config__.defaultValue="",this.activeData.options=[],this.activeData.props.value="id",this.activeData.props.label="fullName",this.activeData.__config__.dictionaryType="",this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[]}}},et=Xe,tt=(a("7fcc"),Object(y["a"])(et,Ye,Ze,!1,null,"6cc334ab",null)),at=tt.exports,it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("JnpfCascader",{key:e.cascaderKey,attrs:{options:e.activeData.options,clearable:"","show-all-levels":e.activeData.showAllLevels,props:e.activeData.props,filterable:"",multiple:e.activeData.multiple},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"选项分隔符"}},[a("el-input",{attrs:{placeholder:"请输入选项分隔符"},model:{value:e.activeData.separator,callback:function(t){e.$set(e.activeData,"separator",t)},expression:"activeData.separator"}})],1),[a("el-divider",[e._v("数据选项")]),a("el-form-item",{attrs:{label:"","label-width":"40px"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.__config__.dataType,callback:function(t){e.$set(e.activeData.__config__,"dataType",t)},expression:"activeData.__config__.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dictionary"}},[e._v("数据字典")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.__config__.dataType?[a("el-tree",{attrs:{draggable:"",data:e.activeData.options,"node-key":"id","expand-on-click-node":!1,props:e.props},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"tree-node-ellipsis",attrs:{title:i.label}},[e._v(e._s(i.label))]),a("span",{staticClass:"node-operation"},[a("i",{staticClass:"el-icon-plus",attrs:{title:"添加"},on:{click:function(t){return e.append(l)}}}),a("i",{staticClass:"el-icon-edit-outline",attrs:{title:"编辑"},on:{click:function(t){return e.update(i,l)}}}),a("i",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(t){return e.remove(i,l)}}})])])}}],null,!1,2738824884)}),a("div",{staticStyle:{"margin-left":"20px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addTreeItem}},[e._v("添加父级")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{type:"text"},on:{click:e.treeSelectItem}},[e._v("\n          批量编辑\n        ")])],1)]:e._e(),"dictionary"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"数据字典"}},[a("el-row",{staticClass:"jnpf-el-row"},[a("el-col",{attrs:{span:18}},[a("JnpfTreeSelect",{attrs:{options:e.dicOptions,placeholder:"请选择数据字典",lastLevel:"",clearable:""},on:{change:e.dictionaryTypeChange,selectChange:e.selectChange},model:{value:e.activeData.__config__.dictionaryType,callback:function(t){e.$set(e.activeData.__config__,"dictionaryType",t)},expression:"activeData.__config__.dictionaryType"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{staticStyle:{float:"right"},on:{click:function(t){return e.goDictionary()}}},[e._v("\n              添加")])],1)],1)],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-select",{attrs:{placeholder:"请选择存储字段"},model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}},[a("el-option",{attrs:{label:"id",value:"id"}}),a("el-option",{attrs:{label:"enCode",value:"enCode"}})],1)],1)]:e._e(),"dynamic"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"远端数据"}},[a("interface-dialog",{attrs:{value:e.activeData.__config__.propsUrl,title:e.activeData.__config__.propsName,popupTitle:"远端数据"},on:{change:e.propsUrlChange}})],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入存储字段"},on:{select:function(t){return e.handleSelect(t,"value")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入显示字段"},on:{select:function(t){return e.handleSelect(t,"label")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.label,callback:function(t){e.$set(e.activeData.props,"label",t)},expression:"activeData.props.label"}})],1),a("el-form-item",{attrs:{label:"子级字段"}},[a("el-input",{attrs:{placeholder:"请输入子级字段"},on:{change:e.onChange},model:{value:e.activeData.props.children,callback:function(t){e.$set(e.activeData.props,"children",t)},expression:"activeData.props.children"}})],1),e.activeData.__config__.templateJson&&e.activeData.__config__.templateJson.length?a("el-table",{attrs:{data:e.activeData.__config__.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n            "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n          ")]}}],null,!1,3210542583)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.realVModel,attrs:{label:e.realLabel,value:e.realVModel}})})),1)]}}],null,!1,3708884993)})],1):e._e()]:e._e(),a("el-divider")],a("el-form-item",{attrs:{label:"展示全路径"}},[a("el-switch",{model:{value:e.activeData.showAllLevels,callback:function(t){e.$set(e.activeData,"showAllLevels",t)},expression:"activeData.showAllLevels"}})],1),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{attrs:{label:"能否搜索"}},[a("el-switch",{model:{value:e.activeData.filterable,callback:function(t){e.$set(e.activeData,"filterable",t)},expression:"activeData.filterable"}})],1),a("el-form-item",{attrs:{label:"能否多选"}},[a("el-switch",{on:{change:e.onChange},model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),a("treeNode-dialog",{attrs:{visible:e.dialogVisible,title:e.currentNode.id?"编辑选项":"添加选项",currentNode:e.currentNodeId?e.currentNode:e.formData},on:{"update:visible":function(t){e.dialogVisible=t},commit:e.addNode}}),a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{visible:e.dicVisible,"append-to-body":"","lock-scroll":"",width:"80%"},on:{"update:visible":function(t){e.dicVisible=t},close:e.defaultValueChange}},[a("dicIndex",{ref:"dicIndex"})],1)],1),e.updateVisible?a("TreeEditing",{ref:"treeEditing",on:{change:e.handleSure}}):e._e()],2)},lt=[],ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,width:"660px"},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-row",{attrs:{gutter:0}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"small","label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"选项名",prop:"fullName"}},[a("el-input",{attrs:{placeholder:"请输入选项名",clearable:""},model:{value:e.formData.fullName,callback:function(t){e.$set(e.formData,"fullName",t)},expression:"formData.fullName"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"选项值",prop:"id"}},[a("el-input",{attrs:{placeholder:"请输入选项值",clearable:""},model:{value:e.formData.id,callback:function(t){e.$set(e.formData,"id",t)},expression:"formData.id"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handelConfirm}},[e._v("确定")]),a("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)],1)},nt=[],st={props:{currentNode:{type:Object,default:function(){}}},data:function(){return{formData:{fullName:"",id:""},rules:{fullName:[{required:!0,message:"请输入选项名",trigger:"blur"}],id:[{required:!0,message:"请输入选项值",trigger:"blur"}]}}},methods:{onOpen:function(){var e=this;this.formData=JSON.parse(JSON.stringify(this.currentNode)),this.$nextTick((function(){e.$refs["elForm"].clearValidate()}))},onClose:function(){},close:function(){this.$emit("update:visible",!1)},handelConfirm:function(){var e=this;this.$refs.elForm.validate((function(t){t&&(e.$emit("commit",e.formData),e.close())}))}}},rt=st,ct=Object(y["a"])(rt,ot,nt,!1,null,null,null),dt=ct.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center update-dialog",attrs:{visible:e.visible,"append-to-body":"",title:"批量编辑",closeOnClickModal:!1,"lock-scroll":"",width:"700px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-alert",{attrs:{title:"注意：每行对应一个选项；选项名、选项值和父级选项值之间用英文 | 隔开。格式如下：",type:"warning",closable:!1,"show-icon":""}}),a("div",{staticClass:"demo-box"},[a("div",{staticClass:"demo-box-cell"},[a("p",{staticClass:"w-260px"},[e._v("根节点格式：选项名|选项值")]),a("p",[e._v("输入示例："),a("span",[e._v("选项一|选项一的值")])])]),a("div",{staticClass:"demo-box-cell"},[a("p",{staticClass:"w-260px"},[e._v("子节点格式：选项名|选项值|父级选项值")]),a("p",[e._v("输入示例："),a("span",[e._v("选项一|选项一的值|选项一父级的值")])])])]),a("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:100,autosize:""},model:{value:e.resultInfo,callback:function(t){e.resultInfo=t},expression:"resultInfo"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSure()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton"))+"\n    ")])],1)],1)},pt=[],ft={components:{},props:{},data:function(){return{visible:!1,resultInfo:"",separator:"|",options:[]}},computed:{},methods:{init:function(e){this.options=e||[],this.analysis(),this.visible=!0},analysis:function(){var e=this;if(this.resultInfo="",this.options.length>0){var t=function t(a,i){for(var l=0;l<a.length;l++){var o=a[l];if(o.id==o.fullName)e.resultInfo+=o.fullName+e.separator+o.id+"\n";else{var n="";i&&(n=e.separator+i),e.resultInfo+=o.fullName+e.separator+o.id+n+"\n"}o&&o.children&&Array.isArray(o.children)&&t(o.children,o.id)}};t(this.options)}},handleSure:function(){var e=this;this.options=[];var t=this.resultInfo.split("\n");t.length>0?t.forEach((function(t){if(t&&t.trim()&&-1!==t.indexOf(e.separator)){var a=t.split(e.separator)||[],i=function t(a,i){for(var l=i[i.length-1],o=0;o<a.length;o++){var n=a[o];n.children&&n.children.length&&t(n.children,i),n.id==l&&(e.isRepeatId(i[1])||(n.children=n.children?n.children:[],n.children.push({fullName:i[0],id:i[1]})))}};if(a.length<2)return;2==a.length?e.isRepeatId(a[1])||e.options.push({fullName:a[0],id:a[1]}):i(e.options,a)}})):this.options=[],this.$emit("change",this.options),this.visible=!1},isRepeatId:function(e){var t=!1,a=function a(i){for(var l=0;l<i.length;l++){var o=i[l];o.id==e&&(t=!0),Array.isArray(o.children)&&a(o.children)}};return a(this.options),t}}},mt=ft,_t=(a("7640"),Object(y["a"])(mt,ut,pt,!1,null,"12fd3007",null)),ht=_t.exports,vt={mixins:[le["a"],Ve,Pe],components:{TreeNodeDialog:dt,dicIndex:Je["default"],TreeEditing:ht},data:function(){return{dialogVisible:!1,currentNode:{},props:{value:"id",label:"fullName",children:"children"},cascaderKey:+new Date,dicVisible:!1,updateVisible:!1,node:"",currentNodeId:"",formData:{fullName:"",id:""}}},mounted:function(){this.getDataInterfaceInfo()},methods:{selectChange:function(){this.$emit("changeSelect"),this.dictionaryTypeChange(this.dictionaryId)},defaultValueChange:function(){this.selectChange()},goDictionary:function(){var e=this;this.dicVisible=!0,this.$nextTick((function(){e.$refs.dicIndex.initData()}))},addTreeItem:function(){this.currentNodeId="",this.dialogVisible=!0,this.currentNode=this.activeData.options},addNode:function(e){var t=this;this.currentNodeId?Object.keys(e).forEach((function(a){t.node.data[a]=e[a]})):this.currentNode.push(e)},update:function(e,t){this.node=e,this.currentNodeId=t.id,this.dialogVisible=!0,this.currentNode=t},append:function(e){this.currentNodeId="",e.children||this.$set(e,"children",[]),this.dialogVisible=!0,this.currentNode=e.children},remove:function(e,t){this.activeData.__config__.defaultValue=[];var a=e.parent,i=a.data.children||a.data,l=i.findIndex((function(e){return e.id===t.id}));i.splice(l,1)},onChange:function(){this.cascaderKey=+new Date,this.activeData.__config__.renderKey=+new Date,this.activeData.__config__.defaultValue=[]},dataTypeChange:function(){this.cascaderKey=+new Date,this.activeData.__config__.renderKey=+new Date,this.activeData.__config__.defaultValue=[],this.activeData.options=[],this.activeData.props.value="id",this.activeData.props.label="fullName",this.activeData.props.children="children",this.activeData.__config__.dictionaryType="",this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[]},dictionaryTypeChange:function(e){var t=this;this.activeData.__config__.defaultValue=[],e?Object(O["i"])(e).then((function(e){t.activeData.options=e.data.list})):this.activeData.options=[]},treeSelectItem:function(){var e=this;this.updateVisible=!0,this.$nextTick((function(){e.$refs.treeEditing.init(e.activeData.options)}))},handleSure:function(e){this.activeData.options=e||[]}}},bt=vt,gt=(a("ee58"),Object(y["a"])(bt,it,lt,!1,null,"6870164f",null)),yt=gt.exports,Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"格式"}},[a("el-select",{attrs:{placeholder:"请选择时间类型",filterable:""},on:{change:e.dateTypeChange},model:{value:e.activeData.format,callback:function(t){e.$set(e.activeData,"format",t)},expression:"activeData.format"}},e._l(e.formatOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-time-picker",{attrs:{disabled:e.activeData.__config__.defaultCurrent,placeholder:"选择默认值",clearable:"","value-format":e.activeData.format,format:e.activeData.format},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{staticStyle:{float:"right","margin-top":"-15px"},attrs:{label:"true"},on:{change:e.defaultCurrentChange},model:{value:e.activeData.__config__.defaultCurrent,callback:function(t){e.$set(e.activeData.__config__,"defaultCurrent",t)},expression:"activeData.__config__.defaultCurrent"}},[e._v("默认为当前系统时间\n    ")])],1),a("el-divider",[e._v("规则")]),a("jnpf-form-tip-item",{attrs:{label:"开始时间","tip-label":"系统会限制填写者填写此字段的当前起始时间范围（包含该时间）。该功能不做有效性验证，请自行保证。"}},[a("el-switch",{on:{change:e.startTimeRuleChange},model:{value:e.activeData.__config__.startTimeRule,callback:function(t){e.$set(e.activeData.__config__,"startTimeRule",t)},expression:"activeData.__config__.startTimeRule"}})],1),e.activeData.__config__.startTimeRule?[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择类型",filterable:""},on:{change:e.startType},model:{value:e.activeData.__config__.startTimeType,callback:function(t){e.$set(e.activeData.__config__,"startTimeType",t)},expression:"activeData.__config__.startTimeType"}},e._l(e.typeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.__config__.startTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-time-picker",{attrs:{placeholder:"请选择开始时间",clearable:"","value-format":e.activeData.format,format:e.activeData.format},model:{value:e.activeData.__config__.startTimeValue,callback:function(t){e.$set(e.activeData.__config__,"startTimeValue",t)},expression:"activeData.__config__.startTimeValue"}})],1):4==e.activeData.__config__.startTimeType||5==e.activeData.__config__.startTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",min:1},on:{change:e.startValue},model:{value:e.activeData.__config__.startTimeValue,callback:function(t){e.$set(e.activeData.__config__,"startTimeValue",t)},expression:"activeData.__config__.startTimeValue"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{slot:"append",placeholder:"请选择",filterable:""},slot:"append",model:{value:e.activeData.__config__.startTimeTarget,callback:function(t){e.$set(e.activeData.__config__,"startTimeTarget",t)},expression:"activeData.__config__.startTimeTarget"}},e._l(e.targetOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1):2==e.activeData.__config__.startTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-select",{attrs:{placeholder:"请选择关联时间选择",filterable:""},model:{value:e.activeData.__config__.startRelationField,callback:function(t){e.$set(e.activeData.__config__,"startRelationField",t)},expression:"activeData.__config__.startRelationField"}},e._l(e.formFieldsOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.realLabel,value:e.realVModel}})})),1)],1):e._e()]:e._e(),a("jnpf-form-tip-item",{attrs:{label:"结束时间","tip-label":"系统会限制填写者填写此字段的当前起始时间范围（包含该时间）。该功能不做有效性验证，请自行保证。"}},[a("el-switch",{on:{change:e.endTimeRuleChange},model:{value:e.activeData.__config__.endTimeRule,callback:function(t){e.$set(e.activeData.__config__,"endTimeRule",t)},expression:"activeData.__config__.endTimeRule"}})],1),e.activeData.__config__.endTimeRule?[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择类型"},on:{change:e.endType},model:{value:e.activeData.__config__.endTimeType,callback:function(t){e.$set(e.activeData.__config__,"endTimeType",t)},expression:"activeData.__config__.endTimeType"}},e._l(e.typeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.__config__.endTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-time-picker",{attrs:{placeholder:"请选择结束时间",clearable:"","value-format":e.activeData.format,format:e.activeData.format},model:{value:e.activeData.__config__.endTimeValue,callback:function(t){e.$set(e.activeData.__config__,"endTimeValue",t)},expression:"activeData.__config__.endTimeValue"}})],1):4==e.activeData.__config__.endTimeType||5==e.activeData.__config__.endTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",min:1},on:{change:e.endValue},model:{value:e.activeData.__config__.endTimeValue,callback:function(t){e.$set(e.activeData.__config__,"endTimeValue",t)},expression:"activeData.__config__.endTimeValue"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{slot:"append",placeholder:"请选择",filterable:""},slot:"append",model:{value:e.activeData.__config__.endTimeTarget,callback:function(t){e.$set(e.activeData.__config__,"endTimeTarget",t)},expression:"activeData.__config__.endTimeTarget"}},e._l(e.targetOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1):2==e.activeData.__config__.endTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-select",{attrs:{placeholder:"请选择关联时间选择",filterable:""},model:{value:e.activeData.__config__.endRelationField,callback:function(t){e.$set(e.activeData.__config__,"endRelationField",t)},expression:"activeData.__config__.endRelationField"}},e._l(e.formFieldsOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.realLabel,value:e.realVModel}})})),1)],1):e._e()]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"是否只读"}},[a("el-switch",{model:{value:e.activeData.readonly,callback:function(t){e.$set(e.activeData,"readonly",t)},expression:"activeData.readonly"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],2)},wt=[],xt={props:["activeData"],mixins:[le["a"]],data:function(){return{formatOptions:[{label:"HH:mm:ss",value:"HH:mm:ss"},{label:"HH:mm",value:"HH:mm"}],typeOptions:[{label:"特定时间",value:1},{label:"表单字段",value:2},{label:"填写当前时间",value:3},{label:"当前时间前",value:4},{label:"当前时间后",value:5}]}},watch:{"activeData.__config__.startTimeRule":function(e){e||(this.activeData.__config__.startRelationField="",this.activeData.startTime="",this.activeData.__config__.startTimeValue="")},"activeData.__config__.endTimeRule":function(e){e||(this.activeData.__config__.endRelationField="",this.activeData.endTime="",this.activeData.__config__.endTimeValue="")},"activeData.format":function(e){this.targetOptions="HH:mm"===e?[{label:"时",value:1},{label:"分",value:2}]:[{label:"时",value:1},{label:"分",value:2},{label:"秒",value:3}]}},created:function(){this.getTargetOptions()},computed:{formFieldsOptions:function(){var e=this,t=[],a=function a(i,l){if(i&&(i.__config__&&e.isIncludesTable(i)&&i.__config__.children&&Array.isArray(i.__config__.children)&&a(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return a(e,l)})),i.__vModel__&&"timePicker"===i.__config__.jnpfKey&&e.isIncludesField(i))){var n=l&&l.__config__&&"table"===l.__config__.jnpfKey;t.push(Object(o["a"])({realVModel:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__,realLabel:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label},i))}};return a(Object(L["a"])()),t}},methods:{startValue:function(e){e<1&&(this.activeData.__config__.startTimeValue=1)},endValue:function(e){e<1&&(this.activeData.__config__.endTimeValue=1)},endTimeRuleChange:function(){return this.activeData.__config__.endTimeRule?this.activeData.__config__.endTimeType=1:this.activeData.__config__.endRelationField=""},startTimeRuleChange:function(){return this.activeData.__config__.startTimeRule?this.activeData.__config__.startTimeType=1:this.activeData.__config__.startRelationField=""},isIncludesField:function(e){var t=e.__vModel__,a=this.activeData.__vModel__;if(t!==a)return!0;if(e.__config__.relationTable&&!e.__config__.isSubTable){if(t===a)return!0}else if(e.__config__.isSubTable){if(t===a&&this.activeData.__config__.tableName!=e.__config__.tableName)return!0}else if(this.activeData.__config__.isSubTable&&t===a)return!0;return!1},isIncludesTable:function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(this.activeData.__config__.isSubTable?this.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)},dateTypeChange:function(){this.getTargetOptions()},startType:function(e){if(this.activeData.startTime=null,this.activeData.__config__.startRelationField="",3==e)return this.activeData.__config__.startTimeValue=this.jnpf.toDate(new Date,this.activeData.format),this.activeData.startTime=this.activeData.__config__.startTimeValue;4==e||5==e?(this.activeData.__config__.startTimeValue=1,this.activeData.__config__.startTimeTarget=1):this.activeData.__config__.startTimeValue=""},endType:function(e){if(this.activeData.endTime=null,this.activeData.__config__.endRelationField="",3==e)return this.activeData.__config__.endTimeValue=this.jnpf.toDate(new Date,this.activeData.format),this.activeData.endTime=this.activeData.__config__.endTimeValue;4==e||5==e?(this.activeData.__config__.endTimeValue=1,this.activeData.__config__.endTimeTarget=1):this.activeData.__config__.endTimeValue=""},getTargetOptions:function(){"HH:mm"===this.activeData.format?this.targetOptions=[{label:"时",value:1},{label:"分",value:2}]:this.targetOptions=[{label:"时",value:1},{label:"分",value:2},{label:"秒",value:3}]},defaultCurrentChange:function(e){e&&(this.activeData.__config__.defaultValue="")}}},Ct=xt,kt=(a("6c5b"),Object(y["a"])(Ct,Dt,wt,!1,null,"1861a92f",null)),Tt=kt.exports,Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"开始占位"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData["start-placeholder"],callback:function(t){e.$set(e.activeData,"start-placeholder",t)},expression:"activeData['start-placeholder']"}})],1),a("el-form-item",{attrs:{label:"结束占位"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData["end-placeholder"],callback:function(t){e.$set(e.activeData,"end-placeholder",t)},expression:"activeData['end-placeholder']"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-time-picker",{attrs:{"start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:"","value-format":e.activeData.format,format:e.activeData.format,"is-range":"","range-separator":"至"},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"分隔符"}},[a("el-input",{attrs:{placeholder:"请输入分隔符"},model:{value:e.activeData["range-separator"],callback:function(t){e.$set(e.activeData,"range-separator",t)},expression:"activeData['range-separator']"}})],1),a("el-form-item",{attrs:{label:"时间格式"}},[a("el-input",{attrs:{value:e.activeData.format,placeholder:"请输入时间格式"},on:{input:function(t){return e.setTimeValue(t)}}})],1),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"是否只读"}},[a("el-switch",{model:{value:e.activeData.readonly,callback:function(t){e.$set(e.activeData,"readonly",t)},expression:"activeData.readonly"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},St=[],Nt={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){},methods:{setTimeValue:function(e,t){var a="week"===t?dateTimeFormat.date:e;this.$set(this.activeData.__config__,"defaultValue",null),this.$set(this.activeData,"value-format",a),this.$set(this.activeData,"format",e)}}},Lt=Nt,Ot=Object(y["a"])(Lt,Ft,St,!1,null,null,null),$t=Ot.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"格式"}},[a("el-select",{attrs:{placeholder:"请选择日期类型",filterable:""},on:{change:e.dateTypeChange},model:{value:e.activeData.format,callback:function(t){e.$set(e.activeData,"format",t)},expression:"activeData.format"}},e._l(e.formatOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-date-picker",{attrs:{type:e.activeData.type,placeholder:"选择默认值","value-format":"timestamp",format:e.activeData.format,disabled:e.activeData.__config__.defaultCurrent},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{staticStyle:{float:"right","margin-top":"-15px"},attrs:{label:"true"},on:{change:e.defaultCurrentChange},model:{value:e.activeData.__config__.defaultCurrent,callback:function(t){e.$set(e.activeData.__config__,"defaultCurrent",t)},expression:"activeData.__config__.defaultCurrent"}},[e._v("默认为当前系统时间\n    ")])],1),a("el-divider",[e._v("规则")]),a("jnpf-form-tip-item",{attrs:{label:"开始时间","tip-label":"系统会限制填写者填写此字段的当天起始日期范围（包含该日期）。该功能不做有效性验证，请自行保证。"}},[a("el-switch",{on:{change:e.startTimeRuleChange},model:{value:e.activeData.__config__.startTimeRule,callback:function(t){e.$set(e.activeData.__config__,"startTimeRule",t)},expression:"activeData.__config__.startTimeRule"}})],1),e.activeData.__config__.startTimeRule?[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择类型",filterable:""},on:{change:e.startType},model:{value:e.activeData.__config__.startTimeType,callback:function(t){e.$set(e.activeData.__config__,"startTimeType",t)},expression:"activeData.__config__.startTimeType"}},e._l(e.typeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.__config__.startTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("JnpfDatePicker",{attrs:{type:e.activeData.type,placeholder:"请选择开始时间",kay:e.key2,clearable:"",format:e.activeData.format},model:{value:e.activeData.__config__.startTimeValue,callback:function(t){e.$set(e.activeData.__config__,"startTimeValue",t)},expression:"activeData.__config__.startTimeValue"}})],1):4==e.activeData.__config__.startTimeType||5==e.activeData.__config__.startTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",min:"1"},on:{change:e.startValue},model:{value:e.activeData.__config__.startTimeValue,callback:function(t){e.$set(e.activeData.__config__,"startTimeValue",t)},expression:"activeData.__config__.startTimeValue"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{slot:"append",placeholder:"请选择",filterable:""},slot:"append",model:{value:e.activeData.__config__.startTimeTarget,callback:function(t){e.$set(e.activeData.__config__,"startTimeTarget",t)},expression:"activeData.__config__.startTimeTarget"}},e._l(e.targetOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1):2==e.activeData.__config__.startTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-select",{attrs:{placeholder:"请选择关联日期选择",filterable:""},model:{value:e.activeData.__config__.startRelationField,callback:function(t){e.$set(e.activeData.__config__,"startRelationField",t)},expression:"activeData.__config__.startRelationField"}},e._l(e.formFieldsOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.realLabel,value:e.realVModel}})})),1)],1):e._e()]:e._e(),a("jnpf-form-tip-item",{attrs:{label:"结束时间","tip-label":"系统会限制填写者填写此字段的当天起始日期范围（包含该日期）。该功能不做有效性验证，请自行保证。"}},[a("el-switch",{on:{change:e.endTimeRuleChange},model:{value:e.activeData.__config__.endTimeRule,callback:function(t){e.$set(e.activeData.__config__,"endTimeRule",t)},expression:"activeData.__config__.endTimeRule"}})],1),e.activeData.__config__.endTimeRule?[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择类型",filterable:""},on:{change:e.endType},model:{value:e.activeData.__config__.endTimeType,callback:function(t){e.$set(e.activeData.__config__,"endTimeType",t)},expression:"activeData.__config__.endTimeType"}},e._l(e.typeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.__config__.endTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("JnpfDatePicker",{attrs:{type:e.activeData.type,format:e.activeData.format,placeholder:"请选择结束时间",kay:e.key2,clearable:""},model:{value:e.activeData.__config__.endTimeValue,callback:function(t){e.$set(e.activeData.__config__,"endTimeValue",t)},expression:"activeData.__config__.endTimeValue"}})],1):4==e.activeData.__config__.endTimeType||5==e.activeData.__config__.endTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",min:"1"},on:{change:e.endValue},model:{value:e.activeData.__config__.endTimeValue,callback:function(t){e.$set(e.activeData.__config__,"endTimeValue",t)},expression:"activeData.__config__.endTimeValue"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{slot:"append",placeholder:"请选择",filterable:""},slot:"append",model:{value:e.activeData.__config__.endTimeTarget,callback:function(t){e.$set(e.activeData.__config__,"endTimeTarget",t)},expression:"activeData.__config__.endTimeTarget"}},e._l(e.targetOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1):2==e.activeData.__config__.endTimeType?a("el-form-item",{staticClass:"spacing",attrs:{label:""}},[a("el-select",{attrs:{placeholder:"请选择关联日期选择",filterable:""},model:{value:e.activeData.__config__.endRelationField,callback:function(t){e.$set(e.activeData.__config__,"endRelationField",t)},expression:"activeData.__config__.endRelationField"}},e._l(e.formFieldsOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.realLabel,value:e.realVModel,filterable:""}})})),1)],1):e._e()]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"是否只读"}},[a("el-switch",{model:{value:e.activeData.readonly,callback:function(t){e.$set(e.activeData,"readonly",t)},expression:"activeData.readonly"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],2)},jt=[],Mt={props:["activeData"],mixins:[le["a"]],data:function(){return{formatOptions:[{label:"yyyy",value:"yyyy"},{label:"yyyy-MM",value:"yyyy-MM"},{label:"yyyy-MM-dd",value:"yyyy-MM-dd"},{label:"yyyy-MM-dd HH:mm",value:"yyyy-MM-dd HH:mm"},{label:"yyyy-MM-dd HH:mm:ss",value:"yyyy-MM-dd HH:mm:ss"}],typeOptions:[{label:"特定时间",value:1},{label:"表单字段",value:2},{label:"填写当前时间",value:3},{label:"当前时间前",value:4},{label:"当前时间后",value:5}],type:"date",targetOptions:[],key2:""}},watch:{"activeData.__config__.startTimeRule":function(e){e||(this.activeData.__config__.__vModel__startRelationField="",this.activeData.startTime="",this.activeData.__config__.startTimeValue="")},"activeData.__config__.endTimeRule":function(e){e||(this.activeData.__config__.endRelationField="",this.activeData.endTime="",this.activeData.__config__.endTimeValue="")},"activeData.format":function(){this.getTargetOptions(),this.key2=+new Date}},created:function(){this.getTargetOptions()},mounted:function(){},computed:{formFieldsOptions:function(){var e=this,t=[],a=function a(i,l){if(i&&(i.__config__&&e.isIncludesTable(i)&&i.__config__.children&&Array.isArray(i.__config__.children)&&a(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return a(e,l)})),i.__vModel__&&"datePicker"===i.__config__.jnpfKey&&e.isIncludesField(i))){var n=l&&l.__config__&&"table"===l.__config__.jnpfKey;t.push(Object(o["a"])({realVModel:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__,realLabel:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label},i))}};return a(Object(L["a"])()),t}},methods:{startValue:function(e){e<1&&(this.activeData.__config__.startTimeValue=1)},endValue:function(e){e<1&&(this.activeData.__config__.endTimeValue=1)},endTimeRuleChange:function(){return this.activeData.__config__.endTimeRule?this.activeData.__config__.endTimeType=1:this.activeData.__config__.endRelationField=""},startTimeRuleChange:function(){return this.activeData.__config__.startTimeRule?this.activeData.__config__.startTimeType=1:this.activeData.__config__.startRelationField=""},isIncludesField:function(e){var t=e.__vModel__,a=this.activeData.__vModel__;if(t!==a)return!0;if(e.__config__.relationTable&&!e.__config__.isSubTable){if(t===a)return!0}else if(e.__config__.isSubTable){if(t===a&&this.activeData.__config__.tableName!=e.__config__.tableName)return!0}else if(this.activeData.__config__.isSubTable&&t===a)return!0;return!1},isIncludesTable:function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(this.activeData.__config__.isSubTable?this.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)},dateTypeChange:function(e){this.getTargetOptions()},startType:function(e){this.activeData.startTime=null,this.activeData.__config__.startRelationField="",4==e||5==e?(this.activeData.__config__.startTimeValue=1,this.activeData.__config__.startTimeTarget=1):this.activeData.__config__.startTimeValue=""},endType:function(e){this.activeData.endTime=null,this.activeData.__config__.endRelationField="",4==e||5==e?(this.activeData.__config__.endTimeValue=1,this.activeData.__config__.endTimeTarget=1):this.activeData.__config__.endTimeValue=""},getTargetOptions:function(){return"yyyy"===this.activeData.format?this.targetOptions=[{label:"年",value:1}]:"yyyy-MM"===this.activeData.format?this.targetOptions=[{label:"年",value:1},{label:"月",value:2}]:this.targetOptions=[{label:"年",value:1},{label:"月",value:2},{label:"日",value:3}],this.activeData.type="yyyy"===this.activeData.format?"year":"yyyy-MM"===this.activeData.format?"month":"yyyy-MM-dd"===this.activeData.format?"date":"datetime","yyyy"===this.activeData.format||"yyyy-MM"===this.activeData.format||"yyyy-MM-dd"===this.activeData.format?this.type="date":this.type="datetime"},defaultCurrentChange:function(e){e&&(this.activeData.__config__.defaultValue="")}}},Vt=Mt,At=(a("279c"),Object(y["a"])(Vt,It,jt,!1,null,"68f4d286",null)),Pt=At.exports,Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"开始占位"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData["start-placeholder"],callback:function(t){e.$set(e.activeData,"start-placeholder",t)},expression:"activeData['start-placeholder']"}})],1),a("el-form-item",{attrs:{label:"结束占位"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData["end-placeholder"],callback:function(t){e.$set(e.activeData,"end-placeholder",t)},expression:"activeData['end-placeholder']"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-date-picker",{attrs:{type:e.activeData.type,"value-format":"timestamp",format:e.activeData.format,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"时间类型"}},[a("el-select",{attrs:{placeholder:"请选择时间类型",filterable:""},on:{change:e.dateTypeChange},model:{value:e.activeData.type,callback:function(t){e.$set(e.activeData,"type",t)},expression:"activeData.type"}},e._l(e.dateOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"分隔符"}},[a("el-input",{attrs:{placeholder:"请输入分隔符"},model:{value:e.activeData["range-separator"],callback:function(t){e.$set(e.activeData,"range-separator",t)},expression:"activeData['range-separator']"}})],1),a("el-form-item",{attrs:{label:"时间格式"}},[a("el-input",{attrs:{value:e.activeData.format,placeholder:"请输入时间格式"},on:{input:function(t){return e.setTimeValue(t)}}})],1),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"是否只读"}},[a("el-switch",{model:{value:e.activeData.readonly,callback:function(t){e.$set(e.activeData,"readonly",t)},expression:"activeData.readonly"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},Rt=[],Kt={date:"yyyy-MM-dd",week:"yyyy 第 WW 周",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss"},Bt={props:["activeData"],mixins:[le["a"]],data:function(){return{dateTypeOptions:[{label:"日(date)",value:"date"},{label:"日期时间(datetime)",value:"datetime"}],dateRangeTypeOptions:[{label:"日期范围(daterange)",value:"daterange"},{label:"日期时间范围(datetimerange)",value:"datetimerange"}]}},computed:{dateOptions:function(){return void 0!==this.activeData.type&&"el-date-picker"===this.activeData.__config__.tag?void 0===this.activeData["start-placeholder"]?this.dateTypeOptions:this.dateRangeTypeOptions:[]}},created:function(){},methods:{setTimeValue:function(e,t){"week"===t&&Kt.date;this.$set(this.activeData.__config__,"defaultValue",null),this.$set(this.activeData,"format",e)},dateTypeChange:function(e){this.setTimeValue(Kt[e],e)}}},Et=Bt,zt=Object(y["a"])(Et,Jt,Rt,!1,null,null,null),qt=zt.exports,Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-color-picker",{key:e.renderKey,attrs:{"color-format":e.activeData.colorFormat,"show-alpha":e.showAlpha},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"颜色格式"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择颜色格式",clearable:"",filterable:""},on:{change:e.colorFormatChange},model:{value:e.activeData.colorFormat,callback:function(t){e.$set(e.activeData,"colorFormat",t)},expression:"activeData.colorFormat"}},e._l(e.colorFormatOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"组件尺寸"}},[a("el-radio-group",{model:{value:e.activeData.size,callback:function(t){e.$set(e.activeData,"size",t)},expression:"activeData.size"}},[a("el-radio-button",{attrs:{label:"medium"}},[e._v("中等")]),a("el-radio-button",{attrs:{label:"small"}},[e._v("较小 ")]),a("el-radio-button",{attrs:{label:"mini"}},[e._v("迷你")])],1)],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},Ut=[],Ht={props:["activeData"],mixins:[le["a"]],data:function(){return{colorFormatOptions:[{label:"hex",value:"hex"},{label:"rgb",value:"rgb"},{label:"rgba",value:"rgba"},{label:"hsv",value:"hsv"},{label:"hsl",value:"hsl"}],renderKey:+new Date,showAlpha:!1}},created:function(){},methods:{colorFormatChange:function(e){this.activeData.__config__.defaultValue=null,this.activeData.showAlpha=e.indexOf("a")>-1,this.activeData.__config__.renderKey=+new Date,this.showAlpha=e.indexOf("a")>-1,this.renderKey=+new Date}}},Gt=Ht,Qt=Object(y["a"])(Gt,Wt,Ut,!1,null,null,null),Yt=Qt.exports,Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-rate",{attrs:{max:e.activeData.count,"allow-half":e.activeData.allowHalf},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}}),a("a",{on:{click:function(t){e.activeData.__config__.defaultValue=0}}},[e._v("清空")])],1),a("el-form-item",{attrs:{label:"最大值"}},[a("el-input-number",{attrs:{placeholder:"最大值","controls-position":"right",max:50},model:{value:e.activeData.count,callback:function(t){e.$set(e.activeData,"count",t)},expression:"activeData.count"}})],1),a("el-form-item",{attrs:{label:"允许半选"}},[a("el-switch",{model:{value:e.activeData.allowHalf,callback:function(t){e.$set(e.activeData,"allowHalf",t)},expression:"activeData.allowHalf"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"辅助文字"}},[a("el-switch",{on:{change:e.rateTextChange},model:{value:e.activeData.showText,callback:function(t){e.$set(e.activeData,"showText",t)},expression:"activeData.showText"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"显示分数"}},[a("el-switch",{on:{change:e.rateScoreChange},model:{value:e.activeData.showScore,callback:function(t){e.$set(e.activeData,"showScore",t)},expression:"activeData.showScore"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},Xt=[],ea={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){},methods:{rateTextChange:function(e){e&&(this.activeData.showScore=!1)},rateScoreChange:function(e){e&&(this.activeData.showText=!1)}}},ta=ea,aa=Object(y["a"])(ta,Zt,Xt,!1,null,null,null),ia=aa.exports,la=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"开启展示值"}},[a("el-input",{attrs:{placeholder:"请输入开启展示值"},model:{value:e.activeData.activeTxt,callback:function(t){e.$set(e.activeData,"activeTxt",t)},expression:"activeData.activeTxt"}})],1),a("el-form-item",{attrs:{label:"关闭展示值"}},[a("el-input",{attrs:{placeholder:"请输入关闭展示值"},model:{value:e.activeData.inactiveTxt,callback:function(t){e.$set(e.activeData,"inactiveTxt",t)},expression:"activeData.inactiveTxt"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-switch",{attrs:{activeValue:e.activeData.activeValue,inactiveValue:e.activeData.inactiveValue},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},oa=[],na={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){},methods:{}},sa=na,ra=Object(y["a"])(sa,la,oa,!1,null,null,null),ca=ra.exports,da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-input-number",{attrs:{placeholder:"请输入默认值","controls-position":"right"},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"最小值"}},[a("el-input-number",{attrs:{placeholder:"最小值","controls-position":"right"},model:{value:e.activeData.min,callback:function(t){e.$set(e.activeData,"min",t)},expression:"activeData.min"}})],1),a("el-form-item",{attrs:{label:"最大值"}},[a("el-input-number",{attrs:{placeholder:"最大值","controls-position":"right"},model:{value:e.activeData.max,callback:function(t){e.$set(e.activeData,"max",t)},expression:"activeData.max"}})],1),a("el-form-item",{attrs:{label:"步长"}},[a("el-input-number",{attrs:{placeholder:"步数","controls-position":"right"},model:{value:e.activeData.step,callback:function(t){e.$set(e.activeData,"step",t)},expression:"activeData.step"}})],1),void 0!==e.activeData.showStops&&"pc"===e.showType?a("el-form-item",{attrs:{label:"显示间断点"}},[a("el-switch",{model:{value:e.activeData.showStops,callback:function(t){e.$set(e.activeData,"showStops",t)},expression:"activeData.showStops"}})],1):e._e(),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},ua=[],pa={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){},methods:{}},fa=pa,ma=Object(y["a"])(fa,da,ua,!1,null,null,null),_a=ma.exports,ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"展示文本"}},[a("el-input",{attrs:{placeholder:"显示在分割线上的文字"},model:{value:e.activeData.content,callback:function(t){e.$set(e.activeData,"content",t)},expression:"activeData.content"}})],1),a("el-form-item",{attrs:{label:"文本位置"}},[a("el-radio-group",{model:{value:e.activeData.contentPosition,callback:function(t){e.$set(e.activeData,"contentPosition",t)},expression:"activeData.contentPosition"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("左边")]),a("el-radio-button",{attrs:{label:"center"}},[e._v("中间")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右边")])],1)],1)],1)},va=[],ba={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){}},ga=ba,ya=Object(y["a"])(ga,ha,va,!1,null,null,null),Da=ya.exports,wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"按钮文字"}},[a("el-input",{attrs:{placeholder:"请输入按钮文字"},model:{value:e.activeData.buttonText,callback:function(t){e.$set(e.activeData,"buttonText",t)},expression:"activeData.buttonText"}})],1),a("el-form-item",{attrs:{label:"上传提示"}},[a("el-input",{attrs:{placeholder:"请输入上传提示",type:"textarea"},model:{value:e.activeData.tipText,callback:function(t){e.$set(e.activeData,"tipText",t)},expression:"activeData.tipText"}})],1),a("el-form-item",{attrs:{label:"文件类型"}},[a("el-select",{attrs:{placeholder:"不限制",clearable:"",multiple:""},on:{change:e.onChange},model:{value:e.acceptArray,callback:function(t){e.acceptArray=t},expression:"acceptArray"}},[a("el-option",{attrs:{label:"图片",value:"image/*"}}),a("el-option",{attrs:{label:"视频",value:"video/*"}}),a("el-option",{attrs:{label:"音频",value:"audio/*"}}),a("el-option",{attrs:{label:"excel",value:".xls,.xlsx"}}),a("el-option",{attrs:{label:"word",value:".doc,.docx"}}),a("el-option",{attrs:{label:"pdf",value:".pdf"}}),a("el-option",{attrs:{label:"txt",value:".txt"}})],1)],1),a("el-form-item",{attrs:{label:"文件大小"}},[a("el-input",{attrs:{placeholder:"请输入文件大小"},on:{change:e.onChange},model:{value:e.activeData.fileSize,callback:function(t){e.$set(e.activeData,"fileSize",e._n(t))},expression:"activeData.fileSize"}},[a("el-select",{style:{width:"66px"},attrs:{slot:"append"},on:{change:e.onChange},slot:"append",model:{value:e.activeData.sizeUnit,callback:function(t){e.$set(e.activeData,"sizeUnit",t)},expression:"activeData.sizeUnit"}},[a("el-option",{attrs:{label:"KB",value:"KB"}}),a("el-option",{attrs:{label:"MB",value:"MB"}})],1)],1)],1),a("el-form-item",{attrs:{label:"最大上传数"}},[a("el-input-number",{attrs:{min:0,placeholder:"最大上传数",step:1,precision:0,"controls-position":"right"},model:{value:e.activeData.limit,callback:function(t){e.$set(e.activeData,"limit",t)},expression:"activeData.limit"}})],1),a("el-form-item",{attrs:{label:"上传路径"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},model:{value:e.activeData.pathType,callback:function(t){e.$set(e.activeData,"pathType",t)},expression:"activeData.pathType"}},[a("el-radio-button",{attrs:{label:"defaultPath"}},[e._v("默认路径")]),a("el-radio-button",{attrs:{label:"selfPath"}},[e._v("自定义路径")])],1)],1),"selfPath"===e.activeData.pathType?[a("el-form-item",{attrs:{label:"分用户存储"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.activeData.isAccount,callback:function(t){e.$set(e.activeData,"isAccount",t)},expression:"activeData.isAccount"}})],1),a("el-form-item",{attrs:{label:"文件夹名"}},[a("el-input",{attrs:{placeholder:"请输入显示字段"},model:{value:e.activeData.folder,callback:function(t){e.$set(e.activeData,"folder",t)},expression:"activeData.folder"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],2)},xa=[],Ca={props:["activeData"],mixins:[le["a"]],data:function(){return{}},computed:{acceptArray:{get:function(){if(!this.activeData.accept)return[];var e=this.activeData.accept.replace(".xls,.xlsx",".xls|.xlsx").replace(".doc,.docx",".doc|.docx"),t=e.split(",").map((function(e){return e.replace("|",",")}));return t},set:function(e){this.activeData.accept=e.join(",")}}},created:function(){},methods:{onChange:function(){this.activeData.__config__.renderKey=+new Date}}},ka=Ca,Ta=Object(y["a"])(ka,wa,xa,!1,null,null,null),Fa=Ta.exports,Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"上传提示"}},[a("el-input",{attrs:{rows:2,placeholder:"请输入上传提示",type:"textarea"},model:{value:e.activeData.tipText,callback:function(t){e.$set(e.activeData,"tipText",t)},expression:"activeData.tipText"}})],1),a("el-form-item",{attrs:{label:"文件大小"}},[a("el-input",{attrs:{placeholder:"请输入文件大小"},model:{value:e.activeData.fileSize,callback:function(t){e.$set(e.activeData,"fileSize",e._n(t))},expression:"activeData.fileSize"}},[a("el-select",{style:{width:"66px"},attrs:{slot:"append"},slot:"append",model:{value:e.activeData.sizeUnit,callback:function(t){e.$set(e.activeData,"sizeUnit",t)},expression:"activeData.sizeUnit"}},[a("el-option",{attrs:{label:"KB",value:"KB"}}),a("el-option",{attrs:{label:"MB",value:"MB"}})],1)],1)],1),a("el-form-item",{attrs:{label:"最大上传数"}},[a("el-input-number",{attrs:{min:0,placeholder:"最大上传数",step:1,precision:0,"controls-position":"right"},model:{value:e.activeData.limit,callback:function(t){e.$set(e.activeData,"limit",t)},expression:"activeData.limit"}})],1),a("el-form-item",{attrs:{label:"上传路径"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},model:{value:e.activeData.pathType,callback:function(t){e.$set(e.activeData,"pathType",t)},expression:"activeData.pathType"}},[a("el-radio-button",{attrs:{label:"defaultPath"}},[e._v("默认路径")]),a("el-radio-button",{attrs:{label:"selfPath"}},[e._v("自定义路径")])],1)],1),"selfPath"===e.activeData.pathType?[a("el-form-item",{attrs:{label:"分用户存储"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.activeData.isAccount,callback:function(t){e.$set(e.activeData,"isAccount",t)},expression:"activeData.isAccount"}})],1),a("el-form-item",{attrs:{label:"文件夹名"}},[a("el-input",{attrs:{placeholder:"请输入显示字段"},model:{value:e.activeData.folder,callback:function(t){e.$set(e.activeData,"folder",t)},expression:"activeData.folder"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],2)},Na=[],La={props:["activeData"],mixins:[le["a"]],data:function(){return{}},created:function(){},methods:{}},Oa=La,$a=Object(y["a"])(Oa,Sa,Na,!1,null,null,null),Ia=$a.exports,ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),"editor"!==e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1):e._e(),["depSelect","posSelect","usersSelect","organizeSelect","roleSelect","groupSelect"].includes(e.activeData.__config__.jnpfKey)?a("el-form-item",{attrs:{label:"可选范围"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:e.onTypeChange},model:{value:e.activeData.selectType,callback:function(t){e.$set(e.activeData,"selectType",t)},expression:"activeData.selectType"}},e._l(e.selectTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"custom"===e.activeData.selectType?["depSelect"===e.activeData.__config__.jnpfKey?[a("org-Select",{staticClass:"mt-10",attrs:{title:"添加部门",type:"department"},model:{value:e.activeData.ableIds,callback:function(t){e.$set(e.activeData,"ableIds",t)},expression:"activeData.ableIds"}})]:e._e(),"organizeSelect"===e.activeData.__config__.jnpfKey?[a("org-Select",{staticClass:"mt-10",attrs:{title:"添加组织",type:"organize"},model:{value:e.activeData.ableIds,callback:function(t){e.$set(e.activeData,"ableIds",t)},expression:"activeData.ableIds"}})]:e._e(),"roleSelect"===e.activeData.__config__.jnpfKey?[a("org-Select",{staticClass:"mt-10",attrs:{title:"添加角色",type:"role"},model:{value:e.activeData.ableIds,callback:function(t){e.$set(e.activeData,"ableIds",t)},expression:"activeData.ableIds"}})]:e._e(),"groupSelect"===e.activeData.__config__.jnpfKey?[a("org-Select",{staticClass:"mt-10",attrs:{title:"添加分组",type:"group"},model:{value:e.activeData.ableIds,callback:function(t){e.$set(e.activeData,"ableIds",t)},expression:"activeData.ableIds"}})]:e._e(),"posSelect"===e.activeData.__config__.jnpfKey?[a("org-Select",{staticClass:"mt-10",attrs:{title:"添加岗位",type:"position"},model:{value:e.activeData.ableIds,callback:function(t){e.$set(e.activeData,"ableIds",t)},expression:"activeData.ableIds"}})]:e._e(),"usersSelect"===e.activeData.__config__.jnpfKey?[a("org-Select",{staticClass:"mt-10",attrs:{title:"添加用户",type:"users",dynamicParameter:!0},model:{value:e.activeData.ableIds,callback:function(t){e.$set(e.activeData,"ableIds",t)},expression:"activeData.ableIds"}})]:e._e()]:e._e()],2):e._e(),"userSelect"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"可选范围"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:e.onTypeChange},model:{value:e.activeData.selectType,callback:function(t){e.$set(e.activeData,"selectType",t)},expression:"activeData.selectType"}},e._l(e.userSelectTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"custom"===e.activeData.selectType?[a("org-Select",{staticClass:"mt-10",attrs:{title:"添加用户",type:"users",dynamicParameter:!0},model:{value:e.activeData.ableIds,callback:function(t){e.$set(e.activeData,"ableIds",t)},expression:"activeData.ableIds"}})]:e._e(),["dep","pos","role","group"].includes(e.activeData.selectType)?[a("el-radio-group",{staticClass:"relation-radio",model:{value:e.activeData.relationField,callback:function(t){e.$set(e.activeData,"relationField",t)},expression:"activeData.relationField"}},e._l(e.formFieldsOptions,(function(t,i){return a("el-radio",{key:i,attrs:{label:t.realVModel}},[e._v("\n          "+e._s(t.realLabel))])})),1)]:e._e()],2):e._e(),a("el-form-item",{attrs:{label:"默认值"}},["organizeSelect"===e.activeData.__config__.jnpfKey?a("JnpfOrganizeSelect",{key:e.key,attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,selectType:e.activeData.selectType,disabled:e.activeData.__config__.defaultCurrent,ableIds:e.activeData.ableIds},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}}):e._e(),"depSelect"===e.activeData.__config__.jnpfKey?a("JnpfDepSelect",{key:e.key,attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,selectType:e.activeData.selectType,ableIds:e.activeData.ableIds,disabled:e.activeData.__config__.defaultCurrent},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}}):e._e(),"posSelect"===e.activeData.__config__.jnpfKey?a("JnpfPosSelect",{key:e.key,attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,selectType:e.activeData.selectType,ableIds:e.activeData.ableIds,disabled:e.activeData.__config__.defaultCurrent},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}}):e._e(),"userSelect"===e.activeData.__config__.jnpfKey?a("JnpfUserSelect",{key:e.key,attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,selectType:e.activeData.selectType,ableIds:e.activeData.ableIds,disabled:e.activeData.__config__.defaultCurrent},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}}):e._e(),"usersSelect"===e.activeData.__config__.jnpfKey?a("JnpfUsersSelect",{key:e.key,attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,selectType:e.activeData.selectType,ableIds:e.activeData.ableIds,disabled:e.activeData.__config__.defaultCurrent},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}}):e._e(),"groupSelect"===e.activeData.__config__.jnpfKey?a("JnpfGroupSelect",{attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,ableIds:e.activeData.ableIds,selectType:e.activeData.selectType,disabled:e.activeData.__config__.defaultCurrent},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}}):e._e(),"roleSelect"===e.activeData.__config__.jnpfKey?a("JnpfRoleSelect",{key:e.key,attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,selectType:e.activeData.selectType,ableIds:e.activeData.ableIds,disabled:e.activeData.__config__.defaultCurrent},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}}):e._e(),"editor"===e.activeData.__config__.jnpfKey?a("el-input",{attrs:{value:e.setDefaultValue(e.activeData.__config__.defaultValue),placeholder:"请输入默认值"},on:{input:e.onDefaultValueInput}}):e._e()],1),"editor"!==e.activeData.__config__.jnpfKey?a("el-form-item",[a("el-checkbox",{key:e.key,staticClass:"currentCheckbox",attrs:{label:" true",disabled:"custom"===e.activeData.selectType},on:{change:function(t){return e.defaultCurrentChange(e.activeData.__config__.defaultCurrent,e.activeData.__config__.jnpfKey)}},model:{value:e.activeData.__config__.defaultCurrent,callback:function(t){e.$set(e.activeData.__config__,"defaultCurrent",t)},expression:"activeData.__config__.defaultCurrent"}},[a("span",[e._v("\n        默认为当前登录"+e._s(e.getLabel(e.activeData.__config__.jnpfKey))+"\n      ")])])],1):e._e(),"editor"!==e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1):e._e(),"editor"!==e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"能否多选"}},[a("el-switch",{on:{change:e.multipleChange},model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1):e._e(),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},Ma=[],Va=a("a63f"),Aa=[{value:"all",label:"全部"},{value:"custom",label:"自定义"}],Pa=[].concat(Aa,[{value:"dep",label:"部门组件联动"},{value:"pos",label:"岗位组件联动"},{value:"role",label:"角色组件联动"},{value:"group",label:"分组组件联动"}]),Ja={props:["activeData"],mixins:[le["a"]],components:{OrgSelect:Va["a"]},data:function(){return{selectTypeOptions:Aa,userSelectTypeOptions:Pa,relationOptions:[],key:+new Date}},computed:{formFieldsOptions:function(){var e=this;if("all"===this.activeData.selectType||"custom"===this.activeData.selectType)return[];var t=[],a=function a(i,l){if(i&&(i.__config__&&e.isIncludesTable(i)&&i.__config__.children&&Array.isArray(i.__config__.children)&&a(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return a(e,l)})),i.__vModel__&&i.__config__.jnpfKey==="".concat(e.activeData.selectType,"Select")&&i.__vModel__!==e.activeData.__vModel__)){var n=l&&l.__config__&&"table"===l.__config__.jnpfKey;t.push(Object(o["a"])({realVModel:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__,realLabel:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label},i))}};return a(Object(L["a"])()),t}},created:function(){},methods:{onTypeChange:function(){this.$set(this.activeData.__config__,"defaultValue",this.activeData.multiple?[]:""),"custom"===this.activeData.selectType&&this.$set(this.activeData.__config__,"defaultCurrent",!1),this.activeData.ableIds=[],"userSelect"===this.activeData.__config__.jnpfKey&&(this.activeData.relationField="","all"!=this.activeData.selectType&&"custom"!=this.activeData.selectType&&this.$set(this.activeData.__config__,"defaultValue",null)),this.activeData.__config__.renderKey=+new Date,this.key=+new Date},getLabel:function(e){return"organizeSelect"===e?"组织":"depSelect"===e?"部门":"posSelect"===e?"岗位":"roleSelect"===e?"角色":"groupSelect"===e?"分组":"用户"},isIncludesTable:function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(this.activeData.__config__.isSubTable?this.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)},multipleChange:function(e){this.$set(this.activeData.__config__,"defaultValue",e?[]:""),this.activeData.__config__.renderKey=+new Date,this.key=+new Date},defaultCurrentChange:function(e,t){e&&("organizeSelect"===t?this.$set(this.activeData.__config__,"defaultValue",[]):this.$set(this.activeData.__config__,"defaultValue",null)),this.key=+new Date}}},Ra=Ja,Ka=(a("2f67"),Object(y["a"])(Ra,ja,Ma,!1,null,"fe4139f2",null)),Ba=Ka.exports,Ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("JnpfAreaSelect",{key:e.key,attrs:{placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,level:e.activeData.level},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),a("el-form-item",{attrs:{label:"格式"}},[a("el-radio-group",{staticClass:"level",on:{change:e.levelChange},model:{value:e.activeData.level,callback:function(t){e.$set(e.activeData,"level",t)},expression:"activeData.level"}},[a("el-radio",{attrs:{label:0}},[e._v("省")]),a("el-radio",{attrs:{label:1}},[e._v("省市")]),a("el-radio",{attrs:{label:2}},[e._v("省市区")]),a("el-radio",{attrs:{label:3}},[e._v("省市区-街道")])],1)],1),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{attrs:{label:"能否多选"}},[a("el-switch",{on:{change:e.levelChange},model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},za=[],qa=[{value:"all",label:"全部"}],Wa=[].concat(qa,[{value:"address",label:"省联动"},{value:"cities",label:"省市联动"}]),Ua={props:["activeData"],mixins:[le["a"]],data:function(){return{addressSelectTypeOptions:Wa,key:""}},computed:{},created:function(){},methods:{onTypeChange:function(){this.$set(this.activeData.__config__,"defaultValue",this.activeData.multiple?[]:""),this.activeData.ableAddressIds=[],this.activeData.relationField="","all"!=this.activeData.selectType&&this.$set(this.activeData.__config__,"defaultValue",null),this.activeData.__config__.renderKey=+new Date,this.key=+new Date},levelChange:function(){this.$set(this.activeData.__config__,"defaultValue",[]),this.activeData.__config__.renderKey=+new Date,this.key=+new Date}}},Ha=Ua,Ga=(a("e8f0"),Object(y["a"])(Ha,Ea,za,!1,null,null,null)),Qa=Ga.exports,Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("JnpfTreeSelect",{key:e.renderKey,attrs:{options:e.activeData.options,placeholder:"选择默认值",clearable:"",multiple:e.activeData.multiple,props:e.activeData.props},model:{value:e.activeData.__config__.defaultValue,callback:function(t){e.$set(e.activeData.__config__,"defaultValue",t)},expression:"activeData.__config__.defaultValue"}})],1),[a("el-divider",[e._v("数据选项")]),a("el-form-item",{attrs:{label:"","label-width":"40px"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.__config__.dataType,callback:function(t){e.$set(e.activeData.__config__,"dataType",t)},expression:"activeData.__config__.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dictionary"}},[e._v("数据字典")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.__config__.dataType?[a("el-tree",{attrs:{draggable:"",data:e.activeData.options,"node-key":"id","expand-on-click-node":!1,props:e.props},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"tree-node-ellipsis",attrs:{title:i.label}},[e._v(e._s(i.label))]),a("span",{staticClass:"node-operation"},[a("i",{staticClass:"el-icon-plus",attrs:{title:"添加"},on:{click:function(t){return e.append(l)}}}),a("i",{staticClass:"el-icon-edit-outline",attrs:{title:"编辑"},on:{click:function(t){return e.update(i,l)}}}),a("i",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(t){return e.remove(i,l)}}})])])}}],null,!1,2738824884)}),a("div",{staticStyle:{"margin-left":"20px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addTreeItem}},[e._v("添加父级")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{type:"text"},on:{click:e.treeSelectItem}},[e._v("\n          批量编辑\n        ")])],1)]:e._e(),"dictionary"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"数据字典"}},[a("el-row",{staticClass:"jnpf-el-row"},[a("el-col",{attrs:{span:18}},[a("JnpfTreeSelect",{attrs:{options:e.dicOptions,placeholder:"请选择数据字典",lastLevel:"",clearable:""},on:{change:e.dictionaryTypeChange,selectChange:e.selectChange},model:{value:e.activeData.__config__.dictionaryType,callback:function(t){e.$set(e.activeData.__config__,"dictionaryType",t)},expression:"activeData.__config__.dictionaryType"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{staticStyle:{float:"right"},on:{click:function(t){return e.goDictionary()}}},[e._v("\n              添加")])],1)],1)],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-select",{attrs:{placeholder:"请选择存储字段"},model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}},[a("el-option",{attrs:{label:"id",value:"id"}}),a("el-option",{attrs:{label:"enCode",value:"enCode"}})],1)],1)]:e._e(),"dynamic"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"远端数据"}},[a("interface-dialog",{attrs:{value:e.activeData.__config__.propsUrl,title:e.activeData.__config__.propsName,popupTitle:"远端数据"},on:{change:e.propsUrlChange}})],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入存储字段"},on:{select:function(t){return e.handleSelect(t,"value")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入显示字段"},on:{select:function(t){return e.handleSelect(t,"label")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.label,callback:function(t){e.$set(e.activeData.props,"label",t)},expression:"activeData.props.label"}})],1),a("el-form-item",{attrs:{label:"子级字段"}},[a("el-input",{attrs:{placeholder:"请输入子级字段"},on:{change:e.onChange},model:{value:e.activeData.props.children,callback:function(t){e.$set(e.activeData.props,"children",t)},expression:"activeData.props.children"}})],1),e.activeData.__config__.templateJson&&e.activeData.__config__.templateJson.length?a("el-table",{attrs:{data:e.activeData.__config__.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n            "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n          ")]}}],null,!1,3210542583)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.realVModel,attrs:{label:e.realLabel,value:e.realVModel}})})),1)]}}],null,!1,3708884993)})],1):e._e()]:e._e(),a("el-divider")],a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{attrs:{label:"能否搜索"}},[a("el-switch",{model:{value:e.activeData.filterable,callback:function(t){e.$set(e.activeData,"filterable",t)},expression:"activeData.filterable"}})],1),a("el-form-item",{attrs:{label:"能否多选"}},[a("el-switch",{on:{change:e.onChange},model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),a("treeNode-dialog",{attrs:{visible:e.dialogVisible,title:e.currentNode.id?"编辑选项":"添加选项",currentNode:e.currentNode.id?e.currentNode:{}},on:{"update:visible":function(t){e.dialogVisible=t},commit:e.addNode}}),a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{visible:e.dicVisible,"append-to-body":"","lock-scroll":"",width:"80%"},on:{"update:visible":function(t){e.dicVisible=t},close:e.defaultValueChange}},[a("dicIndex",{ref:"dicIndex"})],1),e.updateVisible?a("TreeEditing",{ref:"treeEditing",on:{change:e.handleSure}}):e._e()],1)],2)},Za=[],Xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,width:"660px"},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-row",{attrs:{gutter:0}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"small","label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"选项名",prop:"fullName"}},[a("el-input",{attrs:{placeholder:"请输入选项名",clearable:""},model:{value:e.formData.fullName,callback:function(t){e.$set(e.formData,"fullName",t)},expression:"formData.fullName"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"选项值",prop:"id"}},[a("el-input",{attrs:{placeholder:"请输入选项值",clearable:""},model:{value:e.formData.id,callback:function(t){e.$set(e.formData,"id",t)},expression:"formData.id"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handelConfirm}},[e._v("确定")]),a("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)],1)},ei=[],ti={props:{currentNode:{type:Object,default:function(){}}},data:function(){return{formData:{fullName:"",id:""},rules:{fullName:[{required:!0,message:"请输入选项名",trigger:"blur"}],id:[{required:!0,message:"请输入选项值",trigger:"blur"}]}}},methods:{onOpen:function(){var e=this;this.formData=JSON.parse(JSON.stringify(this.currentNode)),this.$nextTick((function(){e.$refs["elForm"].clearValidate()}))},onClose:function(){},close:function(){this.$emit("update:visible",!1)},handelConfirm:function(){var e=this;this.$refs.elForm.validate((function(t){t&&(e.$emit("commit",e.formData),e.close())}))}}},ai=ti,ii=Object(y["a"])(ai,Xa,ei,!1,null,null,null),li=ii.exports,oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center update-dialog",attrs:{visible:e.visible,"append-to-body":"",title:"批量编辑",closeOnClickModal:!1,"lock-scroll":"",width:"700px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-alert",{attrs:{title:"注意：每行对应一个选项；选项名、选项值和父级选项值之间用英文 | 隔开。格式如下：",type:"warning",closable:!1,"show-icon":""}}),a("div",{staticClass:"demo-box"},[a("div",{staticClass:"demo-box-cell"},[a("p",{staticClass:"w-260px"},[e._v("根节点格式：选项名|选项值")]),a("p",[e._v("输入示例："),a("span",[e._v("选项一|选项一的值")])])]),a("div",{staticClass:"demo-box-cell"},[a("p",{staticClass:"w-260px"},[e._v("子节点格式：选项名|选项值|父级选项值")]),a("p",[e._v("输入示例："),a("span",[e._v("选项一|选项一的值|选项一父级的值")])])])]),a("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:100,autosize:""},model:{value:e.resultInfo,callback:function(t){e.resultInfo=t},expression:"resultInfo"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSure()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton"))+"\n    ")])],1)],1)},ni=[],si={components:{},props:{},data:function(){return{visible:!1,resultInfo:"",separator:"|",options:[]}},computed:{},methods:{init:function(e){this.options=e||[],this.analysis(),this.visible=!0},analysis:function(){var e=this;if(this.resultInfo="",this.options.length>0){var t=function t(a,i){for(var l=0;l<a.length;l++){var o=a[l];if(o.id===o.fullName)e.resultInfo+=o.fullName+e.separator+o.id+"\n";else{var n="";i&&(n=e.separator+i),e.resultInfo+=o.fullName+e.separator+o.id+n+"\n"}o&&o.children&&Array.isArray(o.children)&&t(o.children,o.id)}};t(this.options)}},handleSure:function(){var e=this;this.options=[];var t=this.resultInfo.split("\n");t.length>0?t.forEach((function(t){if(t&&t.trim()&&-1!==t.indexOf(e.separator)){var a=t.split(e.separator)||[],i=function t(a,i){for(var l=i[i.length-1],o=0;o<a.length;o++){var n=a[o];n.children&&n.children.length&&t(n.children,i),n.id==l&&(e.isRepeatId(i[1])||n.children.push({fullName:i[0],id:i[1],children:[]}))}};if(a.length<2)return;2==a.length?e.isRepeatId(a[1])||e.options.push({fullName:a[0],id:a[1],children:[]}):i(e.options,a)}})):this.options=[],this.options,this.$emit("change",this.options),this.visible=!1},isRepeatId:function(e){var t=!1,a=function a(i){for(var l=0;l<i.length;l++){var o=i[l];o.id==e&&(t=!0),Array.isArray(o.children)&&a(o.children)}};return a(this.options),t}}},ri=si,ci=(a("c25c"),Object(y["a"])(ri,oi,ni,!1,null,"75eca673",null)),di=ci.exports,ui={mixins:[le["a"],Ve,Pe],components:{TreeNodeDialog:li,dicIndex:Je["default"],TreeEditing:di},data:function(){return{dialogVisible:!1,currentNode:{},props:{value:"id",label:"fullName",children:"children"},renderKey:+new Date,dicVisible:!1,updateVisible:!1,node:"",currentNodeId:"",formData:{fullName:"",id:""}}},mounted:function(){this.getDataInterfaceInfo()},methods:{selectChange:function(){this.$emit("changeSelect"),this.dictionaryTypeChange(this.dictionaryId)},defaultValueChange:function(){this.selectChange()},goDictionary:function(){var e=this;this.dicVisible=!0,this.$nextTick((function(){e.$refs.dicIndex.initData()}))},addTreeItem:function(){this.currentNodeId="",this.dialogVisible=!0,this.currentNode=this.activeData.options},addNode:function(e){var t=this;this.currentNodeId?Object.keys(e).forEach((function(a){t.node.data[a]=e[a]})):this.currentNode.push(e)},update:function(e,t){this.node=e,this.currentNodeId=t.id,this.dialogVisible=!0,this.currentNode=t},append:function(e){this.currentNodeId="",e.children||this.$set(e,"children",[]),this.dialogVisible=!0,this.currentNode=e.children},remove:function(e,t){this.activeData.__config__.defaultValue=[];var a=e.parent,i=a.data.children||a.data,l=i.findIndex((function(e){return e.id===t.id}));i.splice(l,1)},onChange:function(){this.renderKey=+new Date,this.activeData.__config__.renderKey=+new Date,this.activeData.__config__.defaultValue=this.activeData.multiple?[]:""},dataTypeChange:function(e){this.activeData.__config__.defaultValue="",this.activeData.options=[],this.activeData.props.value="id",this.activeData.props.label="fullName",this.activeData.props.children="children",this.activeData.__config__.dictionaryType="",this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[]},dictionaryTypeChange:function(e){var t=this;this.activeData.__config__.defaultValue=this.activeData.multiple?[]:"",e?Object(O["i"])(e).then((function(e){t.activeData.options=e.data.list})):this.activeData.options=[]},treeSelectItem:function(){var e=this;this.updateVisible=!0,this.$nextTick((function(){e.$refs.treeEditing.init(e.activeData.options)}))},handleSure:function(e){this.activeData.options=e||[]}}},pi=ui,fi=(a("cddf"),Object(y["a"])(pi,Ya,Za,!1,null,"9051006a",null)),mi=fi.exports,_i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"分组标题"}},[a("el-input",{attrs:{placeholder:"请输入分组标题"},model:{value:e.activeData.content,callback:function(t){e.$set(e.activeData,"content",t)},expression:"activeData.content"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.helpMessage,callback:function(t){e.$set(e.activeData,"helpMessage",t)},expression:"activeData.helpMessage"}})],1),a("el-form-item",{attrs:{label:"对齐方式"}},[a("el-radio-group",{model:{value:e.activeData.contentPosition,callback:function(t){e.$set(e.activeData,"contentPosition",t)},expression:"activeData.contentPosition"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("左对齐")]),a("el-radio-button",{attrs:{label:"center"}},[e._v("居中对齐")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右对齐")])],1)],1)],1)},hi=[],vi={props:["activeData"]},bi=vi,gi=Object(y["a"])(bi,_i,hi,!1,null,null,null),yi=gi.exports,Di=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"弹窗标题"}},[a("el-input",{attrs:{placeholder:"请输入弹窗标题"},model:{value:e.activeData.popupTitle,callback:function(t){e.$set(e.activeData,"popupTitle",t)},expression:"activeData.popupTitle"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"弹窗类型"}},[a("el-select",{attrs:{placeholder:"请选择弹窗类型"},model:{value:e.activeData.popupType,callback:function(t){e.$set(e.activeData,"popupType",t)},expression:"activeData.popupType"}},[a("el-option",{attrs:{label:"居中弹窗",value:"dialog"}}),a("el-option",{attrs:{label:"右侧弹窗",value:"drawer"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"弹窗宽度"}},[a("el-select",{attrs:{placeholder:"请选择弹窗宽度",filterable:""},model:{value:e.activeData.popupWidth,callback:function(t){e.$set(e.activeData,"popupWidth",t)},expression:"activeData.popupWidth"}},e._l(e.popupWidthOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"关联功能"}},[a("JnpfTreeSelect",{attrs:{options:e.treeData,placeholder:"请选择关联功能",lastLevel:"",clearable:""},on:{change:e.onModeIdChange},model:{value:e.activeData.modelId,callback:function(t){e.$set(e.activeData,"modelId",t)},expression:"activeData.modelId"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-select",{attrs:{placeholder:"请选择显示字段",clearable:"",filterable:""},on:{"visible-change":e.visibleChange},model:{value:e.activeData.relationField,callback:function(t){e.$set(e.activeData,"relationField",t)},expression:"activeData.relationField"}},e._l(e.fieldOptions,(function(e){return a("el-option",{key:e.vmodel,attrs:{label:e.label,value:e.vmodel}})})),1)],1),1==e.modelType||6==e.modelType?a("el-form-item",{attrs:{label:"填充字段"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("填充字段\n      "),a("el-tooltip",{attrs:{content:"选择数据后，将关联表单的字段值填充到当前表单字段。",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-button",{staticStyle:{width:"100%"},on:{click:e.onChangeRule}},[e._v(e._s(e.activeData.__config__.transferList.length?"编辑填充规则":"填充规则配置"))])],1):e._e(),a("el-divider",[e._v("列表字段")]),a("draggable",{attrs:{list:e.activeData.columnOptions,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.columnOptions,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-select",{attrs:{placeholder:"请选择显示字段",clearable:"",filterable:""},on:{"visible-change":e.visibleChange,change:function(a){return e.onChange(a,t)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},e._l(e.fieldOptions,(function(e){return a("el-option",{key:e.vmodel,attrs:{label:e.label,value:e.vmodel}})})),1),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.columnOptions.splice(i,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addSelectItem}},[e._v("\n      添加字段\n    ")])],1),a("el-divider",[e._v("列表分页")]),a("el-form-item",{attrs:{label:"分页设置"}},[a("el-switch",{model:{value:e.activeData.hasPage,callback:function(t){e.$set(e.activeData,"hasPage",t)},expression:"activeData.hasPage"}})],1),e.activeData.hasPage?a("el-form-item",{attrs:{label:"分页条数","label-width":"80px"}},[a("el-radio-group",{model:{value:e.activeData.pageSize,callback:function(t){e.$set(e.activeData,"pageSize",t)},expression:"activeData.pageSize"}},[a("el-radio-button",{attrs:{label:20}},[e._v("20条")]),a("el-radio-button",{attrs:{label:50}},[e._v("50条")]),a("el-radio-button",{attrs:{label:100}},[e._v("100条")]),a("el-radio-button",{attrs:{label:500}},[e._v("500条")])],1)],1):e._e(),a("el-divider"),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),e.ruleVisible?a("RuleDialog",{ref:"rule",on:{confirm:e.onChangeFieldRule}}):e._e()],1)},wi=[],xi=a("ef22"),Ci=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center rule-dialog",attrs:{title:"填充规则配置",closeOnClickModal:!1,visible:e.visible,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[a("section",{staticClass:"condition-pane pd-10"},[a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:5}},[e._v(e._s(1==e.type?"关联表单字段":"远端数据字段"))]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"ml-180px",attrs:{span:5}},[e._v("当前表单字段")])],1),e._l(e.transferList,(function(t,i){return a("el-row",{key:i,staticClass:"mt-10px mb-10px",attrs:{gutter:8}},[a("el-col",{attrs:{span:9}},[2==e.type?a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入显示字段"},on:{select:function(t){return e.handleSelect(t,i)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!0),model:{value:t.targetField,callback:function(a){e.$set(t,"targetField",a)},expression:"item.targetField"}}):a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:t.targetField,callback:function(a){e.$set(t,"targetField",a)},expression:"item.targetField"}},e._l(e.fieldList,(function(e){return a("el-option",{key:e.vmodel,attrs:{label:e.label,value:e.vmodel}})})),1)],1),a("el-col",{staticClass:"leading-32px",attrs:{span:4}},[e._v("的值填充到")]),a("el-col",{attrs:{span:9}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:t.sourceValue,callback:function(a){e.$set(t,"sourceValue",a)},expression:"item.sourceValue "}},e._l(e.getTargetOptions(i),(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{staticClass:"text-center  del-icon",attrs:{span:2}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn",on:{click:function(t){return e.delTransferItem(i)}}})])],1)})),a("span",{staticClass:"link-text",on:{click:function(t){return e.addTransferItem()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加字段")])],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleGenerate()}}},[e._v("确定")])],1)])],1)},ki=[],Ti=(a("c5f6"),{name:"ruleDialog",props:{type:{type:Number,default:1}},data:function(){return{visible:!1,transferList:[],fieldList:[],formFieldsList:[]}},methods:{init:function(e){this.visible=!0,this.transferList=JSON.parse(JSON.stringify(e.transferList))||[],this.transferList.length||this.transferList.push({targetField:"",sourceValue:""}),this.fieldList=e.fieldList||[],this.formFieldsList=e.formFieldsList.filter((function(e){return["input","textarea"].includes(e.__config__.jnpfKey)}))||[]},getTargetOptions:function(e){for(var t=[],a=0;a<this.transferList.length;a++){var i=this.transferList[a];i.sourceValue&&e!==a&&t.push(i.sourceValue)}var l=this.formFieldsList.filter((function(e){return!t.includes(e.id)}));return l},addTransferItem:function(){this.transferList.push({targetField:"",sourceValue:""})},delTransferItem:function(e){this.transferList.splice(e,1)},handleGenerate:function(){this.formFieldListExist()&&(this.visible=!1,this.$emit("confirm",this.transferList))},close:function(){this.visible=!1},formFieldListExist:function(){for(var e=this.transferList,t=!0,a=0;a<e.length;a++){var i=e[a];if(!i.targetField){this.$message.warning("第".concat(a+1,"行").concat(1==this.type?"关联表单字段":"远端数据字段","不能为空")),t=!1;break}if(!i.sourceValue){this.$message.warning("第".concat(a+1," 行当前表单字段不能为空")),t=!1;break}}return t},querySearch:function(e,t){var a=this.fieldList||[],i=e?a.filter(this.createStateFilter(e)):a;t(i)},createStateFilter:function(e){return function(t){return 0===t.field.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e,t){this.transferList[t].targetField=e.defaultValue}}}),Fi=Ti,Si=(a("3d2f"),Object(y["a"])(Fi,Ci,ki,!1,null,"94f5d20a",null)),Ni=Si.exports,Li=["relationForm","popupSelect"],Oi={props:["activeData","modelType"],mixins:[le["a"]],components:{draggable:c.a,RuleDialog:Ni},data:function(){return{treeData:[],fieldOptions:[],popupWidthOptions:["600px","800px","1000px","40%","50%","60%","70%","80%"],ruleVisible:!1}},created:function(){this.getFeatureSelector(),this.getFieldOptions()},computed:{formFieldsOptions:function(){var e=this,t=[],a=function a(i,l){if(i&&(i.__config__&&e.isIncludesTable(i)&&i.__config__.children&&Array.isArray(i.__config__.children)&&a(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return a(e,l)})),i.__vModel__&&i.__vModel__!==e.activeData.__vModel__)){var n=l&&l.__config__&&"table"===l.__config__.jnpfKey;if(n&&!e.isSameSource(i))return;t.push(Object(o["a"])({realVModel:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__,realLabel:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label,fullName:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label,id:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__},i))}};return a(Object(L["a"])()),t}},methods:{getFeatureSelector:function(){var e=this;Object(xi["o"])({type:1,webType:"1,2",isRelease:1}).then((function(t){e.treeData=t.data.list}))},getFieldOptions:function(){var e=this;this.activeData.modelId&&Object(xi["q"])(this.activeData.modelId,1).then((function(t){e.fieldOptions=t.data.list}))},visibleChange:function(e){e&&(this.activeData.modelId||this.$message.warning("请先选择关联功能"))},onModeIdChange:function(e){this.activeData.relationField="",this.$emit("relationChange",this.activeData.__vModel__),e?this.getFieldOptions():this.fieldOptions=[]},onChange:function(e,t){var a=this.fieldOptions.filter((function(t){return t.vmodel===e}))||[];if(a.length){var i=a[0];t.label=i.label}},addSelectItem:function(){this.activeData.columnOptions.push({value:"",label:""})},onChangeRule:function(){var e=this;if(!this.activeData.modelId)return this.$message.error("请先选择关联功能");this.ruleVisible=!0;var t=JSON.parse(JSON.stringify(this.formFieldsOptions));this.activeData.__config__.isSubTable&&(t=t.filter((function(e){return e.__config__.isSubTable}))),t=t.filter((function(e){return![].concat(Object(n["a"])(F["j"]),Li).includes(e.__config__.jnpfKey)})),this.$nextTick((function(){e.$refs.rule.init({transferList:e.activeData.__config__.transferList,fieldList:e.fieldOptions,formFieldsList:t})}))},onChangeFieldRule:function(e){this.activeData.__config__.transferList=e},isIncludesTable:function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(this.activeData.__config__.isSubTable?this.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)},isSameSource:function(e){var t=this.activeData.__config__.isSubTable;return t?e.__config__.isSubTable&&this.activeData.__config__.parentVModel===e.__config__.parentVModel:!e.__config__.isSubTable}}},$i=Oi,Ii=Object(y["a"])($i,Di,wi,!1,null,null,null),ji=Ii.exports,Mi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"关联功能"}},[a("el-select",{attrs:{placeholder:"请选择关联功能",clearable:"",filterable:""},on:{change:e.onRelationFieldChange},model:{value:e.activeData.relationField,callback:function(t){e.$set(e.activeData,"relationField",t)},expression:"activeData.relationField"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.__config__.label,value:e.prop}})})),1)],1),a("el-form-item",{attrs:{label:"关联字段"}},[a("el-select",{attrs:{placeholder:"请选择关联字段",clearable:"",filterable:""},on:{"visible-change":e.visibleChange},model:{value:e.activeData.showField,callback:function(t){e.$set(e.activeData,"showField",t)},expression:"activeData.showField"}},e._l(e.fieldOptions,(function(e){return a("el-option",{key:e.vmodel,attrs:{label:e.label,value:e.vmodel}})})),1)],1),e.activeData.isStorage?a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1):e._e()],1)},Vi=[],Ai={props:["activeData"],mixins:[le["a"]],data:function(){return{options:[],fieldOptions:[]}},methods:Object(A["a"])(Object(A["a"])(Object(A["a"])({getOptions:function(){var e=this,t=Object(L["a"])()||[],a=[],i=function t(i,l){i&&(i.__config__&&i.__config__.children&&Array.isArray(i.__config__.children)&&t(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return t(e,l)})),i.__config__&&i.__config__.jnpfKey&&"relationForm"===i.__config__.jnpfKey&&i.__vModel__&&e.getRelationForm(i)&&a.push(i))};i(t),this.options=a.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{prop:e.__config__&&e.__config__.tableName?e.__vModel__+"_jnpfTable_"+e.__config__.tableName+(e.__config__.isSubTable?"0":"1"):e.__vModel__})})),this.getFieldOptions()},getRelationForm:function(e){var t=this.activeData.__config__.isSubTable;return!t&&!e.__config__.isSubTable||!(!t||!e.__config__.isSubTable||this.activeData.__config__.relationTable!==e.__config__.relationTable)},getFieldOptions:function(){var e=this;if(this.activeData.relationField&&this.options.length){var t=this.options.filter((function(t){return t.prop===e.activeData.relationField}));if(t.length){var a=t[0];a.modelId&&Object(xi["q"])(a.modelId).then((function(t){e.fieldOptions=t.data.list}))}}}},"getRelationForm",(function(e){var t=this.activeData.__config__.isSubTable;return!t&&!e.__config__.isSubTable||!(!t||!e.__config__.isSubTable||this.activeData.__config__.parentVModel!==e.__config__.parentVModel)})),"onRelationFieldChange",(function(e){if(this.activeData.showField="",!e)return this.fieldOptions=[];this.getFieldOptions()})),"visibleChange",(function(e){e&&(this.activeData.relationField||this.$message.warning("请先选择关联功能"))}))},Pi=Ai,Ji=Object(y["a"])(Pi,Mi,Vi,!1,null,null,null),Ri=Ji.exports,Ki=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"计算公式"}},[a("div",{staticClass:"pane-calc-preview",on:{click:function(t){e.expDialogVisible=!0}}},[e.activeData.expression.length?e._l(e.activeData.expression,(function(t,i){return a("span",{key:i,class:{"calc-btn":"string"!==typeof t,error:"string"!==typeof t&&"无效的值"===t.label}},[e._v("\n          "+e._s("string"!==typeof t?t.label:t)+"\n        ")])})):a("span",{staticClass:"placeholder-text"},[e._v("编辑计算公式")])],2)]),a("el-form-item",{attrs:{label:"精度"}},[a("el-input-number",{attrs:{min:0,max:15,placeholder:"精度","controls-position":"right"},model:{value:e.activeData.precision,callback:function(t){e.$set(e.activeData,"precision",t)},expression:"activeData.precision"}})],1),a("el-form-item",{attrs:{label:"千位分隔"}},[a("el-switch",{model:{value:e.activeData.thousands,callback:function(t){e.$set(e.activeData,"thousands",t)},expression:"activeData.thousands"}})],1),a("el-form-item",{attrs:{label:"大写金额"}},[a("el-switch",{model:{value:e.activeData.isAmountChinese,callback:function(t){e.$set(e.activeData,"isAmountChinese",t)},expression:"activeData.isAmountChinese"}})],1),e.activeData.isStorage?a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1):e._e(),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"编辑计算公式","custom-class":"calc-dialog",visible:e.expDialogVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.expDialogVisible=t},open:e.onOpen}},[a("div",{staticClass:"calc-box"},[a("div",{staticClass:"calc-preview",class:{error:!e.expValid}},[e._v("\n        计算公式 =\n        "),e._l(e.expressionTemp,(function(t,i){return a("span",{key:i,class:{"calc-btn":"string"!==typeof t,error:"string"!==typeof t&&"无效的值"===t.label}},[e._v("\n          "+e._s("string"!==typeof t?t.label:t)+"\n        ")])})),a("div",{staticClass:"preview-actions"},[a("el-tooltip",{attrs:{content:"删除"}},[a("i",{staticClass:"el-icon-price-tag",staticStyle:{transform:"rotate(-90deg)"},on:{click:function(t){return e.expressionTemp.pop()}}})]),a("el-tooltip",{attrs:{content:"清空"}},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){e.expressionTemp=[]}}})])],1)],2),a("div",{staticClass:"calc-tip"},[e._v("\n        编辑计算公式可用来完成审批单内数据的自动结算，例如：采购单内设置计算公式“合计=单价×数量”，发起人填写单价、数量后，组件将自动计算出合计金额，免手动计算")]),a("div",[a("span",[e._v("计算对象：")]),e.calculateCmps.length?e._l(e.calculateCmps,(function(t){return a("span",{key:t.__vModel__,staticClass:"calc-btn",on:{click:function(a){return e.expressionTemp.push(t)}}},[e._v("\n            "+e._s(t.label)+"\n          ")])})):a("span",{staticStyle:{color:"#aaa"}},[e._v("暂无数据")])],2),a("div",{staticClass:"comBtn",staticStyle:{margin:"10px 0"}},[a("span",[e._v("计算符号：")]),e._l(["+","-","×","÷","(",")"],(function(t){return a("span",{key:t,staticClass:"calc-btn",on:{click:function(a){return e.expressionTemp.push(t)}}},[e._v(e._s(t))])}))],2),a("div",{staticStyle:{margin:"10px 0"}},[a("span",{staticStyle:{float:"left"}},[e._v("数字键盘：")]),a("div",{staticClass:"numBtn comBtn"},e._l(["1","2","3","4","5","6","7","8","9","0","."],(function(t){return a("span",{key:t,staticClass:"calc-btn",on:{click:function(a){return e.expressionTemp.push(t)}}},[e._v(e._s(t))])})),0)])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.expDialogVisible=!1,e.expressionTemp=[]}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checkExpression}},[e._v("确 定")])],1)])],1)},Bi=[],Ei=(a("7514"),a("ed08")),zi={props:["activeData"],mixins:[le["a"]],data:function(){return{expressionTemp:[],expDialogVisible:!1,expValid:!0}},computed:{calculateCmps:function(){var e=this,t=Object(L["a"])()||[],a=[],i=function t(i,l){if(i&&(i.__config__&&i.__config__.children&&Array.isArray(i.__config__.children)&&t(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return t(e,l)})),i.__config__&&i.__config__.jnpfKey&&i.__vModel__&&["inputNumber","calculate"].includes(i.__config__.jnpfKey))){var o=l&&l.__config__&&"table"===l.__config__.jnpfKey;if(o&&!e.isSameSource(i))return;a.push({__vModel__:o?l.__vModel__+"."+i.__vModel__:i.__vModel__,label:o?l.__config__.label+"."+i.__config__.label:i.__config__.label})}};return i(t),a}},created:function(){},methods:{reloadExpressionTemp:function(){var e=this,t=function(t){var a=e.calculateCmps.find((function(e){return e.__vModel__===t.__vModel__&&e.__vModel__===t.__vModel__}));return!!a};this.expressionTemp=this.activeData.expression.map((function(e){return"string"===typeof e||t(e)?e:{__vModel__:e.__vModel__,label:"无效的值"}})),this.activeData.expression=this.expressionTemp},onOpen:function(){this.expressionTemp=Object(Ei["b"])(this.activeData.expression),this.expValid=!0},checkExpression:function(){if(!this.expressionTemp.length)return this.activeData.expression=this.expressionTemp,void(this.expDialogVisible=!1);var e=Object(N["k"])(this.expressionTemp),t=e.map((function(e){return"object"===Object(s["a"])(e)?1:e})),a=this.expressionTemp.some((function(e){return"无效的值"===e.label}));if(a)return this.$message.error("编辑的公式含有无效的值，无法计算");this.expValid=Object(N["n"])(t,!1),this.expValid?(this.activeData.expression=this.expressionTemp,this.expDialogVisible=!1):this.$message.error("编辑的公式不符合计算法则，无法计算")},isSameSource:function(e){var t=this.activeData.__config__.isSubTable;return t?e.__config__.isSubTable&&this.activeData.__config__.parentVModel===e.__config__.parentVModel:!e.__config__.isSubTable}}},qi=zi,Wi=(a("14cc"),Object(y["a"])(qi,Ki,Bi,!1,null,"9513d27c",null)),Ui=Wi.exports,Hi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),"popupSelect"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"弹窗标题"}},[a("el-input",{attrs:{placeholder:"请输入弹窗标题"},model:{value:e.activeData.popupTitle,callback:function(t){e.$set(e.activeData,"popupTitle",t)},expression:"activeData.popupTitle"}})],1):e._e(),"popupSelect"===e.activeData.__config__.jnpfKey&&"pc"===e.showType?a("el-form-item",{attrs:{label:"弹窗类型"}},[a("el-select",{attrs:{placeholder:"请选择弹窗类型"},model:{value:e.activeData.popupType,callback:function(t){e.$set(e.activeData,"popupType",t)},expression:"activeData.popupType"}},[a("el-option",{attrs:{label:"居中弹窗",value:"dialog"}}),a("el-option",{attrs:{label:"右侧弹窗",value:"drawer"}})],1)],1):e._e(),"popupSelect"===e.activeData.__config__.jnpfKey&&"pc"===e.showType?a("el-form-item",{attrs:{label:"弹窗宽度"}},[a("el-select",{attrs:{placeholder:"请选择弹窗宽度",filterable:""},model:{value:e.activeData.popupWidth,callback:function(t){e.$set(e.activeData,"popupWidth",t)},expression:"activeData.popupWidth"}},e._l(e.popupWidthOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"远端数据"}},[a("interface-dialog",{attrs:{value:e.activeData.interfaceId,title:e.activeData.interfaceName,popupTitle:"远端数据",hasPage:1},on:{change:e.onInterfaceIdChange}})],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:function(t){return e.handleSelect(t,"propsValue")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}]),model:{value:e.activeData.propsValue,callback:function(t){e.$set(e.activeData,"propsValue",t)},expression:"activeData.propsValue"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:function(t){return e.handleSelect(t,"relationField")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}]),model:{value:e.activeData.relationField,callback:function(t){e.$set(e.activeData,"relationField",t)},expression:"activeData.relationField"}})],1),e.activeData.templateJson&&e.activeData.templateJson.length?a("el-table",{attrs:{data:e.activeData.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n        "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n      ")]}}],null,!1,3347837687)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.realVModel,attrs:{label:e.realLabel,value:e.realVModel}})})),1)]}}],null,!1,3708884993)})],1):e._e(),"popupSelect"!=e.activeData.__config__.jnpfKey||1!=e.modelType&&6!=e.modelType?e._e():a("el-form-item",{class:{"mt-18px":e.activeData.templateJson&&e.activeData.templateJson.length},attrs:{label:"填充字段"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("填充字段\n      "),a("el-tooltip",{attrs:{content:"选择数据后，将远端数据的字段值填充到当前表单字段。",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-button",{staticStyle:{width:"100%"},on:{click:e.onChangeRule}},[e._v(e._s(e.activeData.__config__.transferList.length?"编辑填充规则":"填充规则配置"))])],1),a("el-divider",[e._v("列表字段")]),a("draggable",{attrs:{list:e.activeData.columnOptions,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.columnOptions,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"列名",size:"small"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}}),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%","margin-left":"6px"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:function(t){return e.handleSelect(t,"value",i)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.columnOptions.splice(i,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addSelectItem}},[e._v("\n      添加字段\n    ")])],1),a("el-divider",[e._v("列表分页")]),a("el-form-item",{attrs:{label:"分页设置"}},[a("el-switch",{attrs:{disabled:1==e.activeData.interfaceHasPage&&e.activeData.hasPage},model:{value:e.activeData.hasPage,callback:function(t){e.$set(e.activeData,"hasPage",t)},expression:"activeData.hasPage"}})],1),e.activeData.hasPage?a("el-form-item",{attrs:{label:"分页条数","label-width":"80px"}},[a("el-radio-group",{model:{value:e.activeData.pageSize,callback:function(t){e.$set(e.activeData,"pageSize",t)},expression:"activeData.pageSize"}},[a("el-radio-button",{attrs:{label:20}},[e._v("20条")]),a("el-radio-button",{attrs:{label:50}},[e._v("50条")]),a("el-radio-button",{attrs:{label:100}},[e._v("100条")]),a("el-radio-button",{attrs:{label:500}},[e._v("500条")])],1)],1):e._e(),a("el-divider"),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),"popupTableSelect"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"能否搜索"}},[a("el-switch",{model:{value:e.activeData.filterable,callback:function(t){e.$set(e.activeData,"filterable",t)},expression:"activeData.filterable"}})],1):e._e(),"popupTableSelect"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"能否多选"}},[a("el-switch",{on:{change:e.multipleChange},model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1):e._e(),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),e.ruleVisible?a("RuleDialog",{ref:"rule",attrs:{type:2},on:{confirm:e.onChangeFieldRule}}):e._e()],1)},Gi=[],Qi=["relationForm","popupSelect"],Yi={props:["activeData","modelType"],mixins:[le["a"],Pe],components:{draggable:c.a,InterfaceDialog:Me["a"],RuleDialog:Ni},data:function(){return{popupWidthOptions:["600px","800px","1000px","40%","50%","60%","70%","80%"],treeData:[],fieldJsonList:[],ruleVisible:!1}},computed:{formFieldsOptions:function(){var e=this,t=[],a=function a(i,l){if(i&&(i.__config__&&e.isIncludesTable(i)&&i.__config__.children&&Array.isArray(i.__config__.children)&&a(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return a(e,l)})),i.__vModel__&&i.__vModel__!==e.activeData.__vModel__)){var n=l&&l.__config__&&"table"===l.__config__.jnpfKey;if(n&&!e.isSameSource(i))return;t.push(Object(o["a"])({realVModel:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__,realLabel:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label,fullName:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label,id:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__},i))}};return a(Object(L["a"])()),t}},mounted:function(){this.getDataInterfaceInfo()},methods:{multipleChange:function(e){this.$set(this.activeData.__config__,"defaultValue",e?[]:"")},isIncludesTable:function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(this.activeData.__config__.isSubTable?this.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)},onRelationFieldChange:function(e,t){if(!e)return t.jnpfKey="";var a=this.formFieldsOptions.filter((function(t){return t.realVModel===e}));if(!a.length)return t.jnpfKey="";var i=a[0];t.jnpfKey=i.__config__.jnpfKey},addSelectItem:function(){this.activeData.columnOptions.push({value:"",label:""})},onChangeRule:function(){var e=this;if(!this.activeData.interfaceId)return this.$message.error("请先选择远端数据");this.ruleVisible=!0;var t=JSON.parse(JSON.stringify(this.formFieldsOptions));this.activeData.__config__.isSubTable&&(t=t.filter((function(e){return e.__config__.isSubTable}))),t=t.filter((function(e){return![].concat(Object(n["a"])(F["j"]),Qi).includes(e.__config__.jnpfKey)})),this.$nextTick((function(){e.$refs.rule.init({transferList:e.activeData.__config__.transferList,fieldList:e.fieldJsonList,formFieldsList:t})}))},onChangeFieldRule:function(e){this.activeData.__config__.transferList=e},isSameSource:function(e){var t=this.activeData.__config__.isSubTable;return t?e.__config__.isSubTable&&this.activeData.__config__.parentVModel===e.__config__.parentVModel:!e.__config__.isSubTable}}},Zi=Yi,Xi=(a("5516"),Object(y["a"])(Zi,Hi,Gi,!1,null,"051e5108",null)),el=Xi.exports,tl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1),a("el-form-item",{attrs:{label:"远端数据"}},[a("interface-dialog",{attrs:{value:e.activeData.interfaceId,title:e.activeData.interfaceName,popupTitle:"远端数据"},on:{change:e.onInterfaceIdChange}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:function(t){return e.handleSelect(t,"relationField")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}]),model:{value:e.activeData.relationField,callback:function(t){e.$set(e.activeData,"relationField",t)},expression:"activeData.relationField"}})],1),e.activeData.templateJson&&e.activeData.templateJson.length?a("el-table",{staticClass:"auto-table",attrs:{data:e.activeData.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n        "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n      ")]}}],null,!1,3347837687)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.realVModel,attrs:{label:e.realLabel,value:e.realVModel}})})),1)]}}],null,!1,3708884993)})],1):e._e(),a("jnpf-form-tip-item",{attrs:{label:"显示条数",tipLabel:"最大值只能设置为50"}},[a("el-input-number",{attrs:{placeholder:"请输入显示条数",min:1,max:50,precision:e.activeData.precision,"controls-position":"right"},model:{value:e.activeData.total,callback:function(t){e.$set(e.activeData,"total",t)},expression:"activeData.total"}})],1),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),"popupTableSelect"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"能否搜索"}},[a("el-switch",{model:{value:e.activeData.filterable,callback:function(t){e.$set(e.activeData,"filterable",t)},expression:"activeData.filterable"}})],1):e._e(),"popupTableSelect"===e.activeData.__config__.jnpfKey?a("el-form-item",{attrs:{label:"能否多选"}},[a("el-switch",{on:{change:e.multipleChange},model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1):e._e(),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},al=[],il={props:["activeData"],mixins:[le["a"],Pe],components:{draggable:c.a,InterfaceDialog:Me["a"]},data:function(){return{}},computed:{formFieldsOptions:function(){var e=this,t=[];t.push({realVModel:"@keyword",realLabel:"@keyword",jnpfKey:""});var a=function a(i,l){if(i&&(i.__config__&&e.isIncludesTable(i)&&i.__config__.children&&Array.isArray(i.__config__.children)&&a(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return a(e,l)})),i.__vModel__&&!F["c"].includes(i.__config__.jnpfKey)&&i.__vModel__!==e.activeData.__vModel__)){var n=l&&l.__config__&&"table"===l.__config__.jnpfKey;t.push(Object(o["a"])({realVModel:n?l.__vModel__+"-"+i.__vModel__:i.__vModel__,realLabel:n?l.__config__.label+"-"+i.__config__.label:i.__config__.label},i))}};return a(Object(L["a"])()),t}},mounted:function(){this.getDataInterfaceInfo()},methods:{isIncludesTable:function(e){return!(e.__config__.layout&&"rowFormItem"!==e.__config__.layout||"table"===e.__config__.jnpfKey)||(this.activeData.__config__.isSubTable?this.activeData.__config__.parentVModel===e.__vModel__:"table"!==e.__config__.jnpfKey)},onRelationFieldChange:function(e,t){if(!e)return t.jnpfKey="";if("@keyword"===e)return t.jnpfKey="";var a=this.formFieldsOptions.filter((function(t){return t.realVModel===e}));if(!a.length)return t.jnpfKey="";var i=a[0];t.jnpfKey=i.__config__.jnpfKey}}},ll=il,ol=(a("9ac5"),Object(y["a"])(ll,tl,al,!1,null,"09888062",null)),nl=ol.exports,sl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"关联弹窗"}},[a("el-select",{attrs:{placeholder:"请选择关联弹窗",clearable:"",filterable:""},model:{value:e.activeData.relationField,callback:function(t){e.$set(e.activeData,"relationField",t)},expression:"activeData.relationField"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.__config__.label,value:e.prop}})})),1)],1),a("el-form-item",{attrs:{label:"关联字段"}},[a("el-input",{attrs:{placeholder:"请输入关联字段"},model:{value:e.activeData.showField,callback:function(t){e.$set(e.activeData,"showField",t)},expression:"activeData.showField"}})],1),e.activeData.isStorage?a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1):e._e()],1)},rl=[],cl={props:["activeData"],mixins:[le["a"]],data:function(){return{options:[],fieldOptions:[]}},methods:{getOptions:function(){var e=this,t=Object(L["a"])()||[],a=[],i=function t(i,l){i&&(i.__config__&&i.__config__.children&&Array.isArray(i.__config__.children)&&t(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return t(e,l)})),i.__config__&&i.__config__.jnpfKey&&"popupSelect"===i.__config__.jnpfKey&&i.__vModel__&&e.getPopupSelect(i)&&a.push(i))};i(t),this.options=a.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{prop:e.__config__&&e.__config__.tableName?e.__vModel__+"_jnpfTable_"+e.__config__.tableName+(e.__config__.isSubTable?"0":"1"):e.__vModel__})}))},getPopupSelect:function(e){var t=this.activeData.__config__.isSubTable;return!t&&!e.__config__.isSubTable||!(!t||!e.__config__.isSubTable||this.activeData.__config__.parentVModel!==e.__config__.parentVModel)}}},dl=cl,ul=Object(y["a"])(dl,sl,rl,!1,null,null,null),pl=ul.exports,fl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"风格类型"}},[a("el-radio-group",{model:{value:e.activeData.type,callback:function(t){e.$set(e.activeData,"type",t)},expression:"activeData.type"}},[a("el-radio-button",{attrs:{label:""}},[e._v("默认")]),a("el-radio-button",{attrs:{label:"card"}},[e._v("选项卡")]),a("el-radio-button",{attrs:{label:"border-card"}},[e._v("卡片化")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"选项卡位置"}},[a("el-radio-group",{model:{value:e.activeData.tabPosition,callback:function(t){e.$set(e.activeData,"tabPosition",t)},expression:"activeData.tabPosition"}},[a("el-radio-button",{attrs:{label:"top"}},[e._v("顶部")]),a("el-radio-button",{attrs:{label:"left"}},[e._v("左侧")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右侧")]),a("el-radio-button",{attrs:{label:"bottom"}},[e._v("底部")])],1)],1),a("el-divider",[e._v("标签页配置")]),a("draggable",{attrs:{list:e.activeData.__config__.children,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.__config__.children,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"标签名称",size:"small"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(a){return e.delItem(i,t)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addItem}},[e._v("\n      添加标签页\n    ")])],1)],1)},ml=[],_l=(a("7f7f"),{props:["activeData"],mixins:[le["a"]],components:{draggable:c.a},data:function(){return{}},created:function(){},methods:{addItem:function(){this.activeData.__config__.children.push({title:"New Tab",name:this.jnpf.idGenerator(),__config__:{jnpfKey:"tabItem",children:[]}})},delItem:function(e,t){var a=this,i=this.activeData.__config__.children,l=i.length;l<2?this.$message({message:"最后一项不能删除",type:"warning"}):this.$confirm("删除后不能撤销，确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(a.activeData.__config__.active===t.name){var l=i[e+1]||i[e-1];l&&(a.activeData.__config__.active=l.name)}a.activeData.__config__.children.splice(e,1)})).catch((function(){}))}}}),hl=_l,vl=Object(y["a"])(hl,fl,ml,!1,null,null,null),bl=vl.exports,gl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"是否手风琴"}},[a("el-switch",{model:{value:e.activeData.accordion,callback:function(t){e.$set(e.activeData,"accordion",t)},expression:"activeData.accordion"}})],1),a("el-divider",[e._v("面板配置")]),a("draggable",{attrs:{list:e.activeData.__config__.children,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.__config__.children,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"标签名称",size:"small"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(a){return e.delItem(i,t)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addItem}},[e._v("\n      添加面板\n    ")])],1)],1)},yl=[],Dl={props:["activeData"],mixins:[le["a"]],components:{draggable:c.a},data:function(){return{}},created:function(){},methods:{addItem:function(){this.activeData.__config__.children.push({title:"新面板",name:this.jnpf.idGenerator(),__config__:{jnpfKey:"collapseItem",children:[]}})},delItem:function(e,t){var a=this,i=this.activeData.__config__.children,l=i.length;l<2?this.$message({message:"最后一项不能删除",type:"warning"}):this.$confirm("删除后不能撤销，确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.activeData.__config__.children.splice(e,1)})).catch((function(){}))}}},wl=Dl,xl=Object(y["a"])(wl,gl,yl,!1,null,null,null),Cl=xl.exports,kl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showTitle,callback:function(t){e.$set(e.activeData.__config__,"showTitle",t)},expression:"activeData.__config__.showTitle"}})],1),a("el-form-item",{attrs:{label:"合计设置"}},[a("el-switch",{model:{value:e.activeData.showSummary,callback:function(t){e.$set(e.activeData,"showSummary",t)},expression:"activeData.showSummary"}})],1),e.activeData.showSummary?a("el-form-item",{attrs:{label:"合计字段"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择合计字段"},model:{value:e.activeData.summaryField,callback:function(t){e.$set(e.activeData,"summaryField",t)},expression:"activeData.summaryField"}},[e._l(e.activeData.__config__.children,(function(t,i){return[["input","inputNumber","calculate"].includes(t.__config__.jnpfKey)&&t.__vModel__&&!t.useMask?a("el-option",{key:i,attrs:{label:t.__config__.label,value:t.__vModel__}}):e._e()]}))],2)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"复杂表头"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:e.addComplexHeader}},[e._v(e._s(e.activeData.__config__.complexHeaderList.length?"编辑复杂表头":"复杂表头配置"))])],1),a("el-divider",[e._v("子表字段")]),a("draggable",{attrs:{list:e.activeData.__config__.children,animation:340,group:"selectItem",handle:".option-drag"}},[e._l(e.activeData.__config__.children,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("span",{staticClass:"select-label"},[e._v(" "+e._s(t.__config__.label))]),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.__config__.children.splice(i,1)}}},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"16px"}})])])})),a("div",{staticStyle:{"margin-left":"10px"}},[a("el-dropdown",{attrs:{trigger:"click"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"}},[e._v("\n          添加字段\n        ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("div",{staticClass:"dropdown"},[e._l(e.getBaseOptions,(function(t){return a("el-dropdown-item",{key:t.__config__.jnpfKey,attrs:{icon:t.__config__.tagIcon},nativeOn:{click:function(a){return e.addHandle(t)}}},[e._v(e._s(t.__config__.label)+"\n            ")])})),a("el-dropdown-item",{attrs:{divided:!0}}),e._l(e.getSeniorOptions,(function(t){return a("el-dropdown-item",{key:t.__config__.jnpfKey,attrs:{icon:t.__config__.tagIcon},nativeOn:{click:function(a){return e.addHandle(t)}}},[e._v(e._s(t.__config__.label)+"\n            ")])}))],2)])],1)],1)],2),a("el-divider",[e._v("操作列按钮")]),a("draggable",{attrs:{list:e.activeData.columnBtnsList,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.columnBtnsList,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("span",{staticClass:"select-label"},[e._v(" "+e._s(t.label))]),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(a){return e.editConf(t,i,"columnBtnsList")}}},[a("i",{staticClass:"el-icon-edit-outline",staticStyle:{"font-size":"16px",color:"#409eff"}})])])})),0),a("el-divider",[e._v("底部按钮")]),a("draggable",{attrs:{list:e.activeData.footerBtnsList,animation:340,group:"selectItem",handle:".option-drag"}},[e._l(e.activeData.footerBtnsList,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("span",{staticClass:"select-label"},[e._v(e._s(t.label))]),["add","batchRemove"].includes(t.value)?e._e():a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.footerBtnsList.splice(i,1)}}},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"16px"}})]),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(a){return e.editConf(t,i,"footerBtnsList")}}},[a("i",{staticClass:"el-icon-edit-outline",staticStyle:{"font-size":"16px",color:"#409eff"}})])])})),a("div",{staticStyle:{"margin-left":"10px"}},[e.activeData.footerBtnsList.length<5?a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:function(t){return e.editConf(!1,-1,"footerBtnsList")}}},[e._v("\n        添加字段\n      ")]):e._e()],1)],2),e.formVisible?a("Form",{ref:"Form",on:{submit:e.updateConf}}):e._e(),e.complexHeaderVisible?a("ComplexHeader",{ref:"ComplexHeader",on:{closeForm:e.closeForm}}):e._e()],1)},Tl=[],Fl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"操作按钮","close-on-click-modal":!1,"append-to-body":"",visible:e.visible,"lock-scroll":"",width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"按钮名称",prop:"label"}},[a("el-input",{attrs:{placeholder:"请输入按钮名称",disabled:["copy","remove"].includes(e.dataForm.value),maxlength:10},model:{value:e.dataForm.label,callback:function(t){e.$set(e.dataForm,"label",t)},expression:"dataForm.label"}})],1),a("el-form-item",{attrs:{label:"是否显示"}},[a("el-switch",{model:{value:e.dataForm.show,callback:function(t){e.$set(e.dataForm,"show",t)},expression:"dataForm.show"}})],1),["copy","remove"].includes(e.dataForm.value)?e._e():a("el-form-item",{attrs:{label:"按钮类型"}},[a("el-select",{attrs:{placeholder:"请选择按钮类型"},model:{value:e.dataForm.btnType,callback:function(t){e.$set(e.dataForm,"btnType",t)},expression:"dataForm.btnType"}},[e._l(e.butTypeOptions,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.fullName,value:e.id}})]}))],2)],1),["copy","remove"].includes(e.dataForm.value)?e._e():a("el-form-item",{attrs:{label:"图标"}},[a("el-input",{attrs:{placeholder:"请输入图标名称"},model:{value:e.dataForm.btnIcon,callback:function(t){e.$set(e.dataForm,"btnIcon",t)},expression:"dataForm.btnIcon"}},[a("el-button",{attrs:{slot:"append"},on:{click:e.openIconsDialog},slot:"append"},[e._v("\n          选择\n        ")])],1)],1),["remove","batchRemove"].includes(e.dataForm.value)?a("el-form-item",{attrs:{label:"删除确认"}},[a("el-switch",{model:{value:e.dataForm.showConfirm,callback:function(t){e.$set(e.dataForm,"showConfirm",t)},expression:"dataForm.showConfirm"}})],1):e._e(),["copy","remove","add","batchRemove"].includes(e.dataForm.value)?e._e():[a("JnpfGroupTitle",{staticClass:"GroupTitle",attrs:{content:"动作设置"}}),a("el-form-item",{attrs:{label:"弹窗标题"}},[a("el-input",{attrs:{placeholder:"请输入弹窗标题"},model:{value:e.actionConfig.popupTitle,callback:function(t){e.$set(e.actionConfig,"popupTitle",t)},expression:"actionConfig.popupTitle"}})],1),a("el-form-item",{attrs:{label:"弹窗类型"}},[a("el-radio-group",{model:{value:e.actionConfig.popupType,callback:function(t){e.$set(e.actionConfig,"popupType",t)},expression:"actionConfig.popupType"}},[a("el-radio-button",{attrs:{label:"dialog"}},[e._v("居中弹窗")]),a("el-radio-button",{attrs:{label:"drawer"}},[e._v("右侧弹窗")])],1)],1),a("el-form-item",{attrs:{label:"弹窗宽度"}},[a("el-select",{attrs:{placeholder:"请选择弹窗宽度",filterable:""},model:{value:e.actionConfig.popupWidth,callback:function(t){e.$set(e.actionConfig,"popupWidth",t)},expression:"actionConfig.popupWidth"}},e._l(e.popupWidthOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"数据来源"}},[a("el-radio-group",{on:{change:e.handleNull},model:{value:e.actionConfig.dataSource,callback:function(t){e.$set(e.actionConfig,"dataSource",t)},expression:"actionConfig.dataSource"}},[a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")]),a("el-radio-button",{attrs:{label:"relationForm"}},[e._v("表单数据")])],1)],1),"dynamic"==e.actionConfig.dataSource?[a("el-form-item",{attrs:{label:"远端数据",prop:"interfaceName"}},[a("interface-dialog",{attrs:{value:e.actionConfig.interfaceId,title:e.actionConfig.interfaceName,hasPage:1},on:{change:e.onInterfaceChange}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"参数设置"}}),a("el-table",{staticStyle:{"margin-bottom":"18px"},attrs:{data:e.actionConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n              "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n            ")]}}],null,!1,2148291447)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)]}}],null,!1,973785577)})],1)]:a("el-form-item",{attrs:{label:"表单数据"}},[a("JnpfTreeSelect",{attrs:{options:e.treeData,placeholder:"请选择关联功能",lastLevel:"",clearable:""},on:{change:e.onModeIdChange},model:{value:e.actionConfig.modelId,callback:function(t){e.$set(e.actionConfig,"modelId",t)},expression:"actionConfig.modelId"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"设置列表字段","label-width":"100px"}}),a("el-table",{attrs:{data:e.actionConfig.columnOptions}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),"dynamic"==e.actionConfig.dataSource?a("el-table-column",{attrs:{prop:"field",label:"列名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入列名"},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}}],null,!1,521043997)}):e._e(),a("el-table-column",{attrs:{prop:"value",label:"字段"},scopedSlots:e._u([{key:"default",fn:function(t){return["dynamic"==e.actionConfig.dataSource?a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入字段"},on:{select:function(a){return e.handleSelect(a,t.row)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!0),model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},on:{change:function(a){return e.headValue(t.$index,a)}},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}},e._l(e.fieldOptions,(function(e){return a("el-option",{key:e.vmodel,attrs:{label:e.label,value:e.vmodel}})})),1)]}}],null,!1,1204737087)}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index,"columnOptions")}}},[e._v("删除\n            ")])]}}],null,!1,2661409907)})],1),a("div",{staticClass:"table-actions",staticStyle:{"margin-bottom":"18px"},on:{click:e.addColumn}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("新增")])],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"设置关联字段","label-width":"100px"}}),a("el-table",{attrs:{data:e.actionConfig.relationOptions}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"目标表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择表单字段",filterable:""},model:{value:t.row.field,callback:function(a){e.$set(t.row,"field",a)},expression:"scope.row.field"}},e._l(e.childList,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)]}}],null,!1,4150101185)}),a("el-table-column",{attrs:{prop:"type",label:"映射来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择映射来源"},on:{change:function(a){return e.onTypeChange(t.row)}},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},[a("el-option",{attrs:{label:"字段",value:1}}),a("el-option",{attrs:{label:"自定义",value:2}})],1)]}}],null,!1,3891919737)}),a("el-table-column",{attrs:{prop:"value",label:"数据来源字段/值"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type&&"dynamic"==e.actionConfig.dataSource?a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入字段"},on:{select:function(a){return e.handleSelect(a,t.row)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!0),model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):1==t.row.type&&"relationForm"==e.actionConfig.dataSource?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}},e._l(e.fieldOptions,(function(e){return a("el-option",{key:e.vmodel,attrs:{label:e.label,value:e.vmodel}})})),1):a("el-input",{attrs:{placeholder:"请输入值"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}],null,!1,1404890400)}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index,"relationOptions")}}},[e._v("删除\n            ")])]}}],null,!1,1631620995)})],1),a("div",{staticClass:"table-actions",staticStyle:{"margin-bottom":"18px"},on:{click:e.addRelationOption}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("新增")])],1)]],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton")))])],1),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.dataForm.btnIcon},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}})],1)},Sl=[],Nl=a("a7b7"),Ll=["relationForm","popupSelect"],Ol=[{fullName:"默认按钮",id:""},{fullName:"主要按钮",id:"primary"},{fullName:"成功按钮",id:"success"},{fullName:"信息按钮",id:"info"},{fullName:"警告按钮",id:"warning"},{fullName:"危险按钮",id:"danger"},{fullName:"文字按钮",id:"text"}],$l={components:{InterfaceDialog:Me["a"],iconBox:Nl["a"]},data:function(){return{visible:!1,formLoading:!1,btnLoading:!1,childList:[],dataForm:{value:"",label:"",show:!1,showConfirm:!1,btnIcon:"",btnType:""},dataRule:{label:{required:!0,message:"按钮名称不能为空",trigger:"blur"}},popupWidthOptions:["600px","800px","1000px","40%","50%","60%","70%","80%"],fieldJsonList:[],butTypeOptions:Ol,iconsVisible:!1,actionConfig:{dataSource:"",interfaceId:"",interfaceName:"",templateJson:[],hasPage:!0,pageSize:20,columnOptions:[],relationOptions:[]},treeData:[],fieldOptions:[]}},computed:{formFieldsOptions:function(){var e=[],t=function t(a,i){a&&(a.__config__&&"table"!==a.__config__.jnpfKey&&a.__config__.children&&Array.isArray(a.__config__.children)&&t(a.__config__.children,a),Array.isArray(a)&&a.forEach((function(e){return t(e,i)})),a.__vModel__&&!F["c"].includes(a.__config__.jnpfKey)&&e.push(a))};return t(Object(L["a"])()),e}},methods:{init:function(e,t,a){this.visible=!0,this.getFeatureSelector(),this.getFieldOptions(),this.dataForm=Object(o["a"])(Object(o["a"])({},this.dataForm),e),this.actionConfig={},this.$refs.dataForm&&this.$refs.dataForm.clearValidate(),["copy","remove","add","batchRemove"].includes(e.value)||(this.actionConfig=Object(o["a"])(Object(o["a"])({},this.actionConfig),t),this.childList=a.filter((function(e){return e.__vModel__&&![].concat(Object(n["a"])(F["j"]),Ll,Object(n["a"])(F["c"])).includes(e.__config__.jnpfKey)})),this.getDataInterfaceInfo(),this.getFieldOptions())},getFeatureSelector:function(){var e=this;Object(xi["o"])({type:1,webType:"2",isRelease:1}).then((function(t){e.treeData=t.data.list}))},getFieldOptions:function(){var e=this;this.actionConfig.modelId&&Object(xi["q"])(this.actionConfig.modelId,1).then((function(t){e.fieldOptions=t.data.list||[]}))},onModeIdChange:function(e){if(!e)return this.fieldOptions=[];this.actionConfig.templateJson=this.actionConfig.templateJson?this.actionConfig.templateJson.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{relationField:"",value:""})})):[],this.getFieldOptions()},onInterfaceChange:function(e,t){if(!e)return this.handleNull();this.dataForm.interfaceId!==e&&(this.actionConfig.interfaceId=e,this.actionConfig.interfaceName=t.fullName,this.actionConfig.templateJson=t.templateJson?t.templateJson.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{relationField:"",value:""})})):[],this.getDataInterfaceInfo())},handleNull:function(){this.actionConfig.interfaceId="",this.actionConfig.interfaceName="",this.actionConfig.templateJson=[],this.fieldJsonList=[],this.actionConfig.modelId="",this.actionConfig.columnOptions=[],this.actionConfig.templateJson=this.actionConfig.templateJson?this.actionConfig.templateJson.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{relationField:"",value:""})})):[]},onRelationFieldChange:function(e,t){if(!e)return t.jnpfKey="";var a=this.formFieldsOptions.filter((function(t){return t.__vModel__===e}));if(!a.length)return t.jnpfKey="";var i=a[0];t.jnpfKey=i.__config__.jnpfKey},addColumn:function(){this.actionConfig.columnOptions.push({value:"",label:""})},addRelationOption:function(){this.actionConfig.relationOptions.push({value:"",field:"",type:1})},handleDel:function(e,t){this.actionConfig[t].splice(e,1)},onTypeChange:function(e){e.value=""},dataFormSubmit:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&(e.$emit("submit",e.dataForm,e.actionConfig),e.visible=!1)}))},getDataInterfaceInfo:function(){var e=this;Object($["k"])(this.dataForm.interfaceId).then((function(t){e.fieldJsonList=t.data&&t.data.fieldJson&&(JSON.parse(t.data.fieldJson)||[])||[]}))},querySearch:function(e,t){var a=this.fieldJsonList||[],i=e?a.filter(this.createStateFilter(e)):a;t(i)},createStateFilter:function(e){return function(t){return 0===t.defaultValue.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e,t){t.value=e.defaultValue},openIconsDialog:function(){this.iconsVisible=!0},setIcon:function(e){this.dataForm.btnIcon=e},headValue:function(e,t){if(!t)return this.actionConfig.columnOptions[e].label="";var a=this.fieldOptions.filter((function(e){return e.vmodel==t}))[0];this.actionConfig.columnOptions[e].label=a.label}}},Il=$l,jl=(a("e36f"),Object(y["a"])(Il,Fl,Sl,!1,null,"52f534b0",null)),Ml=jl.exports,Vl=a("da54"),Al={popupTitle:"选择数据",popupType:"dialog",popupWidth:"800px",dataSource:"dynamic",interfaceId:"",interfaceName:"",templateJson:[],hasPage:!0,pageSize:20,columnOptions:[],relationOptions:[]},Pl=[{value:"copy",label:"复制",show:!0,btnType:"primary",btnIcon:"icon-ym icon-ym-btn-edit"},{value:"remove",label:"删除",show:!0,btnType:"danger",btnIcon:"icon-ym icon-ym-btn-clearn",showConfirm:!0}],Jl=[{value:"add",label:"添加",show:!0,btnType:"primary",btnIcon:"icon-ym icon-ym-btn-add"},{value:"batchRemove",label:"批量删除",show:!0,btnType:"danger",btnIcon:"icon-ym icon-ym-btn-clearn",showConfirm:!0}],Rl={props:["activeData","showType","modelType"],components:{Form:Ml,ComplexHeader:Vl["a"],draggable:c.a},data:function(){return{formVisible:!1,thousandsOptions:[],complexHeaderVisible:!1,defaultAddTableConf:Al,activeRowIndex:0,activeRowType:""}},computed:{getBaseOptions:function(){var e=[].concat(Object(n["a"])(F["g"]),["table"]);return S["b"].filter((function(t){return!e.includes(t.__config__&&t.__config__.jnpfKey)}))},getSeniorOptions:function(){var e=[].concat(Object(n["a"])(F["g"]),["table"]),t=S["d"].filter((function(t){return!e.includes(t.__config__&&t.__config__.jnpfKey)}));return 1!=this.modelType&&6!=this.modelType||(t=[].concat(Object(n["a"])(t),[F["a"]])),t}},mounted:function(){this.activeData.columnBtnsList&&this.activeData.columnBtnsList.length||(this.activeData.columnBtnsList=JSON.parse(JSON.stringify(Pl))),this.activeData.footerBtnsList&&this.activeData.footerBtnsList.length||(this.activeData.footerBtnsList=JSON.parse(JSON.stringify(Jl)))},methods:{editConf:function(e,t,a){var i=this;this.activeRowIndex=t,this.activeRowType=a;var l={};e?["copy","remove","add","batchRemove"].includes(e.value)||(l=JSON.parse(JSON.stringify(e.actionConfig))):(e={},l=JSON.parse(JSON.stringify(this.defaultAddTableConf)),e.value="btn-"+this.jnpf.idGenerator(),e.label="",e.show=!0,e.btnIcon="",e.btnType=""),this.formVisible=!0,this.$nextTick((function(){i.$refs.Form.init(e,l,i.activeData.__config__.children)}))},addBtnChange:function(e){e||(this.activeData.addType=e?1:0,this.activeData.addTableConf=JSON.parse(JSON.stringify(Al)))},setAction:function(e){e||(this.activeData.addTableConf=JSON.parse(JSON.stringify(Al)))},closeForm:function(e){e&&(this.activeData.__config__.complexHeaderList=e),this.complexHeaderVisible=!1},addComplexHeader:function(){var e=this;this.complexHeaderVisible=!0;var t=this.activeData.__config__.children.filter((function(e){return e.__vModel__&&"none"===e.__config__.tableFixed})),a=JSON.parse(JSON.stringify(this.activeData.__config__.complexHeaderList));a=this.updateComplexHeader(a,t)||[],this.$nextTick((function(){e.$refs.ComplexHeader.init(a,t)}))},updateComplexHeader:function(e,t){if(!e.length)return[];for(var a=0;a<e.length;a++){var i=e[a];i.childColumns=i.childColumns.filter((function(e){return t.some((function(t){return t.__vModel__==e}))}))}return e},updateConf:function(e,t){return["copy","remove","add","batchRemove"].includes(e.value)?this.$set(this.activeData[this.activeRowType],this.activeRowIndex,e):this.activeRowIndex>=0?this.$set(this.activeData[this.activeRowType],this.activeRowIndex,Object(o["a"])(Object(o["a"])({},e),{},{actionConfig:t})):void this.activeData[this.activeRowType].push(Object(o["a"])(Object(o["a"])({},e),{},{actionConfig:t}))},addHandle:function(e){if(this.$store.getters.hasTable&&!this.activeData.__config__.tableName)return this.$message.warning("子表请先关联数据表");e.__config__.isSubTable=!0,e.__config__.parentVModel=this.activeData.__vModel__,this.$store.getters.hasTable&&(e.__config__.relationTable=this.activeData.__config__.tableName),this.$emit("addComponent",e,this.activeData.__config__.children)}}},Kl=Rl,Bl=(a("0373"),Object(y["a"])(Kl,kl,Tl,!1,null,"6df6f6ce",null)),El=Bl.exports,zl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center form-script-dialog",attrs:{"close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"1000px","modal-append-to-body":!1,title:"表单样式"},on:{open:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),[a("div",{staticClass:"form-script-dialog-body"},[a("div",{staticClass:"right-main"},[a("div",{staticClass:"codeEditor"},[a("JNPFCodeEditor",{ref:"CodeEditor",attrs:{options:e.options},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),a("div",{staticClass:"tips"},[a("p",[e._v("示例：")]),a("p",[e._v(".text{")]),a("p",{staticStyle:{"text-indent":"2em"}},[e._v("\n          background-color: #fff; //背景颜色\n        ")]),a("p",{staticStyle:{"text-indent":"2em"}},[e._v("\n          font-size: 18px; //字体大小\n        ")]),a("p",[e._v("\n          }\n        ")])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onClose()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])},ql=[],Wl={components:{JNPFCodeEditor:P["a"]},props:["value"],data:function(){return{text:"",options:{language:"css"}}},methods:{onOpen:function(){var e=this;this.text=this.value,this.$nextTick((function(){e.$refs.CodeEditor.changeEditor({value:e.text,options:e.options})}))},onClose:function(){this.$emit("updateStyleScript",this.text),this.closeDialog()},closeDialog:function(){this.$emit("update:visible",!1)}}},Ul=Wl,Hl=Object(y["a"])(Ul,zl,ql,!1,null,null,null),Gl=Hl.exports,Ql=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("jnpf-form-tip-item",{attrs:{label:"链接地址","tip-label":"地址以http://或https://开头"}},[a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:e.activeData.href,callback:function(t){e.$set(e.activeData,"href",t)},expression:"activeData.href"}})],1),a("jnpf-form-tip-item",{attrs:{label:"高度"}},[a("el-input-number",{attrs:{placeholder:"请输入高度",min:0,"controls-position":"right"},model:{value:e.activeData.height,callback:function(t){e.$set(e.activeData,"height",t)},expression:"activeData.height"}})],1),a("el-form-item",{attrs:{label:"边框"}},[a("el-radio-group",{model:{value:e.activeData.borderType,callback:function(t){e.$set(e.activeData,"borderType",t)},expression:"activeData.borderType"}},[a("el-radio-button",{attrs:{label:"none"}},[e._v("无")]),a("el-radio-button",{attrs:{label:"solid"}},[e._v("实线")]),a("el-radio-button",{attrs:{label:"dashed"}},[e._v("虚线")]),a("el-radio-button",{attrs:{label:"dotted"}},[e._v("点状")])],1)],1),"none"!=e.activeData.borderType?[a("el-form-item",{attrs:{label:"边框颜色"}},[a("el-color-picker",{model:{value:e.activeData.borderColor,callback:function(t){e.$set(e.activeData,"borderColor",t)},expression:"activeData.borderColor"}})],1),a("el-form-item",{attrs:{label:"边框宽度"}},[a("el-input-number",{attrs:{min:1,max:10,precision:0,"controls-position":"right"},on:{change:e.onBorderWidthChange},model:{value:e.activeData.borderWidth,callback:function(t){e.$set(e.activeData,"borderWidth",t)},expression:"activeData.borderWidth"}})],1)]:e._e()],2)},Yl=[],Zl={props:["activeData"],data:function(){return{}},methods:{onBorderWidthChange:function(e){var t=this;e||this.$nextTick((function(){return t.$set(t.activeData,"borderWidth",1)}))}}},Xl=Zl,eo=Object(y["a"])(Xl,Ql,Yl,!1,null,null,null),to=eo.exports,ao=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("el-form-item",{attrs:{label:"调用签名"}},[a("el-switch",{model:{value:e.activeData.__config__.defaultCurrent,callback:function(t){e.$set(e.activeData.__config__,"defaultCurrent",t)},expression:"activeData.__config__.defaultCurrent"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1)],1)},io=[],lo={props:["activeData"],data:function(){return{}}},oo=lo,no=Object(y["a"])(oo,ao,io,!1,null,null,null),so=no.exports,ro=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form-item",{attrs:{label:"控件标题"}},[a("el-input",{attrs:{placeholder:"请输入控件标题"},model:{value:e.activeData.__config__.label,callback:function(t){e.$set(e.activeData.__config__,"label",t)},expression:"activeData.__config__.label"}})],1),a("el-form-item",{attrs:{label:"显示标题"}},[a("el-switch",{model:{value:e.activeData.__config__.showLabel,callback:function(t){e.$set(e.activeData.__config__,"showLabel",t)},expression:"activeData.__config__.showLabel"}})],1),a("el-form-item",{attrs:{label:"标题提示"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题提示"},model:{value:e.activeData.__config__.tipLabel,callback:function(t){e.$set(e.activeData.__config__,"tipLabel",t)},expression:"activeData.__config__.tipLabel"}})],1),a("jnpf-form-tip-item",{attrs:{label:"获取定位","tip-label":"桌面端不支持自动获取定位"}},[a("el-switch",{model:{value:e.activeData.autoLocation,callback:function(t){e.$set(e.activeData,"autoLocation",t)},expression:"activeData.autoLocation"}})],1),a("jnpf-form-tip-item",{attrs:{label:"允许微调","tip-label":"是否允许用户在当前定位的范围可以微调距离"}},[a("el-switch",{model:{value:e.activeData.enableLocationScope,callback:function(t){e.$set(e.activeData,"enableLocationScope",t)},expression:"activeData.enableLocationScope"}})],1),e.activeData.enableLocationScope?a("jnpf-form-tip-item",{attrs:{label:"微调范围","tip-label":"设置用户可以微调的范围"}},[a("el-input",{attrs:{type:"number",min:1},on:{change:e.handleNumber},model:{value:e.activeData.adjustmentScope,callback:function(t){e.$set(e.activeData,"adjustmentScope",t)},expression:"activeData.adjustmentScope"}},[a("template",{slot:"append"},[e._v("米")])],2)],1):e._e(),a("jnpf-form-tip-item",{attrs:{label:"定位区域","tip-label":"设置用户可以提交定位的范围"}},[a("el-switch",{model:{value:e.activeData.enableDesktopLocation,callback:function(t){e.$set(e.activeData,"enableDesktopLocation",t)},expression:"activeData.enableDesktopLocation"}})],1),e.activeData.enableDesktopLocation?[e._l(e.activeData.locationScope,(function(t,i){return a("div",{key:i,staticClass:"location-scope-item"},[a("span",{staticClass:"name"},[e._v(e._s(t.name))]),a("div",{staticClass:"edit-btn",on:{click:function(a){return e.addOrUpdateHandle(t)}}},[a("i",{staticClass:"icon-ym icon-ym-btn-edit"})]),a("div",{staticClass:"close-btn",on:{click:function(t){return e.activeData.locationScope.splice(i,1)}}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn"})])])})),a("el-button",{staticClass:"!px-0 mb-10px",attrs:{type:"text",icon:"icon-ym icon-ym-btn-add"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("新增定位中心")])]:e._e(),a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1),a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.__config__.required,callback:function(t){e.$set(e.activeData.__config__,"required",t)},expression:"activeData.__config__.required"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{model:{value:e.activeData.__config__.noShow,callback:function(t){e.$set(e.activeData.__config__,"noShow",t)},expression:"activeData.__config__.noShow"}})],1),e.mapVisible?a("MapModal",{ref:"registerModal",on:{confirm:e.handleConfirm}}):e._e()],2)},co=[],uo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog template-dialog JNPF-dialog_center map-center-select-modal",attrs:{title:e.innerValue.id?"编辑":"新建","close-on-click-modal":!1,"append-to-body":"",visible:e.visible,"lock-scroll":"",width:"600px","destroy-on-close":""},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"map-contain"},[a("div",{staticClass:"map",attrs:{id:"container"}}),a("el-autocomplete",{staticClass:"search-contain",attrs:{placeholder:"输入搜索或直接在下图选择定位中心","fetch-suggestions":e.onSearch},on:{select:e.onSelect},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",{on:{click:function(t){return e.onSelect(i)}}},[e._v(" "+e._s(i.name))])])]}}]),model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("div",{staticClass:"label-contain"},[a("span",{staticClass:"label"},[e._v("定位范围")]),a("span",{staticClass:"tips"},[e._v("以定位中心为圆心设置定位半径，建议范围500-1000米")])]),a("el-input",{staticClass:"w-200",attrs:{type:"number",min:1},on:{change:e.handleNumber},model:{value:e.innerValue.radius,callback:function(t){e.$set(e.innerValue,"radius",t)},expression:"innerValue.radius"}},[a("template",{slot:"append"},[e._v("米")])],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit()}}},[e._v("确定")])],1)],1)},po=[],fo=a("3835"),mo=a("862d"),_o=a.n(mo),ho=a("2934"),vo={components:{},data:function(){return{visible:!1,AMap:null,map:null,innerValue:{lng:"",lat:"",name:"",radius:500},options:[],marker:void 0,keyword:""}},methods:{init:function(e){var t=this;this.visible=!0,this.keyword="",this.innerValue={lng:"",lat:"",radius:500},e.item&&(this.innerValue=e.item,this.keyword=this.innerValue.name),this.$nextTick((function(){t.initMap()}))},initMap:function(){var e=this;_o.a.reset(),_o.a.load({key:this.define.aMapJsKey,version:"2.0",plugins:["AMap.PlaceSearch","AMap.Geolocation","AMap.Geocoder"]}).then((function(t){e.AMap=t;var a={viewMode:"3D",zoom:16},i=e.innerValue&&e.innerValue.lng&&e.innerValue.lat;i&&(a.center=[e.innerValue.lng,e.innerValue.lat]),e.map=new t.Map("container",a),i&&e.handleMarker(e.innerValue.lng,e.innerValue.lat),e.map.on("click",e.handleCenter)}))},handleCenter:function(e){var t=e.lnglat,a=t.lng,i=t.lat;this.handleMarker(a,i),this.handleGetAddress([a,i])},onSearch:function(e,t){var a=this,i={key:this.define.aMapWebKey,keywords:e};Object(ho["h"])(i).then((function(e){a.options=e.data.tips||[],t(a.options)}))},onSelect:function(e){if(this.keyword=e.name,e.location&&e.location.length){var t=e.location.split(","),a=Object(fo["a"])(t,2),i=a[0],l=a[1];this.handleMarker(i,l)}else this.handleGetLngLat(e.name)},handleMarker:function(e,t){this.innerValue.lng=e,this.innerValue.lat=t,this.marker&&this.map.remove(this.marker),this.marker=new this.AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:[e,t],offset:new this.AMap.Pixel(-12,-30)}),this.map.add(this.marker),this.map.setFitView()},handleGetAddress:function(e){var t=new this.AMap.Geocoder,a=this;t.getAddress(e,(function(e,t){"complete"===e&&"OK"===t.info&&(a.keyword=t.regeocode.formattedAddress,a.$forceUpdate())}))},handleGetLngLat:function(e){var t=new this.AMap.Geocoder,a=this;t.getLocation(e,(function(e,t){if("complete"===e&&"OK"===t.info){var i=t.geocodes[0].location,l=i.lng,o=i.lat;a.handleMarker(l,o)}}))},handleSubmit:function(){return this.innerValue.name=this.keyword,this.innerValue.lat&&this.innerValue.lng?this.innerValue.radius?(this.$emit("confirm",this.innerValue),void this.handleCancel()):this.$message.warning("定位范围不能为空"):this.$message.error("请输入定位中心")},onDropdownVisibleChange:function(e){e&&(options=[])},handleCancel:function(){var e=this;this.visible=!1,this.$nextTick((function(){e.map&&e.map.destroy()}))},handleNumber:function(e){var t=this;this.$nextTick((function(){t.innerValue.radius=e&&e>0?Number(e):1}))}}},bo=vo,go=(a("6b61"),Object(y["a"])(bo,uo,po,!1,null,"3c248bf4",null)),yo=go.exports,Do={props:["activeData"],components:{MapModal:yo},data:function(){return{mapVisible:!1,props:{label:"fullName",value:"id"}}},methods:{addOrUpdateHandle:function(e){var t=this;this.mapVisible=!0,this.$nextTick((function(){t.$refs.registerModal.init({item:e})}))},handleConfirm:function(e){if(this.mapVisible=!1,e.id)for(var t=0;t<this.activeData.locationScope.length;t++){var a=this.activeData.locationScope[t];e.id===a.id&&(a=e)}else e.id=this.jnpf.idGenerator(),this.activeData.locationScope=this.activeData.locationScope||[],this.activeData.locationScope.push(e)},handleNumber:function(e){var t=this;this.$nextTick((function(){t.$set(t.activeData,"adjustmentScope",e&&e>0?Number(e):1)}))}}},wo=Do,xo=(a("b3c4"),Object(y["a"])(wo,ro,co,!1,null,"06db213a",null)),Co=xo.exports,ko=["organizeSelect","depSelect","posSelect","userSelect","usersSelect","groupSelect","roleSelect","editor"],To=["createUser","createTime","modifyUser","modifyTime","currOrganize","currDept","currPosition","billRule"],Fo=["switch","radio","checkbox","uploadFile","uploadImg","colorPicker","rate","link","button","text","alert","qrcode","barcode"],So=["groupTitle","divider","collapse","tab","row","card","table"],No={components:{StyleScript:Gl,FormScript:E,FieldDialog:G,RInput:te,RTextarea:re,RInputNumber:$e,RLink:me,RText:ye,RAlert:Te,RRadio:ze,RCheckbox:Qe,RSelect:at,RCascader:yt,RTimePicker:Tt,RTimeRange:$t,RDatePicker:Pt,RDateRange:qt,RColorPicker:Yt,RRate:ia,RSwitch:ca,RSlider:_a,RDivider:Da,RUploadFile:Fa,RUploadImg:Ia,ComRight:Ba,RAreaSelect:Qa,RTreeSelect:mi,RGroupTitle:yi,RRelationForm:ji,RRelationFormAttr:Ri,RCalculate:Ui,RPopupSelect:el,RPopupAttr:pl,RTab:bl,RCollapse:Cl,TableConfig:El,RAutoComplete:nl,RIframe:to,RSign:so,RLocation:Co},inject:["getShowType","getFormInfo"],props:["showField","activeData","formConf","modelType","webType","drawingList","formInfo"],data:function(){return{currentTab:"field",currentNode:null,dialogVisible:!1,iconsVisible:!1,formScriptVisible:!1,fieldDialogVisible:!1,comScriptVisible:!1,currentIconModel:null,activeScript:"",activeFunc:"",isConf:!1,noVModelList:F["h"],printTplList:[],fieldOptions:[],dictionaryOptions:[],dataInterfaceOptions:[],styleScriptVisible:!1,storageType:[{label:"展示数据",value:0},{label:"存储数据",value:1}],justifyOptions:[{label:"start",value:"start"},{label:"end",value:"end"},{label:"center",value:"center"},{label:"space-around",value:"space-around"},{label:"space-between",value:"space-between"}],barcodeFormatOptions:[{label:"code128",value:"code128"},{label:"ean13",value:"ean13"},{label:"ean8",value:"ean8"},{label:"ean5",value:"ean5"},{label:"ean2",value:"ean2"},{label:"code39",value:"code39"},{label:"itf14",value:"itf14"},{label:"msi10",value:"msi10"},{label:"msi11",value:"msi11"},{label:"pharmacode",value:"pharmacode"},{label:"upc",value:"upc"},{label:"codabar",value:"codabar"}],generalWidthOptions:["600px","800px","1000px","40%","50%","60%","70%","80%"],fullScreenWidthOptions:["800px","1000px","1200px","1400px","50%","60%","70%","80%","90%","100%"],layoutTreeProps:{label:function(e,t){var a=e.__config__;return e.componentName||"".concat(a.label,": ").concat(e.__vModel__)}},noWithList:[].concat(Fo,So)}},computed:{showType:function(){return this.getShowType()},changeName:function(){},activeTag:function(){return this.activeData.__config__.tag},formItemList:{get:function(){return this.$store.state.generator.formItemList},set:function(e){this.$store.commit("generator/UPDATE_FORMITEM_LIST",e)}},subTable:{get:function(){return this.$store.state.generator.subTable||[]},set:function(e){this.$store.commit("generator/UPDATE_SUB_TABLE",e)}},allTable:{get:function(){return this.$store.state.generator.allTable||[]},set:function(e){this.$store.commit("generator/SET_ALL_TABLE",e)}},mainTable:function(){var e=this.$store.state.generator.allTable,t=e.filter((function(e){return"1"==e.typeId}))[0];return t&&t.table?t.table:""},isCommon:function(){return ko.indexOf(this.activeData.__config__.jnpfKey)>-1},isSystem:function(){return To.indexOf(this.activeData.__config__.jnpfKey)>-1},drawingOptions:function(){var e=[],t=function t(a,i){a&&(a.__config__&&"table"!==a.__config__.jnpfKey&&a.__config__.children&&Array.isArray(a.__config__.children)&&t(a.__config__.children,a),Array.isArray(a)&&a.forEach((function(e){return t(e,i)})),a.__vModel__&&"table"!==a.__config__.jnpfKey&&e.push(a))};return t(this.drawingList),e},getCompName:function(){var e=this,t=[].concat(Object(n["a"])(S["b"]),Object(n["a"])(S["d"]),Object(n["a"])(S["e"]),Object(n["a"])(S["c"]),[F["a"]],Object(n["a"])(F["i"])),a=t.filter((function(t){return t.__config__.jnpfKey===e.activeData.__config__.jnpfKey}));return a.length?a[0].__config__.label:""},getScriptType:function(){return["onLoad","beforeSubmit","afterSubmit"].includes(this.activeFunc)?"form":"formField"},enableFlow:function(){return this.formInfo&&this.formInfo.enableFlow||!1}},watch:{formConf:{handler:function(e){"word-form"===e.formStyle&&"top"===e.labelPosition&&(e.labelPosition="left")},deep:!0},activeData:function(e){var t=this;e&&e.__config__&&("relationFormAttr"===e.__config__.jnpfKey&&this.$nextTick((function(){t.$refs.relationFormAttr&&t.$refs.relationFormAttr.getOptions()})),"popupSelect"!==e.__config__.jnpfKey&&"popupTableSelect"!==e.__config__.jnpfKey||this.$nextTick((function(){t.$refs.popupAll&&t.$refs.popupAll.getDataInterfaceInfo()})),"popupAttr"===e.__config__.jnpfKey&&this.$nextTick((function(){t.$refs.popupAttr&&t.$refs.popupAttr.getOptions()})),"calculate"!==e.__config__.jnpfKey&&this.$nextTick((function(){t.$refs.calculate&&t.$refs.calculate.reloadExpressionTemp()})),e.__config__.tableName||"table"===e.__config__.jnpfKey||(e.__config__.tableName=this.mainTable),this.activeData.__config__.visibility||this.$set(this.activeData.__config__,"visibility",["pc","app"]),this.setDefaultOptions())}},created:function(){this.getDictionaryType(),this.getDataInterfaceSelector(),this.getPrintTplList(),this.activeData&&this.activeData.__config__&&(this.activeData.__config__.visibility||this.$set(this.activeData.__config__,"visibility",["pc","app"]),this.activeData.__config__.tableName||"table"===this.activeData.__config__.jnpfKey||(this.activeData.__config__.tableName=this.mainTable),this.setDefaultOptions())},methods:{refreshPrintOptions:function(){var e=this;Object(j["k"])(2).then((function(t){var a=t.data.list,i=a.filter((function(e){return e.children&&e.children.length}));e.printTplList=i.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{hasChildren:!0})}))})).catch((function(e){reject(e)}))},open:function(e){window.open(e,"_blank")},openPrint:function(){var e=this.$router.resolve({path:"/system/printDev?open=true"});this.open(e.href)},addStyle:function(){var e=this;this.$nextTick((function(){e.styleScriptVisible=!0}))},updateStyleScript:function(e){this.formConf.classJson=e,this.formConf.classNames=this.spiltByDoc(e).map((function(e){return e.key}))},spiltByDoc:function(e){var t=e.trim(),a=[],i=t.split("}");return i.forEach((function(e){if(e){var t=e.split("{"),i={},l="";l=t[0].split(" ").length>1?t[0].split(" ")[0]:t[0],l.split(".").length>1&&(l=l.split(".")[1]),l=l.split(":")[0];var o=new RegExp(/^[a-zA-Z]-?.*[a-zA-Z0-9_]*$/);o.test(l)&&(i.key=l.replace(/\r|\n/gi,"").trim(),i.value=e.replace(/\r|\n/gi,"")+"}",a.push(i))}})),a},addReg:function(){this.activeData.__config__.regList.push({pattern:"",message:""})},setDefaultValue:function(e){return Array.isArray(e)?e.join(","):"boolean"===typeof e?"".concat(e):e},onDefaultValueInput:function(e){Array.isArray(this.activeData.__config__.defaultValue)?this.$set(this.activeData.__config__,"defaultValue",e.split(",").map((function(e){return Object(N["j"])(e)?+e:e}))):["true","false"].indexOf(e)>-1?this.$set(this.activeData.__config__,"defaultValue",JSON.parse(e)):this.$set(this.activeData.__config__,"defaultValue",Object(N["j"])(e)?+e:e)},getSubTableFiled:function(e){var t={},a=this.subTable.filter((function(t){return t.table===e}));a.length&&(t=a[0]);var i=[];return t&&t.fields&&(i=t.fields.filter((function(e){return 1!=e.primaryKey}))),i},fieldChange1:function(e){var t=this;if(e){var a=Object(L["a"])()||[],i=!1,l=function a(l){for(var o=0;o<l.length;o++){var n=l[o],s=n.__config__;if("table"===s.jnpfKey&&s.tableName===t.activeData.__config__.relationTable)for(var r=0;r<s.children.length;r++){var c=s.children[r];if(c.__vModel__===e){i=!0;break}}s&&"table"!=s.jnpfKey&&s.children&&Array.isArray(s.children)&&a(s.children)}};if(l(a),i)return this.$message.warning("子表字段【".concat(e,"】已存在,请重新选择!")),void(this.activeData.__vModel__="");var o=this.getSubTableFiled(this.activeData.__config__.relationTable),n=o.filter((function(t){return t.field==e}))[0];n&&n.fieldName&&(this.activeData.__config__.label=n.fieldName)}},fieldChange:function(e){if(e){var t=Object(L["a"])()||[],a=!1,i=function t(i){for(var l=0;l<i.length;l++){var o=i[l],n=o.__config__;if(o.__vModel__===e){a=!0;break}n&&"table"!=n.jnpfKey&&n.children&&Array.isArray(n.children)&&t(n.children)}};if(i(t),a)return this.$message.warning("字段【".concat(e,"】已存在,请重新选择!")),void(this.activeData.__vModel__="");var l=this.fieldOptions.filter((function(t){return t.realField==e}))[0];l&&l.fieldName&&(this.activeData.__config__.label=l.fieldName,this.$forceUpdate())}},inputFieldChange:function(e,t,a){if(e){var i=!1,l=!1;if(a){var o=function i(o,n){o&&(o.__config__&&o.__config__.children&&Array.isArray(o.__config__.children)&&i(o.__config__.children,o),Array.isArray(o)&&o.forEach((function(e){return i(e,n)})),n&&n.__config__&&"table"==n.__config__.jnpfKey&&o.__vModel__&&o.__vModel__.toLowerCase()===e.toLowerCase()&&o.__config__.formId!==t&&o.__config__.parentVModel===a&&(l=!0))};o(Object(L["a"])())}else{var n=function a(l,o){l&&(l.__config__&&"table"!==l.__config__.jnpfKey&&l.__config__.children&&Array.isArray(l.__config__.children)&&a(l.__config__.children,l),Array.isArray(l)&&l.forEach((function(e){return a(e,o)})),l.__vModel__&&l.__vModel__.toLowerCase()===e.toLowerCase()&&l.__config__.formId!==t&&(i=!0))};n(Object(L["a"])())}if(i)return this.$message.warning("字段【".concat(e,"】已存在,请重新输入!")),void(this.activeData.__vModel__="");l&&(this.$message.warning("子表字段【".concat(e,"】已存在,请重新输入!")),this.activeData.__vModel__="")}},tableChange:function(){this.activeData.__vModel__="",this.setDefaultOptions()},changeStorage:function(){var e=this;this.activeData.__vModel__="",0==this.activeData.isStorage&&(this.activeData.__vModel__=""),this.$store.getters.hasTable||1!=this.activeData.isStorage||this.$emit("setVModel",this.activeData);var t=function t(a){for(var i=0;i<a.length;i++){var l=a[i],o=l.__config__;"table"===o.jnpfKey&&l.__vModel__===e.activeData.__config__.parentVModel&&(e.activeData.__config__.relationTable=o.tableName),o&&"table"!=o.jnpfKey&&o.children&&Array.isArray(o.children)&&t(o.children)}};t(this.drawingList)},setDefaultOptions:function(){var e=this;if(this.$store.getters.hasTable&&(void 0!==this.activeData.__vModel__||1==this.activeData.isStorage)&&"table"!==this.activeData.__config__.jnpfKey)if(this.activeData.__config__.tableName&&this.activeData.__config__.tableName!==this.mainTable){var t=this.allTable.filter((function(t){return t.table===e.activeData.__config__.tableName}));if(t.length){var a=t[0],i=a.fields.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{realField:"jnpf_"+e.activeData.__config__.tableName+"_jnpf_"+t.field})}));this.fieldOptions=i.filter((function(e){return 1!=e.primaryKey}))}else{this.activeData.__config__.tableName=this.mainTable;var l=this.formItemList.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{realField:e.field})}));this.fieldOptions=l.filter((function(e){return 1!=e.primaryKey})),this.activeData.__vModel__=""}}else{var n=this.formItemList.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{realField:e.field})}));this.fieldOptions=n.filter((function(e){return 1!=e.primaryKey}))}},spanChange:function(e){this.formConf.span=e},onTableNameChange:function(e){if(e){var t=Object(L["a"])()||[],a=!1,i=function t(i){for(var l=0;l<i.length;l++){var o=i[l],n=o.__config__;if("table"===n.jnpfKey&&n.tableName===e){a=!0;break}n&&"table"!=n.jnpfKey&&n.children&&Array.isArray(n.children)&&t(n.children)}};if(i(t),a)return this.$message.warning("子表【".concat(e,"】已存在,请重新选择!")),void(this.activeData.__config__.tableName="");for(var l=0;l<this.activeData.__config__.children.length;l++)this.$set(this.activeData.__config__.children[l].__config__,"relationTable",e),this.$set(this.activeData.__config__.children[l],"__vModel__","")}},onBorderWidthChange:function(e){var t=this;e||this.$nextTick((function(){return t.$set(t.activeData.__config__,"borderWidth",1)}))},getDictionaryType:function(){var e=this;Object(O["m"])().then((function(t){e.dictionaryOptions=t.data.list.filter((function(e){return e.children&&e.children.length}))}))},getDataInterfaceSelector:function(){var e=this;Object($["p"])().then((function(t){e.dataInterfaceOptions=t.data}))},getPrintTplList:function(){var e=this;this.$store.dispatch("base/getPrintFormTree").then((function(t){var a=t.filter((function(e){return e.children&&e.children.length}));e.printTplList=a.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{hasChildren:!0})}))}))},getTipText:function(e){var t="";switch(e){case"change":t="发生变化时触发";break;case"blur":t="失去焦点时触发";break;case"click":t="点击时触发";break;case"tabClick":t="面板点击时触发";break;default:t="";break}return t},updateScript:function(e){this.isConf?this.formConf.funcs[this.activeFunc]=e:this.activeData.on[this.activeFunc]=e},editFunc:function(e,t,a){this.activeScript=e,this.activeFunc=t,this.isConf=a||!1,this.formScriptVisible=!0},openFieldDialog:function(){var e=this,t="";t=this.activeData.__config__.isSubTable?this.activeData.__config__.relationTable:this.activeData.__config__.tableName;var a=this.$store.state.generator.dataBase||"0";this.fieldDialogVisible=!0,this.$nextTick((function(){e.$refs.fieldDialog.init(a,t)}))},updateFieldOptions:function(){var e=Object(T["a"])(Object(k["a"])().mark((function e(t){var a,i,l,o,n,s;return Object(k["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="",a=this.activeData.__config__.isSubTable?this.activeData.__config__.relationTable:this.activeData.__config__.tableName,i=0,l=this.getFormInfo().type,3!=l&&4!=l&&5!=l||(i=1),e.next=6,Object(I["d"])(this.getFormInfo().dbLinkId,a,i);case 6:o=e.sent,n=o.data.list,s=0;case 9:if(!(s<this.allTable.length)){e.next=16;break}if(this.allTable[s].table!==a){e.next=13;break}return this.allTable[s].fields=n,e.abrupt("break",16);case 13:s++,e.next=9;break;case 16:this.activeData.__config__.isSubTable?this.subTable=this.allTable.filter((function(e){return"0"==e.typeId})):(this.activeData.__config__.tableName===this.mainTable&&(this.formItemList=n),this.setDefaultOptions());case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onBarcodeTextChange:function(e){if(e){var t=/^[A-Za-z0-9]+$/;t.test(e)||this.$message({message:"固定值请输入数字或者英文字母",type:"error",duration:1500})}},onRuleChange:function(e,t){if(!e)return this.activeData.__config__.rule="",void(this.activeData.__config__.ruleName="");this.activeData.__config__.rule!==e&&(this.activeData.__config__.rule=e,this.activeData.__config__.ruleName=t.fullName)},addComponent:function(e,t){this.$emit("copyItem",e,t,!1)}}},Lo=No,Oo=(a("e75f"),a("cb8b"),Object(y["a"])(Lo,x,C,!1,null,"210f889e",null)),$o=Oo.exports,Io=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,"append-to-body":"",title:"预览",width:e.formConf.generalWidth},on:{open:e.onOpen,close:e.close}},"el-dialog",e.$attrs,!1),e.$listeners),[a("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formConf},on:{submit:e.submitForm}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v(e._s(e.formConf.cancelButtonText||"取 消"))]),a("el-button",{attrs:{type:"primary"},on:{click:e.handelConfirm}},[e._v(e._s(e.formConf.confirmButtonText||"确 定")+"\n    ")])],1)],1)},jo=[],Mo=a("49aa"),Vo={components:{Parser:Mo["a"]},props:["formData"],data:function(){return{key:+new Date,formConf:{}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{onOpen:function(){this.key=+new Date,this.formConf=this.formData},onClose:function(){},close:function(e){this.destroyStyle(),this.$emit("update:visible",!1)},handelConfirm:function(){this.$refs.dynamicForm&&this.$refs.dynamicForm.submitForm()},fillFormData:function(e,t){var a=function e(a){for(var i=0;i<a.length;i++){var l=a[i];if(l.__vModel__){var o=t[l.__vModel__];null!==o&&void 0!==o&&(l.__config__.defaultValue=o)}l.__config__&&"table"!==l.__config__.jnpfKey&&l.__config__.children&&Array.isArray(l.__config__.children)&&e(l.__config__.children)}};a(e.fields)},submitForm:function(e,t){console.log("submitForm提交数据：",e),t&&"function"===typeof t&&t()},destroyStyle:function(){document.getElementById("styleId")&&document.getElementById("styleId").remove()}}},Ao=Vo,Po=Object(y["a"])(Ao,Io,jo,!1,null,null,null),Jo=Po.exports,Ro=a("2638"),Ko=a.n(Ro),Bo={},Eo={itemBtns:function(e,t,a,i){var l="colFormItem"===t.__config__.layout&&this.formConf.gutter?this.formConf.gutter:15,o=l/2,n=this.$listeners,s=n.copyItem,r=n.deleteItem;return[e("span",{class:"drawing-item-copy",style:{"--rightDistance":o+50+"px"},attrs:{title:"复制"},on:{click:function(e){s(t,i),e.stopPropagation()}}},[e("i",{class:"el-icon-copy-document"})]),e("el-popconfirm",{attrs:{title:"确定删除该组件？"},class:"drawing-item-delete",style:{"--rightDistance":o+18+"px"},on:{confirm:function(e){r(a,i)}}},[e("span",{attrs:{title:"删除"},slot:"reference",style:"width:100%;height:100%;display:inline-block"},[e("i",{class:"el-icon-delete"})])])]},tableSetting:function(e,t){var a=this.$listeners,i=a.addRow,l=a.addCol;return[e("span",{class:"drawing-item-add-row",attrs:{title:"插入行"},on:{click:function(e){i(t),e.stopPropagation()}}},[e("i",{class:"icon-ym icon-ym-generator-insertRow"})]),e("span",{class:"drawing-item-add-col",attrs:{title:"插入列"},on:{click:function(e){l(t),e.stopPropagation()}}},[e("i",{class:"icon-ym icon-ym-generator-insertCol"})])]},cellSetting:function(e,t,a,i){var l=this.$listeners,o=l.handleTableSetting,n=l.handleShowMenu,s=this.$attrs,r=s.mergeLeftColDisabled,c=s.mergeRightColDisabled,d=s.mergeWholeRowDisabled,u=s.mergeAboveRowDisabled,p=s.mergeBelowRowDisabled,f=s.mergeWholeColDisabled,m=s.undoMergeRowDisabled,_=s.undoMergeColDisabled,h=s.deleteWholeColDisabled,v=s.deleteWholeRowDisabled;return[e("span",{class:"drawing-item-cell"},[e("el-dropdown",{attrs:{trigger:"click"},on:{command:function(e){o(e,t)},"visible-change":function(e){e&&n(t,a,i)}}},[e("i",{class:"icon-ym icon-ym-generator-TableSettings"}),e("el-dropdown-menu",{slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"1"}},["插入左侧列"]),e("el-dropdown-item",{attrs:{command:"2"}},["插入右侧列"]),e("el-dropdown-item",{attrs:{command:"3"}},["插入上方行"]),e("el-dropdown-item",{attrs:{command:"4"}},["插入下方行"]),e("el-dropdown-item",{attrs:{command:"5",disabled:r,divided:!0}},["向左合并"]),e("el-dropdown-item",{attrs:{command:"6",disabled:c}},["向右合并"]),e("el-dropdown-item",{attrs:{command:"7",disabled:d}},["合并整行"]),e("el-dropdown-item",{attrs:{command:"8",disabled:u,divided:!0}},["向上合并"]),e("el-dropdown-item",{attrs:{command:"9",disabled:p}},["向下合并"]),e("el-dropdown-item",{attrs:{command:"10",disabled:f}},["合并整列"]),e("el-dropdown-item",{attrs:{command:"11",disabled:m,divided:!0}},["撤销行合并"]),e("el-dropdown-item",{attrs:{command:"12",disabled:_}},["撤销列合并"]),e("el-dropdown-item",{attrs:{command:"13",disabled:h,divided:!0}},["删除整列"]),e("el-dropdown-item",{attrs:{command:"14",disabled:v}},["删除整行"])])])])]}},zo={colFormItem:function(e,t,a,i){var l=this,o=this.$listeners.activeItem,n=t.__config__,s=this.activeId===n.formId?"drawing-item active-from-item":"drawing-item";this.formConf.unFocusedComponentBorder&&(s+=" unfocus-bordered");var r=n.labelWidth?"".concat(n.labelWidth,"px"):null,c=n.label?n.parentVModel?n.label:n.label+(this.formConf.labelSuffix||""):"";!1===n.showLabel&&(r="0");var d="cascader"===n.jnpfKey?e("JnpfCascader",Ko()([{},{props:{props:t.props}},{attrs:{placeholder:t.placeholder,options:t.options,multiple:t.multiple,disabled:t.disabled,"show-all-levels":t.showAllLevels,separator:t.separator,clearable:t.clearable,filterable:t.filterable},style:t.style,key:n.renderKey,model:{value:n.defaultValue,callback:function(e){l.$set(n,"defaultValue",e)}}}])):e(u["a"],{key:n.renderKey,attrs:{conf:t},on:{input:function(e){l.$set(n,"defaultValue",e)}}});return e("el-col",{attrs:{span:n.span},class:s,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("jnpf-form-tip-item",{attrs:{"label-width":r,"tip-label":n.label&&n.showLabel?n.tipLabel:"",label:n.showLabel?c:"",required:n.required}},[d]),Eo.itemBtns.apply(this,arguments)])},rowFormItem:function(e,t,a,i){var l=this,o=this.$listeners.activeItem,n=this.$attrs,s=n.put,r=n.end,d=this.activeId===t.__config__.formId?"drawing-row-item active-from-item":"drawing-row-item";if("tab"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("el-tabs",{attrs:{type:t.type,"tab-position":t.tabPosition},model:{value:t.__config__.active,callback:function(e){l.$set(t.__config__,"active",e)}}},[t.__config__.children.map((function(a,i){var o=Wo.apply(l,[e,a,i,t]),n={name:"componentsGroup",put:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.apply(void 0,t.concat([a]))}},d=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.apply(void 0,t.concat([Bo,a]))},u="";return a.__config__.children.length||(u=e("div",{class:"table-tip tab-tip"},["请将组件拖到此区域(可拖多个组件)"])),e("el-tab-pane",{key:a.name,attrs:{name:a.name,label:a.title}},[e("el-col",[u,e("el-row",{attrs:{gutter:t.__config__.gutter},style:"padding-top:15px"},[e(c.a,{attrs:{list:a.__config__.children,animation:340,group:n},on:{end:d},class:"drag-wrapper"},[o])])])])}))]),Eo.itemBtns.apply(this,arguments)])]);if("collapse"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("el-collapse",{attrs:{accordion:t.accordion},model:{value:t.__config__.active,callback:function(e){l.$set(t.__config__,"active",e)}}},[t.__config__.children.map((function(a,i){var o=Wo.apply(l,[e,a,i,t]),n={name:"componentsGroup",put:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.apply(void 0,t.concat([a]))}},d=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.apply(void 0,t.concat([Bo,a]))},u="";return a.__config__.children.length||(u=e("div",{class:"table-tip card-tip"},["请将组件拖到此区域(可拖多个组件)"])),e("el-collapse-item",{key:a.name,attrs:{title:a.title,name:a.name}},[e("el-col",{style:"position:relative;padding-top:15px"},[u,e("el-row",{attrs:{gutter:t.__config__.gutter}},[e(c.a,{attrs:{list:a.__config__.children,animation:340,group:n},on:{end:d},class:"drag-wrapper"},[o])])])])}))]),Eo.itemBtns.apply(this,arguments)])]);if("tableGrid"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("table",{class:"table-grid"},[e("tbody",[t.__config__.children.map((function(a,i){return e("tr",[a.__config__.children.map((function(n,d){var u=Wo.apply(l,[e,n,d,a]),p={name:"componentsGroup",put:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return s.apply(void 0,t.concat([n]))}},f=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.apply(void 0,t.concat([Bo,n]))},m=l.activeId===n.__config__.formId?"drawing-row-item active-from-item":"drawing-row-item";return n.__config__.merged?"":e("td",{class:m,attrs:{colspan:n.__config__.colspan||1,rowspan:n.__config__.rowspan||1},on:{click:function(e){o(n),e.stopPropagation()}}},[e("el-col",[e("el-row",{attrs:{gutter:t.__config__.gutter}},[e(c.a,{attrs:{list:n.__config__.children,animation:340,group:p},on:{end:f},class:"table-cell"},[u])])]),Eo.cellSetting.apply(l,[e,t,i,d])])}))])}))])]),Eo.tableSetting.apply(this,arguments),Eo.itemBtns.apply(this,arguments)])]);var u=Wo.apply(this,arguments),p={name:"componentsGroup",put:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return s.apply(void 0,a.concat([t]))}},f=function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return r.apply(void 0,a.concat([Bo,t]))};if("row"===t.__config__.jnpfKey){"flex"===t.type&&(u=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[u]));var m="";return t.__config__.children.length||(m=e("div",{class:"table-tip"},["请将组件拖到此区域(可拖多个组件)"])),e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("span",{class:"component-name"},[t.__config__.componentName," "]),m,e(c.a,{attrs:{list:t.__config__.children,animation:340,group:p},on:{end:f},class:"drag-wrapper",style:"margin-top:20px"},[u]),Eo.itemBtns.apply(this,arguments)])])}if("table"===t.__config__.jnpfKey){var _="";t.__config__.children.length||(_=e("div",{class:"table-tip"},["请将组件拖到此区域(可拖多个组件)"]));var h=t.__config__.label;return t.__config__.tipLabel&&t.__config__.label&&(h=e("span",{slot:"label"},[t.__config__.label,e("el-tooltip",{attrs:{placement:"top",content:t.__config__.tipLabel}},[e("a",{class:"el-icon-question tooltip-question content-name"})])])),e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d+" drawing-row-item-table",nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("span",{class:"component-name"},[h," "]),_,e("el-form",{attrs:{"label-position":"top"}},[e(c.a,{attrs:{list:t.__config__.children,animation:340,group:p,clone:qo},class:"drag-wrapper table-wrapper table-wrapper-web",on:{end:f}},[u])]),Eo.itemBtns.apply(this,arguments)])])}if("card"===t.__config__.jnpfKey){var v="";t.__config__.children.length||(v=e("div",{class:"table-tip card-tip"},["请将组件拖到此区域(可拖多个组件)"]));var b=t.header;t.__config__.tipLabel&&t.__config__.label&&(b=e("span",{slot:"label"},[t.header,e("el-tooltip",{attrs:{placement:"top",content:t.__config__.tipLabel}},[e("a",{class:"el-icon-question tooltip-question content-name"})])]));var g="";return t.header&&(g=e("div",{slot:"header"},[e("span",[b])])),e("el-col",{attrs:{span:t.__config__.span}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("el-card",{attrs:{shadow:t.shadow,header:t.header}},[g,e("el-col",[e("el-row",{attrs:{gutter:t.__config__.gutter},nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[v,e(c.a,{attrs:{list:t.__config__.children,animation:340,group:p},on:{end:f},class:"drag-wrapper"},[u])])])]),Eo.itemBtns.apply(this,arguments)])])}}};function qo(e){Bo=e}function Wo(e,t,a,i){var l=this,o=t.__config__;return Array.isArray(o.children)?o.children.map((function(t,a){var i=zo[t.__config__.layout];return i?i.call(l,e,t,a,o.children):Uo.call(l)})):null}function Uo(){throw new Error("没有与".concat(this.element.__config__.layout,"匹配的layout"))}var Ho,Go,Qo={components:{render:u["a"],draggable:c.a},props:["element","index","drawingList","activeId","formConf"],render:function(e){var t=zo[this.element.__config__.layout];return t?t.call(this,e,this.element,this.index,this.drawingList):Uo.call(this)}},Yo=Qo,Zo=Object(y["a"])(Yo,Ho,Go,!1,null,null,null),Xo=Zo.exports,en={},tn={itemBtns:function(e,t,a,i){var l="colFormItem"===t.__config__.layout&&this.formConf.gutter?this.formConf.gutter:15,o=l/2,n=this.$listeners,s=n.copyItem,r=n.deleteItem;return[e("span",{class:"drawing-item-copy",style:{"--rightDistance":o+50+"px"},attrs:{title:"复制"},on:{click:function(e){s(t,i),e.stopPropagation()}}},[e("i",{class:"el-icon-copy-document"})]),e("el-popconfirm",{attrs:{title:"确定删除该组件？"},style:{"--rightDistance":o+18+"px"},class:"drawing-item-delete",on:{confirm:function(e){r(a,i)}}},[e("span",{attrs:{title:"删除"},slot:"reference",style:"width:100%;height:100%;display:inline-block"},[e("i",{class:"el-icon-delete"})])])]}},an={colFormItem:function(e,t,a,i){var l=this.$listeners.activeItem,o=t.__config__,n=t.__vModel__,s=this.activeId===o.formId?"drawing-item active-from-item":"drawing-item";this.formConf.unFocusedComponentBorder&&(s+=" unfocus-bordered");var r=o.labelWidth?"".concat(o.labelWidth,"px"):null,c=o.label?o.parentVModel?o.label:o.label+(this.formConf.labelSuffix||""):"";return!1===o.showLabel&&(r="0"),"text"===o.jnpfKey?e("el-col",{attrs:{span:24},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":r,label:o.showLabel?c:"",required:o.required}},[t.content]),tn.itemBtns.apply(this,arguments)]):"link"===o.jnpfKey?e("el-col",{attrs:{span:24},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":"0"}},[e("jnpf-link",{attrs:{content:t.content,href:t.href,target:t.target,textStyle:t.textStyle}})]),tn.itemBtns.apply(this,arguments)]):"alert"===o.jnpfKey?e("el-col",{attrs:{span:24},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":"0"}},[e("el-alert",{attrs:{title:t.title,type:t.type,closable:t.closable,"show-icon":t.showIcon}})]),tn.itemBtns.apply(this,arguments)]):"groupTitle"===o.jnpfKey?e("el-col",{attrs:{span:24},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":"0"}},[t.content]),tn.itemBtns.apply(this,arguments)]):"barcode"===o.jnpfKey?e("el-col",{attrs:{span:24},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":r,label:o.showLabel?o.label:"",required:o.required}},[e("jnpf-barcode",{attrs:{format:t.format,lineColor:t.lineColor,background:t.background,width:t.width,height:t.height,staticText:t.staticText}})]),tn.itemBtns.apply(this,arguments)]):"qrcode"===o.jnpfKey?e("el-col",{attrs:{span:24},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":r,label:o.showLabel?c:"",required:o.required}},[e("jnpf-qrcode",{attrs:{size:t.size,colorLight:t.colorLight,colorDark:t.colorDark,staticText:t.staticText}})]),tn.itemBtns.apply(this,arguments)]):"button"===o.jnpfKey?e("el-col",{attrs:{span:24},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":"0"}},[e("jnpf-button",{attrs:{align:t.align,buttonText:t.buttonText,type:t.type,disabled:t.disabled}})]),tn.itemBtns.apply(this,arguments)]):e("el-col",{attrs:{span:24},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("jnpf-form-tip-item",{attrs:{"label-width":r,"tip-label":o.label&&o.showLabel?o.tipLabel:"",label:o.showLabel?c:"",required:o.required}},[n]),tn.itemBtns.apply(this,arguments)])},rowFormItem:function(e,t,a,i){var l=this,o=this.$listeners.activeItem,n=this.$attrs,s=n.put,r=n.end,d=this.activeId===t.__config__.formId?"drawing-row-item active-from-item":"drawing-row-item";if("tab"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:24}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("el-tabs",{attrs:{type:t.type,"tab-position":t.tabPosition},model:{value:t.__config__.active,callback:function(e){l.$set(t.__config__,"active",e)}}},[t.__config__.children.map((function(a,i){var o=on.apply(l,[e,a,i,t]),n={name:"componentsGroup",put:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.apply(void 0,t.concat([a]))}},d=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.apply(void 0,t.concat([en,a]))},u="";return a.__config__.children.length||(u=e("div",{class:"table-tip tab-tip"},["请将组件拖到此区域(可拖多个组件)"])),e("el-tab-pane",{key:a.name,attrs:{name:a.name,label:a.title}},[e("el-col",[u,e("el-row",{attrs:{gutter:t.__config__.gutter},style:"padding-top:15px"},[e(c.a,{attrs:{list:a.__config__.children,animation:340,group:n},on:{end:d},class:"drag-wrapper"},[o])])])])}))]),tn.itemBtns.apply(this,arguments)])]);if("collapse"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:24}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("el-collapse",{attrs:{accordion:t.accordion},model:{value:t.__config__.active,callback:function(e){l.$set(t.__config__,"active",e)}}},[t.__config__.children.map((function(a,i){var o=on.apply(l,[e,a,i,t]),n={name:"componentsGroup",put:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.apply(void 0,t.concat([a]))}},d=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.apply(void 0,t.concat([en,a]))},u="";return a.__config__.children.length||(u=e("div",{class:"table-tip card-tip"},["请将组件拖到此区域(可拖多个组件)"])),e("el-collapse-item",{key:a.name,attrs:{title:a.title,name:a.name}},[e("el-col",{style:"position:relative"},[u,e("el-row",{attrs:{gutter:t.__config__.gutter},style:"padding-top:15px"},[e(c.a,{attrs:{list:a.__config__.children,animation:340,group:n},on:{end:d},class:"drag-wrapper"},[o])])])])}))]),tn.itemBtns.apply(this,arguments)])]);if("tableGrid"===t.__config__.jnpfKey)return e("el-col",{attrs:{span:24}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,style:"padding-top:30px",nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("span",{class:"component-name"},[t.__config__.label]),e("div",{class:" drag-wrapper table-wrapper"},[e("div",{class:"table-tip"},["请在桌面端设计表格（移动端不支持）"])]),tn.itemBtns.apply(this,arguments)])]);var u=on.apply(this,arguments),p={name:"componentsGroup",put:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return s.apply(void 0,a.concat([t]))}},f=function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return r.apply(void 0,a.concat([en,t]))};if("row"===t.__config__.jnpfKey){"flex"===t.type&&(u=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[u]));var m="";return t.__config__.children.length||(m=e("div",{class:"table-tip"},["请将组件拖到此区域(可拖多个组件)"])),e("el-col",{attrs:{span:24}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,style:"padding-top:30px",nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("span",{class:"component-name"},[t.__config__.componentName]),m,e(c.a,{attrs:{list:t.__config__.children,animation:340,group:p},on:{end:f},class:"drag-wrapper"},[u]),tn.itemBtns.apply(this,arguments)])])}if("card"===t.__config__.jnpfKey){var _="";t.__config__.children.length||(_=e("div",{class:"table-tip"},["请将组件拖到此区域(可拖多个组件)"]));var h=t.header;return t.__config__.tipLabel&&(h=e("span",{slot:"label"},[t.header,e("el-tooltip",{attrs:{placement:"top",content:t.__config__.tipLabel}},[e("a",{class:"el-icon-question tooltip-question content-name"})])])),e("el-col",{attrs:{span:24}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,style:"padding-top:30px",nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("span",{class:"component-name"},[h]),_,e(c.a,{attrs:{list:t.__config__.children,animation:340,group:p},on:{end:f},class:"drag-wrapper"},[u]),tn.itemBtns.apply(this,arguments)])])}if("table"===t.__config__.jnpfKey){var v="";t.__config__.children.length||(v=e("div",{class:"table-tip"},["请将组件拖到此区域(可拖多个组件)"]));var b=t.__config__.label;return t.__config__.tipLabel&&(b=e("span",{slot:"label"},[t.__config__.label,e("el-tooltip",{attrs:{placement:"top",content:t.__config__.tipLabel}},[e("a",{class:"el-icon-question tooltip-question content-name"})])])),e("el-col",{attrs:{span:24}},[e("el-row",{attrs:{gutter:t.__config__.gutter},class:d,style:"padding-top:30px",nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("span",{class:"component-name"},[b]),v,e(c.a,{attrs:{list:t.__config__.children,animation:340,group:p,clone:ln},class:"drag-wrapper table-wrapper",on:{end:f}},[u]),tn.itemBtns.apply(this,arguments)])])}}};function ln(e){en=e}function on(e,t,a,i){var l=this,o=t.__config__;return Array.isArray(o.children)?o.children.map((function(t,a){var i=an[t.__config__.layout];return i?i.call(l,e,t,a,o.children):nn.call(l)})):null}function nn(){throw new Error("没有与".concat(this.element.__config__.layout,"匹配的layout"))}var sn,rn,cn,dn={components:{render:u["a"],draggable:c.a},props:["element","index","drawingList","activeId","formConf"],render:function(e){var t=an[this.element.__config__.layout];return t?t.call(this,e,this.element,this.index,this.drawingList):nn.call(this)}},un=dn,pn=Object(y["a"])(un,sn,rn,!1,null,null,null),fn=pn.exports,mn=a("61f7"),_n=(Object(L["b"])(),{components:{draggable:c.a,render:u["a"],JsonDrawer:w,RightPanel:$o,DraggableItem:Xo,DraggableItemApp:fn,Preview:Jo},props:["conf","modelType","webType","dbType","formInfo"],data:function(){return{idGlobal:100,formConf:Object(N["c"])(S["a"]),inputComponents:S["b"],selectComponents:S["d"],systemComponents:S["e"],layoutComponents:S["c"],labelWidth:100,drawingList:[],drawingData:{},activeId:null,drawerVisible:!1,previewVisible:!1,formData:{},dialogVisible:!1,jsonDrawerVisible:!1,generateConf:null,showFileName:!1,activeData:{},saveDrawingListDebounce:Object(d["debounce"])(340,L["c"]),saveIdGlobalDebounce:Object(d["debounce"])(340,L["d"]),isDrawingListChange:!0,showTip:!0,activeItem:{},activeTableItem:{},showType:"pc",leftComponents:[{title:"基础控件",list:S["b"]},{title:"高级控件",list:S["d"]},{title:"系统控件",list:S["e"]},{title:"布局控件",list:S["c"]}],rowIndex:0,colIndex:0,rowData:[],colData:[],selectCell:{__config__:{rowspan:1,colspan:1}}}},provide:function(){var e=this;return{getShowType:function(){return e.showType}}},computed:{mergeLeftColDisabled:function(){return!this.colData.length||(this.colIndex<=0||this.colData[this.colIndex-1].__config__.rowspan!==this.selectCell.__config__.rowspan)},mergeRightColDisabled:function(){if(!this.colData.length)return!0;var e=this.colIndex+this.selectCell.__config__.colspan;return this.colIndex>=this.colData.length-1||e>this.colData.length-1||this.colData[e].__config__.rowspan!==this.selectCell.__config__.rowspan},mergeWholeRowDisabled:function(){if(!this.selectCell.__config__||!this.rowData.length)return!0;for(var e=this.rowData[this.rowIndex].__config__.children,t=e[0].__config__.rowspan,a=!1,i=1;i<e.length;i++)if(e[i].__config__.rowspan!==t){a=!0;break}return!!a||(this.colData.length<=1||this.colData.length===this.selectCell.__config__.colspan)},mergeAboveRowDisabled:function(){return!this.rowData.length||this.rowIndex<=0||(this.rowData[this.rowIndex-1].__config__.children[this.colIndex].__config__.colspan!==this.selectCell.__config__.colspan||this.rowData[this.rowIndex-1].__config__.children[this.colIndex].__config__.merged)},mergeBelowRowDisabled:function(){if(!this.rowData.length||this.rowIndex==this.rowData.length)return!0;var e=this.rowIndex+this.selectCell.__config__.rowspan;return this.rowIndex>=this.rowData.length-1||e>this.rowData.length-1||this.rowData[e].__config__.children[this.colIndex].__config__.colspan!==this.selectCell.__config__.colspan||this.rowData[e].__config__.children[this.colIndex].__config__.merged},mergeWholeColDisabled:function(){if(!this.rowData.length)return!0;for(var e=this.rowData[0].__config__.children[this.colIndex].__config__.colspan,t=!1,a=1;a<this.rowData.length;a++)if(this.rowData[a].__config__.children[this.colIndex].__config__.colspan!==e){t=!0;break}return!!t||(this.rowData.length<=1||this.rowData.length===this.selectCell.__config__.rowspan)},undoMergeRowDisabled:function(){return this.selectCell.__config__.merged||this.selectCell.__config__.colspan<=1},undoMergeColDisabled:function(){return this.selectCell.__config__.merged||this.selectCell.__config__.rowspan<=1},deleteWholeColDisabled:function(){if(!this.rowData.length)return!0;if(this.rowData[0].__config__.children[0].__config__.colspan===this.rowData[0].__config__.children.length)return!0;for(var e=this.rowData[0].__config__.children[this.colIndex].__config__.colspan,t=!1,a=1;a<this.rowData.length;a++)if(this.rowData[a].__config__.children[this.colIndex].__config__.colspan!==e){t=!0;break}return!!t||this.selectCell.__config__.colspan===this.colData.length},deleteWholeRowDisabled:function(){if(!this.rowData.length||this.rowData.length<=this.rowIndex)return!0;if(this.rowData[0].__config__.children[0].__config__.rowspan===this.rowData.length)return!0;for(var e=this.rowData[this.rowIndex].__config__.children[0].__config__.rowspan,t=!1,a=1;a<this.rowData[this.rowIndex].__config__.children.length;a++)if(this.rowData[this.rowIndex].__config__.children[a].__config__.rowspan!==e){t=!0;break}return!!t||(1===this.rowData.length||this.selectCell.__config__.rowspan===this.rowData.length)},getFormInfo:function(){return this.formInfo||{}}},watch:{"activeData.__config__.label":function(e,t){},activeId:{handler:function(e){e},immediate:!0},drawingList:{handler:function(e){this.saveDrawingListDebounce(e),0===e.length&&(this.idGlobal=100,this.activeData={}),this.$emit("drawingListChange")},deep:!0},idGlobal:{handler:function(e){this.formConf.idGlobal=e},immediate:!0}},created:function(){"object"===Object(s["a"])(this.conf)&&null!==this.conf?(this.isDrawingListChange=!1,this.drawingList=Object(N["c"])(this.conf.fields),Object.assign(this.formConf,this.conf),this.idGlobal=this.formConf.idGlobal,this.drawingList.length&&this.activeFormItem(this.drawingList[0])):(this.drawingList=[],this.idGlobal=100),1!=this.modelType&&6!=this.modelType||(this.leftComponents[1].list=[].concat(Object(n["a"])(this.leftComponents[1].list),[F["a"]]),this.leftComponents[0].list=[].concat(Object(n["a"])(this.leftComponents[0].list),Object(n["a"])(F["i"]))),2==this.webType&&3!=this.modelType&&6!=this.modelType||(this.formConf.popupType="fullScreen")},mounted:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}},methods:{getData:function(){var e=this;return new Promise((function(t,a){if(e.drawingList.length){var i=function e(t){for(var i=0;i<t.length;i++){var l=t[i],o=l.__config__;if("colFormItem"===o.layout&&!F["h"].includes(o.jnpfKey)&&!l.__vModel__){a({msg:"".concat(o.label,"的控件字段不能为空"),target:1});break}if(1==l.isStorage&&!l.__vModel__){a({msg:"".concat(o.label,"的控件字段不能为空"),target:1});break}if("billRule"===o.jnpfKey&&!o.rule){a({msg:"单据组件“单据模板”属性为必填项",target:1});break}if("relationForm"===o.jnpfKey){if(!l.modelId){a({msg:"关联表单控件“关联功能”属性为必填项",target:1});break}if(!l.relationField){a({msg:"关联表单控件“显示字段”属性为必填项",target:1});break}}if("popupSelect"===o.jnpfKey){if(!l.interfaceId){a({msg:"弹窗选择控件“远端数据”属性为必填项",target:1});break}if(!l.propsValue){a({msg:"弹窗选择控件“储存字段”属性为必填项",target:1});break}if(!l.relationField){a({msg:"弹窗选择控件“显示字段”属性为必填项",target:1});break}}if("popupTableSelect"===o.jnpfKey){if(!l.interfaceId){a({msg:"下拉表格控件“远端数据”属性为必填项",target:1});break}if(!l.propsValue){a({msg:"下拉表格控件“储存字段”属性为必填项",target:1});break}if(!l.relationField){a({msg:"下拉表格控件“显示字段”属性为必填项",target:1});break}}if("autoComplete"===o.jnpfKey){if(!l.interfaceId){a({msg:"下拉补全控件“远端数据”属性为必填项",target:1});break}if(!l.relationField){a({msg:"下拉补全控件“显示字段”属性为必填项",target:1});break}}if("rowFormItem"===o.layout&&!o.children.length){a({msg:"您的".concat(o.label,"控件中没有组件"),target:1});break}if(o&&o.children&&Array.isArray(o.children)&&e(o.children),"uploadFile"===o.jnpfKey&&"selfPath"===l.pathType&&0===l.isAccount&&!l.folder){a({msg:"请设置自定义路径",target:1});break}if("uploadImg"===o.jnpfKey&&"selfPath"===l.pathType&&0===l.isAccount&&!l.folder){a({msg:"请设置自定义路径",target:1});break}if("link"===o.jnpfKey&&l.href&&!Object(mn["d"])(l.href)){a({msg:"请输入正确的链接地址",target:1});break}}};i(e.drawingList),e.AssembleFormData(),!e.formData.hasPrintBtn||e.formData.printId&&e.formData.printId.length||a({msg:"请选择打印模板",target:1}),t({formData:e.formData,target:1})}else a({msg:"表单不允许为空",target:1})}))},shouldClone:function(e,t,a,i,l){var o=a._underlying_vm_,n="common"===l.__config__.cmpType&&"row"===l.__config__.jnpfKey;if(n)return!0;if("custom"===l.cmpType)return!1;if("table"===l.__config__.jnpfKey){if(F["g"].includes(o.__config__.jnpfKey))return!1;if("rowFormItem"===o.__config__.layout)return!1;if(this.$store.getters.hasTable&&!l.__config__.tableName)return this.showTip&&(this.$message.warning("子表请先关联数据表"),this.showTip=!1),!1;this.activeItem=o,this.activeTableItem=l}return"tableGridTd"!==l.__config__.jnpfKey||"tableGrid"!==o.__config__.jnpfKey},activeFormItem:function(e){this.activeData=e,this.activeId=e.__config__.formId},onEnd:function(e){this.showTip=!0,e.from!==e.to&&(this.activeData=cn,this.activeId=cn.__config__.formId),e.to.className.indexOf("table-wrapper")>-1&&(this.$set(this.activeItem.__config__,"isSubTable",!0),this.$set(this.activeItem.__config__,"parentVModel",this.activeTableItem.__vModel__),this.$store.getters.hasTable&&(this.$set(this.activeItem.__config__,"relationTable",this.activeTableItem.__config__.tableName),this.activeItem.__vModel__=""))},onCenterEnd:function(e){this.showTip=!0,e.from!=e.to&&e.to.className.indexOf("table-wrapper")>-1&&(this.$set(this.activeItem.__config__,"isSubTable",!0),this.$set(this.activeItem.__config__,"parentVModel",this.activeTableItem.__vModel__),this.$store.getters.hasTable&&(this.$set(this.activeItem.__config__,"relationTable",this.activeTableItem.__config__.tableName),this.activeItem.__vModel__=""))},onTableEnd:function(e,t,a){e.from!=e.to&&(e.to.className.indexOf("table-wrapper")<0?(this.$set(this.activeItem.__config__,"isSubTable",!1),this.$set(this.activeItem.__config__,"parentVModel",""),this.$store.getters.hasTable&&(this.activeItem.__vModel__="")):(this.$set(this.activeItem.__config__,"isSubTable",!0),this.$set(this.activeItem.__config__,"parentVModel",this.activeTableItem.__vModel__),this.$store.getters.hasTable&&(this.$set(this.activeItem.__config__,"relationTable",this.activeTableItem.__config__.tableName),this.activeItem.__vModel__="")))},addComponent:function(e){if(!e.__config__.dragDisabled){var t=this.cloneComponent(e);this.drawingList.push(t),this.activeFormItem(t)}},cloneComponent:function(e){var t=Object(N["c"])(e),a=t.__config__;return a.span=this.formConf.span,this.createIdAndKey(t),cn=t,cn},createIdAndKey:function(e,t){var a=this,i=e.__config__;return i.formId=++this.idGlobal,i.renderKey=+new Date,"colFormItem"===i.layout?(this.$store.getters.hasTable?(F["h"].indexOf(i.jnpfKey)<0||1==e.isStorage)&&(e.__vModel__=""):(F["h"].indexOf(i.jnpfKey)<0||1==e.isStorage)&&(e.__vModel__=this.toggleVmodelCase("".concat(i.jnpfKey,"Field").concat(this.idGlobal))),t&&t.__vModel__&&"table"===t.__config__.jnpfKey&&(e.__config__.parentVModel=t.__vModel__)):"rowFormItem"===i.layout&&("table"===i.jnpfKey&&(e.__vModel__=this.toggleVmodelCase("".concat(i.jnpfKey,"Field").concat(this.idGlobal))),i.componentName="row".concat(this.idGlobal),!Array.isArray(i.children)&&(i.children=[])),Array.isArray(i.children)&&(i.children=i.children.map((function(t){return a.createIdAndKey(t,e)}))),e},setVModel:function(e){var t=e.__config__;e.__vModel__=this.toggleVmodelCase("".concat(t.jnpfKey,"Field").concat(t.formId))},toggleVmodelCase:function(e){var t=this.dbType||"";return t.toLowerCase()==="Oracle".toLowerCase()||t.toLowerCase()==="DM".toLowerCase()?e.toUpperCase():t.toLowerCase()==="PostgreSQL".toLowerCase()||t.toLowerCase()==="KingBaseES".toLowerCase()?e.toLowerCase():e},AssembleFormData:function(){this.formData=Object(o["a"])(Object(o["a"])({},this.formConf),{},{fields:Object(N["c"])(this.drawingList)})},empty:function(){var e=this;this.$confirm("确定要清空所有组件吗？","提示",{type:"warning"}).then((function(){e.drawingList=[],e.idGlobal=100})).catch((function(){}))},drawingItemCopy:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Object(N["c"])(e);i=this.createIdAndKey(i),t.push(i),a&&this.activeFormItem(i)},drawingItemDelete:function(e,t){var a=this;t.splice(e,1),this.$nextTick((function(){var e=a.drawingList.length;e&&a.activeFormItem(a.drawingList[e-1])}))},preview:function(){this.AssembleFormData(),this.previewVisible=!0},showJson:function(){this.AssembleFormData(),this.jsonDrawerVisible=!0},tagChange:function(e){var t=this;e=this.cloneComponent(e);var a=e.__config__;e.__vModel__=this.activeData.__vModel__,a.formId=this.activeId,a.span=this.activeData.__config__.span,this.activeData.__config__.tag=a.tag,this.activeData.__config__.tagIcon=a.tagIcon,this.activeData.__config__.document=a.document,Object(s["a"])(this.activeData.__config__.defaultValue)===Object(s["a"])(a.defaultValue)&&(a.defaultValue=this.activeData.__config__.defaultValue),Object.keys(e).forEach((function(a){void 0!==t.activeData[a]&&(e[a]=t.activeData[a])})),this.activeData=e,this.updateDrawingList(e,this.drawingList)},updateDrawingList:function(e,t){var a=this,i=t.findIndex((function(e){return e.__config__.formId===a.activeId}));i>-1?t.splice(i,1,e):t.forEach((function(t){Array.isArray(t.__config__.children)&&a.updateDrawingList(e,t.__config__.children)}))},refreshJson:function(e){this.drawingList=Object(N["c"])(e.fields),delete e.fields,this.formConf=e},relationChange:function(e){var t=function e(t){for(var a=0;a<t.length;a++){var i=t[a].__config__;t[a].relationField&&t[a].relationField===t[a].__vModel__&&(t[a].showField=""),i&&i.children&&Array.isArray(i.children)&&e(i.children)}};t(this.drawingList)},handleTableAddRow:function(e,t,a){var i=this,l=e.__config__.children,o=void 0===t?l.length:t+l[a].__config__.children[this.colIndex].__config__.rowspan-1,n=void 0===a?Object(N["c"])(l[l.length-1]):Object(N["c"])(l[a]);n.__config__.children.forEach((function(e){e.__config__.formId=++i.idGlobal,e.__config__.merged=!1,e.__config__.colspan=1,e.__config__.rowspan=1,e.__config__.children=[]})),n.__config__.formId=++this.idGlobal,n.__config__.jnpfKey="tableGridTr",l.splice(o,0,n)},handleTableAddCol:function(e,t,a){var i=this,l=e.__config__.children,o=void 0===t?l[0].__config__.children.length:t;l.forEach((function(e){var t={__config__:{jnpfKey:"tableGridTd",merged:!1,colspan:1,rowspan:1,formId:++i.idGlobal,children:[],backgroundColor:""}};e.__config__.children.splice(o,0,t)}))},mergeTableCol:function(e,t){var a=1==t?this.colIndex:this.colIndex+this.colData[this.colIndex].__config__.colspan,i=1==t?this.colIndex-this.colData[this.colIndex-1].__config__.colspan:this.colIndex,l=this.colData[a].__config__.children,o=this.colData[i].__config__.children;this.colData[i].__config__.children=[].concat(Object(n["a"])(o),Object(n["a"])(Object(N["c"])(l)));var s=1*this.colData[a].__config__.colspan+1*this.colData[i].__config__.colspan;this.setPropsOfMergedCols(i,s,this.selectCell.__config__.rowspan)},mergeWholeCol:function(){var e=this,t=this.colData.filter((function(e){return!e.merged&&e.__config__.children&&e.__config__.children.length}));t&&t.length&&t.map((function(t,a){var i;0==a&&(e.colData[0].__config__.children=cloneDeep(t.__config__.children)),0!=a&&(i=e.colData[0].__config__.children).push.apply(i,Object(n["a"])(Object(N["c"])(t.__config__.children)))})),this.setPropsOfMergedCols(0,this.colData.length,this.colData[this.colIndex].__config__.rowspan)},mergeTableRow:function(e){var t=1==e?this.rowIndex:this.rowIndex+this.selectCell.__config__.rowspan,a=1==e?this.rowIndex-1:this.rowIndex,i=this.rowData[t].__config__.children[this.colIndex].__config__.children,l=this.rowData[a].__config__.children[this.colIndex].__config__.children;this.rowData[a].__config__.children[this.colIndex].__config__.children=[].concat(Object(n["a"])(l),Object(n["a"])(Object(N["c"])(i)));var o=1*this.rowData[t].__config__.children[this.colIndex].__config__.rowspan+1*this.rowData[a].__config__.children[this.colIndex].__config__.rowspan;this.setPropsOfMergedRows(a,this.selectCell.__config__.colspan,o)},mergeWholeRow:function(){var e=this,t=[];this.rowData.forEach((function(a){var i=a.__config__.children[e.colIndex];!a.__config__.merged&&a.__config__.children&&a.__config__.children.length&&t.push(i)}));var a=this.rowData[0].__config__.children[this.colIndex];t&&t.length&&t.map((function(e,t){var i;0!=t&&(i=a.__config__.children).push.apply(i,Object(n["a"])(Object(N["c"])(e.__config__.children)))})),this.setPropsOfMergedRows(0,a.__config__.colspan,this.rowData.length)},undoMergeCol:function(){this.setPropsOfSplitCol(this.colIndex,this.selectCell.__config__.colspan,this.selectCell.__config__.rowspan)},undoMergeRow:function(){this.setPropsOfSplitRow(this.colIndex,this.selectCell.__config__.colspan,this.selectCell.__config__.rowspan)},deleteWholeCol:function(){var e=this,t=this.rowData[0].__config__.children[this.colIndex].__config__.colspan;this.rowData.forEach((function(a){a.__config__.children.splice(e.colIndex,t)}))},deleteWholeRow:function(){var e=this.rowData[this.rowIndex].__config__.children[0].__config__.rowspan;this.rowData.splice(this.rowIndex,e)},setPropsOfMergedCols:function(e,t,a){for(var i=this.rowIndex;i<this.rowIndex+a;i++)for(var l=e;l<e+t;l++)i!==this.rowIndex||l!==e?(this.rowData[i].__config__.children[l].__config__.merged=!0,this.rowData[i].__config__.children[l].__config__.colspan=t,this.rowData[i].__config__.children[l].__config__.children=[]):this.rowData[i].__config__.children[l].__config__.colspan=t},setPropsOfMergedRows:function(e,t,a,i){i||(i=this.colIndex);for(var l=e;l<e+a;l++)for(var o=i;o<i+t;o++)l!==e||o!==i?(this.rowData[l].__config__.children[o].__config__.merged=!0,this.rowData[l].__config__.children[o].__config__.rowspan=a,this.rowData[l].__config__.children[o].__config__.children=[]):this.rowData[l].__config__.children[o].__config__.rowspan=a},setPropsOfSplitCol:function(e,t,a){for(var i=this.rowIndex;i<this.rowIndex+a;i++)for(var l=e;l<e+t;l++)this.rowData[i].__config__.children[l].__config__.merged=!1,this.rowData[i].__config__.children[l].__config__.rowspan=1,this.rowData[i].__config__.children[l].__config__.colspan=1},setPropsOfSplitRow:function(e,t,a){for(var i=this.rowIndex;i<this.rowIndex+a;i++)for(var l=e;l<e+t;l++)this.rowData[i].__config__.children[l].__config__.merged=!1,this.rowData[i].__config__.children[l].__config__.rowspan=1,this.rowData[i].__config__.children[l].__config__.colspan=1},handleTableSetting:function(e,t){switch(e){case"1":this.handleTableAddCol(t,this.colIndex);break;case"2":this.handleTableAddCol(t,this.colIndex+1);break;case"3":this.handleTableAddRow(t,this.rowIndex,this.rowIndex);break;case"4":this.handleTableAddRow(t,this.rowIndex+1,this.rowIndex);break;case"5":this.mergeTableCol(t,1);break;case"6":this.mergeTableCol(t);break;case"7":this.mergeWholeCol(t);break;case"8":this.mergeTableRow(1);break;case"9":this.mergeTableRow();break;case"10":this.mergeWholeRow();break;case"11":this.undoMergeCol();break;case"12":this.undoMergeRow();break;case"13":this.deleteWholeCol();break;case"14":this.deleteWholeRow();break;default:break}this.resetData()},resetData:function(){this.rowIndex=0,this.colIndex=0,this.rowData=[],this.colData=[],this.selectCell={__config__:{rowspan:1,colspan:1}}},handleShowMenu:function(e,t,a){this.rowIndex=t,this.colIndex=a,this.rowData=e.__config__.children,this.colData=this.rowData[t].__config__.children,this.selectCell=this.colData[a]}}}),hn=_n,vn=(a("3dfb"),Object(y["a"])(hn,i,l,!1,null,null,null));t["a"]=vn.exports},"207d":function(e,t,a){"use strict";a("d3c8")},2574:function(e,t,a){},2623:function(e,t,a){"use strict";a("2d94")},"26f9":function(e,t,a){},2746:function(e,t,a){},"279c":function(e,t,a){"use strict";a("8df8")},2871:function(e,t,a){},"28c9":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"singleImg-container"},[e.imageUrl?a("div",{staticClass:"el-upload-list el-upload-list--picture-card"},[a("li",{staticClass:"el-upload-list__item is-success"},[a("el-image",{ref:"image",staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.define.comUrl+e.imageUrl,"preview-src-list":e.fileList,"z-index":1e4}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview()}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove()}}},[a("i",{staticClass:"el-icon-delete"})])])],1)]):a("el-upload",{staticClass:"img-uploader",attrs:{action:e.define.comUploadUrl+"/"+e.type,"show-file-list":!1,"on-success":e.handleSuccess,headers:e.uploadHeaders,accept:"image/*","before-upload":e.beforeUpload}},[a("div",{staticClass:"icon-box"},[a("i",{staticClass:"el-icon-plus img-uploader-icon"}),e.tip?a("p",{class:e.subTip?"upload-tip":"upload-img__tip"},[e._v(e._s(e.tip))]):e._e(),e.subTip?a("p",{class:e.tip?"upload-subTip":"upload-img__tip"},[e._v(e._s(e.subTip))]):e._e()])])],1)},l=[],o=(a("3b2b"),{name:"SingleImg",props:{value:{type:String,default:""},tip:{type:String,default:"上传图片"},type:{type:String,default:"annexpic"},disabled:{type:Boolean,default:!1},subTip:{type:String,default:""}},data:function(){return{imageUrl:"",uploadHeaders:{Authorization:this.$store.getters.token}}},computed:{fileList:function(){return this.imageUrl?[this.define.comUrl+this.imageUrl]:[]}},watch:{value:{handler:function(e){this.imageUrl=e},immediate:!0}},methods:{beforeUpload:function(e){var t=new RegExp("image/*").test(e.type);if(!t)return this.$message.error("请上传图片"),t},handleSuccess:function(e,t){200==e.code?(this.imageUrl=e.data.url,this.$emit("input",e.data.url)):this.$message({message:e.msg,type:"error",duration:1500})},handlePictureCardPreview:function(){this.$refs.image&&this.$refs.image.clickHandler()},handleRemove:function(){this.$emit("input","")}}}),n=o,s=(a("2cd8"),a("2877")),r=Object(s["a"])(n,i,l,!1,null,"5d8bde2a",null);t["a"]=r.exports},"2a01":function(e,t,a){},"2b90":function(e,t,a){"use strict";a("1e90")},"2cd8":function(e,t,a){"use strict";a("3ba1")},"2d94":function(e,t,a){},"2e29":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));a("20d6"),a("ac6a");var i=a("b85c"),l=a("d4ec"),o=a("bee2"),n=a("c5cd"),s=function(e){return!Array.isArray(e)||0===e.length},r=function(){function e(){Object(l["a"])(this,e)}return Object(o["a"])(e,null,[{key:"idGenerator",value:function(){var e=new Date-new Date("2020-08-01");e+=Math.ceil(1e3*Math.random());var t="0123456789ABCDEFGHIGKLMNOPQRSTUVWXYZabcdefghigklmnopqrstuvwxyz",a=t.split(""),i=t.length,l=[];do{var o=e%i;e=(e-o)/i,l.push(a[o])}while(e);return l.join("")}},{key:"isConditionNode",value:function(e){return e&&"condition"===e.type}},{key:"isCopyNode",value:function(e){return e&&"copy"===e.type}},{key:"isStartNode",value:function(e){return e&&"start"===e.type}},{key:"isApproverNode",value:function(e){return e&&"approver"===e.type}},{key:"isTimerNode",value:function(e){return e&&"timer"===e.type}},{key:"isSubFlowNode",value:function(e){return e&&"subFlow"===e.type}},{key:"isInterflowNode",value:function(e){return e&&"approver"===e.type&&e.isInterflow}},{key:"isBranchFlowNode",value:function(e){return e&&"approver"===e.type&&e.isBranchFlow}},{key:"createNode",value:function(e,t){var a=JSON.parse(JSON.stringify(n["a"][e]));return a.nodeId=this.idGenerator(),"start"!==e&&"timer"!==e&&(a.properties.title+=a.nodeId),a.prevId=t,a}},{key:"getPreviousNode",value:function(e,t){if(t.nodeId===e)return t;if(t.childNode){var a=this.getPreviousNode(e,t.childNode);if(a)return a}if(t.conditionNodes){var l,o=Object(i["a"])(t.conditionNodes);try{for(o.s();!(l=o.n()).done;){var n=l.value,s=this.getPreviousNode(e,n);if(s)return s}}catch(r){o.e(r)}finally{o.f()}}}},{key:"deleteNode",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.getPreviousNode(e.prevId,t);if(a&&"empty"===i.type)if(this.isConditionNode(e)||this.isInterflowNode(e)||this.isBranchFlowNode(e)){var l=2===i.conditionNodes.length,o=l?i:e;this.deleteNode(o,t,l)}else s(i.conditionNodes)&&this.deleteNode(i,t),this.deleteNode(e,t,!1);else{var n=function(e,t){e.childNode=t.childNode,s(e.conditionNodes)&&(e.conditionNodes=t.conditionNodes),e.childNode&&(e.childNode.prevId=e.nodeId),e.conditionNodes&&e.conditionNodes.forEach((function(t){return t.prevId=e.nodeId}))};if(this.isConditionNode(e)||this.isInterflowNode(e)||this.isBranchFlowNode(e)){var r=i.conditionNodes,c=r.findIndex((function(t){return t.nodeId===e.nodeId}));if(r.length>2)r.splice(c,1);else{var d=r[+!c];if(delete i.conditionNodes,delete i.conditionType,i.childNode){var u=d;while(u.childNode)u=u.childNode;u.childNode=i.childNode,u.childNode.prevId=u.nodeId}n(i,d),i.childNode&&"empty"===i.childNode.type&&this.deleteNode(i.childNode,i)}r.forEach((function(e,t){return e.properties.priority=t}))}else n(i,e)}}},{key:"addApprovalNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=e.childNode;a=a||this.createNode("approver",e.nodeId),e.childNode=a,i&&(a.childNode=i,i.prevId=a.nodeId);var l=e.conditionNodes;Array.isArray(l)&&!t&&l.length&&(a.conditionNodes=l.map((function(e){return e.prevId=a.nodeId,e})),delete e.conditionNodes),i&&"empty"===i.type&&"empty"!==a.type&&0===i.conditionNodes.length&&this.deleteNode(i,e)}},{key:"addEmptyNode",value:function(e){var t=this.createNode("empty",e.nodeId);return this.addApprovalNode(e,!0,t),t}},{key:"addCopyNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("copy",e.nodeId))}},{key:"addTimerNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("timer",e.nodeId))}},{key:"addSubFlowNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("subFlow",e.nodeId))}},{key:"appendConditionNode",value:function(e,t){var a=e.conditionNodes,i=this.createNode("condition",e.nodeId);t&&(i.properties.title="转向"+i.properties.title,i.properties.conditionType=1);var l=a.findIndex((function(e){return e.properties.isDefault}));i.properties.priority=a.length,l>-1?(a.splice(-1,0,i),i.properties.priority=a.length-2,a[a.length-1].properties.priority=a.length-1):a.push(i),this.setDefaultCondition(i,e)}},{key:"appendInterflowNode",value:function(e){var t=e.conditionNodes,a=this.createNode("interflow",e.nodeId),i=t.findIndex((function(e){return e.properties.isDefault}));a.properties.priority=t.length,i>-1?(t.splice(-1,0,a),a.properties.priority=t.length-2,t[t.length-1].properties.priority=t.length-1):t.push(a)}},{key:"appendBranchFlowNode",value:function(e){var t=e.conditionNodes,a=this.createNode("branchFlow",e.nodeId),i=t.findIndex((function(e){return e.properties.isDefault}));a.properties.priority=t.length,i>-1?(t.splice(-1,0,a),a.properties.priority=t.length-2,t[t.length-1].properties.priority=t.length-1):t.push(a)}},{key:"appendBranch",value:function(e,t){var a=e;if(Array.isArray(e.conditionNodes)&&e.conditionNodes.length)if(t)a=this.addEmptyNode(a,!0);else{var i=this.addEmptyNode(a,!0);i.conditionNodes=a.conditionNodes,i.conditionType="condition",i.conditionNodes.forEach((function(e){e.prevId=i.nodeId}))}var l=[this.createNode("condition",a.nodeId),this.createNode("condition",a.nodeId)].map((function(e,t){return e.properties.priority=t,e}));a.conditionNodes=l,a.conditionType="condition"}},{key:"appendInterflowBranch",value:function(e,t){var a=e;if(Array.isArray(e.conditionNodes)&&e.conditionNodes.length)if(t)a=this.addEmptyNode(a,!0);else{var i=this.addEmptyNode(a,!0);i.conditionNodes=a.conditionNodes,i.conditionType="interflow",i.conditionNodes.forEach((function(e){e.prevId=i.nodeId}))}var l=[this.createNode("interflow",a.nodeId),this.createNode("interflow",a.nodeId)];a.conditionNodes=l,a.conditionType="interflow"}},{key:"appendBranchFlowBranch",value:function(e,t){var a=e;if(Array.isArray(e.conditionNodes)&&e.conditionNodes.length)if(t)a=this.addEmptyNode(a,!0);else{var i=this.addEmptyNode(a,!0);i.conditionNodes=a.conditionNodes,i.conditionType="branchFlow",i.conditionNodes.forEach((function(e){e.prevId=i.nodeId}))}var l=[this.createNode("branchFlow",a.nodeId),this.createNode("branchFlow",a.nodeId)];a.conditionNodes=l,a.conditionType="branchFlow"}},{key:"resortPrioByCNode",value:function(e,t,a){if(e.properties.isDefault)e.properties.priority=t;else{var i=this.getPreviousNode(e.prevId,a),l=e.properties.priority;if(i.conditionNodes[l].properties.isDefault)e.properties.priority=t;else{var o=i.conditionNodes.splice(l,1,e)[0];o.properties.priority=t,i.conditionNodes[t]=o}}}},{key:"increasePriority",value:function(e,t){if(!e.properties.isDefault){var a=this.getPreviousNode(e.prevId,t),i=a.conditionNodes,l=i.findIndex((function(t){return t===e}));l&&(i[l-1].properties.priority=l,i[l].properties.priority=l-1,i[l-1]=i.splice(l,1,i[l-1])[0])}}},{key:"decreasePriority",value:function(e,t){var a=this.getPreviousNode(e.prevId,t),i=a.conditionNodes,l=i.findIndex((function(t){return t.nodeId===e.nodeId}));if(l<i.length-1){var o=i[l+1];if(o.properties.isDefault)return;o.properties.priority=l,i[l].properties.priority=l+1,i[l+1]=i.splice(l,1,i[l+1])[0]}}},{key:"setDefaultCondition",value:function(e,t){var a="其他情况进入此流程",i=this.getPreviousNode(e.prevId,t).conditionNodes,l=function(e){return e.properties&&(e.properties.initiator||!s(e.properties.conditions))},o=function(e){e.properties.isDefault=!1,e.content===a&&(e.content="请设置条件")},n=function(e){e.properties.isDefault=!0,e.content=a},r=0;i.slice(0,-1).forEach((function(e){l(e)&&r++,o(e)}));var c=i[i.length-1];r>0&&!l(c)?n(c):o(c)}},{key:"checkNode",value:function(e,t){var a=!0,i=e.properties;return this.isStartNode(e)&&!i.formId&&(a=!1),this.isConditionNode(e)&&(!i.isDefault&&s(i.conditions)&&(a=!1),1!=i.conditionType||i.swerveNode||(a=!1)),this.isSubFlowNode(e)&&(!i.flowId||6===i.initiateType&&s(i.initiator)&&s(i.initiatePos)&&s(i.initiateRole)&&s(i.initiateOrg)&&s(i.initiateGroup))&&(a=!1),this.isApproverNode(e)&&(!i.assigneeType||6===i.assigneeType)&&s(i.approvers)&&s(i.approverPos)&&s(i.approverRole)&&s(i.approverOrg)&&s(i.approverGroup)&&(a=!1),a}},{key:"checkAllNode",value:function(e){var t=this,a=!0,i=function e(a,i,l){!t.checkNode(a,l)&&i(),a.childNode&&e(a.childNode,i,l),s(a.conditionNodes)||a.conditionNodes.forEach((function(t){return e(t,i,a)}))};return i(e,(function(){return a=!1})),a}}])}();function c(){var e=r.createNode("start");return e.childNode=r.createNode("approver",e.nodeId),e}},"2e66":function(e,t,a){},"2f1b":function(e,t,a){"use strict";a("eb13")},"2f3b":function(e,t,a){},"2f67":function(e,t,a){"use strict";a("9a1f")},"30c2":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",e._g(e._b({staticClass:"JNPF-full-dialog",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,fullscreen:"","lock-scroll":"","show-close":!1,modal:!1,"append-to-body":""},on:{open:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),[i("div",{staticClass:"JNPF-full-dialog-header"},[i("div",{staticClass:"header-title"},[i("img",{staticClass:"header-logo",attrs:{src:a("73b6")}}),i("p",{staticClass:"header-txt"},[e._v("· 打印预览")])]),i("div",{staticClass:"header-page"},[i("el-button",{on:{click:function(t){e.pageIndex=e.pageIndex-1}}},[e._v("上一页")]),i("el-input-number",{staticClass:"text-center",staticStyle:{width:"60px"},attrs:{controls:!1,"controls-position":"right",min:1,max:e.batchData.length},on:{change:e.scrollpage,blur:e.scrollpage},model:{value:e.pageIndex,callback:function(t){e.pageIndex=t},expression:"pageIndex"}}),i("span",{staticClass:"page-size"},[e._v("/ "+e._s(e.batchData.length))]),i("el-button",{on:{click:function(t){e.pageIndex=e.pageIndex+1}}},[e._v("下一页")])],1),i("div",{staticClass:"options"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.word}},[e._v("下 载")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.print("batch")}}},[e._v("打 印")]),i("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)]),i("div",{ref:"barcodewrap"}),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tsPrint",staticClass:"main"},e._l(e.batchData,(function(t,a){return i("div",{key:a,staticClass:"print-content",domProps:{innerHTML:e._s(t)}})})),0)])},l=[],o=a("c5c2"),n={mixins:[o["a"]],data:function(){return{pageIndex:1}},watch:{pageIndex:{handler:function(e){this.scrollpage(e)},deep:!0,immediate:!0}},methods:{scrollpage:function(){var e=this,t=this.pageIndex-1<0?0:this.pageIndex-1;this.$nextTick((function(){var a=e.$refs.tsPrint;a&&a.scrollTo({top:(window.document.body.clientHeight-10)*t,behavior:"smooth"})}))},onOpen:function(){this.initData("batch")}}},s=n,r=(a("2b90"),a("2877")),c=Object(r["a"])(s,i,l,!1,null,"6c51737c",null);t["a"]=c.exports},3104:function(e,t,a){},"32aa":function(e,t,a){"use strict";a.d(t,"p",(function(){return l})),a.d(t,"E",(function(){return o})),a.d(t,"g",(function(){return n})),a.d(t,"h",(function(){return s})),a.d(t,"i",(function(){return r})),a.d(t,"F",(function(){return c})),a.d(t,"q",(function(){return d})),a.d(t,"v",(function(){return u})),a.d(t,"y",(function(){return p})),a.d(t,"x",(function(){return f})),a.d(t,"w",(function(){return m})),a.d(t,"a",(function(){return _})),a.d(t,"J",(function(){return h})),a.d(t,"t",(function(){return v})),a.d(t,"l",(function(){return b})),a.d(t,"o",(function(){return g})),a.d(t,"e",(function(){return y})),a.d(t,"m",(function(){return D})),a.d(t,"A",(function(){return w})),a.d(t,"f",(function(){return x})),a.d(t,"s",(function(){return C})),a.d(t,"z",(function(){return k})),a.d(t,"B",(function(){return T})),a.d(t,"C",(function(){return F})),a.d(t,"I",(function(){return S})),a.d(t,"r",(function(){return N})),a.d(t,"b",(function(){return L})),a.d(t,"D",(function(){return O})),a.d(t,"H",(function(){return $})),a.d(t,"n",(function(){return I})),a.d(t,"K",(function(){return j})),a.d(t,"u",(function(){return M})),a.d(t,"d",(function(){return V})),a.d(t,"j",(function(){return A})),a.d(t,"k",(function(){return P}));var i=[{fullName:"新增客户",unit:"个",num:262,field:"",icon:"icon-ym icon-ym-wf-contractApproval",iconColor:"rgb(123, 26, 225)",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",id:"1"},{fullName:"新增商机",unit:"个",num:199,field:"",icon:"icon-ym icon-ym-wf-outgoingApply",iconColor:"rgb(74, 184, 255)",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",id:"2"},{fullName:"合同金额",unit:"元",num:126263.5,field:"",icon:"icon-ym icon-ym-wf-payDistribution",iconColor:"rgb(255, 139, 88)",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",id:"3"},{fullName:"回款金额",unit:"元",num:6223.2,field:"",icon:"icon-ym icon-ym-wf-incomeRecognition",iconColor:"rgb(252, 91, 135)",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",id:"4"}],l=[{icon:"icon-ym icon-ym-portal-card",label:"卡片面板",jnpfKey:"card",title:"卡片面板",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-card",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},children:[],w:6,h:6,minW:6,minH:4,maxW:12,maxH:12},{icon:"icon-ym icon-ym-portal-tab",label:"标签面板",jnpfKey:"tab",title:"标签面板",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-tab",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},children:[{title:"Tab 1",name:"1",icon:"",children:[]},{title:"Tab 2",name:"2",icon:"",children:[]}],active:"1",type:"","tab-position":"top",w:6,h:6,minW:6,minH:4,maxW:12,maxH:12}],o=[{icon:"icon-ym icon-ym-generator-notice",label:"公告通知",jnpfKey:"notice",title:"公告通知",dataType:"dynamic",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-notice",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},option:{showOverflow:!0,showHeader:!0,styleType:1,appStyleType:1,defaultValue:[],showImage:!0,headerFontSize:14,headerFontWeight:!1,headerFontColor:"#303133",headerLeft:"center",headerBgColor:"#F4F6F8",tableIndex:!0,noticeCount:5,tableFontSize:14,tableFontColor:"#606266",noticeBgColor:"",noticeOddLineColor:"",noticeEventLineColor:"",describe:!1,showText:!0,textFontSize:14,textFontColor:"#606266",textFontWeight:!1,appCount:5,appColumnList:[{fullName:"类型",filedName:"classify",fontSize:12,classify:[],fontWeight:!1,fontColor:"#303133",show:!0},{fullName:"标题",filedName:"fullName",fontSize:14,fontWeight:!1,fontColor:"#303133",show:!0},{fullName:"摘要",filedName:"content",fontSize:12,fontWeight:!1,fontColor:"#606266",show:!0},{fullName:"时间",filedName:"time",fontSize:12,timeClassify:1,fontWeight:!1,fontColor:"#606266",show:!0},{fullName:"人员",filedName:"user",fontSize:12,userClassify:1,fontWeight:!1,fontColor:"#303133",show:!0}],columnData:[{fullName:"类型",sortable:!1,filedName:"classify",show:!0,fixed:"none",align:"center",width:0,classify:[]},{fullName:"标题",filedName:"fullName",sortable:!1,show:!0,fixed:"none",align:"center",width:0},{fullName:"创建人",filedName:"creatorUser",sortable:!1,show:!0,fixed:"none",align:"center",width:0},{fullName:"创建时间",filedName:"creatorTime",sortable:!1,show:!0,fixed:"none",align:"center",width:0},{fullName:"发布人",filedName:"releaseUser",sortable:!1,show:!0,fixed:"none",align:"center",width:0},{fullName:"发布时间",filedName:"releaseTime",sortable:!1,show:!0,fixed:"none",align:"center",width:0}],rowData:[{fullName:"类型",filedName:"classify",fontSize:12,classify:[],fontWeight:!1,fontColor:"#303133",show:!0},{fullName:"标题",filedName:"fullName",fontSize:14,fontWeight:!1,fontColor:"#303133",show:!0},{fullName:"摘要",filedName:"content",fontSize:12,fontWeight:!1,fontColor:"#606266",show:!0},{fullName:"时间",filedName:"time",fontSize:12,timeClassify:1,fontWeight:!1,fontColor:"#606266",show:!0}]},border:!0,refresh:{autoRefresh:!1,autoRefreshTime:5},w:20,h:8,minW:4,minH:4,maxW:12,maxH:20},{icon:"icon-ym icon-ym-generator-todolist",label:"待办事项",jnpfKey:"todoList",title:"待办事项",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-todolist",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},w:6,h:7,minW:4,minH:7,maxW:12,maxH:12}],n=[{icon:"icon-ym icon-ym-generator-todo",label:"我的待办",jnpfKey:"todo",title:"我的待办",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-todo",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},option:{styleType:1,defaultValue:[{fullName:"流程待办",id:"toBeReviewed",noShow:!1,num:0,category:[],urlAddress:"/workFlow/flowTodo",icon:"icon-ym icon-ym-flowTodo",iconBgColor:"#f68900",type:2},{fullName:"流程已办",id:"flowDone",noShow:!1,num:0,category:[],urlAddress:"/workFlow/flowDone",icon:"icon-ym icon-ym-flowDone",iconBgColor:"#7b1ae1",type:2},{fullName:"流程抄送",id:"flowCirculate",noShow:!1,num:0,category:[],urlAddress:"/workFlow/flowCirculate",icon:"icon-ym icon-ym-flowForm",iconBgColor:"#33b932",type:2}],rowNumber:3,showBorder:!1,appRowNumber:3,appShowBorder:!1,labelFontSize:14,labelFontWeight:!1,labelFontColor:"#606266",valueFontSize:24,valueFontWeight:!0,valueFontColor:"#303133",valueFontBgColor:"#FE433E"},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:4,minW:6,minH:3,maxW:12,maxH:12},{icon:"icon-ym icon-ym-generator-function",label:"常用功能",jnpfKey:"commonFunc",title:"常用功能",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-function",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},option:{styleType:1,appStyleType:1,defaultValue:[{fullName:"功能设计",moduleId:"85cd7bca426e49ce83a061bf461b1447",linkType:"1",linkTarget:"_self",urlAddress:"onlineDev/webDesign",icon:"icon-ym icon-ym-webDesign",iconBgColor:"#FF3B3B",type:2,id:"1"},{fullName:"流程设计",moduleId:"fe0150960dd542ec9328067e4495074b",linkType:"1",linkTarget:"_self",urlAddress:"workFlow/flowEngine",icon:"icon-ym icon-ym-flowDesign",iconBgColor:"#7B1AE1",type:2,id:"2"},{fullName:"权限管理",moduleId:"9057d797550e4457b7ddf2456ce45882",linkType:"1",linkTarget:"_self",urlAddress:"permission/authorize",icon:"icon-ym icon-ym-authorize",iconBgColor:"#1890FF",type:2,id:"3"},{fullName:"报表设计",moduleId:"c7159f97177b420d9fc8ec8c74ae541b",linkType:"1",linkTarget:"_self",urlAddress:"onlineDev/dataReport",icon:"icon-ym icon-ym-reportDesign",iconBgColor:"#F68900",type:2,id:"4"},{fullName:"门户设计",moduleId:"232d7226f00446d882e1e1bd999f7b2d",linkType:"1",linkTarget:"_self",urlAddress:"onlineDev/visualPortal",icon:"icon-ym icon-ym-portalDesign",iconBgColor:"#33B932",type:2,id:"5"}],appDefaultValue:[{fullName:"JNPF快速开发",moduleId:"",linkType:"2",urlAddress:"https://www.jnpfsoft.com/",linkTarget:"_blank",icon:"icon-ym icon-ym-webDesign",iconBgColor:"#33B932",type:2,id:"1"}],rowNumber:5,showBorder:!1,appRowNumber:4,appShowBorder:!1,labelFontSize:14,labelFontWeight:!1,labelFontColor:"#606266"},w:6,h:4,minW:6,minH:3,maxW:12,maxH:12},{icon:"icon-ym icon-ym-generator-Panel",label:"数据面板",jnpfKey:"dataBoard",dataType:"static",title:"数据面板",renderKey:"",propsName:"",propsApi:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-function",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},option:{styleType:1,appStyleType:1,defaultValue:i,appDefaultValue:i,rowNumber:4,showBorder:!1,appRowNumber:4,appShowBorder:!1,labelFontSize:14,labelFontWeight:!1,labelFontColor:"#606266",valueFontSize:24,valueFontWeight:!0,valueFontColor:"#303133",unitFontSize:14,unitFontWeight:!1,unitFontColor:"#606266"},refresh:{autoRefresh:!1,autoRefreshTime:5},w:12,h:4,minW:6,minH:3,maxW:12,maxH:12},{icon:"icon-ym icon-ym-generator-table",label:"表格列表",jnpfKey:"tableList",title:"表格列表",dataType:"static",propsApi:"",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-table",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},option:{border:!0,showOverflow:!0,styleType:1,defaultValue:[],showHeader:!0,headerFontSize:14,headerFontWeight:!1,headerFontColor:"#303133",headerLeft:"center",headerBgColor:"#F4F6F8",tableIndex:!0,tableCount:5,tableFontSize:14,tableFontColor:"#606266",tableOddLineColor:"",tableEvenLineColor:"",tableBgColor:"",describe:!1,showName:!0,dataFontSize:14,dataFontColor:"#606266",dataFontWeight:!1,nameFontSize:14,nameFontColor:"#303133",nameFontWeight:!1,appCount:5,appColumnList:[{fullName:"部门",filedName:"inputField102"},{fullName:"日期",filedName:"inputField105"}],columnData:[{fullName:"排名",filedName:"inputField101",sortable:!1,fixed:"none",align:"center",width:0,id:"1"},{fullName:"部门",filedName:"inputField102",sortable:!1,fixed:"none",align:"center",width:0,id:"2"},{fullName:"销售额",filedName:"inputField103",sortable:!1,fixed:"none",align:"center",width:0,id:"3"},{fullName:"完成情况",filedName:"inputField104",sortable:!1,fixed:"none",align:"center",width:0,id:"4"}],rowData:[{fullName:"标题",filedName:"inputField102",fontSize:14,fontWeight:!1,fontColor:"#303133"},{fullName:"描述",filedName:"inputField103",fontSize:12,fontWeight:!1,fontColor:"#606266"},{fullName:"时间",filedName:"inputField105",fontSize:12,fontWeight:!1,fontColor:"#606266"}]},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:4,minH:4,maxW:12,maxH:20},{icon:"icon-ym icon-ym-generator-textarea",label:"文本",jnpfKey:"text",title:"文本",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-textarea",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:"",textFontSize:14,textFontColor:"#303133",textFontWeight:!1,textFontStyle:!1,textLeft:"left",textUnderLine:"none",textBgColor:"",textAutoplay:!1,textAutoplayMode:"left",textAutoplaySpeed:60,linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},refresh:{autoRefresh:!1,autoRefreshTime:5},w:4,h:3,minW:4,minH:2,maxW:12,maxH:20},{icon:"icon-ym icon-ym-portal-image",label:"图片",jnpfKey:"image",title:"图片",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-image",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:2,defaultValue:"",textDefaultValue:"JNPF快速开发平台",textFontSize:14,textFontColor:"#fff",textFontWeight:!1,textFontStyle:!1,textLeft:"center",textBgColor:"#30313399",imageFillStyle:"cover",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self"},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:6,minW:4,minH:4,maxW:12,maxH:20},{icon:"icon-ym icon-ym-portal-carousel",label:"轮播图",jnpfKey:"carousel",title:"轮播图",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-carousel",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:"",carouselType:!1},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:[{imageUrl:"https://app.cdn.jnpfsoft.com/image/3.2/banner1.png",dataType:2,propsApi:"",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",textDefaultValue:"",id:"1"},{imageUrl:"https://app.cdn.jnpfsoft.com/image/3.2/banner2.png",dataType:2,propsApi:"",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",textDefaultValue:"",id:"2"},{imageUrl:"https://app.cdn.jnpfsoft.com/image/3.2/banner4.png",dataType:2,propsApi:"",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",textDefaultValue:"",id:"3"}],appDefaultValue:[{imageUrl:"https://app.cdn.jnpfsoft.com/image/3.2/banner1.png",dataType:2,propsApi:"",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",textDefaultValue:"",id:"1"},{imageUrl:"https://app.cdn.jnpfsoft.com/image/3.2/banner2.png",dataType:2,propsApi:"",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",textDefaultValue:"",id:"2"},{imageUrl:"https://app.cdn.jnpfsoft.com/image/3.2/banner4.png",dataType:2,propsApi:"",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",textDefaultValue:"",id:"3"}],carouselAutoplay:!0,carouselDirection:"horizontal",carouselInterval:3e3,carouselIndicatorPosition:"bottomRight",carouselArrow:"never",carouselLoop:!0,imageFillStyle:"cover",textFontSize:14,textFontColor:"#fff",textFontWeight:!1,textFontStyle:!1,textLeft:"center",textBgColor:"#30313399"},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:6,minW:4,minH:4,maxW:12,maxH:20},{icon:"icon-ym icon-ym-portal-video",label:"视频",jnpfKey:"video",title:"视频",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-video",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:2,defaultValue:"",videoAutoplay:!0,playNumber:"2",mutePlay:!1},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:6,minW:4,minH:4,maxW:12,maxH:20},{icon:"icon-ym icon-ym-portal-schedule",label:"日程",jnpfKey:"schedule",title:"日程",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-schedule",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:6,minH:8,maxW:12,maxH:20,defaultView:"dayGridMonth",showLunarCalendar:!1,firstDay:0,duration:60},{icon:"icon-ym icon-ym-portal-iframe",label:"iframe",jnpfKey:"iframe",title:"iframe",visibility:["pc"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-iframe",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},option:{defaultValue:"https://www.jnpfsoft.com/"},w:12,h:8,minW:4,minH:8,maxW:12,maxH:20}],s=[{icon:"icon-ym icon-ym-generator-bar",label:"柱状图",jnpfKey:"barChart",title:"柱状图",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-bar",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:[],titleText:"",titleTextStyleColor:"#303133",titleTextStyleFontSize:18,titleTextStyleFontWeight:!1,titleLeft:"center",titleBgColor:"",titleSubtext:"",titleSubtextStyleColor:"#303133",titleSubtextStyleFontSize:12,titleSubtextStyleFontWeight:!1,seriesBarWidth:30,seriesItemStyleBarBorderRadius:0,xAxisName:"",xAxisNameTextStyleFontSize:14,xAxisNameTextStyleColor:"#303133",xAxisNameTextStyleFontWeight:!1,xAxisShow:!0,category:"category",xAxisAxisLineLineStyleColor:"#303133",xAxisAxisLabelRotate:0,xAxisAxisLabelTextStyleFontSize:14,xAxisAxisLabelTextStyleColor:"#303133",xAxisAxisLabelTextFontWeight:!1,xAxisSplitLineShow:!1,xAxisSplitLineLineStyleColor:"#DFDFDF",xAxisInverse:!1,yAxisName:"",yAxisNameTextStyleFontSize:14,yAxisNameTextStyleColor:"#303133",yAxisNameTextStyleFontWeight:!1,yAxisShow:!0,yAxisAxisLineLineStyleColor:"#303133",yAxisSplitLineShow:!0,yAxisSplitLineLineStyleColor:"#DFDFDF",yAxisAxisLabelTextStyleFontSize:14,yAxisAxisLabelTextStyleColor:"#303133",yAxisAxisLabelTextFontWeight:!1,seriesLabelShow:!0,seriesLabelFontSize:14,seriesLabelFontWeight:!1,seriesLabelColor:"#303133",seriesLabelBgColor:"",tooltipShow:!0,tooltipTextStyleFontSize:14,tooltipTextStyleFontWeight:!1,tooltipTextStyleColor:"#303133",tooltipBgColor:"#fff",gridLeft:20,gridTop:50,gridRight:20,gridBottom:20,legendShow:!0,legendTextStyleFontSize:14,legendOrient:"horizontal",legendLeft:0,legendTop:0,AxisTextStyleColor:"",AxisLineStyleColor:"",colorList:[],barType:[]},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:4,minH:8,maxW:12,maxH:20},{icon:"icon-ym icon-ym-generator-pie",label:"饼图",jnpfKey:"pieChart",title:"饼图",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-pie",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:[],roseType:!1,roseType1:!1,titleText:"",titleTextStyleColor:"#303133",titleTextStyleFontSize:18,titleTextStyleFontWeight:!1,titleLeft:"center",titleBgColor:"",titleSubtext:"",titleSubtextStyleColor:"#303133",titleSubtextStyleFontSize:12,titleSubtextStyleFontWeight:!1,seriesLabelShow:!0,seriesLabelPosition:"outside",seriesLabelShowInfo:["count","percent"],seriesCenterLeft:50,seriesCenterTop:50,seriesLabelFontSize:14,seriesLabelFontWeight:!1,seriesLabelColor:"#303133",seriesLabelBgColor:"",seriesLineStyleWidth:2,seriesSymbolRotate:4,tooltipShow:!0,tooltipTextStyleFontSize:14,tooltipTextStyleFontWeight:!1,tooltipTextStyleColor:"#303133",tooltipBgColor:"#fff",gridLeft:20,gridTop:50,gridRight:20,gridBottom:20,legendShow:!0,legendTextStyleFontSize:14,legendOrient:"horizontal",legendLeft:0,legendTop:0,AxisTextStyleColor:"",AxisLineStyleColor:"",colorList:[]},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:4,minH:8,maxW:12,maxH:20},{icon:"icon-ym icon-ym-generator-line",label:"折线图",jnpfKey:"lineChart",title:"折线图",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-line",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:[],areaStyle:!1,titleText:"",titleTextStyleColor:"#303133",titleTextStyleFontSize:18,titleTextStyleFontWeight:!1,titleLeft:"center",titleBgColor:"",titleSubtext:"",titleSubtextStyleColor:"#303133",titleSubtextStyleFontSize:12,titleSubtextStyleFontWeight:!1,xAxisName:"",xAxisNameTextStyleFontSize:14,xAxisNameTextStyleColor:"#303133",xAxisNameTextStyleFontWeight:!1,xAxisShow:!0,category:"category",xAxisAxisLineLineStyleColor:"#303133",xAxisAxisLabelRotate:0,xAxisAxisLabelTextStyleFontSize:14,xAxisAxisLabelTextStyleColor:"#303133",xAxisAxisLabelTextFontWeight:!1,xAxisSplitLineShow:!1,xAxisSplitLineLineStyleColor:"#DFDFDF",xAxisInverse:!1,yAxisName:"",yAxisNameTextStyleFontSize:14,yAxisNameTextStyleColor:"#303133",yAxisNameTextStyleFontWeight:!1,yAxisShow:!0,yAxisAxisLineLineStyleColor:"#303133",yAxisSplitLineShow:!0,yAxisSplitLineLineStyleColor:"#DFDFDF",yAxisAxisLabelTextStyleFontSize:14,yAxisAxisLabelTextStyleColor:"#303133",yAxisAxisLabelTextFontWeight:!1,seriesLabelShow:!0,seriesLabelFontSize:14,seriesLabelFontWeight:!1,seriesLabelColor:"#303133",seriesLabelBgColor:"",seriesLineStyleWidth:2,seriesSymbolRotate:4,tooltipShow:!0,tooltipTextStyleFontSize:14,tooltipTextStyleFontWeight:!1,tooltipTextStyleColor:"#303133",tooltipBgColor:"#fff",gridLeft:20,gridTop:50,gridRight:20,gridBottom:20,legendShow:!0,legendTextStyleFontSize:14,legendOrient:"horizontal",legendLeft:0,legendTop:0,AxisTextStyleColor:"",AxisLineStyleColor:"",colorList:[]},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:4,minH:8,maxW:12,maxH:20},{icon:"icon-ym icon-ym-generator-radar",label:"雷达图",jnpfKey:"radarChart",title:"雷达图",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-radar",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:[],radarAxisNameFontWeight:!1,radarAxisNameFontSize:14,radarAxisNameColor:"#303133",seriesAreaStyleOpacity:.3,radarCenterLeft:50,radarCenterTop:50,titleText:"",titleTextStyleColor:"#303133",titleTextStyleFontSize:18,titleTextStyleFontWeight:!1,titleLeft:"center",titleBgColor:"",titleSubtext:"",titleSubtextStyleColor:"#303133",titleSubtextStyleFontSize:12,titleSubtextStyleFontWeight:!1,seriesLabelShow:!0,seriesLabelFontSize:14,seriesLabelFontWeight:!1,seriesLabelColor:"#303133",seriesLabelBgColor:"",seriesLineStyleWidth:2,seriesSymbolRotate:4,tooltipShow:!0,tooltipTextStyleFontSize:14,tooltipTextStyleFontWeight:!1,tooltipTextStyleColor:"#303133",tooltipBgColor:"#fff",gridLeft:20,gridTop:50,gridRight:20,gridBottom:20,legendShow:!0,legendTextStyleFontSize:14,legendOrient:"horizontal",legendLeft:0,legendTop:0,AxisTextStyleColor:"",AxisLineStyleColor:"",colorList:[]},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:4,minH:8,maxW:12,maxH:20},{icon:"icon-ym icon-ym-generator-area",label:"地图",jnpfKey:"mapChart",title:"地图",renderKey:"",visibility:["pc"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-generator-area",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:[],mapType:["100000"],mspScale:1,bgColor:"",geoAreaColor:"#eee",geoBorderColor:"#606266",geoBorderWidth:1,geoLabelShow:!1,geoLabelColor:"#303133",geoLabelFontWeight:!1,geoLabelFontSize:14,geoShadowOffset:0,geoShadowColor:"#000",geoRoam:!0,geoAspectScale:.75,drillDown:!0,drillDownFontSize:14,drillDownFontWeight:!1,drillDownColor:"#303133",titleText:"",titleTextStyleColor:"#303133",titleTextStyleFontSize:18,titleTextStyleFontWeight:!1,titleLeft:"center",titleBgColor:"",titleSubtext:"",titleSubtextStyleColor:"#303133",titleSubtextStyleFontSize:12,titleSubtextStyleFontWeight:!1,tooltipShow:!0,tooltipTextStyleFontSize:14,tooltipTextStyleFontWeight:!1,tooltipTextStyleColor:"#303133",tooltipBgColor:"#fff",seriesCenterLeft:50,seriesCenterTop:50,seriesItemStyleOpacity:1,seriesType:"effectScatter",seriesPointSize:20,seriesBlurSize:20,seriesMaxOpacity:1,showNumber:void 0,appShowNumber:void 0,autoCarousel:!0,autoCarouselTime:3e3,visualMapType:"continuous",visualMapMin:0,visualMapMax:200,seriesBarWidth:30,seriesItemStyleBarBorderRadius:0,barTitleText:"数据统计排名",barTitleTextStyleFontSize:"14",barTitleTextStyleFontWeight:!1,barTitleTextStyleColor:"#303133",berGridTop:35,berGridRight:10,berGridBottom:180,updateMapType:""},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:4,minH:4,maxW:12,maxH:20},{icon:"icon-ym icon-ym-portal-rankList",label:"排行榜",jnpfKey:"rankList",title:"排行榜",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-rankList",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:[],columnOptions:[{label:"部门",value:"label"},{label:"金额",value:"value"}]},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:4,minH:4,maxW:12,maxH:20},{icon:"icon-ym icon-ym-portal-timeAxis",label:"时间轴",jnpfKey:"timeAxis",title:"时间轴",renderKey:"",visibility:["pc","app"],card:{titleFontSize:14,titleFontWeight:!1,titleFontColor:"#303133",titleLeft:"left",titleBgColor:"",cardIcon:"icon-ym icon-ym-portal-timeAxis",cardIconColor:"#606266",linkType:"",type:"",moduleId:"",urlAddress:"",linkTarget:"_self",appLinkType:"",appType:"",appModuleId:"",appUrlAddress:""},dataType:"static",propsApi:"",option:{styleType:1,defaultValue:[],layout:1,sortable:1,showNumber:void 0,appShowNumber:void 0},refresh:{autoRefresh:!1,autoRefreshTime:5},w:6,h:8,minW:4,minH:8,maxW:12,maxH:20}],r=["barChart","lineChart","pieChart","radarChart"],c=["notice","email","todoList"],d=["card","tab","collapse"],u=["rankList","timeAxis","mapChart"].concat(r),p=["text","image","carousel","video","iframe","todo","commonFunc","dataBoard","tableList"].concat(d),f=["text","image","carousel","video","iframe","rankList","timeAxis","schedule","tableList","mapChart"].concat(d),m=["text","image","video","rankList","timeAxis","tableList","mapChart"].concat(r),_=[{label:"左对齐",value:"left"},{label:"居中对齐",value:"center"},{label:"右对齐",value:"right"}],h=[{label:"无",value:"none"},{label:"下划线",value:"underline"},{label:"删除线",value:"line-through"}],v=[{label:"菜单",value:"1"},{label:"外链",value:"2"}],b=[{label:"横向",value:"horizontal"},{label:"纵向",value:"vertical"}],g=[{label:"无",title:"无",value:"none"},{label:"底部",title:"右侧",value:"bottomRight"},{label:"顶部",title:"左侧",value:"topLeft"}],y=[{label:"无",value:"never"},{label:"悬停",value:"hover"},{label:"始终",value:"always"}],D=[{label:"适应",value:"contain"},{label:"填充",value:"cover"},{label:"拉伸",value:"fill"}],w=[{label:"播放一次",value:"1"},{label:"循环播放",value:"2"}],x=[{label:"基础",value:1},{label:"堆叠",value:2},{label:"背景",value:4},{label:"对比",value:5},{label:"正负条",value:6},{label:"折柱图",value:7}],C=[{label:"基础",value:1},{label:"平滑",value:2},{label:"阶梯",value:3},{label:"堆叠",value:4}],k=[{label:"饼图",value:1},{label:"环形",value:2}],T=[{label:"基础",value:1},{label:"圆形",value:2}],F=[{label:"基础",value:1},{label:"勋章",value:2},{label:"奖杯",value:3},{label:"奖牌",value:4}],S=[{label:"基础",value:1},{label:"卡片",value:2}],N=[{label:"纵向-左右交错",value:1},{label:"纵向-右左交错",value:2},{label:"纵向-轴左侧",value:3},{label:"纵向-轴右侧",value:4},{label:"横向-上下交错",value:5},{label:"横向-下上交错",value:6},{label:"横向-轴上侧",value:7},{label:"横向-轴下侧",value:8}],L=[{label:"纵向-轴左侧",value:1},{label:"纵向-轴右侧",value:2},{label:"横向-轴上侧",value:3},{label:"横向-轴下侧",value:4}],O=[{label:"升序",value:1},{label:"降序",value:2}],$=[{label:"文本",value:1},{label:"HTML",value:2}],I=[{label:"本地上传",value:1},{label:"URL路径",value:2},{label:"远端数据",value:3}],j=[{label:"本地上传",value:1},{label:"URL路径",value:2},{label:"远端数据",value:3}],M=[{label:"散点",value:1},{label:"热力",value:2},{label:"柱形",value:3},{label:"柱形排名",value:4}],V=[{label:"横向滚动",value:1},{label:"全部展示",value:2}],A=[{label:"顶部",value:1},{label:"靠左",value:2}],P=[{label:"静态数据",value:"static"},{label:"远端数据",value:"dynamic"}]},"32ab":function(e,t,a){"use strict";a("0c2ed")},"32f9":function(e,t,a){},3376:function(e,t,a){},"338e":function(e,t,a){},"36ae":function(e,t,a){"use strict";a("ab74")},"377a":function(e,t,a){},"37eb":function(e,t,a){},"37ff":function(e,t,a){},3867:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center mask-config-dialog",attrs:{title:"掩码设置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"formRef",staticClass:"mt-20",attrs:{model:e.formData,rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("jnpf-form-tip-item",{attrs:{label:"填充符号",prop:"filler"}},[a("jnpf-select",{attrs:{placeholder:"请选择填充符号",options:e.fillerOptions,props:e.props,clearable:!1},model:{value:e.formData.filler,callback:function(t){e.$set(e.formData,"filler",t)},expression:"formData.filler"}})],1),a("jnpf-form-tip-item",{attrs:{label:"掩码规则",prop:"maskType"}},[a("el-select",{attrs:{placeholder:"请选择掩码规则","popper-class":"select-down"},on:{change:function(t){return e.onMaskTypeChange(t)}},model:{value:e.formData.maskType,callback:function(t){e.$set(e.formData,"maskType",t)},expression:"formData.maskType"}},e._l(e.maskTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),0==e.formData.maskType?[a("jnpf-form-tip-item",{attrs:{label:"开头显示",name:"prefixType"}},[a("jnpf-select",{attrs:{placeholder:"请选择开头显示",options:e.prefixTypeOptions,props:e.props,clearable:!1},model:{value:e.formData.prefixType,callback:function(t){e.$set(e.formData,"prefixType",t)},expression:"formData.prefixType"}})],1),2===e.formData.prefixType?a("jnpf-form-tip-item",{attrs:{label:"字数",name:"prefixLimit"}},[a("el-input-number",{attrs:{placeholder:"请输入",min:0,precision:0,"controls-position":"right"},on:{change:function(t){return e.onNumberChange(t,"prefixLimit")}},model:{value:e.formData.prefixLimit,callback:function(t){e.$set(e.formData,"prefixLimit",t)},expression:"formData.prefixLimit"}})],1):e._e(),3===e.formData.prefixType||4===e.formData.prefixType?a("jnpf-form-tip-item",{attrs:{label:"字符",name:"prefixSpecifyChar"}},[a("el-input",{attrs:{placeholder:"请输入字符"},model:{value:e.formData.prefixSpecifyChar,callback:function(t){e.$set(e.formData,"prefixSpecifyChar",t)},expression:"formData.prefixSpecifyChar"}})],1):e._e(),a("jnpf-form-tip-item",{attrs:{label:"结尾显示",name:"suffixType"}},[a("jnpf-select",{attrs:{placeholder:"请选择结尾显示",options:e.suffixTypeOptions,props:e.props,clearable:!1},model:{value:e.formData.suffixType,callback:function(t){e.$set(e.formData,"suffixType",t)},expression:"formData.suffixType"}})],1),2===e.formData.suffixType?a("jnpf-form-tip-item",{attrs:{label:"字数",name:"suffixLimit"}},[a("el-input-number",{attrs:{placeholder:"请输入",min:0,precision:0,"controls-position":"right"},on:{change:function(t){return e.onNumberChange(t,"suffixLimit")}},model:{value:e.formData.suffixLimit,callback:function(t){e.$set(e.formData,"suffixLimit",t)},expression:"formData.suffixLimit"}})],1):e._e(),3===e.formData.suffixType||4===e.formData.suffixType?a("jnpf-form-tip-item",{attrs:{label:"字符",name:"suffixSpecifyChar"}},[a("el-input",{attrs:{placeholder:"请输入字符"},model:{value:e.formData.suffixSpecifyChar,callback:function(t){e.$set(e.formData,"suffixSpecifyChar",t)},expression:"formData.suffixSpecifyChar"}})],1):e._e(),a("jnpf-form-tip-item",{attrs:{label:"显示字符",name:"ignoreChar"}},[a("el-input",{attrs:{placeholder:"多个字符之间用英文,号隔开，如：a,b,c",clearable:""},model:{value:e.formData.ignoreChar,callback:function(t){e.$set(e.formData,"ignoreChar",t)},expression:"formData.ignoreChar"}})],1),a("jnpf-form-tip-item",{attrs:{name:"useUnrealMask",label:"虚拟掩码","tip-label":"禁用：按照真实字数显示掩码；</br>启用：按照虚拟位数显示掩码，不暴露真实长度"}},[a("el-switch",{model:{value:e.formData.useUnrealMask,callback:function(t){e.$set(e.formData,"useUnrealMask",t)},expression:"formData.useUnrealMask"}})],1),e.formData.useUnrealMask?a("jnpf-form-tip-item",{attrs:{label:"掩码长度",name:"unrealMaskLength"}},[a("el-input-number",{attrs:{placeholder:"请输入",min:1,"controls-position":"right",precision:0,addonAfter:"个字"},on:{change:function(t){return e.onNumberChange(t,"unrealMaskLength")}},model:{value:e.formData.unrealMaskLength,callback:function(t){e.$set(e.formData,"unrealMaskLength",t)},expression:"formData.unrealMaskLength"}})],1):e._e()]:e._e(),a("el-divider"),a("jnpf-form-tip-item",{attrs:{label:"效果测试",name:"testText"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.isMask},model:{value:e.testText,callback:function(t){e.testText=t},expression:"testText"}},[a("template",{slot:"append"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.isMask,expression:"!isMask"}],staticClass:"cursor-pointer",on:{click:function(t){return e.handleMask()}}},[e._v("掩盖")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.isMask,expression:"isMask"}],staticClass:"cursor-pointer",on:{click:function(t){return e.handleRevert()}}},[e._v("解码")])])],2)],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)},l=[],o=a("5530"),n=a("c7eb"),s=(a("96cf"),a("1da1")),r=a("57fb"),c=[{id:"*",fullName:"*"},{id:"●",fullName:"●"},{id:"-",fullName:"-"},{id:".",fullName:"."},{id:"#",fullName:"#"}],d=[{id:1,fullName:"全掩盖"},{id:2,fullName:"姓名-显示前1个字，后1个字"},{id:3,fullName:"手机号-显示前3位，后4位"},{id:4,fullName:"邮箱-显示前3个字，@和之后的字"},{id:5,fullName:"身份证-显示前6位，后3位，虚拟为4位"},{id:6,fullName:"IP地址-显示第1段IP"},{id:7,fullName:"车牌号-显示前1个字，后2位"},{id:8,fullName:"银行卡号-显示前6位，后4位"},{id:0,fullName:"自定义规则"}],u=[{id:1,fullName:"不显示"},{id:2,fullName:"指定字数"},{id:3,fullName:"指定字符之前的字"},{id:4,fullName:"指定字符和之前的字"}],p=[{id:1,fullName:"不显示"},{id:2,fullName:"指定字数"},{id:3,fullName:"指定字符之后的字"},{id:4,fullName:"指定字符和之后的字"}],f={props:["type"],components:{},data:function(){return{visible:!1,fillerOptions:c,maskTypeOptions:d,prefixTypeOptions:u,suffixTypeOptions:p,formData:r["a"],rules:{fullName:[{required:!0,message:"请输入选项名"}],id:[{required:!0,message:"请输入选项值"}]},testText:"",originTestText:"",isMask:!1,props:{label:"fullName",value:"id"}}},methods:{openModal:function(e){var t=this;this.visible=!0,this.isMask=!1,this.formData=JSON.parse(JSON.stringify(e)),this.testText="",this.$nextTick((function(){t.$refs.formRef.clearValidate()}))},handleCancel:function(){this.visible=!1},handleSubmit:function(){var e=Object(s["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{this.visible=!1,this.$emit("confirm",this.formData)}catch(t){}case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleMask:function(){if(this.testText){this.originTestText=this.testText,this.isMask=!0;var e=Object(r["b"])(this.formData),t=e.getMaskedText;this.testText=t(this.testText)}},handleRevert:function(){this.testText=this.originTestText,this.originTestText="",this.isMask=!1},onNumberChange:function(e,t){var a=this;if(!e)return"unrealMaskLength"===t?this.$nextTick((function(){a.formData[t]=1})):void this.$nextTick((function(){a.formData[t]=0}))},onMaskTypeChange:function(e){this.testText="",this.originTestText="",this.isMask=!1,this.formData=Object(o["a"])(Object(o["a"])({},r["a"]),{},{maskType:e})}}},m=f,_=(a("2f1b"),a("2877")),h=Object(_["a"])(m,i,l,!1,null,null,null);t["a"]=h.exports},"3aee":function(e,t,a){"use strict";a("19d0")},"3ba1":function(e,t,a){},"3c80":function(e,t,a){"use strict";a("120f")},"3d2f":function(e,t,a){"use strict";a("a521")},"3d85":function(e,t,a){"use strict";a("9230")},"3dfb":function(e,t,a){"use strict";a("51e8")},4187:function(e,t,a){},4543:function(e,t,a){},"455d":function(e,t,a){"use strict";a("af95")},"45b1":function(e,t,a){},4790:function(e,t,a){},"49a8":function(e,t,a){},"49aa":function(e,t,a){"use strict";var i,l,o=a("07bc"),n=o["a"],s=a("2877"),r=Object(s["a"])(n,i,l,!1,null,null,null);t["a"]=r.exports},"4a0b":function(e,t,a){"use strict";a("e5d0")},"4ba8":function(e,t,a){},"4c46":function(e,t,a){},"4d3d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center superQuery-dialog",attrs:{title:"高级查询","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"superQuery-main"},[e.conditionList.length?[i("Condition",{key:e.key2,ref:"base",attrs:{value:e.conditionList,columnOptions:e.columnOptions,matchLogic:e.matchLogic}})]:i("div",{staticClass:"query-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("11d5"),alt:""}}),i("div",{staticClass:"noData-txt"},[i("span",[e._v("没有任何查询条件")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.addCondition}},[e._v("点击新增")])],1)])],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"footer-options"},[i("el-button",{staticClass:"add-btn",on:{click:e.addPlan}},[e._v("保存方案")]),i("el-popover",{ref:"planPopper",attrs:{width:"240",trigger:"click","popper-class":"plan-popper"}},[i("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("方案选择"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e.planList.length?i("div",{staticClass:"plan-list"},e._l(e.planList,(function(t,a){return i("div",{key:a,staticClass:"plan-list-item",on:{click:function(a){return e.selectPlan(t)}}},[i("el-link",{staticClass:"plan-list-name",attrs:{type:"primary",underline:!1}},[e._v(e._s(t.fullName)+"\n            ")]),i("i",{staticClass:"el-icon-close",on:{click:function(i){return i.stopPropagation(),e.delPlan(t.id,a)}}})],1)})),0):i("div",{staticClass:"noData-txt"},[e._v("暂无数据")])],1)],1),i("el-button",{on:{click:e.close}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.query()}}},[e._v("查 询")])],1),i("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"保存方案",visible:e.addPlanVisible,width:"600px","append-to-body":"","lock-scroll":""},on:{"update:visible":function(t){e.addPlanVisible=t}}},[i("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"方案名称",prop:"fullName"}},[i("el-input",{attrs:{placeholder:"请输入保存的方案名称"},model:{value:e.dataForm.fullName,callback:function(t){e.$set(e.dataForm,"fullName",t)},expression:"dataForm.fullName"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addPlanVisible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),i("el-button",{attrs:{type:"primary",loading:e.saveBtnLoading},on:{click:function(t){return e.savePlan()}}},[e._v("\n        "+e._s(e.$t("common.confirmButton")))])],1)],1)],1)},l=[],o=a("53ca"),n=(a("6762"),a("2fdb"),a("5530")),s=a("ba61"),r=a("8a04"),c=a("ed08"),d=[{logic:"and",groups:[{fieldValue:"",field:"",symbol:"",jnpfKey:"",cellKey:+new Date}]}],u={components:{Condition:r["a"]},props:{columnOptions:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1,addPlanVisible:!1,loading:!1,btnLoading:!1,saveBtnLoading:!1,conditionList:Object(c["b"])(d),staging:{},key2:+new Date,planList:[],fieldOptions:[],dataForm:{fullName:""},dataRule:{fullName:[{required:!0,message:"请输入保存的方案名称",trigger:"blur"}]},matchLogic:"and"}},computed:{currMenuId:function(){return this.$route.meta.modelId||""}},methods:{init:function(){var e=this;this.visible=!0,this.loading=!0;var t=JSON.parse(JSON.stringify(this.columnOptions));this.fieldOptions=t,this.getAdvancedQueryList(),this.$nextTick((function(){e.loading=!1}))},close:function(){this.conditionList=this.staging&&this.staging.conditionList||Object(c["b"])(d),this.matchLogic=this.staging&&this.staging.matchLogic||"and",this.visible=!1},getAdvancedQueryList:function(){var e=this;this.currMenuId&&Object(s["d"])(this.currMenuId).then((function(t){e.planList=t.data.list}))},addCondition:function(){var e={logic:"and",groups:[{field:"",symbol:"",jnpfKey:"",fieldValueType:2,fieldValue:void 0,fieldValueJnpfKey:"",cellKey:+new Date}]};this.conditionList.push(e)},delPlan:function(e,t){var a=this;Object(s["b"])(e).then((function(e){a.$message({type:"success",message:e.msg,duration:1500,onClose:function(){a.planList.splice(t,1)}})}))},selectPlan:function(e){this.conditionList=e.conditionJson?JSON.parse(e.conditionJson):[],this.matchLogic=e.matchLogic,this.key2=+new Date,this.$refs.planPopper.doClose()},addPlan:function(){var e=this;this.exist()&&(this.addPlanVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].resetFields()})))},savePlan:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=e.planList.some((function(t){return t.fullName===e.dataForm.fullName}));if(!a)return e.submit();var i=e.planList.filter((function(t){return t.fullName===e.dataForm.fullName}));e.$confirm("".concat(i[0].fullName,"已存在, 是否覆盖方案?"),"",{type:"warning"}).then((function(){e.submit(i[0].id)})).catch((function(){}))}}))},submit:function(e){var t=this;this.saveBtnLoading=!0;var a=Object(n["a"])(Object(n["a"])({id:e||""},this.dataForm),{},{matchLogic:this.matchLogic,moduleId:this.currMenuId,conditionJson:JSON.stringify(this.conditionList)}),i=a.id?s["c"]:s["a"];i(a).then((function(e){t.getAdvancedQueryList(),t.addPlanVisible=!1,t.saveBtnLoading=!1,t.$message({message:e.msg,type:"success",duration:1500})})).catch((function(){t.saveBtnLoading=!1}))},getDataType:function(e){return e?["inputNumber","datePicker","rate","slider"].includes(e)?"number":["uploadFile","uploadImg","cascader","organizeSelect","areaSelect"].includes(e)?"array":"":""},exist:function(e){var t="query"==e?"查询":"保存",a=this.$refs.base&&this.$refs.base.getData()||"";if("query"==e&&!a)return!0;if(!a)return this.$message.warning("请添加".concat(t,"条件"));this.conditionList=a.conditionList,this.matchLogic=a.matchLogic;for(var i=!0,l=0;l<this.conditionList.length;l++)for(var n=this.conditionList[l],s=0;s<n.groups.length;s++){var r=n.groups[s];if(!r.field)return this.$message.warning("".concat(t,"字段不能为空")),void(i=!1);if(!r.symbol)return this.$message.warning("".concat(t,"符号不能为空")),void(i=!1);if(!["null","notNull"].includes(r.symbol)&&!["switch"].includes(r.jnpfKey)&&(!r.fieldValue&&0!==r.fieldValue||"object"===Object(o["a"])(r.fieldValue)&&0==r.fieldValue.length||this.jnpf.isEmpty(r.fieldValue)))return this.$message.warning("数据值不能为空"),void(i=!1)}return i},query:function(){if(this.exist("query")){var e={matchLogic:this.matchLogic,conditionList:this.conditionList};this.staging=JSON.parse(JSON.stringify(e)),e=JSON.stringify(e),this.conditionList.length||(e=""),this.$emit("superQuery",e),this.visible=!1}}}},p=u,f=(a("8c97"),a("00d3"),a("2877")),m=Object(f["a"])(p,i,l,!1,null,"72c463e9",null);t["a"]=m.exports},"4ddb":function(e,t,a){"use strict";a("1ed7")},"4ff8":function(e,t,a){"use strict";a("ab49")},"51e8":function(e,t,a){},5262:function(e,t,a){},5330:function(e,t,a){},"548a":function(e,t,a){},"54b4":function(e,t,a){},5516:function(e,t,a){"use strict";a("d159")},5684:function(e,t,a){"use strict";a("2f3b")},5728:function(e,t,a){"use strict";a("377a")},5964:function(e,t,a){"use strict";a("97e0")},5987:function(e,t,a){},"59ed":function(e,t,a){"use strict";a("d3a7")},"59ef":function(e,t,a){},"5a80":function(e,t,a){},"5b08":function(e,t,a){"use strict";a("5330")},"5bad":function(e,t,a){"use strict";a("8dca")},"5ca16":function(e,t,a){},"5e8a":function(e,t,a){"use strict";a("2e66")},"5ea0":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center update-dialog",attrs:{visible:e.visible,"append-to-body":"",title:"批量编辑",closeOnClickModal:!1,"lock-scroll":"",width:"700px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-alert",{attrs:{title:"注意：每行对应一个选项；选项名和选项值之间用英文 | 隔开。参考格式如下：",type:"warning",closable:!1,"show-icon":""}}),a("div",{staticClass:"demo-box"},[a("div",{staticClass:"demo-box-cell"},[a("p",{staticClass:"w-220px"},[e._v("格式一：选项名和选项值一致时")]),a("span",{staticClass:"w-100px"},[e._v("选项名")]),a("p",[e._v("输入示例："),a("span",[e._v("选项一")])])]),a("div",{staticClass:"demo-box-cell"},[a("p",{staticClass:"w-220px"},[e._v("格式二：选项名和选项值不一致时")]),a("span",{staticClass:"w-100px"},[e._v("选项名|选项值")]),a("p",[e._v("输入示例："),a("span",[e._v("选项一|选项一的值")])])])]),a("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:100,autosize:""},model:{value:e.resultInfo,callback:function(t){e.resultInfo=t},expression:"resultInfo"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSure()}}},[e._v("\n      "+e._s(e.$t("common.confirmButton"))+"\n    ")])],1)],1)},l=[],o=(a("28a5"),a("ac6a"),{components:{},props:{},data:function(){return{visible:!1,resultInfo:"",separator:"|",options:[]}},computed:{},methods:{init:function(e){this.options=e||[],this.analysis(),this.visible=!0},analysis:function(){var e=this;this.resultInfo="",this.options.length>0&&this.options.forEach((function(t){t.id,t.fullName,e.resultInfo+=t.fullName+e.separator+t.id+"\n"}))},handleSure:function(){var e=this,t=this.resultInfo.split("\n");t.length>0?(this.options=[],t.forEach((function(t){t&&t.trim()&&(-1!==t.indexOf(e.separator)?e.options.push({id:t.split(e.separator)[1],fullName:t.split(e.separator)[0]}):e.options.push({id:t,fullName:t}))}))):this.options=[],this.$emit("change",this.options),this.visible=!1}}}),n=o,s=(a("5e8a"),a("2877")),r=Object(s["a"])(n,i,l,!1,null,"dbee9bca",null);t["a"]=r.exports},"5fa4":function(e,t,a){},6058:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.routerType,e._b({tag:"component"},"component",e.linkProps(e.to),!1),[e._t("default")],2)},l=[],o=(a("a481"),a("c5f6"),a("61f7")),n=a("5f87"),s={props:{linkType:{type:String,default:""},urlAddress:{type:String,default:""},linkTarget:{type:String,default:"self"},type:{type:[Number,String],default:0},propertyJson:{type:String}},data:function(){return{to:""}},computed:{isExternal:function(){return Object(o["b"])(this.to)},routerType:function(){return this.linkType&&this.urlAddress?this.isExternal?"a":"router-link":"div"}},created:function(){this.linkType&&this.init()},methods:{init:function(){var e="/"+this.urlAddress;if(6==this.type){var t=this.propertyJson?JSON.parse(this.propertyJson):null,a="";t&&(a=t.moduleId||""),e="".concat(this.define.dataV,"/view/").concat(a,"?token=").concat(Object(n["b"])())}7!=this.type&&2!=this.linkType||(e="_self"===this.linkTarget?"/externalLink?href=".concat(encodeURIComponent(Base64.encode(this.urlAddress))):this.urlAddress.replace(/\${dataV}/g,this.define.dataV).replace(/\${jnpfToken}/g,Object(n["b"])())),this.to=e},linkProps:function(e){return this.isExternal?{href:e,target:"_blank",rel:"noopener"}:{to:e}}}},r=s,c=a("2877"),d=Object(c["a"])(r,i,l,!1,null,null,null);t["a"]=d.exports},"63d4":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.allLoading,expression:"allLoading"}],staticClass:"transfer__body",style:{height:e.height}},[a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("el-input",{attrs:{placeholder:"输入关键词进行搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.pagination.keyword,callback:function(t){e.$set(e.pagination,"keyword",t)},expression:"pagination.keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),a("div",{staticClass:"transfer-pane__body left-pane"},[a("el-tabs",{staticClass:"transfer-pane__body-tab",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部数据",name:"all"}},[this.isAsync?e._e():a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.props,"check-on-click-node":"","node-key":"id",lazy:"",load:e.loadNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.label}},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,372226650)}),this.isAsync?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading&&1==e.pagination.currentPage,expression:"loading && pagination.currentPage==1"}],ref:"infiniteBody",staticClass:"single-list"},[e.treeData.length?e._l(e.treeData,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user",on:{click:function(a){return e.handleNodeClick(t)}}},[a("div",{staticClass:"selected-item-main"},[a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])])],1)])})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2):e._e()],1),a("el-tab-pane",{attrs:{label:"当前组织",name:"department"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"single-list"},[e.treeData2.length?e._l(e.treeData2,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user",on:{click:function(a){return e.handleNodeClick2(t)}}},[a("div",{staticClass:"selected-item-main"},[a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])])],1)])})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)]),a("el-tab-pane",{attrs:{label:"我的下属",name:"subordinates"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"single-list"},[e.treeData3.length?e._l(e.treeData3,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user",on:{click:function(a){return e.handleNodeClick2(t)}}},[a("div",{staticClass:"selected-item-main"},[a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])])],1)])})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)])],1)],1)]),a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("span",[e._v("已选")]),a("el-button",{staticClass:"removeAllBtn",attrs:{type:"text"},on:{click:e.removeAll}},[e._v("清空列表")])],1),a("div",{staticClass:"transfer-pane__body shadow right-pane"},[e.selectedData.length?e._l(e.selectedData,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user"},[a("div",{staticClass:"selected-item-main"},[a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])]),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.removeData(i)}}})],1)])})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)])])},l=[],o=a("2909"),n=a("b3f4"),s=a("7a1a"),r={name:"JNPF-userTransfer",data:function(){return{allLoading:!1,loading:!1,activeName:"",treeData:[],treeData2:[],treeData3:[],selectedData:[],props:{children:"children",label:"fullName",isLeaf:"isLeaf"},nodeId:"0",ids:[],total:0,isAsync:!1,finish:!1,listLoading:!1,pagination:{keyword:"",currentPage:1,pageSize:20}}},props:{height:{type:String,default:"400px"},value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1}},watch:{activeName:function(e){this.pagination.keyword="",this.isAsync=!1,e&&(this.nodeId="0",this.treeData=[],this.treeData2=[],this.treeData3=[],this.getData())}},methods:{init:function(){var e=this;this.selectedData=[],this.ids=[],this.pagination.keyword="",this.activeName="",this.nodeId="0",this.isAsync=!1,this.finish=!1,this.$nextTick((function(){e.activeName="all",e.getSelectList()}))},bindScroll:function(){var e=this,t=e.$refs.infiniteBody;t.addEventListener("scroll",Object(s["throttle"])(300,(function(){t.scrollHeight-t.clientHeight-t.scrollTop<=200&&!e.listLoading&&!e.finish&&(e.pagination.currentPage+=1,e.getList())})))},getData:function(){var e=this;"all"===this.activeName?this.getList():"department"===this.activeName?(this.loading=!0,this.treeData2=[],Object(n["l"])({keyword:this.pagination.keyword,organizeId:"0"}).then((function(t){e.treeData2=t.data,e.loading=!1}))):(this.loading=!0,this.treeData3=[],Object(n["o"])(this.pagination.keyword).then((function(t){e.treeData3=t.data,e.loading=!1})))},getSelectList:function(){var e=this;if(this.allLoading=!0,!this.value.length)return this.allLoading=!1;Object(n["q"])(this.value).then((function(t){e.selectedData=t.data.list,e.ids=e.selectedData.map((function(e){return e.id})),e.allLoading=!1}))},search:function(){var e=this;this.nodeId="0",this.treeData=[],this.pagination.currentPage=1,this.isAsync=!!this.pagination.keyword,this.finish=!1,this.isAsync&&"all"===this.activeName&&this.$nextTick((function(){e.bindScroll()})),this.getData()},getList:function(){var e=this;this.loading=!0,this.pagination.keyword&&(this.nodeId="0"),Object(n["j"])(this.nodeId,this.pagination).then((function(t){e.pagination.keyword?(t.data.list.length<e.pagination.pageSize&&(e.finish=!0),e.treeData=[].concat(Object(o["a"])(e.treeData),Object(o["a"])(t.data.list)),e.total=t.data.pagination.total):e.treeData=t.data.list,e.loading=!1}))},loadNode:function(e,t){if(0===e.level)return this.nodeId="0",t(this.treeData);this.nodeId=e.data.id,Object(n["j"])(this.nodeId).then((function(e){t(e.data.list)}))},handleNodeClick:function(e){"user"===e.type&&this.handleNodeClick2(e)},handleNodeClick2:function(e){var t=this.selectedData.some((function(t){return t.id===e.id}));t||(this.multiple?this.selectedData.push(e):this.selectedData=[e],this.multiple?this.ids.push(e.id):this.ids=[e.id],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData))},removeAll:function(){this.selectedData=[],this.ids=[],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)},removeData:function(e){this.selectedData.splice(e,1),this.ids.splice(e,1),this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)}}},c=r,d=a("2877"),u=Object(d["a"])(c,i,l,!1,null,null,null);t["a"]=u.exports},6433:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item",on:{click:function(t){return t.stopPropagation(),e.handleClick(e.item)}}},["todo"===e.item.jnpfKey?a("HTodo",{key:e.item.renderKey,attrs:{activeData:e.item}}):e._e(),"commonFunc"===e.item.jnpfKey?a("HCommonFunc",{key:e.item.renderKey,attrs:{activeData:e.item}}):e._e(),"dataBoard"===e.item.jnpfKey?a("HDataBoard",{key:e.item.renderKey,attrs:{activeData:e.item}}):e._e(),"todoList"===e.item.jnpfKey?a("HTodoList",{attrs:{activeData:e.item}}):e._e(),"notice"===e.item.jnpfKey?a("HNotice",{key:e.item.renderKey,attrs:{activeData:e.item,showType:e.showType}}):e._e(),"email"===e.item.jnpfKey?a("HEmail",{attrs:{activeData:e.item}}):e._e(),"tableList"===e.item.jnpfKey?a("HTable",{key:e.item.renderKey,attrs:{activeData:e.item,showType:e.showType}}):e._e(),"text"===e.item.jnpfKey?a("HText",{key:e.item.renderKey,attrs:{activeData:e.item}}):e._e(),"image"===e.item.jnpfKey?a("HImage",{key:e.item.renderKey,attrs:{activeData:e.item}}):e._e(),"carousel"===e.item.jnpfKey?a("HCarousel",{key:e.item.renderKey,attrs:{activeData:e.item}}):e._e(),"video"===e.item.jnpfKey?a("HVideo",{key:e.item.renderKey,attrs:{activeData:e.item}}):e._e(),"schedule"===e.item.jnpfKey?a("HSchedule",{key:e.item.renderKey,attrs:{activeData:e.item}}):e._e(),"iframe"===e.item.jnpfKey?a("HIframe",{attrs:{activeData:e.item}}):e._e(),"barChart"===e.item.jnpfKey?a("HBarChart",{attrs:{activeData:e.item}}):e._e(),"lineChart"===e.item.jnpfKey?a("HLineChart",{attrs:{activeData:e.item}}):e._e(),"pieChart"===e.item.jnpfKey?a("HPieChart",{attrs:{activeData:e.item}}):e._e(),"radarChart"===e.item.jnpfKey?a("HRadarChart",{attrs:{activeData:e.item}}):e._e(),"mapChart"===e.item.jnpfKey?a("HMapChart",{attrs:{activeData:e.item}}):e._e(),"rankList"===e.item.jnpfKey?a("HRankList",{attrs:{activeData:e.item}}):e._e(),"timeAxis"===e.item.jnpfKey?a("HTimeAxis",{attrs:{activeData:e.item}}):e._e(),"card"===e.item.jnpfKey?[a("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.item.title?a("CardHeader",{attrs:{slot:"header",title:e.item.title,card:e.item.card},slot:"header"}):e._e(),a("div",{staticClass:"portal-box-body"},[e._l(e.item.children,(function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.item.children&&e.item.children.length,expression:"item.children&&item.children.length"}],key:i,staticClass:"portal-box-item",on:{click:function(a){return a.stopPropagation(),e.handleClick(t)}}},[a("parser",{class:{"active-item":t.i===e.activeId},attrs:{item:t,activeId:e.activeId,detailed:e.detailed}}),e.detailed?e._e():a("el-popconfirm",{staticClass:"drawing-item-delete",attrs:{title:"确定删除该组件？"},on:{confirm:function(t){e.handleRemoveItem(i,e.item.children)}}},[a("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},slot:"reference"})])],1)})),a("add-btn",{directives:[{name:"show",rawName:"v-show",value:!e.item.children.length&&!e.detailed,expression:"!item.children.length&&!detailed"}],attrs:{activeData:e.item},on:{addComponent:e.addComponent}})],2)],1)]:e._e(),"tab"===e.item.jnpfKey?[a("el-tabs",{staticClass:"portal-eChart-tab",class:{"portal-eChart-tab-position":"left"==e.item["tab-position"]||"right"==e.item["tab-position"]},attrs:{type:e.item.type,"tab-position":e.item["tab-position"]},on:{"tab-click":e.handleTabClick},model:{value:e.item.active,callback:function(t){e.$set(e.item,"active",t)},expression:"item.active"}},e._l(e.item.children,(function(t){return a("el-tab-pane",{key:t.name,style:{color:"red"},attrs:{label:t.title,name:t.name}},[a("span",{attrs:{slot:"label"},slot:"label"},[e.item.icon?a("i",{class:t.icon}):e._e(),e._v(" "+e._s(t.title))]),a("div",{staticClass:"portal-box-body"},[e._l(t.children,(function(i,l){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.children&&t.children.length,expression:"child.children&&child.children.length"}],key:l,staticClass:"portal-box-item",on:{click:function(t){return t.stopPropagation(),e.handleClick(i)}}},[a("parser",{class:{"active-item":i.i===e.activeId},attrs:{item:i,activeId:e.activeId,detailed:e.detailed}}),e.detailed?e._e():a("el-popconfirm",{staticClass:"drawing-item-delete",attrs:{title:"确定删除该组件？"},on:{confirm:function(a){e.handleRemoveItem(l,t.children)}}},[a("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},slot:"reference"})])],1)})),a("add-btn",{directives:[{name:"show",rawName:"v-show",value:!t.children.length&&!e.detailed,expression:"!child.children.length&&!detailed"}],attrs:{activeData:e.item},on:{addComponent:e.addComponent}})],2)])})),1)]:e._e(),"collapse"===e.item.jnpfKey?[a("el-collapse",{staticClass:"portal-eChart-tab",attrs:{accordion:e.item.accordion},model:{value:e.item.active,callback:function(t){e.$set(e.item,"active",t)},expression:"item.active"}},e._l(e.item.children,(function(t,i){return a("el-collapse-item",{key:i,attrs:{title:t.title,name:t.name}},[a("div",{staticClass:"portal-box-body"},[t.children&&t.children.length?a("div",{staticClass:"portal-box-item"},e._l(t.children,(function(e,t){return a("parser",{key:t,staticStyle:{},attrs:{item:e}})})),1):a("add-btn",{attrs:{activeData:e.item},on:{addComponent:function(t){return e.addComponent(t,i)}}})],1)])})),1)]:e._e()],2)},l=[],o=(a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?a("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),a("div",{staticClass:"todo-box-body"},e._l(e.list,(function(t,i){return a("router-link",{directives:[{name:"show",rawName:"v-show",value:!t.noShow,expression:"!item.noShow"}],key:i,staticClass:"item",class:{"item-box":e.option.showBorder},style:{width:100/(e.option.rowNumber||3)+"%"},attrs:{to:t.category?t.urlAddress+"?category="+t.category:t.urlAddress}},[a("i",{class:t.icon,style:{background:t.iconBgColor}}),a("div",{staticClass:"text"},[a("p",{staticClass:"num",style:{"font-size":e.option.valueFontSize+"px","font-weight":e.option.valueFontWeight?"bolder":"normal",color:e.option.valueFontColor}},[e._v("\n          "+e._s(t.num)+"\n        ")]),a("p",{staticClass:"name",style:{"font-size":e.option.labelFontSize+"px","font-weight":e.option.labelFontWeight?"bolder":"normal",color:e.option.labelFontColor}},[e._v("\n          "+e._s(t.fullName)+"\n        ")])])])})),1)],1)}),n=[],s=(a("ac6a"),a("3191")),r=a("c288"),c={components:{CardHeader:r["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{list:[]}},computed:{option:function(){return this.activeData.option}},created:function(){this.list=this.option.defaultValue,this.initData()},methods:{initData:function(){var e=this,t={flowDoneType:[],toBeReviewedType:[],flowCirculateType:[]};this.list.map((function(e){"flowDone"==e.id&&(t.flowDoneType=e.category),"toBeReviewed"==e.id&&(t.toBeReviewedType=e.category),"flowCirculate"==e.id&&(t.flowCirculateType=e.category)})),Object(s["c"])(t).then((function(t){e.list.forEach((function(e){"flowDone"==e.id&&(e.num=t.data.flowDone||0),"toBeReviewed"==e.id&&(e.num=t.data.toBeReviewed||0),"flowCirculate"==e.id&&(e.num=t.data.flowCirculate||0)}))}))}}},d=c,u=(a("6672"),a("2877")),p=Object(u["a"])(d,o,n,!1,null,"28299b56",null),f=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?a("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),a("div",{staticClass:"commonFunc-box-body"},e._l(e.list,(function(t,i){return a("web-link",{key:i,staticClass:"item com-hover",class:{"item-box":e.option.showBorder,"item-horizontal-box":2==e.option.styleType},style:{width:100/(e.option.rowNumber||5)+"%"},attrs:{linkType:t.linkType,urlAddress:t.urlAddress,linkTarget:t.linkTarget,type:t.type,propertyJson:t.propertyJson}},[a("i",{class:t.icon,style:{color:t.iconBgColor}}),a("p",{staticClass:"name",style:{"font-size":e.option.labelFontSize+"px","font-weight":e.option.labelFontWeight?"bolder":"normal",color:e.option.labelFontColor}},[e._v("\n        "+e._s(t.fullName))])])})),1)],1)},_=[],h=a("6058"),v={components:{webLink:h["a"],CardHeader:r["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{list:[]}},computed:{option:function(){return this.activeData.option}},created:function(){this.list=this.option.defaultValue}},b=v,g=(a("6fa8"),Object(u["a"])(b,m,_,!1,null,"873e79d0",null)),y=g.exports,D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-todoList-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"portal-todoList-box-body"},[e.list.length?e._l(e.list,(function(t,a){return i("a",{key:a,staticClass:"item com-hover",on:{click:function(a){return e.goDetail(t)}}},[i("span",{staticClass:"name"},[e._v(e._s(t.fullName))]),i("span",{staticClass:"time"},[e._v(e._s(e._f("toDate")(t.creatorTime,"yyyy-MM-dd")))])])})):i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])],2)],1)},w=[],x={components:{CardHeader:r["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{list:[]}},created:function(){this.getData()},methods:{getData:function(){var e=this;Object(s["b"])().then((function(t){e.list=t.data.list?t.data.list.slice(0,7):[]}))},goDetail:function(e){var t=JSON.stringify(e),i=a("27ae").Base64;this.$router.push("/workFlowDetail?config="+encodeURIComponent(i.encode(t)))}}},C=x,k=Object(u["a"])(C,D,w,!1,null,null,null),T=k.exports,F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-notice-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"portal-notice-box-body"},[[1==e.activeData.option.styleType?[i("JNPF-table",{class:e.activeData.border?"":"noticeList",attrs:{data:e.defaultValue,"show-header":e.activeData.option.showHeader,hasNO:!1,border:e.activeData.border,"header-cell-style":{"font-size":e.activeData.option.headerFontSize+"px","text-align":e.activeData.option.headerLeft,background:e.activeData.option.headerBgColor,color:e.activeData.option.headerFontColor,"font-weight":e.activeData.option.headerFontWeight?"bolder":"normal"},"cell-style":e.tableRowClassName,"default-sort":{prop:"date",order:"descending"}}},[e.activeData.option.tableIndex?i("el-table-column",{attrs:{type:"index",width:"50",label:"序号",fixed:"left",align:"center"}}):e._e(),e._l(e.list,(function(t,a){return["classify"!==t.filedName?i("el-table-column",{key:a,attrs:{prop:t.filedName,label:t.fullName,align:t.align,width:t.width,sortable:t.sortable,"show-overflow-tooltip":e.activeData.option.showOverflow,fixed:"none"==t.fixed?"":t.fixed},scopedSlots:e._u([{key:"default",fn:function(a){return["fullName"===t.filedName?i("a",{staticClass:"scope-a",on:{click:function(t){return e.readInfo(a.row)}}},[e.list.filter((function(e){return"classify"===e.filedName}))[0].show?i("span",[e._v(e._s("【"+a.row.category+"】"))]):e._e(),i("span",{staticClass:"title"},[e._v("\n                    "+e._s(a.row[t.filedName])+"\n                  ")])]):i("span",[e._v(e._s(a.row[t.filedName]))])]}}],null,!0)}):e._e()]}))],2)]:e._e(),1!=e.activeData.option.styleType?[e.defaultValue.length?[i("div",{staticStyle:{padding:"0 18px"}},e._l(e.defaultValue,(function(t,a){return i("div",{key:a,staticClass:"portal-list-box",style:{"border-bottom":a==e.defaultValue.length-1?"none":"1px solid #ebeef5"}},[i("div",a%2==0?{staticClass:"portal-list-item",style:{background:e.activeData.option.noticeOddLineColor?e.activeData.option.noticeOddLineColor:e.activeData.option.noticeBgColor}}:{staticClass:"portal-list-item",style:{background:e.activeData.option.noticeEventLineColor?e.activeData.option.noticeEventLineColor:e.activeData.option.noticeBgColor}},[e.activeData.option.showImage?i("div",{staticClass:"item-image-box"},["公告"==t.category?i("img",{staticClass:"item-image",attrs:{src:t.coverImage?e.define.comUrl+t.coverImage:e.coverImage,alt:""}}):i("img",{staticClass:"item-image",attrs:{src:t.coverImage?e.define.comUrl+t.coverImage:e.coverImage2,alt:""}})]):e._e(),i("div",{staticClass:"item-r"},[i("div",{staticClass:"item-r-inner"},[e.list[0].show?i("div",{staticClass:"item-r-inner-type"},["公告"==t.category?i("el-tag",{staticStyle:{color:"#9016f3"},attrs:{size:"mini",hit:!1,color:"#ebe6ff"}},[e._v("公告")]):"通知"==t.category?i("el-tag",{attrs:{hit:!1,size:"mini"}},[e._v("通知")]):i("el-tag",{attrs:{hit:!1,size:"mini",type:"warning"}},[e._v("其它")])],1):e._e(),e.list[1].show?i("a",{staticClass:"item-r-title",style:{color:e.list[1].fontColor,"font-size":e.list[1].fontSize+"px","font-weight":e.list[1].fontWeight?700:400},on:{click:function(a){return e.readInfo(t)}}},[e._v("\n                      "+e._s(t.fullName)+"\n                    ")]):e._e(),2==e.activeData.option.styleType&&e.list[3].show?i("div",[1==e.list[3].timeClassify?i("p",{style:{color:e.list[3].fontColor,"font-size":e.list[3].fontSize+"px","font-weight":e.list[3].fontWeight?700:400}},[e._v("\n                        "+e._s(e._f("toDateValue")(t.creatorTime)))]):i("p",{style:{color:e.list[3].fontColor,"font-size":e.list[3].fontSize+"px","font-weight":e.list[3].fontWeight?700:400}},[e._v("\n                        "+e._s(e._f("toDateValue")(t.releaseTime)))])]):e._e()]),e.list[2].show?i("p",{staticClass:"item-r-content",style:{color:e.list[2].fontColor,"font-size":e.list[2].fontSize+"px","font-weight":e.list[2].fontWeight?700:400}},[e._v("\n                    "+e._s(t.excerpt))]):e._e(),3==e.activeData.option.styleType&&e.list[3].show?i("div",{staticClass:"item-r-time"},[1==e.list[3].timeClassify?i("p",{style:{color:e.list[3].fontColor,"font-size":e.list[3].fontSize+"px","font-weight":e.list[3].fontWeight?700:400}},[e._v("\n                      "+e._s(e._f("toDateValue")(t.creatorTime)))]):i("p",{style:{color:e.list[3].fontColor,"font-size":e.list[3].fontSize+"px","font-weight":e.list[3].fontWeight?700:400}},[e._v("\n                      "+e._s(e._f("toDateValue")(t.releaseTime)))])]):e._e()])])])})),0)]:i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])]:e._e()]],2),e.formVisible?i("Form",{ref:"Form"}):e._e()],1)},S=[],N=a("079b"),L={components:{CardHeader:r["a"],Form:N["default"]},props:{showType:{type:String,default:"pc"},activeData:{type:Object,default:function(){}}},data:function(){return{coverImage:a("ca35"),coverImage2:a("d9b7"),key:+new Date,defaultValue:[],list:[],typeList:[],formVisible:!1}},watch:{"activeData.option.noticeCount":function(){this.initData()}},created:function(){this.initData()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex,a={};return a["font-size"]=this.activeData.option.tableFontSize+"px",a["color"]=this.activeData.option.tableFontColor,t%2==0?(a.background=this.activeData.option.noticeOddLineColor?this.activeData.option.noticeOddLineColor:this.activeData.option.noticeBgColor,a):(a.background=this.activeData.option.noticeEventLineColor?this.activeData.option.noticeEventLineColor:this.activeData.option.noticeBgColor,a)},readInfo:function(e){var t=this;this.formVisible=!0,this.$nextTick((function(){t.$refs.Form.init(e.id)}))},initData:function(){var e=this,t="app"===this.showType?"appColumnList":"pc"===this.showType&&1!=this.activeData.option.styleType?"rowData":"columnData";this.activeData.option[t].forEach((function(t,a){t.classify&&t.classify.length&&(e.typeList=t.classify)}));var a={typeList:this.typeList};Object(s["d"])(a).then((function(t){e.defaultValue=JSON.parse(JSON.stringify(t.data.list))||[],e.defaultValue=e.defaultValue.slice(0,e.activeData.option.noticeCount),1==e.activeData.option.styleType?(e.defaultValue.map((function(t){t.creatorTime=e.jnpf.toDate(t.creatorTime),t.releaseTime=e.jnpf.toDate(t.releaseTime)})),e.list=e.activeData.option.columnData.filter((function(e){return e.show||!e.show&&1==e.id}))):e.list=e.activeData.option.rowData}))}}},O=L,$=(a("d2d3"),Object(u["a"])(O,F,S,!1,null,"0974763f",null)),I=$.exports,j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-todoList-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"portal-todoList-box-body"},[e.list.length?e._l(e.list,(function(t,a){return i("router-link",{key:a,staticClass:"item com-hover",attrs:{to:"/emailDetail?id="+t.id}},[i("span",{staticClass:"name"},[e._v(e._s(t.fullName))]),i("span",{staticClass:"time"},[e._v(e._s(e._f("toDateText")(t.creatorTime)))])])})):i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])],2)],1)},M=[],V={components:{CardHeader:r["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{list:[]}},created:function(){this.getData()},methods:{getData:function(){var e=this;Object(s["a"])().then((function(t){e.list=t.data.list?t.data.list.slice(0,7):[]}))}}},A=V,P=Object(u["a"])(A,j,M,!1,null,null,null),J=P.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?a("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),a("div",{staticClass:"dataBoard-box-body"},e._l(e.list,(function(t,i){return a("web-link",{key:i,staticClass:"dataBoard-item",class:{"item-box":e.option.showBorder},style:{width:100/(e.option.rowNumber||4)+"%"},attrs:{linkType:t.linkType,urlAddress:t.urlAddress,linkTarget:t.linkTarget,type:t.type,propertyJson:t.propertyJson}},[a("i",{class:t.icon+" dataBoard-body-item",style:{color:t.iconColor,background:t.iconColor?t.iconColor.replace("rgb","rgba").replace(")",",0.1)"):""}}),a("div",{staticClass:"text"},[a("p",{staticClass:"num"},[a("span",{style:{"font-size":e.option.valueFontSize+"px","font-weight":e.option.valueFontWeight?"bolder":"normal",color:e.option.valueFontColor}},[e._v(e._s(t.num))]),a("span",{staticClass:"unit",style:{"font-size":e.option.unitFontSize+"px","font-weight":e.option.unitFontWeight?"bolder":"normal",color:e.option.unitFontColor}},[e._v(e._s(t.unit))])]),a("p",{staticClass:"name",style:{"font-size":e.option.labelFontSize+"px","font-weight":e.option.labelFontWeight?"bolder":"normal",color:e.option.labelFontColor}},[e._v("\n          "+e._s(t.fullName))])])])})),1)],1)},K=[],B=a("17de"),E={components:{CardHeader:r["a"],webLink:h["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{list:[]}},computed:{option:function(){return this.activeData.option}},created:function(){this.initData()},methods:{initData:function(){var e=JSON.parse(JSON.stringify(this.option.defaultValue))||[];if("dynamic"==this.activeData.dataType){for(var t=0;t<e.length;t++)e[t].num="";if(!this.activeData.propsApi)return;Object(B["o"])(this.activeData.propsApi).then((function(t){for(var a=0;a<e.length;a++)e[a].num=e[a].field&&t.data[e[a].field]||""}))}this.list=e}}},z=E,q=(a("c351"),Object(u["a"])(z,R,K,!1,null,"8319f210",null)),W=q.exports,U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{class:1==e.activeData.option.styleType?"portal-eChart-box":"portal-table-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"portal-table-box-body"},[1==e.activeData.option.styleType?[i("JNPF-table",{ref:"tableRef",class:e.activeData.option.border?"":"tableList",attrs:{data:e.defaultValue,"show-header":e.activeData.option.showHeader,hasNO:!1,border:e.activeData.option.border,"header-cell-style":{"font-size":e.activeData.option.headerFontSize+"px","text-align":e.activeData.option.headerLeft,background:e.activeData.option.headerBgColor,color:e.activeData.option.headerFontColor,"font-weight":e.activeData.option.headerFontWeight?"bolder":"normal"},"cell-style":e.tableRowClassName,"default-sort":{prop:"date",order:"descending"}}},[e.activeData.option.tableIndex?i("el-table-column",{attrs:{type:"index",width:"50",label:"序号",fixed:"left",align:"center"}}):e._e(),e._l(e.list,(function(t,a){return[i("el-table-column",{key:a,attrs:{prop:t.filedName,label:t.fullName,align:t.align,width:t.width,sortable:t.sortable,"show-overflow-tooltip":e.activeData.option.showOverflow,fixed:"none"!=t.fixed&&t.fixed}})]}))],2)]:e._e(),2==e.activeData.option.styleType?[e.defaultValue.length?e._l(e.defaultValue,(function(t,a){return i("a",{key:a,staticClass:"item"},[i("div",a%2==0?{style:{background:e.activeData.option.tableOddLineColor?e.activeData.option.tableOddLineColor:e.activeData.option.tableBgColor}}:{style:{background:e.activeData.option.tableEvenLineColor?e.activeData.option.tableEvenLineColor:e.activeData.option.tableBgColor}},[i("span",{staticClass:"name",style:{"font-weight":e.list[0].fontWeight?"bolder":"normal","font-size":e.list[0].fontSize+"px",color:e.list[0].fontColor}},[e._v("\n              "+e._s(t[e.list[0].filedName]))]),i("span",{staticClass:"time",style:{"font-weight":e.list[2].fontWeight?"bolder":"normal","font-size":e.list[2].fontSize+"px",color:e.list[2].fontColor}},[e._v(e._s(t[e.list[2].filedName]))]),i("div",{staticClass:"content",style:{"font-weight":e.list[1].fontWeight?"bolder":"normal","font-size":e.list[1].fontSize+"px",color:e.list[1].fontColor}},[e._v("\n              "+e._s(t[e.list[1].filedName])+"\n            ")])])])})):i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])]:e._e(),3==e.activeData.option.styleType?[e.defaultValue.length?[e._l(e.defaultValue,(function(t,a){return[i("div",a%2==0?{key:a,staticClass:"row-title",style:{background:e.activeData.option.tableOddLineColor?e.activeData.option.tableOddLineColor:e.activeData.option.tableBgColor}}:{key:a,staticClass:"row-title",style:{background:e.activeData.option.tableEvenLineColor?e.activeData.option.tableEvenLineColor:e.activeData.option.tableBgColor}},[i("div",{staticClass:"title",style:{"font-weight":e.list[0].fontWeight?"bolder":"normal","font-size":e.list[0].fontSize+"px",color:e.list[0].fontColor}},[e._v("\n              "+e._s(t[e.list[0].filedName])+"\n            ")]),e.activeData.option.describe?i("div",{staticClass:"content",style:{"font-weight":e.list[1].fontWeight?"bolder":"normal","font-size":e.list[1].fontSize+"px",color:e.list[1].fontColor}},[e._v("\n              "+e._s(t[e.list[1].filedName])+"\n            ")]):e._e(),i("div",{staticClass:"content",style:{"font-weight":e.list[2].fontWeight?"bolder":"normal","font-size":e.list[2].fontSize+"px",color:e.list[2].fontColor}},[e._v("\n              "+e._s(t[e.list[2].filedName])+"\n            ")])])]}))]:i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])]:e._e()],2)],1)},H=[],G={components:{CardHeader:r["a"]},props:{showType:{type:String,default:"pc"},activeData:{type:Object,default:function(){}}},data:function(){return{key:+new Date,defaultValue:[],list:[]}},watch:{},created:function(){this.initData()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex,a={};return a["font-size"]=this.activeData.option.tableFontSize+"px",a["color"]=this.activeData.option.tableFontColor,t%2==0?(a.background=this.activeData.option.tableOddLineColor?this.activeData.option.tableOddLineColor:this.activeData.option.tableBgColor,a):(a.background=this.activeData.option.tableEvenLineColor?this.activeData.option.tableEvenLineColor:this.activeData.option.tableBgColor,a)},initData:function(){var e=this,t=this.activeData.option.tableCount;if(this.defaultValue=JSON.parse(JSON.stringify(this.activeData.option.defaultValue)),this.defaultValue=this.defaultValue.slice(0,t||50),1==this.activeData.option.styleType?this.list=this.activeData.option.columnData:this.list=this.activeData.option.rowData,"dynamic"===this.activeData.dataType){var a=this.activeData.propsApi;if(!a)return this.option.defaultValue="";Object(B["o"])(a).then((function(a){e.defaultValue=a.data,e.defaultValue=e.defaultValue.slice(0,t||50)}))}this.$nextTick((function(){return e.$refs.tableRef.doLayout()}))},sliceCount:function(){var e=JSON.parse(JSON.stringify(this.activeData.option.defaultValue));return e}}},Q=G,Y=(a("fca9"),Object(u["a"])(Q,U,H,!1,null,"25b8439e",null)),Z=Y.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?a("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),a("div",{staticClass:"portal-box-body",style:{background:e.option.textBgColor}},[a("web-link",{attrs:{linkType:e.option.linkType,urlAddress:e.option.urlAddress,linkTarget:e.option.linkTarget,type:e.option.type,propertyJson:e.option.propertyJson}},[1==e.option.styleType?a("div",{staticClass:"text",style:{color:e.option.textFontColor,"font-size":e.option.textFontSize+"px","text-align":e.option.textLeft,cursor:e.option.linkType?"pointer":"","font-weight":e.option.textFontWeight?"bolder":"normal","font-style":e.option.textFontStyle?"italic":"","text-decoration":e.option.textUnderLine}},[e.option.textAutoplay&&e.value?a("marquee",{key:e.activeData.renderKey,style:{"text-decoration":e.option.textUnderLine},attrs:{direction:e.option.textAutoplayMode,scrollamount:e.option.textAutoplaySpeed/10}},[e._v("\n          "+e._s(e.value))]):a("span",[e._v(e._s(e.value))])],1):a("div",{staticClass:"text",domProps:{innerHTML:e._s(e.value)}})])],1)],1)},ee=[],te={components:{CardHeader:r["a"],webLink:h["a"]},props:{activeData:{type:Object,default:function(){}}},computed:{option:function(){return this.activeData.option},value:function(){return this.activeData.option.defaultValue}},created:function(){this.initData()},methods:{initData:function(){var e=this;if("dynamic"===this.activeData.dataType){var t=this.activeData.propsApi;if(!t)return this.option.defaultValue="";Object(B["o"])(t).then((function(t){e.option.defaultValue=t.data}))}}}},ae=te,ie=(a("e897"),Object(u["a"])(ae,X,ee,!1,null,"403c5c8d",null)),le=ie.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"portal-box-body"},[e.value?i("web-link",{staticClass:"web-link",attrs:{linkType:e.option.linkType,urlAddress:e.option.urlAddress,linkTarget:e.option.linkTarget,type:e.option.type,propertyJson:e.option.propertyJson}},[i("img",{key:e.key,staticClass:"image",style:{"object-fit":e.option.imageFillStyle},attrs:{src:e.value}}),e.option.textDefaultValue?i("div",{staticClass:"text-ellipsis bottom-text",style:{color:e.option.textFontColor,"font-size":e.option.textFontSize+"px","text-align":e.option.textLeft,background:e.option.textBgColor,"font-weight":e.option.textFontWeight?"bolder":"normal","font-style":e.option.textFontStyle?"italic":""}},[e._v(e._s(e.option.textDefaultValue)+"\n      ")]):e._e()]):i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无图片")])])],1)],1)},ne=[],se={components:{CardHeader:r["a"],webLink:h["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{key:+new Date}},computed:{option:function(){return this.activeData.option},value:function(){this.key=+new Date;var e=this.activeData.option.defaultValue;return 1==this.option.styleType&&e?this.define.comUrl+e:e}},created:function(){this.initData()},methods:{initData:function(){var e=this;if("dynamic"===this.activeData.dataType){var t=this.activeData.propsApi;if(!t)return this.option.defaultValue="";Object(B["o"])(t).then((function(t){e.option.defaultValue=t.data}))}}}},re=se,ce=(a("b8bb"),Object(u["a"])(re,oe,ne,!1,null,"16d09458",null)),de=ce.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?a("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),a("div",{staticClass:"portal-box-body"},[a("el-carousel",{class:{"indicator-top":"topLeft"==e.option.carouselIndicatorPosition&&"horizontal"==e.option.carouselDirection,"indicator-left":"topLeft"==e.option.carouselIndicatorPosition&&"vertical"==e.option.carouselDirection,"indicator-none":"none"==e.option.carouselIndicatorPosition},attrs:{interval:e.option.carouselInterval,arrow:e.option.carouselArrow,autoplay:e.option.carouselAutoplay,direction:e.option.carouselDirection,loop:e.option.carouselLoop}},e._l(e.list,(function(t,i){return a("el-carousel-item",{key:i},[a("web-link",{staticClass:"web-link",attrs:{linkType:t.linkType,urlAddress:t.urlAddress,linkTarget:t.linkTarget,type:t.type,propertyJson:t.propertyJson}},[a("img",{key:e.key,style:{"object-fit":e.option.imageFillStyle},attrs:{src:t.imageUrl}}),t.textDefaultValue?a("div",{staticClass:"text-ellipsis bottom-text",style:{color:e.option.textFontColor,"font-size":e.option.textFontSize+"px","text-align":e.option.textLeft,background:e.option.textBgColor,"font-weight":e.option.textFontWeight?"bolder":"normal",padding:"bottomRight"==e.option.carouselIndicatorPosition&&"horizontal"==e.option.carouselDirection?"0 10px 15px":""}},[e._v("\n            "+e._s(t.textDefaultValue)+"\n          ")]):e._e()])],1)})),1)],1)],1)},pe=[],fe=a("c7eb"),me=(a("96cf"),a("1da1")),_e={components:{CardHeader:r["a"],webLink:h["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{list:[],key:+new Date}},computed:{option:function(){return this.activeData.option}},watch:{},created:function(){this.handleCarousel(JSON.parse(JSON.stringify(this.option.defaultValue)))},methods:{handleCarousel:function(){var e=Object(me["a"])(Object(fe["a"])().mark((function e(t){var a,i,l;return Object(fe["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<t.length)){e.next=12;break}if(i=t[a],1==i.dataType&&(i.imageUrl=this.define.comUrl+i.imageUrl),3!=i.dataType){e.next=9;break}return e.next=7,Object(B["o"])(i.propsApi);case 7:l=e.sent,i.imageUrl=l.data;case 9:a++,e.next=1;break;case 12:this.list=t;case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},he=_e,ve=(a("66f1"),Object(u["a"])(he,ue,pe,!1,null,"429d768e",null)),be=ve.exports,ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"portal-box-body"},[e.value?[i("video",{key:e.key,attrs:{controls:"",loop:2==e.option.playNumber,autoplay:e.option.videoAutoplay},domProps:{muted:e.option.mutePlay}},[i("source",{attrs:{src:e.value,type:"video/mp4"}})])]:i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无视频")])])],2)],1)},ye=[],De={components:{CardHeader:r["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{key:""}},computed:{option:function(){return this.activeData.option},value:function(){this.key=+new Date;var e=this.activeData.option.defaultValue;return 1==this.option.styleType&&e.url&&(e=this.define.comUrl+e.url),e}},created:function(){this.initData()},methods:{initData:function(){var e=this;if("dynamic"===this.activeData.dataType){var t=this.activeData.propsApi;if(!t)return;Object(B["o"])(t).then((function(t){e.option.defaultValue=t.data}))}}}},we=De,xe=(a("c775"),Object(u["a"])(we,ge,ye,!1,null,"39973f0e",null)),Ce=xe.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?a("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),a("div",{staticClass:"portal-box-body"},[a("div",{staticClass:"Schedule-container app-container"},[a("FullCalendar",{ref:"calendar",attrs:{options:e.calendarOptions}}),e.formVisible?a("Form",{ref:"Form",on:{refreshDataList:e.refreshDataList}}):e._e(),e.scheduleVisible?a("ScheduleView",{ref:"schedule",on:{refreshDataList:e.refreshDataList}}):e._e()],1)])],1)},Te=[],Fe=(a("28a5"),a("5530")),Se=a("7516"),Ne=a("3cdb"),Le=a("f46e"),Oe=a("4505"),$e=a("89e6"),Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:e.dataForm.id?"编辑":"新建","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"类型",prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择类型",clearable:"",filterable:""},model:{value:e.dataForm.category,callback:function(t){e.$set(e.dataForm,"category",t)},expression:"dataForm.category"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"紧急程度",prop:"urgent"}},[a("el-select",{attrs:{placeholder:"请选择紧急程度",filterable:""},model:{value:e.dataForm.urgent,callback:function(t){e.$set(e.dataForm,"urgent",t)},expression:"dataForm.urgent"}},e._l(e.urgentList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.dataForm.title,callback:function(t){e.$set(e.dataForm,"title",t)},expression:"dataForm.title"}})],1),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"textarea",rows:3},model:{value:e.dataForm.content,callback:function(t){e.$set(e.dataForm,"content",t)},expression:"dataForm.content"}})],1),a("el-form-item",{attrs:{label:"附件",prop:"files"}},[a("JnpfUploadFile",{attrs:{buttonText:"点击上传"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1),a("el-form-item",{attrs:{label:"全天",prop:"allDay"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:e.change_providerType},model:{value:e.dataForm.allDay,callback:function(t){e.$set(e.dataForm,"allDay",t)},expression:"dataForm.allDay"}})],1),a("el-form-item",{attrs:{label:"开始时间",prop:"startDay"}},[a("el-col",{attrs:{span:14}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择开始日期",editable:!1,clearable:!1,format:"yyyy-MM-dd","value-format":"timestamp"},on:{change:e.startDayChange},model:{value:e.dataForm.startDay,callback:function(t){e.$set(e.dataForm,"startDay",t)},expression:"dataForm.startDay"}})],1),a("el-col",{attrs:{span:10}},[0==e.dataForm.allDay?a("el-time-select",{staticClass:"jnpf-el-row",attrs:{placeholder:"请选择开始时间","picker-options":{start:"00:00",step:"00:05",end:"23:55"}},model:{value:e.dataForm.startTime,callback:function(t){e.$set(e.dataForm,"startTime",t)},expression:"dataForm.startTime"}}):e._e()],1)],1),-1!=e.dataForm.duration&&0==e.dataForm.allDay?a("el-form-item",{attrs:{label:"时长",prop:"duration"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.durationChange},model:{value:e.dataForm.duration,callback:function(t){e.$set(e.dataForm,"duration",t)},expression:"dataForm.duration"}},e._l(e.durationList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e(),-1==e.dataForm.duration||e.dataForm.allDay?a("el-form-item",{attrs:{label:"结束时间",prop:"endDay"}},[a("el-col",{attrs:{span:14}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择结束日期",editable:!1,clearable:!1,format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.dataForm.endDay,callback:function(t){e.$set(e.dataForm,"endDay",t)},expression:"dataForm.endDay"}})],1),a("el-col",{attrs:{span:10}},[0==e.dataForm.allDay?a("el-time-select",{staticClass:"jnpf-el-row",attrs:{placeholder:"请选择结束时间","picker-options":{start:"00:00",step:"00:05",end:"23:55"}},model:{value:e.dataForm.endTime,callback:function(t){e.$set(e.dataForm,"endTime",t)},expression:"dataForm.endTime"}}):e._e()],1)],1):e._e(),a("el-form-item",{attrs:{label:"创建人",prop:"creatorUserId"}},[a("JnpfUserSelect",{attrs:{placeholder:"创建人",disabled:""},model:{value:e.dataForm.creatorUserId,callback:function(t){e.$set(e.dataForm,"creatorUserId",t)},expression:"dataForm.creatorUserId"}})],1),a("el-form-item",{attrs:{label:"参与人",prop:"toUserIds"}},[a("JnpfUserSelect",{attrs:{placeholder:"请选择参与人",multiple:"",clearable:""},model:{value:e.dataForm.toUserIds,callback:function(t){e.$set(e.dataForm,"toUserIds",t)},expression:"dataForm.toUserIds"}})],1),a("el-form-item",{attrs:{label:"标签颜色",prop:"color"}},[a("el-color-picker",{attrs:{predefine:["#188ae2","#35b8e0","#26bf8c","#f9c851","#ff5b5b","#5b69bc","#ff8acc","#3b3e47","#282828"]},model:{value:e.dataForm.color,callback:function(t){e.$set(e.dataForm,"color",t)},expression:"dataForm.color"}})],1),a("el-form-item",{attrs:{label:"提醒时间",prop:"reminderTime"}},[a("el-select",{attrs:{placeholder:"请选择提醒时间",filterable:""},model:{value:e.dataForm.reminderTime,callback:function(t){e.$set(e.dataForm,"reminderTime",t)},expression:"dataForm.reminderTime"}},e._l(e.getReminderTimeList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),-2!=e.dataForm.reminderTime?[a("el-form-item",{attrs:{label:"提醒方式",prop:"reminderType"}},[a("el-select",{attrs:{placeholder:"请选择提醒方式",filterable:""},model:{value:e.dataForm.reminderType,callback:function(t){e.$set(e.dataForm,"reminderType",t)},expression:"dataForm.reminderType"}},e._l(e.remindList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),2==e.dataForm.reminderType?a("el-form-item",{attrs:{label:"发送配置",prop:"send"}},[a("msg-dialog",{attrs:{value:e.dataForm.send,title:e.dataForm.sendName,messageSource:4},on:{change:e.onMsgChange}})],1):e._e()]:e._e(),a("el-form-item",{attrs:{label:"重复提醒",prop:"repetition"}},[a("el-select",{attrs:{placeholder:"请选择重复提醒",filterable:""},on:{change:e.repetitionChange},model:{value:e.dataForm.repetition,callback:function(t){e.$set(e.dataForm,"repetition",t)},expression:"dataForm.repetition"}},e._l(e.repeatReminderList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),1!=e.dataForm.repetition?a("el-form-item",{attrs:{label:"结束重复",prop:"repeatTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择结束重复",clearable:"",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.dataForm.repeatTime,callback:function(t){e.$set(e.dataForm,"repeatTime",t)},expression:"dataForm.repeatTime"}})],1):e._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.dataForm.id?a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.handleDel()}}},[e._v("删 除")]):e._e(),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n        "+e._s(e.$t("common.confirmButton")))])],1)],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center dialog-form",attrs:{title:"删除确认","close-on-click-modal":!1,visible:e.delVisible,"lock-scroll":"",width:"380px","append-to-body":""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("此为重复日程，将删除（含参与人）应用于")]),e._l(e.deleteList,(function(t,i){return[a("div",{key:i,staticStyle:{"margin-bottom":"10px",color:"#303133"}},[a("el-radio",{attrs:{label:t.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" ")]),e._v(e._s(t.fullName)+"\n      ")],1)]})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handleDel()}}},[e._v("\n        "+e._s(e.$t("common.confirmButton")))])],1)],2),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center dialog-form",attrs:{title:"编辑确认","close-on-click-modal":!1,visible:e.updateVisible,"lock-scroll":"",width:"380px","append-to-body":""},on:{"update:visible":function(t){e.updateVisible=t}}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("此为重复日程，将修改应用于")]),e._l(e.tableList,(function(t,i){return[0!=t.id?a("div",{key:i,staticStyle:{"margin-bottom":"10px",color:"#303133"}},[a("el-radio",{attrs:{label:t.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" ")]),e._v(e._s(t.fullName)+"\n      ")],1):e._e()]})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateVisible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit(1)}}},[e._v("\n        "+e._s(e.$t("common.confirmButton")))])],1)],2)],1)},je=[],Me=(a("c5f6"),a("2f62")),Ve=a("e984"),Ae=[{id:-2,fullName:"不提醒"},{id:-1,fullName:"开始时"},{id:5,fullName:"提前5分钟"},{id:10,fullName:"提前10分钟"},{id:15,fullName:"提前15分钟"},{id:30,fullName:"提前30分钟"},{id:60,fullName:"提前1小时"},{id:120,fullName:"提前2小时"},{id:1440,fullName:"1天前"},{id:2880,fullName:"2天前"},{id:10080,fullName:"1周前"}],Pe=[{id:-2,fullName:"不提醒"},{id:1,fullName:"当天8:00"},{id:2,fullName:"当天9:00"},{id:3,fullName:"当天10:00"},{id:4,fullName:"1天前8:00"},{id:5,fullName:"1天前9:00"},{id:6,fullName:"1天前10:00"},{id:7,fullName:"2天前8:00"},{id:8,fullName:"2天前9:00"},{id:9,fullName:"2天前10:00"},{id:10,fullName:"1周前8:00"},{id:11,fullName:"1周前9:00"},{id:12,fullName:"1周前10:00"}],Je={components:{MsgDialog:Ve["a"]},data:function(){var e=this,t=function(t,a,i){if(""===a)i(new Error("请选择结束时间"));else{var l=e.jnpf.toDate(e.dataForm.startDay,"yyyy-MM-dd 00:00:00");e.dataForm.startDay=new Date(l).getTime();var o=e.jnpf.toDate(a,"yyyy-MM-dd 00:00:00");a=new Date(o).getTime(),-1==e.dataForm.duration&&(e.dataForm.startDay==a&&0==e.dataForm.allDay&&e.dataForm.startTime>e.dataForm.endTime&&i(new Error("结束时间必须晚于开始时间")),e.dataForm.startDay>a&&i(new Error("结束时间必须晚于开始时间"))),i()}};return{visible:!1,btnLoading:!1,dataForm:{id:0,category:"",creatorUserId:"",userName:"",allDay:0,urgent:"1",startDay:"",startTime:"",endDay:"",endTime:"",duration:60,content:"",title:"",toUserIds:[],reminderTime:-2,reminderType:1,send:"",sendName:"",repetition:1,repeatTime:"",color:"#FFFFFF",files:[]},repetitionType:!1,checked:1,delVisible:!1,updateVisible:!1,dataRule:{category:[{required:!0,message:"请选择类型",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],duration:[{required:!0,message:"请选择时长",trigger:"change"}],startDay:[{required:!0,message:"请选择开始时间",trigger:"change"}],endDay:[{required:!0,validator:t,trigger:"change"}],repeatTime:[{required:!0,message:"请选择结束重复",trigger:"change"}],send:[{required:!0,message:"请选择发送配置",trigger:"change"}],reminderType:[{required:!0,message:"请选择提醒方式",trigger:"change"}],startTime:[{required:!0,message:"请选择提醒方式",trigger:"change"}]},urgentList:[{id:"1",fullName:"普通"},{id:"2",fullName:"重要"},{id:"3",fullName:"紧急"}],durationList:[{id:30,fullName:"30分钟"},{id:60,fullName:"1小时"},{id:90,fullName:"1小时30分钟"},{id:120,fullName:"2小时"},{id:180,fullName:"3小时"},{id:-1,fullName:"自定义"}],typeOptions:[],tableList:[{id:1,fullName:"此日程"},{id:2,fullName:"此日程及后续"}],deleteList:[{id:1,fullName:"此日程"},{id:2,fullName:"此日程及后续"},{id:3,fullName:"所有日程"}],remindList:[{id:1,fullName:"默认"},{id:2,fullName:"自定义"}],repeatReminderList:[{id:1,fullName:"不重复"},{id:2,fullName:"每天重复"},{id:3,fullName:"每周重复"},{id:4,fullName:"每月重复"},{id:5,fullName:"每年重复"}],reminderTimeList:Ae,timeList:Pe,files:[]}},computed:Object(Fe["a"])(Object(Fe["a"])({},Object(Me["b"])(["userInfo"])),{},{getReminderTimeList:function(){return this.dataForm.allDay?this.timeList:this.reminderTimeList}}),methods:{init:function(e,t,a){var i=this;this.dataForm.id=e||0,this.visible=!0,this.dataForm.category="",this.delVisible=!1,this.updateVisible=!1,this.repetitionType=!1,this.checked=1,this.dataForm.endTime="",this.$nextTick((function(){if(i.$refs.dataForm.clearValidate(),i.dataForm.id)Object($e["e"])(i.dataForm.id).then((function(e){i.dataForm=e.data,i.files=i.dataForm.files&&i.dataForm.files.length&&JSON.parse(i.dataForm.files)||[],1!=i.dataForm.repetition&&(i.repetitionType=!0)}));else{i.$refs["dataForm"].resetFields(),i.dataForm.creatorUserId=i.userInfo.userId,i.dataForm.toUserIds=[],i.dataForm.startDay=t||"",i.dataForm.endDay=t||"",i.dataForm.color="#FFFFFF",i.dataForm.reminderTime=-2,i.dataForm.duration=a||60,i.dataForm.content="",i.dataForm.title="",i.dataForm.allDay=0,i.dataForm.category="",i.typeOptions.length&&(i.dataForm.type=i.typeOptions[0].id),i.dataForm.repetition=1,i.dataForm.repeatTime="",i.dataForm.userName="",i.dataForm.urgent="1",i.dataForm.reminderType=1,i.dataForm.send="",i.dataForm.sendName="",i.files=[];var e=i.jnpf.toDate(new Date,"HH");i.dataForm.startTime=Number(e)+1<10?"0"+(Number(e)+1)+":00":Number(e)+1+":00",i.dataForm.endTime=Number(e)+2<10?"0"+(Number(e)+2)+":00":Number(e)+2+":00"}})),this.getDictionaryData()},startDayChange:function(e){var t=this.jnpf.toDate(e,"yyyy-MM-dd 00:00:00");this.dataForm.startDay=new Date(t).getTime()},durationChange:function(){var e=this.dataForm.startTime.split(":"),t=Number(e[0])+1;24==Number(t)&&(t=0),this.dataForm.endDay=this.dataForm.startDay,this.dataForm.endTime=t<10?"0"+t+":"+e[1]:t+":"+e[1]},getDictionaryData:function(){var e=this;this.$store.dispatch("base/getDictionaryData",{sort:"scheduleType"}).then((function(t){e.typeOptions=t,e.typeOptions.length&&(e.dataForm.category=e.typeOptions[0].id)}))},change_providerType:function(e){var t=this;this.$nextTick((function(){t.$refs.dataForm.clearValidate("duration")})),this.dataForm.reminderTime=-2,e?this.dataForm.endDay=this.dataForm.startDay:(this.dataForm.duration=60,this.dataForm.endDay=0)},repetitionChange:function(e){var t=new Date;t.setFullYear(t.getFullYear()+1),1!=e&&(this.dataForm.repeatTime=t.getTime())},onMsgChange:function(e,t){if(!e)return this.dataForm.send="",void(this.dataForm.sendName="");this.dataForm.send!==e&&(this.dataForm.send=e,this.dataForm.sendName=t.fullName)},dataFormSubmit:function(e){var t=this;if(1==e&&!this.checked)return this.$message.warning("请选择日程");this.$refs["dataForm"].validate((function(e){if(e){if(0==t.dataForm.allDay){if(!t.dataForm.startTime)return t.$message({message:"开始时间不能为空",type:"error"});if(!t.dataForm.endTime&&-1==t.dataForm.duration)return t.$message({message:"结束时间不能为空",type:"error"})}if(-1==t.dataForm.duration&&0==t.dataForm.allDay&&t.dataForm.startDay==t.dataForm.endDay&&!t.dataForm.endTime&&-1==t.dataForm.duration)return t.$message({message:"结束时间不能为空",type:"error"});if(1!=t.dataForm.repetition&&1==t.dataForm.allDay){var a=t.jnpf.toDate(t.dataForm.startDay,"yyyy-MM-dd 00:00:00");t.dataForm.startDay=new Date(a).getTime()}if(1!=t.dataForm.repetition&&t.dataForm.startDay>t.dataForm.repeatTime)return t.$message({message:"结束重复必须晚于开始时间",type:"error"});t.dataForm.files=JSON.stringify(t.files);var i=t.dataForm.id?$e["f"]:$e["b"];t.dataForm.id&&t.repetitionType?t.updateVisible?i(t.dataForm,t.checked).then((function(e){t.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t.visible=!1,t.btnLoading=!1,t.$emit("refreshDataList")}})})).catch((function(){})):t.updateVisible=!0:(t.btnLoading=!0,t.dataForm.id||delete t.dataForm.id,i(t.dataForm,3).then((function(e){t.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t.visible=!1,t.btnLoading=!1,t.$emit("refreshDataList")}})})).catch((function(){t.btnLoading=!1})))}}))},handleDel:function(){var e=this;if(this.repetitionType)if(this.delVisible){if(!this.checked)return this.$message.warning("请选择日程");Object($e["c"])(this.dataForm.id,this.checked).then((function(t){e.$message({message:t.msg,type:"success",duration:1500}),e.delVisible=!1,e.visible=!1,e.$emit("refreshDataList")}))}else this.delVisible=!0;else this.$confirm("此操作将永久删除此日程，同时删除所有参与人的日程，是否继续？","提示",{type:"warning"}).then((function(){Object($e["c"])(e.dataForm.id,3).then((function(t){e.$message({message:t.msg,type:"success",duration:1500}),e.visible=!1,e.$emit("refreshDataList")}))})).catch((function(){}))}}},Re=Je,Ke=(a("8b98"),Object(u["a"])(Re,Ie,je,!1,null,"6f1c8db6",null)),Be=Ke.exports,Ee=a("6e2c"),ze=(a("6b54"),{lunarInfo:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,92821,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],solarMonth:[31,28,31,30,31,30,31,31,30,31,30,31],Gan:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],Zhi:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],Animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],festival:{"1-1":{title:"元旦节"},"2-14":{title:"情人节"},"5-1":{title:"劳动节"},"5-4":{title:"青年节"},"6-1":{title:"儿童节"},"9-10":{title:"教师节"},"10-1":{title:"国庆节"},"12-25":{title:"圣诞节"},"3-8":{title:"妇女节"},"3-12":{title:"植树节"},"4-1":{title:"愚人节"},"5-12":{title:"护士节"},"7-1":{title:"建党节"},"8-1":{title:"建军节"},"12-24":{title:"平安夜"}},lFestival:{"12-30":{title:"除夕"},"1-1":{title:"春节"},"1-15":{title:"元宵节"},"2-2":{title:"龙抬头"},"5-5":{title:"端午节"},"7-7":{title:"七夕节"},"7-15":{title:"中元节"},"8-15":{title:"中秋节"},"9-9":{title:"重阳节"},"10-1":{title:"寒衣节"},"10-15":{title:"下元节"},"12-8":{title:"腊八节"},"12-23":{title:"北方小年"},"12-24":{title:"南方小年"}},getFestival:function(){return this.festival},getLunarFestival:function(){return this.lFestival},setFestival:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.festival=e},setLunarFestival:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.lFestival=e},solarTerm:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],sTermInfo:["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],nStr1:["日","一","二","三","四","五","六","七","八","九","十"],nStr2:["初","十","廿","卅"],nStr3:["正","二","三","四","五","六","七","八","九","十","冬","腊"],lYearDays:function(e){var t,a=348;for(t=32768;t>8;t>>=1)a+=this.lunarInfo[e-1900]&t?1:0;return a+this.leapDays(e)},leapMonth:function(e){return 15&this.lunarInfo[e-1900]},leapDays:function(e){return this.leapMonth(e)?65536&this.lunarInfo[e-1900]?30:29:0},monthDays:function(e,t){return t>12||t<1?-1:this.lunarInfo[e-1900]&65536>>t?30:29},solarDays:function(e,t){if(t>12||t<1)return-1;var a=t-1;return 1===a?e%4===0&&e%100!==0||e%400===0?29:28:this.solarMonth[a]},toGanZhiYear:function(e){var t=(e-3)%10,a=(e-3)%12;return 0===t&&(t=10),0===a&&(a=12),this.Gan[t-1]+this.Zhi[a-1]},toAstro:function(e,t){var a="摩羯水瓶双鱼白羊金牛双子巨蟹狮子处女天秤天蝎射手摩羯",i=[20,19,21,21,21,22,23,23,23,23,22,22];return a.substr(2*e-(t<i[e-1]?2:0),2)+"座"},toGanZhi:function(e){return this.Gan[e%10]+this.Zhi[e%12]},getTerm:function(e,t){if(e<1900||e>2100||t<1||t>24)return-1;for(var a=this.sTermInfo[e-1900],i=[],l=0;l<a.length;l+=5){var o=parseInt("0x"+a.substr(l,5)).toString();i.push(o[0],o.substr(1,2),o[3],o.substr(4,2))}return parseInt(i[t-1])},toChinaMonth:function(e){if(e>12||e<1)return-1;var t=this.nStr3[e-1];return t+="月",t},toChinaDay:function(e){var t;switch(e){case 10:t="初十";break;case 20:t="二十";break;case 30:t="三十";break;default:t=this.nStr2[Math.floor(e/10)],t+=this.nStr1[e%10]}return t},getAnimal:function(e){return this.Animals[(e-4)%12]},solar2lunar:function(e,t,a){var i,l=parseInt(e),o=parseInt(t),n=parseInt(a);if(l<1900||l>2100)return-1;if(1900===l&&1===o&&n<31)return-1;i=l?new Date(l,parseInt(o)-1,n):new Date;var s,r=0,c=0;l=i.getFullYear(),o=i.getMonth()+1,n=i.getDate();var d=(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())-Date.UTC(1900,0,31))/864e5;for(s=1900;s<2101&&d>0;s++)c=this.lYearDays(s),d-=c;d<0&&(d+=c,s--);var u=new Date,p=!1;u.getFullYear()===l&&u.getMonth()+1===o&&u.getDate()===n&&(p=!0);var f=i.getDay(),m=this.nStr1[f];0===f&&(f=7);var _=s;r=this.leapMonth(s);var h=!1;for(s=1;s<13&&d>0;s++)r>0&&s===r+1&&!1===h?(--s,h=!0,c=this.leapDays(_)):c=this.monthDays(_,s),!0===h&&s===r+1&&(h=!1),d-=c;0===d&&r>0&&s===r+1&&(h?h=!1:(h=!0,--s)),d<0&&(d+=c,--s);var v=s,b=d+1,g=o-1,y=this.toGanZhiYear(_),D=this.getTerm(l,2*o-1),w=this.getTerm(l,2*o),x=this.toGanZhi(12*(l-1900)+o+11);n>=D&&(x=this.toGanZhi(12*(l-1900)+o+12));var C=!1,k=null;D===n&&(C=!0,k=this.solarTerm[2*o-2]),w===n&&(C=!0,k=this.solarTerm[2*o-1]);var T=Date.UTC(l,g,1,0,0,0,0)/864e5+25567+10,F=this.toGanZhi(T+n-1),S=this.toAstro(o,n),N=l+"-"+o+"-"+n,L=_+"-"+v+"-"+b,O=this.festival,$=this.lFestival,I=o+"-"+n,j=v+"-"+b;return 12===v&&29===b&&29===this.monthDays(_,v)&&(j="12-30"),{date:N,lunarDate:L,festival:O[I]?O[I].title:null,lunarFestival:$[j]?$[j].title:null,lYear:_,lMonth:v,lDay:b,Animal:this.getAnimal(_),IMonthCn:(h?"闰":"")+this.toChinaMonth(v),IDayCn:this.toChinaDay(b),cYear:l,cMonth:o,cDay:n,gzYear:y,gzMonth:x,gzDay:F,isToday:p,isLeap:h,nWeek:f,ncWeek:"星期"+m,isTerm:C,Term:k,astro:S}},lunar2solar:function(e,t,a,i){e=parseInt(e),t=parseInt(t),a=parseInt(a),i=!!i;var l=this.leapMonth(e);this.leapDays(e);if(i&&l!==t)return-1;if(2100===e&&12===t&&a>1||1900===e&&1===t&&a<31)return-1;var o=this.monthDays(e,t),n=o;if(i&&(n=this.leapDays(e,t)),e<1900||e>2100||a>n)return-1;var s,r=0;for(s=1900;s<e;s++)r+=this.lYearDays(s);var c=0,d=!1;for(s=1;s<t;s++)c=this.leapMonth(e),d||c<=s&&c>0&&(r+=this.leapDays(e),d=!0),r+=this.monthDays(e,s);i&&(r+=o);var u=Date.UTC(1900,1,30,0,0,0),p=new Date(864e5*(r+a-31)+u),f=p.getUTCFullYear(),m=p.getUTCMonth()+1,_=p.getUTCDate();return this.solar2lunar(f,m,_)}}),qe={components:{CardHeader:r["a"],FullCalendar:Se["a"],Form:Be,ScheduleView:Ee["a"]},props:{title:{type:String,default:""},option:{type:Object,default:function(){}},card:{type:Object,default:function(){}},activeData:{type:Object,default:function(){}},jnpfKey:{type:String,default:""}},data:function(){return{calendarOptions:{},creatorUserId:"",calendarApi:"",formVisible:!1,scheduleVisible:!1}},computed:Object(Fe["a"])({},Object(Me["b"])(["userInfo"])),created:function(){this.init(),this.creatorUserId=this.userInfo.userId},watch:{"activeData.firstDay":function(e){this.calendarOptions.firstDay=this.activeData.firstDay},"activeData.showLunarCalendar":function(e){this.init()},"activeData.defaultView":function(e){this.init()}},mounted:function(){var e=this;this.$eventBus.$on("eChart"+this.activeData.i,(function(){e.$refs.calendar&&e.$refs.calendar.calendar.updateSize()})),this.$nextTick((function(){e.$refs.calendar&&e.$refs.calendar.calendar.updateSize()}))},methods:{init:function(){var e=this;this.calendarOptions={plugins:[Ne["a"],Oe["a"],Le["a"]],initialView:this.activeData.defaultView,firstDay:this.activeData.firstDay,locale:"zh-cn",eventColor:"#3BB2E3",themeSystem:"bootstrap",aspectRatio:1.65,allDayText:"全天",headerToolbar:{left:"prev next today",center:"title",right:"timeGridDay,timeGridWeek,dayGridMonth"},buttonText:{today:"今天",month:"月",week:"周",day:"日"},slotLabelFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},dateClick:this.handleEventClick,eventClick:this.eventClick,events:[],editable:!1,eventStartEditable:!1,eventDurationEditable:!1,selectable:!1,selectMirror:!1,selectMinDistance:0,dayMaxEvents:!1,weekends:!0,navLinks:!1,datesSet:this.datesRender,slotEventOverlap:!1,views:{dayGridMonth:{displayEventTime:!1,dayMaxEventRows:3,moreLinkClick:"popover",dayCellContent:function(t){var a=new Date(t.date),i=a.getFullYear()+"-",l=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",o=a.getDate(),n=i+l+o,s=n.split("-"),r=ze.solar2lunar(s[0],s[1],s[2]),c="";if(r.isToday&&(c="today-month"),e.activeData.showLunarCalendar){var d=r.IDayCn;return"初一"==d&&(d=r.IMonthCn),{html:"<p class='calendar-right'><label class='".concat(c,"'>").concat(r.cDay,"</label><span>").concat(d,"</span></p>")}}return{html:"<p class='calendar-right'><label class='".concat(c,"'>").concat(r.cDay,"</label></p>")}}},timeGridWeek:{displayEventTime:!1,dayHeaderContent:function(t){var a=new Date(t.date),i=a.getFullYear()+"-",l=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",o=a.getDate(),n=i+l+o,s=n.split("-"),r=ze.solar2lunar(s[0],s[1],s[2]),c="calender-week";if(r.isToday&&(c="calender-week today-week"),e.activeData.showLunarCalendar){var d="<div class='".concat(c,"'>").concat(r.cDay,'</div><div class="list-week"><div>周').concat(r.ncWeek.slice(2),"</div><div class='list-calendar'>").concat(r.IDayCn,"</div></div></div>");return{html:d}}return{html:"<div class='".concat(c,"'>").concat(r.cDay,"</div><div class='list-week'><div >周").concat(r.ncWeek.slice(2),"</div></div></div>")}}},timeGridDay:{displayEventTime:!1,dayHeaderContent:function(t){var a=new Date(t.date),i=a.getFullYear()+"-",l=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",o=a.getDate(),n=i+l+o,s=n.split("-"),r=ze.solar2lunar(s[0],s[1],s[2]),c="calender-week";return r.isToday&&(c="calender-week today-week"),e.activeData.showLunarCalendar?{html:"<div class='".concat(c,"'>").concat(r.cDay,"</div><div class='list-week'><div>周").concat(r.ncWeek.slice(2),"</div><div class='list-calendar'>").concat(r.IDayCn,"</div></div></div>")}:{html:"<div class='".concat(c,"'>").concat(r.cDay,"</div><div class='list-week'><div >周").concat(r.ncWeek.slice(2),"</div></div></div>")}}}}}},datesRender:function(e){var t=e.view;this.startTime=this.jnpf.toDate(t.activeStart,"yyyy-MM-dd HH:mm"),this.endTime=this.jnpf.toDate(t.activeEnd,"yyyy-MM-dd HH:mm"),this.initData()},handleEventClick:function(e){var t=this.jnpf.toDate(e.date,"yyyy-MM-dd HH:00"),a=this.jnpf.toDate(e.date,"yyyyMMdd"),i=this.jnpf.toDate(new Date,"yyyyMMdd");if(a==i){var l=new Date;l.setHours(l.getHours()+1),t=this.jnpf.toDate(l,"yyyy-MM-dd HH:00")}this.addOrUpdateHandle("",t),this.addOrUpdateHandle("",new Date(t).getTime())},eventClick:function(e){this.addOrUpdateHandle(e.event.id,"",e.event.extendedProps.creatorUserId)},initData:function(){var e=this,t={startTime:this.startTime,endTime:this.endTime};Object($e["a"])(t).then((function(t){e.calendarOptions.events=t.data.list.map((function(e){return{id:e.id,title:e.title,start:e.startDay,end:e.endDay,color:e.color,editable:!1,allDay:e.allDay,creatorUserId:e.creatorUserId}}))}))},addOrUpdateHandle:function(e,t,a){var i=this;if(e&&a!=this.creatorUserId)return this.scheduleVisible=!0,void this.$nextTick((function(){i.$refs.schedule.init(e,1,"")}));this.formVisible=!0,this.$nextTick((function(){i.$refs.Form.init(e,t,i.activeData.duration)}))},refreshDataList:function(){this.formVisible=!1,this.scheduleVisible=!1,this.initData()}}},We=qe,Ue=(a("aca1"),Object(u["a"])(We,ke,Te,!1,null,"7eac9a9f",null)),He=Ue.exports,Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"portal-box-body"},[e.value?i("iframe",{attrs:{src:e.value,scrolling:"yes",frameborder:"0"}}):i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无地址")])])])],1)},Qe=[],Ye=(a("7cdf"),a("6762"),["carousel","rankList","timeAxis"]),Ze={components:{CardHeader:r["a"],webLink:h["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{marqueeKey:+new Date,key:+new Date,fistData:{},secondData:{},thirdData:{},otherDataList:[],listLoading:!1,value:"",list:[],timeList:[]}},watch:{"option.styleType":{handler:function(e){"rankList"!=this.jnpfKey||3!=e&&4!=e||this.handleRankList()}},"activeData.dataType":{handler:function(e){this.activeData&&this.activeData!={}&&Ye.includes(this.jnpfKey)&&(this.option.defaultValue=[],this.list=[])}},"option.defaultValue":{handler:function(e){this.activeData&&this.activeData!={}&&this.initData()},immediate:!0,deep:!0},"activeData.propsApi":{handler:function(e){var t=this;this.activeData&&this.activeData!={}&&"static"!==this.activeData.dataType&&e&&Object(B["o"])(e).then((function(e){Ye.includes(t.jnpfKey)?(t.list=[],Array.isArray(e.data)&&(t.list=e.data),"rankList"!=t.jnpfKey||3!=t.option.styleType&&4!=t.option.styleType||t.handleRankList(),"timeAxis"==t.jnpfKey&&t.initTimeAxis()):(t.value="",t.value=e.data),t.key=+new Date}))},immediate:!0,deep:!0},"option.showNumber":{handler:function(e){this.initTimeAxis()}},"option.sortable":{handler:function(e){this.initTimeAxis()}}},computed:{option:function(){return this.activeData.option},jnpfKey:function(){return this.activeData.jnpfKey}},created:function(){this.initData()},methods:{initData:function(){var e=this;if("dynamic"===this.activeData.dataType){var t=this.activeData.propsApi;if(!t)return;Object(B["o"])(t).then((function(t){e.handleData(t.data)}))}else this.handleData(this.activeData.option.defaultValue)},handleData:function(e){var t=this.activeData.option,a=this.activeData.jnpfKey;Ye.includes(this.jnpfKey)?this.list=JSON.parse(JSON.stringify(e)):this.value=JSON.parse(JSON.stringify(e)),"rankList"!=a||3!=t.styleType&&4!=t.styleType||this.handleRankList(),"timeAxis"==a&&this.initTimeAxis(),"video"==a&&1==t.styleType&&e.url&&(this.value=this.define.comUrl+e.url)},handleRankList:function(){this.fistData={},this.secondData={},this.thirdData={},this.otherDataList=[],this.list&&this.list.length&&(this.fistData=this.list[0]),this.list&&this.list.length&&this.list.length>=2&&(this.secondData=this.list[1]),this.list&&this.list.length&&this.list.length>=3&&(this.thirdData=this.list[2]),this.otherDataList=JSON.parse(JSON.stringify(this.list)).slice(3,this.list.length)},handleCarousel:function(){var e=Object(me["a"])(Object(fe["a"])().mark((function e(){var t,a,i;return Object(fe["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.list.length)){e.next=12;break}if(a=this.list[t],1==a.dataType&&(a.imageUrl=this.define.comUrl+a.imageUrl),3!=a.dataType){e.next=9;break}return e.next=7,Object(B["o"])(a.propsApi);case 7:i=e.sent,a.imageUrl=i.data;case 9:t++,e.next=1;break;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleRowStyle:function(e){e.row;var t=e.rowIndex,a={height:"55px"};return 0==t&&(a.color="#CE7C1F"),1==t&&(a.color="#6F89AC"),2==t&&(a.color="#8D4112"),a},initTimeAxis:function(){var e=this.option.showNumber||50,t=e&&Number.isInteger(e)?this.list.slice(0,e):this.list;this.timeList=JSON.parse(JSON.stringify(t)),2==this.activeData.option.sortable&&this.timeList.reverse()},getColor:function(e){return 0==e?"#3ED538":this.timeList.length-1==e?"#1990FA":""}}},Xe={mixins:[Ze]},et=Xe,tt=(a("aa54"),Object(u["a"])(et,Ge,Qe,!1,null,"ba128882",null)),at=tt.exports,it=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"eChart-box-body"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],ref:"chart",attrs:{id:"chart"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"portal-common-noData portal-common-noData-eChart"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])])],1)},lt=[],ot=(a("2fdb"),a("4f7f"),a("5df3"),a("1c4c"),a("7514"),a("164e")),nt=a("f42c"),st=a("1130"),rt={mixins:[nt["a"]],components:{CardHeader:r["a"]},props:{activeData:{type:Object,default:function(){}}},computed:{option:function(){return this.activeData.option},jnpfKey:function(){return this.activeData.jnpfKey}},data:function(){return{chart:null,currOption:{},chartData:[],isEmpty:!1}},mounted:function(){var e=this;if("dynamic"===this.activeData.dataType){if(!this.activeData.propsApi)return;Object(B["o"])(this.activeData.propsApi).then((function(t){e.chartData=t.data,e.initChart()}))}else setTimeout((function(){e.chartData=e.option.defaultValue,e.initChart()}),0);this.$eventBus.$on("eChart"+this.activeData.i,(function(){e.$nextTick((function(){e.resize()}))}))},watch:{option:{handler:function(e){this.resetChart()},deep:!0},"activeData.dataType":{handler:function(e){this.option.defaultValue=[],this.chartData=[],"static"==e&&this.initStaticData(this.option.styleType),this.initBarType()}},"option.styleType":{handler:function(e){"static"==this.activeData.dataType&&this.initStaticData(e)}},"option.defaultValue":{handler:function(e){var t=this;"static"===this.activeData.dataType&&setTimeout((function(){t.chartData=e,t.resetChart(),t.initBarType()}),0)}},"activeData.propsApi":{handler:function(e){var t=this;"static"!==this.activeData.dataType&&e&&Object(B["o"])(e).then((function(e){t.chartData=e.data,t.resetChart(),t.initBarType()}))}}},methods:{getType:function(e){if("barChart"==this.jnpfKey){if(7==this.option.styleType){var t=this.option.barType.find((function(t){return e==t.title}));if(t&&t.type)return t.type}return"bar"}return"lineChart"==this.jnpfKey?"line":"pieChart"==this.jnpfKey?"pie":"radarChart"==this.jnpfKey?"radar":void 0},initChartData:function(){var e=this,t=this.jnpfKey,a=this.option.styleType,i=JSON.parse(JSON.stringify(this.chartData))||[],l=Array.from(new Set(i.map((function(e){return e.type})))),o=Array.from(new Set(i.map((function(e){return e.name})))),n=[];l.forEach((function(l,o){var s=e.getType(l),r={name:l,type:s,stack:5==a||6==a||7==a||4!=a&&"lineChart"==t?l:"total"},c=i.filter((function(e){return l===e.type}));if("pieChart"==t)r["data"]=c.map((function(e){return{value:e.value,name:e.name}})),e.option.sortable&&e.getPieData(r["data"]),e.option.showZero&&(r["data"]=r["data"].filter((function(e){return 0!=e.value})));else if("radarChart"==t){var d=c.map((function(e){return e.type})),u={value:c.map((function(e){return e.value})),name:d&&d.length?d[0]:"",areaStyle:{color:e.getColor(o),opacity:e.option.seriesAreaStyleOpacity}};r["data"]=[u],r["colorBy"]="series"}else r["data"]=c.map((function(e){return e.value}));n.push(r)}));var s={type:"category"==this.option.category?"category":"value",show:this.option.xAxisShow,inverse:this.option.xAxisInverse,data:o,name:this.option.xAxisName,nameTextStyle:{color:this.option.xAxisNameTextStyleColor,fontSize:this.option.xAxisNameTextStyleFontSize,fontWeight:this.option.xAxisNameTextStyleFontWeight?"bolder":""},splitLine:{show:this.option.xAxisSplitLineShow,lineStyle:{color:this.option.xAxisSplitLineLineStyleColor}},axisLabel:{rotate:this.option.xAxisAxisLabelRotate,textStyle:{color:this.option.AxisTextStyleColor?this.option.AxisTextStyleColor:this.option.xAxisAxisLabelTextStyleColor,fontSize:this.option.xAxisAxisLabelTextStyleFontSize,fontWeight:this.option.xAxisAxisLabelTextFontWeight?"bolder":""}},axisLine:{show:this.option.xAxisShow,lineStyle:{color:this.option.AxisLineStyleColor?this.option.AxisLineStyleColor:this.option.xAxisAxisLineLineStyleColor}}},r=[{type:"category"==this.option.category?"value":"category",show:this.option.yAxisShow,inverse:this.option.yAxisInverse,data:o,name:this.option.yAxisName,nameTextStyle:{color:this.option.yAxisNameTextStyleColor,fontSize:this.option.yAxisNameTextStyleFontSize,fontWeight:this.option.yAxisNameTextStyleFontWeight?"bolder":""},splitLine:{show:this.option.yAxisSplitLineShow,lineStyle:{color:this.option.yAxisSplitLineLineStyleColor}},axisLabel:{interval:this.option.yAxisAxisLabelInterval,rotate:this.option.yAxisAxisLabelRotate,textStyle:{color:this.option.AxisTextStyleColor?this.option.AxisTextStyleColor:this.option.yAxisAxisLabelTextStyleColor,fontSize:this.option.yAxisAxisLabelTextStyleFontSize,fontWeight:this.option.yAxisAxisLabelTextFontWeight?"bolder":""}},axisLine:{show:this.option.yAxisShow,lineStyle:{color:this.option.AxisLineStyleColor?this.option.AxisLineStyleColor:this.option.yAxisAxisLineLineStyleColor}}}],c={title:{text:this.option.titleText,textStyle:{color:this.option.titleTextStyleColor,fontSize:this.option.titleTextStyleFontSize,fontWeight:this.option.titleTextStyleFontWeight?"bolder":""},subtext:this.option.titleSubtext,subtextStyle:{color:this.option.titleSubtextStyleColor,fontSize:this.option.titleSubtextStyleFontSize,fontWeight:this.option.titleSubtextStyleFontWeight?"bolder":""},left:this.option.titleLeft,backgroundColor:(this.option.titleText||this.option.titleSubtext)&&this.option.titleBgColor||"#fff"},tooltip:{show:this.option.tooltipShow,backgroundColor:this.option.tooltipBgColor,textStyle:{color:this.option.tooltipTextStyleColor,fontSize:this.option.tooltipTextStyleFontSize,fontWeight:this.option.tooltipTextStyleFontWeight?"bolder":""}},grid:{left:this.option.gridLeft,top:this.option.gridTop,right:this.option.gridRight,bottom:this.option.gridBottom,containLabel:!0},legend:{show:this.option.legendShow,orient:this.option.legendOrient,textStyle:{fontSize:this.option.legendTextStyleFontSize||12},top:this.option.legendTop+"%",right:this.option.legendLeft+"%"},series:function(){var i=(n||[]).map((function(i,l){var o={show:e.option.seriesLabelShow,position:"pieChart"==t?e.option.seriesLabelPosition:"top",fontSize:e.option.seriesLabelFontSize,fontWeight:e.option.seriesLabelFontWeight?"bolder":"normal",color:e.option.seriesLabelColor,backgroundColor:e.option.seriesLabelBgColor},n={barBorderRadius:e.option.seriesItemStyleBarBorderRadius};if("barChart"!=t&&"lineChart"!=t&&"radarChart"!=t||(n.color=e.getColor(l)),"lineChart"==t&&(i.smooth=2==a,i.step=3==a,i.lineStyle={width:e.option.seriesLineStyleWidth},i.symbolSize=e.option.seriesSymbolRotate,e.option.areaStyle&&(i.areaStyle={})),"pieChart"==t){if(1==a&&(i.radius="60%"),2==a&&(i.radius=["30%","60%"]),e.option.roseType&&(i.roseType="area"),e.option.seriesLabelShowInfo&&e.option.seriesLabelShowInfo.length&&(e.option.seriesLabelShowInfo.includes("count")&&e.option.seriesLabelShowInfo.includes("percent")?o.formatter="{b}: {c} ({d}%)":e.option.seriesLabelShowInfo.includes("count")?o.formatter="{b}: {c} ":e.option.seriesLabelShowInfo.includes("percent")&&(o.formatter="{b}: ({d}%) ")),e.option.colorList&&e.option.colorList.length){var s=[];e.option.colorList.map((function(t,a){var i=e.getColor(a)||"#71B6F5";s.push(i)})),i.color=s}i.center=[e.option.seriesCenterLeft+"%",e.option.seriesCenterTop+"%"]}return Object.assign(i,{name:i.name,type:i.type,data:i.data,stack:i.stack,showBackground:4==a,barWidth:e.option.seriesBarWidth,itemStyle:n,label:o})}));return i}()};"barChart"==t||"lineChart"==t?("lineChart"==t&&this.option.areaStyle&&(s.boundaryGap=!1),c.xAxis=s,c.yAxis=r):"radarChart"==t?(c.radar=[],l.map((function(t){var a=o.map((function(e){var a=i.find((function(a){return a.type==t&&a.name==e}));return{name:e,max:a?a.max:""}})),l={indicator:a,shape:1==e.option.styleType?"polygon":"circle",axisName:{fontSize:e.option.radarAxisNameFontSize,fontWeight:e.option.radarAxisNameFontWeight?"bolder":"normal",color:e.option.radarAxisNameColor},center:[e.option.radarCenterLeft+"%",e.option.radarCenterTop+"%"]};c.radar.push(l)}))):"pieChart"==t&&(this.option.seriesLabelShowInfo.includes("count")&&this.option.seriesLabelShowInfo.includes("percent")?c.tooltip.formatter="{b}: {c} ({d}%)":this.option.seriesLabelShowInfo.includes("count")?c.tooltip.formatter="{b}: {c}":this.option.seriesLabelShowInfo.includes("percent")?c.tooltip.formatter="{b}: {d}%":c.tooltip.formatter="{b}"),this.currOption=c},initChart:function(){this.initChartData(),this.chart=ot["init"](this.$refs.chart),this.chart.setOption(this.currOption)},resetChart:function(){this.isEmpty="{}"===JSON.stringify(this.currOption),this.chart&&this.chart.dispose(),this.chart=null,this.isEmpty||this.initChart()},getColor:function(e){var t=this.option.colorList||[];if(t[e]){var a=t[e].color1,i=t[e].color2;return i&&a?new ot["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:a},{offset:1,color:i}]):a}},initStaticData:function(e){this.option.defaultValue=[],"barChart"==this.jnpfKey?(1!=e&&4!=e||(this.option.defaultValue=st["a"].baseBarData),2!=e&&5!=e||(this.option.defaultValue=st["a"].mulBarData),6==e&&(this.option.defaultValue=st["a"].plusMinusBarData),7==e&&(this.option.defaultValue=st["a"].brokenColumnBarData,this.initBarType())):"lineChart"==this.jnpfKey?(1!=e&&2!=e&&3!=e||(this.option.defaultValue=st["a"].baseBarData),4==e&&(this.option.defaultValue=st["a"].mulBarData)):"pieChart"==this.jnpfKey?this.option.defaultValue=st["a"].baseBarData:"radarChart"==this.jnpfKey&&(this.option.defaultValue=st["a"].radarData)},initBarType:function(){var e=this;if(7===this.option.styleType){var t=this.chartData||[];if(Array.isArray(t)){this.option.barType=[];var a=Array.from(new Set(t.map((function(e){return e.type}))));a.map((function(t,a){t&&e.option.barType.push({title:t,type:1==a?"line":"bar"})}))}}},getPieData:function(e){for(var t=0;t<e.length-1;t++)for(var a=0;a<e.length-1;a++)if(e[a].value>e[a+1].value){var i=e[a];e[a]=e[a+1],e[a+1]=i}}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)}},ct={mixins:[rt]},dt=ct,ut=Object(u["a"])(dt,it,lt,!1,null,null,null),pt=ut.exports,ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"eChart-box-body"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],ref:"chart",attrs:{id:"chart"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"portal-common-noData portal-common-noData-eChart"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])])],1)},mt=[],_t={mixins:[rt]},ht=_t,vt=Object(u["a"])(ht,ft,mt,!1,null,null,null),bt=vt.exports,gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"eChart-box-body"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],ref:"chart",attrs:{id:"chart"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"portal-common-noData portal-common-noData-eChart"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])])],1)},yt=[],Dt={mixins:[rt]},wt=Dt,xt=Object(u["a"])(wt,gt,yt,!1,null,null,null),Ct=xt.exports,kt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"eChart-box-body"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],ref:"chart",attrs:{id:"chart"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"portal-common-noData portal-common-noData-eChart"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])])],1)},Tt=[],Ft={mixins:[rt]},St=Ft,Nt=Object(u["a"])(St,kt,Tt,!1,null,null,null),Lt=Nt.exports,Ot=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"eChart-box-body"},[e.isEmpty?e._e():[e.hashMap.size>1?i("el-breadcrumb",{staticClass:"breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.hashMap,(function(t){var a=t[0],l=t[1];return i("el-breadcrumb-item",{key:a},[i("span",{style:{color:e.option.drillDownColor,"font-size":e.option.drillDownFontSize+"px","font-weight":e.option.drillDownFontWeight?"bolder":"normal"},on:{click:function(t){return e.readyMap(a,l)}}},[e._v(e._s(l.name))])])})),1):e._e(),i("div",{ref:"chart",style:{background:e.option.bgColor},attrs:{id:"chart"}}),4==e.option.styleType&&e.showBarTitle?i("div",{staticClass:"bar-title-text",style:{color:e.option.barTitleTextStyleColor,"font-size":e.option.barTitleTextStyleFontSize+"px","font-weight":e.option.barTitleTextStyleFontWeight?"bolder":"normal"}},[e._v("\n        "+e._s(e.option.barTitleText))]):e._e()],i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"portal-common-noData portal-common-noData-eChart"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])],2)],1)},$t=[],It=(a("55dd"),a("f400"),a("1641")),jt=a("7a1a"),Mt={mixins:[nt["a"]],components:{CardHeader:r["a"]},props:{activeData:{type:Object,default:function(){}}},data:function(){return{isEmpty:!1,chart:null,currOption:{},currMapCode:null,geoJson:null,allAtlasList:[],chartData:[],mapData:[],timeTicket:null,count:0,hashMap:new Map,zoom:1,showBarTitle:!1,code:"",updateMapChart:Object(jt["debounce"])(200,(function(){this.resetChart()})),updateBarChart:Object(jt["debounce"])(200,(function(){this.setBarMapChart()}))}},computed:{option:function(){return this.activeData.option},jnpfKey:function(){return this.activeData.jnpfKey}},watch:{option:{handler:function(){this.clearHashMap(),this.updateMapChart()},deep:!0},"option.defaultValue":{handler:function(e){var t=this;setTimeout((function(){t.chartData=e,t.resetChart()}),0)}},"option.updateMapType":{handler:function(e){var t=Array.isArray(this.option.mapType)?this.option.mapType[this.option.mapType.length-1]:this.option.mapType;this.currMapCode!=t&&this.initMap()}},"activeData.dataType":{handler:function(e){this.option.defaultValue=[],this.chartData=[],"static"==e&&(this.option.defaultValue=st["b"])}},"activeData.propsApi":{handler:function(e){var t=this;"static"!==this.activeData.dataType&&e&&Object(B["o"])(e).then((function(e){t.chartData=e.data,t.resetChart()}))}}},mounted:function(){var e=this;if("dynamic"===this.activeData.dataType){if(!this.activeData.propsApi)return;Object(B["o"])(this.activeData.propsApi).then((function(t){e.chartData=t.data,e.initMap()}))}else setTimeout((function(){e.chartData=e.option.defaultValue,e.initMap()}),0);this.$eventBus.$on("eChart"+this.activeData.i,(function(){e.$nextTick((function(){e.resize(),e.$nextTick((function(){e.setBarMapChart()}))}))})),this.getAtlasList()},methods:{initMap:function(){var e=this,t=Array.isArray(this.option.mapType)?this.option.mapType[this.option.mapType.length-1]:this.option.mapType;t&&(this.chart&&this.chart.dispose(),this.chart=null,this.chart=echarts.init(this.$refs.chart),this.chart.showLoading(),this.currMapCode=t,Object(It["j"])(t).then((function(a){e.chart.hideLoading(),e.geoJson=a.data,e.code=t,e.initCurrOption(),echarts.registerMap(t,e.geoJson),e.chart.setOption(e.currOption,!0),e.setScatterMapChart(),e.setBarMapChart(),e.option.autoCarousel&&e.handleDispatchAction(),e.clearHashMap(),e.chart.on("click",(function(t){if(e.option.drillDown&&e.allAtlasList.length){var a=e.allAtlasList.find((function(e){return e.fullName===t.name}));if(a){if(e.currMapCode==a.enCode)return;e.currMapCode=a.enCode,Object(It["j"])(a.enCode).then((function(i){e.code=a.enCode,e.initCurrOption(),echarts.registerMap(a.enCode,i.data),e.chart.setOption(e.currOption,!0),e.setScatterMapChart(),e.setBarMapChart(),e.zoom+=1,e.setHashMap(t.name,a.enCode,i.data)}))}}})),e.chart.on("mouseover",(function(t){e.option.autoCarousel&&(clearInterval(e.timeTicket),e.chart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:t.dataIndex}))})),e.chart.on("mouseout",(function(){e.option.autoCarousel&&e.handleDispatchAction()})),e.chart.on("georoam",(function(){e.updateBarChart()}))})))},resetChart:function(){this.geoJson&&(this.isEmpty="{}"===JSON.stringify(this.currOption),this.isEmpty||(this.initCurrOption(),echarts.registerMap(this.code,this.geoJson),this.chart.setOption(this.currOption,!0),this.setScatterMapChart(),this.setBarMapChart(),this.option.autoCarousel&&this.handleDispatchAction()))},initCurrOption:function(){var e=this.option,t={text:e.titleText,textStyle:{color:e.titleTextStyleColor,fontSize:e.titleTextStyleFontSize,fontWeight:e.titleTextStyleFontWeight?"bolder":""},subtext:e.titleSubtext,subtextStyle:{color:e.titleSubtextStyleColor,fontSize:e.titleSubtextStyleFontSize,fontWeight:e.titleSubtextStyleFontWeight?"bolder":""},left:e.titleLeft,backgroundColor:(e.titleText||e.titleSubtext)&&e.titleBgColor||"#fff"},a={show:this.option.tooltipShow,backgroundColor:this.option.tooltipBgColor,textStyle:{color:this.option.tooltipTextStyleColor,fontSize:this.option.tooltipTextStyleFontSize,fontWeight:this.option.tooltipTextStyleFontWeight?"bolder":""}},i={id:"china",map:this.code,show:!0,roam:e.geoRoam,aspectScale:e.geoAspectScale||.75,layoutCenter:[e.seriesCenterLeft+"%",e.seriesCenterTop+"%"],layoutSize:"85%",itemStyle:{areaColor:e.geoAreaColor,borderWidth:e.geoBorderWidth/2,borderColor:e.geoBorderColor,shadowOffsetX:e.geoShadowOffset,shadowOffsetY:e.geoShadowOffset,shadowColor:e.geoShadowColor},zoom:e.mspScale,label:{show:e.geoLabelShow,color:e.geoLabelColor,fontWeight:e.geoLabelFontWeight?"bolder":"normal",fontSize:e.geoLabelFontSize}},l={min:e.visualMapMin,max:e.visualMapMax,type:e.visualMapType,showLabel:!0,realtime:!1,calculable:!0,inRange:{color:["#3BD9FF","#0246FF"]}};this.currOption={title:t,tooltip:a,geo:i,visualMap:l}},setScatterMapChart:function(){var e=this,t=this.option;3!=t.styleType&&(this.mapData=[],this.chartData&&this.chartData.length&&this.chartData.map((function(t){var a=e.chart.convertToPixel("geo",[t.long,t.lat])||[],i=e.chart.containPixel("geo",a);i&&e.mapData.push({name:t.name,value:[t.long,t.lat,t.value]})})),null==t.showNumber?this.mapData=this.mapData:this.mapData=this.mapData.slice(0,t.showNumber),this.currOption.series=[{type:1==t.styleType||4==t.styleType?t.seriesType:"heatmap",rippleEffect:{brushType:"stroke"},coordinateSystem:"geo",itemStyle:{color:"#1890FF",opacity:t.seriesItemStyleOpacity},pointSize:t.seriesPointSize,blurSize:t.seriesBlurSize,maxOpacity:t.seriesMaxOpacity,tooltip:{show:!0,formatter:function(e){if(e.value.length<3)return e.name;var t=e.name+"&nbsp&nbsp"+e.value[2];return t}},symbolSize:function(t){if(e.option.visualMapMax){var a=Number(e.option.visualMapMax),i=Number(t[2]),l=i/a*15;return l}return 10},clip:!0,data:this.mapData}],this.setBarRankMapChart(),this.chart.setOption(this.currOption),this.timeTicket&&clearInterval(this.timeTicket))},setBarMapChart:function(){var e=this;if(3==this.option.styleType){var t=this.option.defaultValue;t&&t.length&&t.map((function(t,a){if(t.long&&t.lat){var i=e.chart.convertToPixel("geo",[t.long,t.lat])||[],l=e.chart.containPixel("geo",i);if(l){var o={xAxis:[],yAxis:[],grid:[],series:[],tooltip:{trigger:"item",axisPointer:{type:"none"}}};o.xAxis.push({id:a,gridId:a,show:!1,splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},data:[t.name],z:100}),o.yAxis.push({id:a,gridId:a,show:!1,splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},z:100}),o.grid.push({id:a,width:e.option.seriesBarWidth,height:70,left:i&&i[0],top:i&&i[1]-70,z:100}),o.series.push({id:a,type:"bar",xAxisId:a,yAxisId:a,barGap:0,barCategoryGap:0,data:[t.value],z:100,itemStyle:{normal:{borderRadius:e.option.seriesItemStyleBarBorderRadius,label:{show:!0,position:"insideBottom",textStyle:{color:"#fff",fontSize:10}}}}}),e.chart.setOption(o)}}}))}},setBarRankMapChart:function(){var e=this.option;if(4==e.styleType){var t=[["value","name"]],a=JSON.parse(JSON.stringify(this.chartData));e.showNumber&&(a=a.slice(0,e.showNumber));for(var i=a.sort((function(e,t){return t.value-e.value})),l=0;l<i.length;l++){var o=i[l];t.push([o.value,o.name])}this.currOption.grid={right:e.berGridRight,top:e.berGridTop,bottom:e.berGridBottom,width:"200"},this.currOption.xAxis={name:"value",show:!1},this.currOption.yAxis={type:"category",inverse:!0,nameGap:16,axisLine:{show:!1,lineStyle:{color:"#303133"}},axisTick:{show:!1},axisLabel:{interval:0,margin:10,textStyle:{fontSize:14}}};var n={name:"柱状图",type:"bar",roam:!1,zlevel:2,barGap:0,encode:{x:"value",y:"name"},label:{normal:{show:!0,position:"right",textBorderWidth:0}},itemStyle:{normal:{borderRadius:2}}};this.currOption.dataset={source:t},this.currOption.visualMap.dimension=0,this.currOption.series.push(n),this.showBarTitle=!0}},setHashMap:function(e,t,a){var i=this;this.hashMap.set(1,this.getDefaultHashMap()),this.hashMap.set(this.zoom,{name:e,value:t,geoJson:a}),this.hashMap.forEach((function(e,t,a){t>i.zoom&&i.hashMap.delete(t)})),this.hashMap.delete(this.zoom+1),this.hashMap=new Map(this.hashMap)},clearHashMap:function(){this.hashMap.clear(),this.hashMap.set(1,{name:"中国",value:"10000",geoJson:this.geoJson}),this.hashMap=new Map(this.hashMap)},getDefaultHashMap:function(){var e=Array.isArray(this.option.mapType)?this.option.mapType[this.option.mapType.length-1]:this.option.mapType,t=this.allAtlasList.find((function(t){return t.enCode===e}));return t?{name:t.fullName,value:t.id,geoJson:this.geoJson}:{name:"中国",value:"10000",geoJson:this.geoJson}},readyMap:function(e,t){var a=t.name,i=t.value,l=t.geoJson;i!=this.currMapCode&&(this.code=i,this.currMapCode="",1==e?(this.geoJson?this.resetChart():this.initMap(),this.clearHashMap()):(this.initCurrOption(),echarts.registerMap(i,l),this.chart.setOption(this.currOption,!0),this.zoom=e,this.setHashMap(a,i,l)))},handleDispatchAction:function(){var e=this;clearInterval(this.timeTicket),this.timeTicket=setInterval((function(){var t=e.mapData.length,a=e.count%t;e.chart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a}),e.count+=1}),this.option.autoCarouselTime||3e3)},getAtlasList:function(){var e=this;this.allAtlasList=[],Object(It["h"])().then((function(t){var a=function t(a){if(Array.isArray(a))for(var i=0;i<a.length;i++){var l=a[i];e.allAtlasList.push(l),l.children&&l.children.length&&t(l.children)}};a(t.data)}))}}},Vt=Mt,At=(a("77036"),Object(u["a"])(Vt,Ot,$t,!1,null,"18f9c2fc",null)),Pt=At.exports,Jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"rankList-box-body"},[1==e.option.styleType||2==e.option.styleType?i("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"highlight-current-row":"",hasNO:!1,"cell-style":e.handleRowStyle}},[i("el-table-column",{attrs:{width:"70",label:"排名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.option.styleType?i("div",{staticClass:"rank-box"},[0==t.$index?i("img",{attrs:{src:a("0a6a")}}):1==t.$index?i("img",{attrs:{src:a("1c80")}}):2==t.$index?i("img",{attrs:{src:a("8ec5")}}):i("span",{staticClass:"rank-box-span"},[e._v(e._s(t.$index+1))])]):e._e(),2==e.option.styleType?i("div",{staticClass:"rank-box"},[0==t.$index?i("img",{attrs:{src:a("63a6")}}):1==t.$index?i("img",{attrs:{src:a("f352")}}):2==t.$index?i("img",{attrs:{src:a("c113")}}):i("span",[e._v(e._s(t.$index+1))])]):e._e()]}}],null,!1,2828450893)}),e._l(e.option.columnOptions,(function(e,t){return i("el-table-column",{key:t,attrs:{prop:e.value,label:e.label,align:"center"}})}))],2):i("div",{staticClass:"cup-medal-box"},[3==e.option.styleType?i("div",[i("div",{staticClass:"cup-top-box"},[i("div",{staticClass:"cup2-box cup-box"},[i("img",{attrs:{src:a("2538")}}),i("div",{staticClass:"top-bg"}),i("div",{staticClass:"cup-box-content"},[e.option.columnOptions.length?i("p",[e._v(e._s(e.secondData[e.option.columnOptions[0].value])+"\n              ")]):e._e(),e.option.columnOptions.length>1?i("p",[e._v("\n                "+e._s(e.secondData[e.option.columnOptions[1].value])+"\n              ")]):e._e()])]),i("div",{staticClass:"cup1-box cup-box"},[i("img",{attrs:{src:a("3cf8")}}),i("div",{staticClass:"top-bg"}),i("div",{staticClass:"cup-box-content"},[e.option.columnOptions.length?i("p",[e._v(e._s(e.fistData[e.option.columnOptions[0].value])+"\n              ")]):e._e(),e.option.columnOptions.length>1?i("p",[e._v("\n                "+e._s(e.fistData[e.option.columnOptions[1].value])+"\n              ")]):e._e()])]),i("div",{staticClass:"cup3-box cup-box"},[i("img",{attrs:{src:a("f3e2")}}),i("div",{staticClass:"top-bg"}),i("div",{staticClass:"cup-box-content"},[e.option.columnOptions.length?i("p",[e._v(e._s(e.thirdData[e.option.columnOptions[0].value])+"\n              ")]):e._e(),e.option.columnOptions.length>1?i("p",[e._v(e._s(e.thirdData[e.option.columnOptions[1].value])+"\n              ")]):e._e()])])])]):i("div",{staticClass:"medal-box"},[i("div",{staticClass:"medal-top-box"},[i("div",{staticClass:"medal-box medal2-box"},[i("img",{attrs:{src:a("a2b7")}}),i("div",{staticClass:"medal-box-content"},[e.option.columnOptions.length?i("p",[e._v(e._s(e.secondData[e.option.columnOptions[0].value])+"\n              ")]):e._e(),e.option.columnOptions.length>1?i("p",[e._v("\n                "+e._s(e.secondData[e.option.columnOptions[1].value])+"\n              ")]):e._e()])]),i("div",{staticClass:"medal-box medal1-box"},[i("img",{attrs:{src:a("65f2")}}),i("div",{staticClass:"medal-box-content"},[e.option.columnOptions.length?i("p",[e._v(e._s(e.fistData[e.option.columnOptions[0].value])+"\n              ")]):e._e(),e.option.columnOptions.length>1?i("p",[e._v("\n                "+e._s(e.fistData[e.option.columnOptions[1].value])+"\n              ")]):e._e()])]),i("div",{staticClass:"medal-box medal3-box"},[i("img",{attrs:{src:a("9634")}}),i("div",{staticClass:"medal-box-content"},[e.option.columnOptions.length?i("p",[e._v(e._s(e.thirdData[e.option.columnOptions[0].value])+"\n              ")]):e._e(),e.option.columnOptions.length>1?i("p",[e._v(e._s(e.thirdData[e.option.columnOptions[1].value])+"\n              ")]):e._e()])])])]),e.otherDataList.length?i("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"cupMedalTable",attrs:{data:e.otherDataList,"highlight-current-row":"",hasNO:!1}},[i("el-table-column",{attrs:{label:"排名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+4))])]}}],null,!1,1006104263)}),e._l(e.option.columnOptions,(function(e,t){return i("el-table-column",{key:t,attrs:{prop:e.value,label:e.label,align:"center"}})}))],2):e._e()],1)],1)],1)},Rt=[],Kt={mixins:[Ze]},Bt=Kt,Et=(a("455d"),Object(u["a"])(Bt,Jt,Rt,!1,null,"b30ffdfe",null)),zt=Et.exports,qt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"portal-eChart-box portal-time-box",attrs:{shadow:"never"}},[e.activeData.title?i("CardHeader",{attrs:{slot:"header",title:e.activeData.title,card:e.activeData.card},slot:"header"}):e._e(),i("div",{staticClass:"portal-box-body ",class:{"timeline-box":e.option.layout>4,"card-timeline-box":2==e.option.styleType}},[e.timeList.length?["1"==e.option.layout?i("el-timeline",{staticClass:"timeline-left-right timeline-left"},e._l(e.timeList,(function(t,a){return i("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,color:e.getColor(a),placement:"top"}},[1==e.option.styleType?i("span",[e._v(e._s(t.content))]):i("el-card",{staticClass:"card-box"},[e._v("\n            "+e._s(t.content)+"\n          ")])],1)})),1):"2"==e.option.layout?i("el-timeline",{staticClass:"timeline-left-right timeline-right"},e._l(e.timeList,(function(t,a){return i("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,color:e.getColor(a),placement:"top"}},[1==e.option.styleType?i("span",[e._v(e._s(t.content))]):i("el-card",{staticClass:"card-box"},[e._v("\n            "+e._s(t.content)+"\n          ")])],1)})),1):"3"==e.option.layout?i("el-timeline",{staticClass:"timeline-right-box"},e._l(e.timeList,(function(t,a){return i("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,color:e.getColor(a),placement:"top"}},[1==e.option.styleType?i("span",[e._v(e._s(t.content))]):i("el-card",{staticClass:"card-box"},[e._v("\n            "+e._s(t.content)+"\n          ")])],1)})),1):"4"==e.option.layout?i("el-timeline",{staticClass:"timeline"},e._l(e.timeList,(function(t,a){return i("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,color:e.getColor(a),placement:"top"}},[1==e.option.styleType?i("span",[e._v(e._s(t.content))]):i("el-card",{staticClass:"card-box"},[e._v("\n            "+e._s(t.content)+"\n          ")])],1)})),1):"5"==e.option.layout?i("el-timeline",{staticClass:"timeline-top-bottom timeline-top"},e._l(e.timeList,(function(t,a){return i("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,color:e.getColor(a),placement:"top"}},[1==e.option.styleType?i("span",[e._v(e._s(t.content))]):i("el-card",{staticClass:"card-box"},[e._v("\n            "+e._s(t.content)+"\n          ")])],1)})),1):"6"==e.option.layout?i("el-timeline",{staticClass:"timeline-top-bottom timeline-bottom"},e._l(e.timeList,(function(t,a){return i("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,color:e.getColor(a),placement:"top"}},[1==e.option.styleType?i("span",[e._v(e._s(t.content))]):i("el-card",{staticClass:"card-box"},[e._v("\n            "+e._s(t.content)+"\n          ")])],1)})),1):"7"==e.option.layout?i("el-timeline",{staticClass:"timeline-bottom-box"},e._l(e.timeList,(function(t,a){return i("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,color:e.getColor(a),placement:"top"}},[1==e.option.styleType?i("span",[e._v(e._s(t.content))]):i("el-card",{staticClass:"card-box"},[e._v("\n            "+e._s(t.content)+"\n          ")])],1)})),1):"8"==e.option.layout?i("el-timeline",{staticClass:"timeline-top-box"},e._l(e.timeList,(function(t,a){return i("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,color:e.getColor(a),placement:"top"}},[1==e.option.styleType?i("span",[e._v(e._s(t.content))]):i("el-card",{staticClass:"card-box"},[e._v("\n            "+e._s(t.content)+"\n          ")])],1)})),1):e._e()]:i("div",{staticClass:"portal-common-noData"},[i("img",{staticClass:"noData-img",attrs:{src:a("2476"),alt:""}}),i("p",{staticClass:"noData-txt"},[e._v("暂无数据")])])],2)],1)},Wt=[],Ut={mixins:[Ze]},Ht=Ut,Gt=(a("5728"),Object(u["a"])(Ht,qt,Wt,!1,null,"ae84194c",null)),Qt=Gt.exports,Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{icon:"el-icon-plus"}},[e._v("添加控件")])],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.componentsList,(function(t,i){return a("div",{key:i},[a("el-dropdown",{attrs:{placement:"right-start",trigger:"click"}},[a("el-dropdown-item",[a("i",{class:t.icon}),e._v(e._s(t.label)+"\n        ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.list,(function(t,i){return a("el-dropdown-item",{key:i,nativeOn:{click:function(a){return e.addComponent(t)}}},[a("i",{class:t.icon}),e._v(e._s(t.label)+"\n          ")])})),1)],1)],1)})),0)],1)},Zt=[],Xt=a("32aa"),ea={props:{activeData:{type:Object,default:function(){}}},data:function(){return{componentsList:[{label:"布局控件",jnpfKey:"layout",icon:"icon-ym icon-ym-generator-function",list:Xt["p"]},{label:"基础控件",jnpfKey:"basic",icon:"icon-ym icon-ym-tree-department",list:Xt["g"]},{label:"系统控件",jnpfKey:"system",icon:"icon-ym icon-ym-tree-user2",list:Xt["E"]},{label:"图表控件",jnpfKey:"chart",icon:"icon-ym icon-ym-file-photo",list:Xt["h"]}]}},methods:{addComponent:function(e){this.$emit("addComponent",e)}}},ta=ea,aa=(a("f330"),Object(u["a"])(ta,Yt,Zt,!1,null,"664eaa2c",null)),ia=aa.exports,la={name:"parser",props:["item","activeId","showType","detailed"],components:{HTodo:f,HCommonFunc:y,HTodoList:T,HNotice:I,HEmail:J,HDataBoard:W,HTable:Z,HText:le,HImage:de,HCarousel:be,HVideo:Ce,HSchedule:He,HIframe:at,HBarChart:pt,HLineChart:bt,HPieChart:Ct,HRadarChart:Lt,HMapChart:Pt,HRankList:zt,HTimeAxis:Qt,CardHeader:r["a"],AddBtn:ia},data:function(){return{key:+new Date}},watch:{"item.type":{handler:function(e){this.handleTabClick()}}},created:function(){var e=this;this.$watch((function(){return e.item["tab-position"]}),(function(t){e.handleTabClick()}))},methods:{addComponent:function(e,t){this.$eventBus.$emit("addComponent",e,this.item,t)},handleClick:function(e){this.$eventBus.$emit("handlerActive",e)},handleTabClick:function(){for(var e=this,t=this.item.active,a=this.item.children,i=0;i<a.length;i++)a[i].name===t&&a[i].children&&a[i].children.length&&a[i].children.map((function(t){e.$eventBus.$emit("eChart"+t.i)}))},handleRemoveItem:function(e,t){t.splice(e,1)}}},oa=la,na=(a("6c4f"),Object(u["a"])(oa,i,l,!1,null,"4b30e9e6",null));t["a"]=na.exports},6672:function(e,t,a){"use strict";a("e2c8")},6674:function(e,t,a){},"66f1":function(e,t,a){"use strict";a("e03e")},"67a4":function(e,t,a){"use strict";a("9f7a")},"6ad7":function(e,t,a){"use strict";a("338e")},"6b61":function(e,t,a){"use strict";a("4ba8")},"6b6e":function(e,t,a){"use strict";a("1bd2")},"6c0d":function(e,t,a){},"6c4f":function(e,t,a){"use strict";a("26f9")},"6c5b":function(e,t,a){"use strict";a("7e6e")},"6fa8":function(e,t,a){"use strict";a("5fa4")},"6fbd":function(e,t,a){"use strict";a("7c1d")},"704f":function(e,t,a){"use strict";a("4c46")},"74f2":function(e,t,a){"use strict";a("37eb")},7640:function(e,t,a){"use strict";a("59ef")},77036:function(e,t,a){"use strict";a("d8ff")},7729:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"el-zoom-in-center"}},[a("div",{staticClass:"JNPF-common-layout menu-list",staticStyle:{position:"unset"}},[a("div",{staticClass:"JNPF-common-layout-center"},[a("div",{staticClass:"JNPF-preview-main flow-form-main"},[a("div",{staticClass:"JNPF-common-page-header"},[a("el-page-header",{attrs:{content:e.title},on:{back:e.goBack}}),a("div",{staticClass:"options"},[a("el-button",{on:{click:function(t){return e.goBack()}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)],1),[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"100%"}},[e.list.length?a("div",{staticClass:"menu-tab"},[a("el-tabs",{staticClass:"tabs-box",on:{"tab-click":e.handleTabClick},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},e._l(e.list,(function(e){return a("el-tab-pane",{key:e.id,attrs:{name:e.id,label:e.fullName}})})),1),a("el-scrollbar",{staticClass:"px-20px"},[e._l(e.authorizeList,(function(t,i){return[a("div",{key:i},[a("p",{staticClass:"title"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"content"},[1==t.type?e._l(t.list,(function(t,i){return a("span",{key:i},[e._v(e._s(t.fullName))])})):2==t.type?[e._v("未分配"+e._s(t.fullName))]:[e._v("未设置"+e._s(t.fullName)+"（无权限控制）")]],2)])]}))],2)],1):a("div",{staticClass:"no-data"},[e.loading?e._e():a("el-empty",{staticClass:"empty",attrs:{description:e.description}})],1)])]],2)])])])},l=[],o=a("3835"),n=(a("ac6a"),a("ffc1"),a("a6dc")),s={data:function(){return{visible:!1,list:[],title:"",authorizeList:[],activeKey:"",loading:!1,objectType:"",id:"",type:1,description:""}},methods:{goBack:function(){this.$emit("close")},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.visible=!0,this.list=[],this.title=e.fullName+"的权限",this.loading=!0,this.id=e.id||"",this.type=t||1,this.objectType=e.type||"",this.getPermissionGroup()},getPermissionGroup:function(){var e=this,t={id:this.id};Object(n["g"])(t).then((function(t){if(e.description=0==t.data.type?"未开启权限":"该菜单暂未分配权限！",e.list=t.data.list,!e.list.length)return e.loading=!1;e.activeKey=e.list[0].id,e.handleTabClick()})).catch((function(){e.loading=!1}))},handleTabClick:function(){var e=this;this.loading=!0,this.authorizeList=[];var t={id:this.id,permissionId:this.activeKey};Object(n["f"])(t).then((function(t){for(var a=0,i=Object.entries(t.data);a<i.length;a++){var l=Object(o["a"])(i[a],2),n=(l[0],l[1]);n&&e.authorizeList.push(n)}e.loading=!1}))}}},r=s,c=(a("207d"),a("2877")),d=Object(c["a"])(r,i,l,!1,null,"1f522e8e",null);t["a"]=d.exports},"78a8":function(e,t,a){"use strict";a("149a")},"78b1":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__),_components_JNPF_iconBox__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a7b7"),_mixin__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("9266"),_components_Generator_components_MaskConfigDialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("3867"),_components_Generator_utils_useTextMask__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("57fb");__webpack_exports__["a"]={props:["activeData"],mixins:[_mixin__WEBPACK_IMPORTED_MODULE_2__["a"]],components:{iconBox:_components_JNPF_iconBox__WEBPACK_IMPORTED_MODULE_1__["a"],MaskConfigDialog:_components_Generator_components_MaskConfigDialog__WEBPACK_IMPORTED_MODULE_3__["a"]},data:function(){return{iconsVisible:!1,currentIconModel:null,ruleList:[{pattern:"/^\\d+$/",message:"请输入正确的数字",label:"数字"},{pattern:"/^([1-9][\\d]*|0)(\\.[\\d]+)?$/",message:"请输入正确的金额",label:"金额"},{pattern:"/^0\\d{2,3}-?\\d{7,8}$/",message:"请输入正确的电话号码",label:"电话"},{pattern:"/^1[3456789]\\d{9}$/",message:"请输入正确的手机号码",label:"手机"},{pattern:"/^1[3456789]\\d{9}$|^0\\d{2,3}-?\\d{7,8}$/",message:"请输入正确的联系方式",label:"电话/手机"},{pattern:"/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/",message:"请输入正确的邮箱",label:"邮箱"},{pattern:"/^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/",message:"请输入正确的身份证号码",label:"身份证"}]}},created:function(){},methods:{openIconsDialog:function(e){this.iconsVisible=!0,this.currentIconModel=e},setIcon:function(e){this.activeData[this.currentIconModel]=e},addHandle:function(e){this.activeData.__config__.regList.push({pattern:e.pattern,message:e.message})},onPatternChange:function onPatternChange(val){try{var isRegExp="[object RegExp]"===Object.prototype.toString.call(eval(val));isRegExp||this.$message.error("请输入正确的正则表达式")}catch(_unused){this.$message.error("请输入正确的正则表达式")}},editMaskConfig:function(){var e=this;this.activeData.maskConfig||(this.activeData.maskConfig=JSON.parse(JSON.stringify(_components_Generator_utils_useTextMask__WEBPACK_IMPORTED_MODULE_4__["a"]))),this.$nextTick((function(){e.$refs.maskConfigRef.openModal(e.activeData.maskConfig)}))},updateMaskConfig:function(e){this.activeData.maskConfig=e},onUseScanChange:function(e){e&&(this.activeData.showPassword=!1)}}}},"7c1d":function(e,t,a){},"7c37":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"codeEditor",staticClass:"monaco-container"})},l=[],o=a("5530"),n=a("c2c6"),s={selectOnLineNumbers:!0,roundedSelection:!1,wordWrap:"on",language:"java",theme:"vs",formatOnPaste:!0,formatOnType:!0,glyphMargin:!0,fontSize:14,readOnly:!1},r={name:"MonacoEditor",props:{options:{type:Object,default:function(){}},value:{type:String,default:""}},data:function(){return{content:this.value,monacoEditor:null}},watch:{value:function(e){this.content=e},options:{handler:function(e){this.monacoEditor.updateOptions(Object(o["a"])({},e))},deep:!0}},mounted:function(){this.initEditor()},methods:{initEditor:function(){var e=this;this.monacoEditor=n["editor"].create(this.$refs["codeEditor"],Object(o["a"])(Object(o["a"])({value:this.content,autoIndex:!0},s),this.options)),this.monacoEditor.onDidChangeModelContent((function(){e.$emit("input",e.monacoEditor.getValue())}))},changeEditor:function(e){this.monacoEditor.setValue(e.value),this.monacoEditor.updateOptions(Object(o["a"])({},e.options))},insert:function(e){e=e||"";var t=this.monacoEditor.getPosition();this.monacoEditor.executeEdits("",[{range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:t.lineNumber,endColumn:t.column},text:e}])}}},c=r,d=(a("5964"),a("2877")),u=Object(d["a"])(c,i,l,!1,null,"4accfeee",null);t["a"]=u.exports},"7cd5":function(e,t,a){},"7cef":function(e,t,a){"use strict";a("fac3")},"7e5f":function(e,t,a){"use strict";a("f678")},"7e6e":function(e,t,a){},"7f1e":function(e,t,a){},"7f67":function(e,t,a){},"7fcc":function(e,t,a){"use strict";a("6c0d")},8388:function(e,t,a){},"84a6":function(e,t,a){},"85c1":function(e,t,a){"use strict";a("f1a3")},"870e":function(e,t,a){},8716:function(e,t,a){"use strict";a("4543")},8914:function(e,t,a){},"8a04":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"condition-pane pd-10"},[e.conditionList.length?a("div",{staticClass:"mb-10px"},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("分组匹配逻辑")]),a("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.matchLog,callback:function(t){e.matchLog=t},expression:"matchLog"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e(),e._l(e.conditionList,(function(t,i){return a("div",{key:i,staticStyle:{"margin-top":"10px"}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{staticClass:"mb-10",attrs:{span:7}},[a("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:10}},[e._v("条件逻辑")]),a("el-col",{attrs:{span:14}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.logic,callback:function(a){e.$set(t,"logic",a)},expression:"item.logic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1)],1),a("el-col",{staticClass:"mb-10",attrs:{span:3.5}},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addItem(i)}}},[e._v("添加条件")])],1),a("el-col",{staticClass:"mb-10 ",attrs:{span:5}},[a("el-button",{staticClass:"btn-del",attrs:{icon:"icon-ym icon-ym-btn-clearn"},on:{click:function(t){return e.delGroup(i)}}},[e._v("删除分组")])],1),e._l(t.groups,(function(l,o){return a("el-col",{key:i+o,staticClass:"mb-10",attrs:{span:24}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:7}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:function(t){return e.fieldNameChange(t,l,i,o)}},model:{value:l.field,callback:function(t){e.$set(l,"field",t)},expression:"subItem.field"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:7}},[a("el-select",{staticClass:"condition-select",attrs:{placeholder:"运算符号",filterable:""},on:{change:function(t){return e.symbolChange(t,l,i,o)}},model:{value:l.symbol,callback:function(t){e.$set(l,"symbol",t)},expression:"subItem.symbol"}},e._l(e.getSymbolOptions(l.jnpfKey),(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},["inputNumber"===l.jnpfKey?["between"==l.symbol?a("NumRange",{attrs:{disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}}):a("JnpfInputNumber",{attrs:{placeholder:"请输入",disabled:l.disabled,precision:l.precision},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"autoComplete"===l.jnpfKey?[a("JnpfAutoComplete",{attrs:{placeholder:"请选择",interfaceId:l.interfaceId,clearable:"",disabled:l.disabled,propsValue:l.propsValue,relationField:l.relationField,templateJson:l.templateJson,total:l.total},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["radio","checkbox","select"].includes(l.jnpfKey)?[["null","notNull"].includes(l.symbol)?[a("el-input",{attrs:{disabled:l.disabled,placeholder:"请选择"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:a("el-select",{key:l.cellKey,attrs:{disabled:l.disabled,placeholder:"请选择",multiple:l.multiple,filterable:""},on:{change:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}},e._l(l.options,(function(e,t){return a("el-option",{key:t,attrs:{disabled:l.disabled,label:e[l.props.label],value:e[l.props.value]}})})),1)]:["cascader"].includes(l.jnpfKey)?[a("JnpfCascader",{key:l.cellKey,attrs:{options:l.options,props:l.props,multiple:l.multiple,placeholder:l.placeholder,clearable:l.clearable,separator:l.separator,filterable:l.filterable,disabled:l.disabled,"show-all-levels":l.showAllLevels},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["treeSelect"].includes(l.jnpfKey)?[a("JnpfTreeSelect",{key:l.cellKey,attrs:{conditionFilter:"",options:l.options,props:l.props,placeholder:l.placeholder,clearable:l.clearable,multiple:l.multiple,filterable:l.filterable,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"calculate"===l.jnpfKey?["between"==l.symbol?a("NumRange",{attrs:{precision:l.precision,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}}):a("el-input-number",{attrs:{placeholder:"请输入",precision:l.precision||0,disabled:l.disabled,controls:!1,"controls-position":"right"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["rate","slider"].includes(l.jnpfKey)?["between"==l.symbol?a("NumRange",{attrs:{precision:e.precision,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}}):a("el-input-number",{attrs:{placeholder:"请输入",precision:e.precision,disabled:l.disabled,"controls-position":"right"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"switch"===l.jnpfKey?[a("el-switch",{staticStyle:{"margin-top":"5px"},attrs:{"active-value":1,disabled:l.disabled,"inactive-value":0},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"timePicker"===l.jnpfKey?["between"==l.symbol?a("el-time-picker",{key:"time1",staticStyle:{width:"100%"},attrs:{disabled:l.disabled,"range-separator":"至",placeholder:"请选择",clearable:"","is-range":!0,"value-format":l.format,format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}}):a("el-time-picker",{key:"time2",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",disabled:l.disabled,"value-format":l.format,format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["datePicker"].includes(l.jnpfKey)?["between"==l.symbol?[a("JnpfDateRangePicker",{key:"year1",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:l.disabled,placeholder:"请选择",separator:"至",startPlaceholder:"开始日期",endPlaceholder:"结束日期",format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:a("JnpfDatePicker",{key:"year2",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:l.disabled,placeholder:"请选择",format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["createTime","modifyTime"].includes(l.jnpfKey)?["between"==l.symbol?[a("el-date-picker",{key:"year1",staticStyle:{width:"100%"},attrs:{clearable:"","value-format":"timestamp",disabled:l.disabled,placeholder:"请选择","range-separator":"至",type:"datetimerange",startPlaceholder:"开始日期",endPlaceholder:"结束日期"},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:a("el-date-picker",{key:"year2",attrs:{clearable:"",type:"datetime","value-format":"timestamp",disabled:l.disabled,placeholder:"请选择"},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["organizeSelect","currOrganize"].includes(l.jnpfKey)?[a("JnpfOrganizeSelect",{ref:"comselect",refInFor:!0,attrs:{disabled:l.disabled,placeholder:"请选择",clearable:"",multiple:l.multiple,ableIds:l.ableIds,selectType:l.selectType},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["depSelect"].includes(l.jnpfKey)?[a("JnpfDepSelect",{attrs:{placeholder:"请选择",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,clearable:"",disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"popupTableSelect"===l.jnpfKey?[a("JnpfPopupTableSelect",{attrs:{placeholder:l.placeholder,interfaceId:l.interfaceId,multiple:l.multiple,columnOptions:l.columnOptions,propsValue:l.propsValue,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,popupType:l.popupType,popupTitle:l.popupTitle,popupWidth:l.popupWidth,filterable:l.filterable,disabled:l.disabled,clearable:"",templateJson:l.templateJson},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"relationForm"===l.jnpfKey?[a("JnpfRelationForm",{attrs:{placeholder:"请选择",modelId:l.modelId,clearable:"",multiple:l.multiple,columnOptions:l.columnOptions,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"popupSelect"===l.jnpfKey?[a("JnpfPopupSelect",{attrs:{placeholder:"请选择",interfaceId:l.interfaceId,clearable:"",multiple:l.multiple,columnOptions:l.columnOptions,propsValue:l.propsValue,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,popupType:l.popupType,templateJson:t.templateJson,popupTitle:l.popupTitle,popupWidth:l.popupWidth,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["userSelect"].includes(l.jnpfKey)?[a("JnpfUserSelect",{staticClass:"item",attrs:{placeholder:"请选择",clearable:"",disabled:l.disabled,selectType:"all"!=l.selectType&&"custom"!=l.selectType?"all":l.selectType,ableIds:l.ableIds,multiple:l.multiple},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["usersSelect"].includes(l.jnpfKey)?[a("jnpf-users-select",{key:l.cellKey,attrs:{clearable:"",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["createUser","modifyUser"].includes(l.jnpfKey)?[a("JnpfUserSelect",{key:l.cellKey,attrs:{placeholder:"请选择",multiple:l.multiple,clearable:"",disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["posSelect"].includes(l.jnpfKey)?[a("JnpfPosSelect",{key:l.cellKey,staticClass:"subItem",attrs:{placeholder:"请选择",clearable:"",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["currPosition"].includes(l.jnpfKey)?[a("JnpfPosSelect",{staticClass:"subItem",attrs:{placeholder:"请选择",clearable:"",multiple:l.multiple,disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"areaSelect"===l.jnpfKey?[a("JnpfAreaSelect",{key:l.cellKey,attrs:{placeholder:"请选择",level:l.level,multiple:l.multiple,clearable:"",disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"groupSelect"===l.jnpfKey?[a("JnpfGroupSelect",{attrs:{multiple:l.multiple,placeholder:"请选择",clearable:"",disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"roleSelect"===l.jnpfKey?[a("JnpfRoleSelect",{key:l.cellKey,attrs:{multiple:l.multiple,placeholder:"请选择",clearable:"",disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:[a("el-input",{attrs:{disabled:l.disabled,placeholder:"请输入"},on:{input:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]],2),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[a("div",{staticClass:"icon-ym icon-ym-btn-clearn clearn-color",staticStyle:{width:"100%",margin:"3px -29px"},on:{click:function(t){return e.delItem(i,o)}}})])],1)],1)}))],2)],1)})),[e.type?a("div",{staticClass:"link-text",on:{click:function(t){return e.addGroup()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加分组")]):a("el-button",{on:{click:e.addGroup}},[e._v("添加分组")])]],2)},l=[],o=a("5530"),n=a("2909"),s=(a("ac6a"),a("6762"),a("2fdb"),a("c5f6"),a("9b6f")),r=a("17de"),c=a("100e"),d=[{id:"and",fullName:"and"},{id:"or",fullName:"or"}],u=[{id:"like",fullName:"包含"},{id:"notLike",fullName:"不包含"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}],p=[{id:">=",fullName:"大于等于"},{id:">",fullName:"大于"},{id:"==",fullName:"等于"},{id:"<=",fullName:"小于等于"},{id:"<",fullName:"小于"},{id:"<>",fullName:"不等于"},{id:"between",fullName:"介于"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}],f=[{id:"==",fullName:"等于"},{id:"<>",fullName:"不等于"}],m=[].concat(f,[{id:"in",fullName:"包含任意一个"},{id:"notIn",fullName:"不包含任意一个"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}]),_=[].concat(f,[{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}]),h=["calculate","inputNumber","rate","slider","datePicker","timePicker","createTime","modifyTime"],v=["radio","checkbox","select","treeSelect","cascader","areaSelect","organizeSelect","depSelect","posSelect","userSelect","usersSelect","roleSelect","groupSelect","createUser","modifyUser","currOrganize","currPosition","popupTableSelect"],b=["switch"],g=["relationForm","popupSelect"],y={props:{modelType:{type:[String,Number],default:""},columnOptions:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},options:{type:Array,default:function(){return[]}},type:{type:Number,default:0},matchLogic:{type:String,default:"and"}},data:function(){return{precision:0,nowJnpfKey:void 0,dialogVisible:!1,conditionList:[],matchLog:this.matchLogic,logicOptions:d,baseSymbolOptions:u,rangeSymbolOptions:p,selectSymbolOptions:m,switchSymbolOptions:f,useRangeSymbolList:h,useSelectSymbolList:v,useSwitchSymbolList:b,relationFormSymbolOptions:_,useRelationFormSymbolList:g}},computed:{usedFormItems:function(){var e=[],t=function t(a,i){a&&(a.__config__&&!["table"].includes(a.__config__.jnpfKey)&&a.__config__.children&&Array.isArray(a.__config__.children)&&t(a.__config__.children,a),Array.isArray(a)&&a.forEach((function(e){return t(e,i)})),a.__vModel__&&!["relationFormAttr","popupAttr","uploadFile","uploadImg","colorPicker","editor","link","button","text","alert","table","sign"].includes(a.__config__.jnpfKey)&&e.push(a))};t(this.columnOptions);var a=e;return this.buildOptions(a),a}},watch:{value:{handler:function(e){e&&(this.conditionList=e)},immediate:!0,deep:!0}},methods:{getSymbolOptions:function(e){return this.useSwitchSymbolList.includes(e)?this.switchSymbolOptions:this.useRelationFormSymbolList.includes(e)?this.relationFormSymbolOptions:this.useRangeSymbolList.includes(e)?this.rangeSymbolOptions:this.useSelectSymbolList.includes(e)?this.selectSymbolOptions:["location"].includes(e)?this.baseSymbolOptions:[].concat(f,Object(n["a"])(this.baseSymbolOptions))},input:function(){this.$forceUpdate()},buildOptions:function(e){return e.forEach((function(e){e.disabled=!1;var t=e.__config__;if(c["b"].includes(t.jnpfKey)&&("dictionary"===t.dataType&&t.dictionaryType&&(e.options=[],Object(s["i"])(t.dictionaryType).then((function(t){e.options=t.data.list}))),"dynamic"===t.dataType&&t.propsUrl)){e.options=[];var a={paramList:t.templateJson||[]};Object(r["o"])(t.propsUrl,a).then((function(t){e.options=Array.isArray(t.data)?t.data:[]}))}})),e},getData:function(){return{matchLogic:JSON.parse(JSON.stringify(this.matchLog)),conditionList:JSON.parse(JSON.stringify(this.conditionList))}},handleClose:function(){this.dialogVisible=!1},show:function(e){this.dialogVisible=!0,null!=e&&this.init(e)},addGroup:function(){var e={logic:"and",groups:[{field:"",symbol:"",jnpfKey:"",fieldValueType:2,fieldValue:void 0,fieldValueJnpfKey:"",cellKey:+new Date}]};this.conditionList.push(e)},addItem:function(e){this.conditionList[e].groups.push({field:"",symbol:"",jnpfKey:"",fieldValueType:2,fieldValue:void 0,fieldValueJnpfKey:"",cellKey:+new Date})},delGroup:function(e){this.conditionList.splice(e,1)},delItem:function(e,t){this.conditionList[e].groups.splice(t,1)},fieldNameChange:function(e,t,a,i){t.cellKey=+new Date;var l=this.usedFormItems.filter((function(t){return t.id==e}))[0];t.fieldName=l.__config__.label,t.jnpfKey=l.__config__.jnpfKey,l.jnpfKey=l.__config__.jnpfKey,t=Object(o["a"])(Object(o["a"])({},t),l),"rate"==t.jnpfKey&&t.allowHalf&&(this.precision=1),t.jnpfKey!=this.nowJnpfKey&&(t.symbol=void 0),t.disabled=["null","notNull"].includes(t.symbol),t.multiple=["in","notIn"].includes(t.symbol),t.symbol=void 0,t.fieldValue=void 0,"switch"==t.jnpfKey&&(t.fieldValue=0),this.$set(this.conditionList[a].groups,i,t),this.nowJnpfKey=t.jnpfKey},symbolChange:function(e,t,a,i){t.symbol=e,t.cellKey=+new Date,t.disabled=["null","notNull"].includes(e),t.multiple=["in","notIn"].includes(e),"cascader"==t.jnpfKey&&(t.props.multiple=!1,["in","notIn"].includes(e)&&(t.props.multiple=!0)),t.fieldValue=void 0,"switch"==t.jnpfKey&&(t.fieldValue=0),["in","notIn"].includes(e)&&(t.fieldValue=[]),this.$set(this.conditionList[a].groups,i,t)}}},D=y,w=(a("afa2"),a("2877")),x=Object(w["a"])(D,i,l,!1,null,"15fc7270",null);t["a"]=x.exports},"8a1f":function(e,t,a){"use strict";a("49a8")},"8a71":function(e,t,a){},"8b98":function(e,t,a){"use strict";a("8a71")},"8c97":function(e,t,a){"use strict";a("2a01")},"8d2f":function(e,t,a){"use strict";a("5262")},"8d50":function(e,t,a){"use strict";a("b715")},"8dca":function(e,t,a){},"8de7":function(e,t,a){},"8df8":function(e,t,a){},"8ec8":function(e,t,a){},"91e2":function(e,t,a){},9230:function(e,t,a){},9266:function(e,t,a){"use strict";a("28a5");var i=a("3424");t["a"]={inject:["getShowType"],data:function(){return{}},computed:{showType:function(){return this.getShowType()}},methods:{onDefaultValueInput:function(e){Array.isArray(this.activeData.__config__.defaultValue)?this.$set(this.activeData.__config__,"defaultValue",e.split(",").map((function(e){return Object(i["j"])(e)?+e:e}))):["true","false"].indexOf(e)>-1?this.$set(this.activeData.__config__,"defaultValue",JSON.parse(e)):this.$set(this.activeData.__config__,"defaultValue",Object(i["j"])(e)?+e:e)},onInterfaceIdChange:function(e,t){if(!e)return this.activeData.interfaceId="",this.activeData.interfaceName="",this.activeData.templateJson=[],this.activeData.__config__.defaultValue="",this.activeData.interfaceHasPage=0,void this.getDataInterfaceInfo();this.activeData.interfaceId=e,this.activeData.interfaceName=t.fullName,this.activeData.templateJson=t.parameterJson?JSON.parse(t.parameterJson):[],this.activeData.__config__.defaultValue="",this.getDataInterfaceInfo()},setDefaultValue:function(e){return Array.isArray(e)?e.join(","):"boolean"===typeof e?"".concat(e):e},addReg:function(){this.activeData.__config__.regList.push({pattern:"",message:""})}}}},"933e":function(e,t,a){"use strict";a("f4b7")},"94ab":function(e,t,a){"use strict";a("ac6a"),a("6762"),a("2fdb");var i=a("2909"),l=a("53ca"),o=a("2e29"),n=function(e){return"condition"===e.type||"approver"===e.type&&(e.isInterflow||e.isBranchFlow)},s=function(e){return Array.isArray(e)&&e.length>0},r=function(e){return s(e.conditionNodes)};function c(e,t,a){var i=["flow-path-card"];t.state&&i.push(t.state);var l=function(e,t){return e&&i.push(t),e},n=(l(o["a"].isStartNode(t),"start-node"),l(o["a"].isApproverNode(t),"approver"),l(o["a"].isCopyNode(t),"copy"),l(o["a"].isTimerNode(t),"timer"),l(o["a"].isSubFlowNode(t),"subFlow"));return a("section",{class:i.join(" "),on:{click:this.eventLauncher.bind(e,"edit",t)}},[a("header",{class:"header"},[a("div",{class:"title-box",style:"height: 100%;width:190px;"},[a("span",{class:"title-text"},[t.properties.title])]),n&&a("el-tag",{class:"async-state",attrs:{size:"mini",effect:"plain"},style:"right:10px"},[t.properties.isAsync?"异步":"同步"])]),a("div",{class:"body"},[a("span",{class:"text"},[t.content])])])}var d=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return c.call.apply(c,[t[0]].concat(t))},u={start:d,approver:d,copy:d,timer:d,subFlow:d,interflow:d,branchFlow:d,empty:function(e){return""},condition:function(e,t,a){return a("section",{class:"flow-path-card condition"},[a("header",{class:"header"},[a("div",{class:"title-box",style:"height: 20px;width:160px;"},[a("span",{class:"title-text"},[t.properties.title])])]),a("div",{class:"body"},[a("div",{class:"text"},[t.content])])])}};function p(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(r(t),"empty"===t.type);return l&&!i?"":a("div",{class:"add-node-btn-box flex justify-center"})}function f(e,t,a){if(t){var i=e.verifyMode&&!1===o["a"].checkNode(t),l=[],s="",c=a("div",{class:"node-wrap"},[a("div",{class:"node-wrap-box ".concat(t.type," ").concat(o["a"].isInterflowNode(t)?"interflow":""," ").concat(o["a"].isBranchFlowNode(t)?"branchFlow":""," ").concat(i?"error":"")},[u[t.type].call(e,e,t,a),p.call(e,e,t,a)])]);return r(t)&&(s=a("div",{class:"branch-wrap"},[a("div",{class:"branch-box-wrap"},[a("div",{class:"branch-box flex justify-center relative"},[a("span",{class:"line"}),t.conditionNodes.map((function(t){return f.call(e,e,t,a)}))])]),p.call(e,e,t,a,!0)])),n(t)?a("div",{class:"col-box"},[a("div",{class:"center-line"}),a("div",{class:"top-cover-line"}),a("div",{class:"bottom-cover-line"}),c,s,f.call(e,e,t.childNode,a)]):(l.push(c),s&&l.push(s),t.childNode&&l.push(f.call(e,e,t.childNode,a)),l)}}function m(e){return e("section",{class:"end-node"},["流程结束"])}var _,h,v,b,g={props:{data:{type:Object,required:!0},verifyMode:{type:Boolean,default:!0}},watch:{},methods:{eventLauncher:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];var l={event:e,args:a.slice(0,-1)};this.$emit("emits",l)}},render:function(e){return e("div",{style:"display: inline-flex; flex-direction: column; align-items: center;"},[this.data&&f.call(this,this,this.data,e),m(e)])}},y=g,D=(a("85c1"),a("2877")),w=Object(D["a"])(y,_,h,!1,null,"35f08b94",null),x=w.exports,C={name:"Process",props:["tabName","conf"],data:function(){var e={};return e="object"===Object(l["a"])(this.conf)&&null!==this.conf&&"{}"!==JSON.stringify(this.conf)?Object.assign(o["a"].createNode("start"),this.conf):Object(o["b"])(),{data:e,scaleVal:100,step:5,updateId:0,activeData:null,isProcessCmp:!0,verifyMode:!1}},methods:{getData:function(){return this.verifyMode=!0,o["a"].checkAllNode(this.data)?Promise.resolve({formData:this.data}):Promise.reject({target:this.tabName})},eventReceiver:function(e){var t=e.event,a=e.args;this.$emit("subFlow",a[0].nodeId),"edit"!==t?(o["a"][t].apply(o["a"],Object(i["a"])(a)),this.forceUpdate()):this.activeData=a[0]},forceUpdate:function(){this.updateId=this.updateId+1},changeScale:function(e){if(this.scaleVal>=0&&this.scaleVal<=200){if(200===this.scaleVal&&this.scaleVal+e>200)return;if(0===this.scaleVal&&this.scaleVal+e<0)return;this.scaleVal+=e}},onPropEditConfirm:function(e,t){this.activeData.content=t||"请设置条件";var a=this.activeData.properties;this.activeData.properties=e,o["a"].isConditionNode(this.activeData)&&(e.priority!==a.priority&&o["a"].resortPrioByCNode(this.activeData,a.priority,this.data),o["a"].setDefaultCondition(this.activeData,this.data)),o["a"].isStartNode(this.activeData)&&this.$emit("startNodeChange",this.data),this.onClosePanel(),this.forceUpdate()},onClosePanel:function(){this.activeData=null},isFilledPCon:function(e){var t=!1,a=function(e,t){return e.childNode&&i(e.childNode,t)},i=function(i,l){if(!t&&i){if(Array.isArray(i.conditionNodes)){var o=i.conditionNodes.some((function(t){var a=t.properties.conditions||[];return Array.isArray(e)?a.some((function(t){return e.includes(t.formId)})):a.length>0}));o?l():i.conditionNodes.forEach((function(e){return a(e,l)}))}a(i,l)}};return i(this.data,(function(){return t=!0})),t}},render:function(e){return e("div",{class:"flow-container flow-container-preview"},[e("div",{class:"scale-slider"},[e("i",{class:"btn el-icon-minus",on:{click:this.changeScale.bind(this,-this.step)}}),e("span",{style:"font-size:14px;"},[this.scaleVal,"%"]),e("i",{class:"btn el-icon-plus",on:{click:this.changeScale.bind(this,this.step)}})]),e("div",{class:"tips"},[e("div",{class:"tips-item"},[e("span",{class:"icon success"},["●"]),"已完成"]),e("div",{class:"tips-item"},[e("span",{class:"icon current"},["●"]),"进行中"]),e("div",{class:"tips-item"},[e("span",{class:"icon"},["●"]),"无/未处理"])]),e(x,{attrs:{verifyMode:this.verifyMode,data:this.data},key:this.updateId,on:{emits:this.eventReceiver},style:{transform:"scale(".concat(this.scaleVal/100,")")}})])}},k=C,T=(a("b847"),Object(D["a"])(k,v,b,!1,null,"4002472d",null));t["a"]=T.exports},"94b5":function(e,t,a){"use strict";a("6674")},"95a4":function(e,t,a){},"97c0":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return r}));var i=a("ade3"),l={formRef:"formRef",formModel:"dataForm",size:"small",labelPosition:"right",labelWidth:100,labelSuffix:"",formRules:"rules",popupType:"general",generalWidth:"600px",fullScreenWidth:"100%",drawerWidth:"600px",gutter:15,disabled:!1,span:24,formBtns:!1,hasCancelBtn:!0,cancelButtonText:"取 消",hasConfirmBtn:!0,confirmButtonText:"确 定",hasPrintBtn:!1,hasConfirmAndAddBtn:!0,confirmAndAddText:"确定并继续操作",printButtonText:"打 印",primaryKeyPolicy:1,concurrencyLock:!1,logicalDelete:!1,printId:"",formStyle:"",classNames:[],className:[],classJson:"",funcs:{onLoad:"({ formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}",beforeSubmit:"({ formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    return new Promise((resolve, reject) => {\n        // 在此编写代码\n        \n        // 继续执行\n        resolve()\n    })\n}",afterSubmit:"({ formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},idGlobal:100},o=[{__config__:{jnpfKey:"input",label:"单行输入",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfInput",tagIcon:"icon-ym icon-ym-generator-input",tableAlign:"left",tableFixed:"none",className:[],defaultValue:void 0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,unique:!1,regList:[],trigger:"blur"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}",blur:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},placeholder:"请输入",style:{width:"100%"},useScan:!1,useMask:!1,maskConfig:{filler:"*",maskType:1,prefixType:1,prefixLimit:0,prefixSpecifyChar:"",suffixType:1,suffixLimit:0,suffixSpecifyChar:"",ignoreChar:"",useUnrealMask:!1,unrealMaskLength:1},clearable:!0,addonBefore:"",addonAfter:"",prefixIcon:"",suffixIcon:"",maxlength:null,showWordLimit:!1,showPassword:!1,readonly:!1,disabled:!1},Object(i["a"])({__config__:{jnpfKey:"textarea",label:"多行输入",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfTextarea",tagIcon:"icon-ym icon-ym-generator-textarea",tableAlign:"left",tableFixed:"none",className:[],defaultValue:void 0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"blur"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}",blur:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},type:"textarea",placeholder:"请输入",autoSize:{minRows:4,maxRows:4},style:{width:"100%"},useScan:!1,useMask:!1,maskConfig:{filler:"*",maskType:1,prefixType:1,prefixLimit:0,prefixSpecifyChar:"",suffixType:1,suffixLimit:0,suffixSpecifyChar:"",ignoreChar:"",useUnrealMask:!1,unrealMaskLength:1},maxlength:null,showWordLimit:!0,readonly:!1,disabled:!1},"readonly",!1),{__config__:{jnpfKey:"inputNumber",label:"数字输入",tipLabel:"",showLabel:!0,labelWidth:void 0,tag:"JnpfInputNumber",tagIcon:"icon-ym icon-ym-generator-number",tableAlign:"left",tableFixed:"none",className:[],defaultValue:void 0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:["blur","change"]},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}",blur:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:null},placeholder:"数字文本",min:void 0,max:void 0,step:1,"step-strictly":!1,precision:void 0,controls:!1,controlsPosition:"",addonBefore:null,addonAfter:null,thousands:!1,isAmountChinese:!1,disabled:!1},{__config__:{jnpfKey:"switch",label:"开关",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfSwitch",tagIcon:"icon-ym icon-ym-generator-switch",tableAlign:"left",tableFixed:"none",className:[],defaultValue:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},disabled:!1,activeTxt:"开",inactiveTxt:"关",activeColor:null,inactiveColor:null,activeValue:1,inactiveValue:0},{__config__:{jnpfKey:"radio",label:"单选框组",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfRadio",tagIcon:"icon-ym icon-ym-generator-radio",tableAlign:"left",tableFixed:"none",className:[],defaultValue:void 0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change",dataType:"static",dictionaryType:"",propsUrl:"",propsName:"",templateJson:[]},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{},size:"small",disabled:!1,props:{label:"fullName",value:"id"},options:[{fullName:"选项一",id:"1"},{fullName:"选项二",id:"2"}],direction:"horizontal",optionType:"default",border:!1},{__config__:{jnpfKey:"checkbox",label:"多选框组",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfCheckbox",tagIcon:"icon-ym icon-ym-generator-checkbox",tableAlign:"left",tableFixed:"none",className:[],defaultValue:[],required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change",dataType:"static",dictionaryType:"",propsUrl:"",propsName:"",templateJson:[]},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{},size:"small",optionType:"default",border:!1,props:{label:"fullName",value:"id"},options:[{fullName:"选项一",id:"1"},{fullName:"选项二",id:"2"}],direction:"horizontal",disabled:!1},{__config__:{jnpfKey:"select",label:"下拉选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfSelect",tagIcon:"icon-ym icon-ym-generator-select",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change",dataType:"static",dictionaryType:"",propsUrl:"",propsName:"",templateJson:[]},props:{label:"fullName",value:"id"},options:[{fullName:"选项一",id:"1"},{fullName:"选项二",id:"2"}],on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},placeholder:"请选择",style:{width:"100%"},clearable:!0,disabled:!1,filterable:!1,multiple:!1},{__config__:{jnpfKey:"cascader",label:"级联选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfCascader",tagIcon:"icon-ym icon-ym-generator-cascader",tableAlign:"left",tableFixed:"none",className:[],defaultValue:[],required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change",dataType:"static",propsUrl:"",propsName:"",templateJson:[],dictionaryType:""},options:[{id:"1",fullName:"选项1",children:[{id:"2",fullName:"选项1-1"}]}],on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}",blur:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},placeholder:"请选择",style:{width:"100%"},props:{value:"id",label:"fullName",children:"children"},multiple:!1,showAllLevels:!0,disabled:!1,clearable:!0,filterable:!1,separator:"/"},{__config__:{jnpfKey:"datePicker",label:"日期选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfDatePicker",tagIcon:"icon-ym icon-ym-generator-date",tableAlign:"left",tableFixed:"none",className:[],noShow:!1,defaultValue:null,defaultCurrent:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,startTimeRule:!1,startTimeType:1,startTimeTarget:1,startTimeValue:"",endTimeRule:!1,endTimeType:1,endTimeTarget:1,startRelationField:"",endRelationField:"",endTimeValue:"",visibility:["pc","app"],tableName:"",regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}",blur:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},placeholder:"请选择",type:"date",style:{width:"100%"},disabled:!1,clearable:!0,format:"yyyy-MM-dd",startTime:null,endTime:null,readonly:!1},{__config__:{jnpfKey:"timePicker",label:"时间选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfTimePicker",tagIcon:"icon-ym icon-ym-generator-time",tableAlign:"left",tableFixed:"none",className:[],noShow:!1,defaultValue:null,required:!1,defaultCurrent:!1,layout:"colFormItem",span:24,dragDisabled:!1,startTimeRule:!1,startTimeType:1,startTimeTarget:1,startTimeValue:"",endTimeRule:!1,endTimeType:1,endTimeTarget:1,endTimeValue:"",startRelationField:"",endRelationField:"",visibility:["pc","app"],tableName:"",regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}",blur:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},placeholder:"请选择",style:{width:"100%"},disabled:!1,clearable:!0,startTime:null,endTime:null,readonly:!1,format:"HH:mm:ss"},{__config__:{jnpfKey:"uploadFile",label:"文件上传",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfUploadFile",tagIcon:"icon-ym icon-ym-generator-upload",tableAlign:"left",tableFixed:"none",className:[],defaultValue:[],required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},disabled:!1,accept:"",fileSize:10,sizeUnit:"MB",buttonText:"点击上传",showTip:!1,pathType:"defaultPath",isAccount:0,folder:"",tipText:"",limit:9},{__config__:{jnpfKey:"uploadImg",label:"图片上传",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfUploadImg",tagIcon:"icon-ym icon-ym-generator-upload",tableAlign:"left",tableFixed:"none",className:[],defaultValue:[],required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},disabled:!1,accept:"",showTip:!1,fileSize:10,sizeUnit:"MB",pathType:"defaultPath",isAccount:0,folder:"",tipText:"",limit:9},{__config__:{jnpfKey:"colorPicker",label:"颜色选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfColorPicker",tagIcon:"icon-ym icon-ym-generator-color",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},showAlpha:!1,colorFormat:"",disabled:!1,size:"small"},{__config__:{jnpfKey:"rate",label:"评分",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfRate",tagIcon:"icon-ym icon-ym-generator-rate",tableAlign:"left",tableFixed:"none",className:[],defaultValue:0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{},count:5,allowHalf:!1,showText:!1,showScore:!1,disabled:!1},{__config__:{jnpfKey:"slider",label:"滑块",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfSlider",tagIcon:"icon-ym icon-ym-generator-slider",tableAlign:"left",tableFixed:"none",className:[],defaultValue:void 0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},disabled:!1,min:0,max:100,step:1,showStops:!1,range:!1},{__config__:{jnpfKey:"editor",label:"富文本",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfEditor",tagIcon:"icon-ym icon-ym-generator-rich-text",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"blur"},style:{width:"100%"},placeholder:"请输入",disabled:!1},{__config__:{jnpfKey:"link",label:"链接",labelWidth:void 0,showLabel:!1,tag:"JnpfLink",tagIcon:"icon-ym icon-ym-generator-link",tableAlign:"left",tableFixed:"none",className:[],required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"]},on:{click:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},content:"文本链接",href:"",target:"_self",textStyle:{"text-align":"left"}},{__config__:{jnpfKey:"button",label:"按钮",tipLabel:"",labelWidth:void 0,showLabel:!1,tag:"JnpfButton",tagIcon:"icon-ym icon-ym-generator-button",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],regList:[],trigger:"click"},on:{click:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},align:"left",buttonText:"按钮",type:"",disabled:!1},{__config__:{jnpfKey:"text",label:"文本",tipLabel:"",labelWidth:void 0,showLabel:!1,tag:"JnpfText",tagIcon:"icon-ym icon-ym-generator-textarea",tableAlign:"left",tableFixed:"none",className:[],defaultValue:void 0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"]},textStyle:{color:"#000000","text-align":"left","font-weight":"normal","font-style":"normal","text-decoration":"none","line-height":32,"font-size":12},content:"这是一段文字"},{__config__:{jnpfKey:"alert",label:"提示",tipLabel:"",labelWidth:void 0,showLabel:!1,tag:"JnpfAlert",tagIcon:"icon-ym icon-ym-generator-alert",tableAlign:"left",tableFixed:"none",className:[],required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"]},title:"这是一个提示",type:"success",showIcon:!1,closable:!0,description:"",closeText:""}],n=[{__config__:{jnpfKey:"organizeSelect",label:"组织选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfOrganizeSelect",tagIcon:"icon-ym icon-ym-generator-company",tableAlign:"left",tableFixed:"none",className:[],defaultValue:[],defaultCurrent:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",multiple:!1,clearable:!0,filterable:!1,disabled:!1,ableIds:[],selectType:"all"},{__config__:{jnpfKey:"depSelect",label:"部门选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfDepSelect",tagIcon:"icon-ym icon-ym-generator-department",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,defaultCurrent:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",selectType:"all",ableIds:[],multiple:!1,clearable:!0,filterable:!1,disabled:!1},{__config__:{jnpfKey:"posSelect",label:"岗位选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfPosSelect",tagIcon:"icon-ym icon-ym-generator-jobs",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,defaultCurrent:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",selectType:"all",ableIds:[],multiple:!1,clearable:!0,filterable:!1,disabled:!1},{__config__:{jnpfKey:"userSelect",label:"用户选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfUserSelect",tagIcon:"icon-ym icon-ym-generator-user",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,defaultCurrent:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change",relationField:""},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",ableIds:[],selectType:"all",relationField:"",multiple:!1,clearable:!0,disabled:!1},{__config__:{jnpfKey:"roleSelect",label:"角色选择",tipLabel:"",labelWidth:void 0,defaultCurrent:!1,showLabel:!0,tag:"JnpfRoleSelect",tagIcon:"icon-ym icon-ym-generator-role",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",multiple:!1,clearable:!0,disabled:!1,ableIds:[],selectType:"all"},{__config__:{jnpfKey:"groupSelect",label:"分组选择",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfGroupSelect",tagIcon:"icon-ym icon-ym-generator-group1",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",defaultCurrent:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",multiple:!1,clearable:!0,filterable:!1,disabled:!1,ableIds:[],selectType:"all"},{__config__:{jnpfKey:"usersSelect",label:"用户组件",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfUsersSelect",tagIcon:"icon-ym icon-ym-generator-founder",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,defaultCurrent:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},placeholder:"请选择",selectType:"all",ableIds:[],multiple:!1,clearable:!0,disabled:!1},{__config__:{jnpfKey:"table",label:"设计子表",tipLabel:"",showLabel:!1,tagIcon:"icon-ym icon-ym-generator-table",tableAlign:"left",tableFixed:"none",className:[],tag:"JnpfInputTable",defaultValue:[],layout:"rowFormItem",dragDisabled:!1,visibility:["pc","app"],showTitle:!0,type:"table",rowType:"table",children:[],tableName:"",complexHeaderList:[],fixed:"none",align:"left"},showAddBtn:!0,showDeleteBtn:!0,disabled:!1,actionText:"添加",showSummary:!1,addType:0,summaryField:[],thousands:!1,thousandsField:[],tableConf:{},defaultValue:[],columnBtnsList:[{value:"copy",label:"复制",show:!0,btnType:"primary",btnIcon:"icon-ym icon-ym-btn-edit"},{value:"remove",label:"删除",show:!0,btnType:"danger",btnIcon:"icon-ym icon-ym-btn-clearn",showConfirm:!0}],footerBtnsList:[{value:"add",label:"添加",show:!0,btnType:"primary",btnIcon:"icon-ym icon-ym-btn-add"},{value:"batchRemove",label:"批量删除",show:!0,btnType:"danger",btnIcon:"icon-ym icon-ym-btn-clearn",showConfirm:!0}]},{__config__:{jnpfKey:"treeSelect",label:"下拉树形",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfTreeSelect",tagIcon:"icon-ym icon-ym-generator-tree",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change",dataType:"static",dictionaryType:"",propsUrl:"",propsName:"",templateJson:[]},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",props:{value:"id",label:"fullName",children:"children"},options:[{id:"1",fullName:"选项1",children:[{id:"2",fullName:"选项1-1"}]}],multiple:!1,clearable:!0,filterable:!1,disabled:!1},{__config__:{jnpfKey:"popupTableSelect",label:"下拉表格",tipLabel:"",labelWidth:void 0,showLabel:!0,required:!1,tag:"JnpfPopupTableSelect",tagIcon:"icon-ym icon-ym-generator-popupTableSelect",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",noShow:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",interfaceId:"",interfaceName:"",templateJson:[],hasPage:!1,pageSize:20,columnOptions:[],propsValue:"id",relationField:"fullName",popupType:"popover",popupTitle:"选择数据",popupWidth:"800px",disabled:!1,clearable:!0,multiple:!1,filterable:!1,interfaceHasPage:0},{__config__:{jnpfKey:"autoComplete",label:"下拉补全",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfAutoComplete",tagIcon:"icon-ym icon-ym-generator-autoComplete",tableAlign:"left",tableFixed:"none",className:[],defaultValue:void 0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,unique:!1,regList:[],trigger:"blur"},__slot__:{prepend:"",append:""},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}",blur:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},placeholder:"请输入",style:{width:"100%"},total:10,relationField:"fullName",interfaceId:"",interfaceName:"",templateJson:[],clearable:!0,maxlength:null,readonly:!1,disabled:!1},{__config__:{jnpfKey:"areaSelect",label:"省市区域",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfAreaSelect",tagIcon:"icon-ym icon-ym-generator-Provinces",tableAlign:"left",tableFixed:"none",className:[],defaultValue:[],required:!1,layout:"colFormItem",span:24,noShow:!1,dragDisabled:!1,visibility:["pc","app"],tableName:"",regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",disabled:!1,ableAddressIds:[],selectType:"all",clearable:!0,filterable:!1,multiple:!1,level:2},{__config__:{jnpfKey:"relationForm",label:"关联表单",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfRelationForm",tagIcon:"icon-ym icon-ym-generator-menu",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,noShow:!1,visibility:["pc","app"],tableName:"",regList:[],trigger:"change",transferList:[]},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",modelId:"",relationField:"",hasPage:!1,pageSize:20,columnOptions:[],clearable:!0,popupType:"dialog",popupTitle:"选择数据",popupWidth:"800px",filterable:!1,disabled:!1},{__config__:{jnpfKey:"relationFormAttr",label:"关联表单属性",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfRelationFormAttr",tagIcon:"icon-ym icon-ym-generator-nature",tableAlign:"left",tableFixed:"none",className:[],noShow:!1,defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"]},style:{width:"100%"},showField:"",relationField:"",isStorage:0},{__config__:{jnpfKey:"popupSelect",label:"弹窗选择",tipLabel:"",labelWidth:void 0,showLabel:!0,required:!1,tag:"JnpfPopupSelect",tagIcon:"icon-ym icon-ym-generator-popup",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change",transferList:[]},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},style:{width:"100%"},placeholder:"请选择",interfaceId:"",interfaceName:"",templateJson:[],hasPage:!1,pageSize:20,columnOptions:[],propsValue:"id",relationField:"fullName",popupType:"dialog",popupTitle:"选择数据",popupWidth:"800px",disabled:!1,clearable:!0,interfaceHasPage:0},{__config__:{jnpfKey:"popupAttr",label:"弹窗选择属性",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfPopupAttr",tagIcon:"icon-ym icon-ym-generator-popup-attr",tableAlign:"left",tableFixed:"none",className:[],noShow:!1,defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"]},style:{width:"100%"},showField:"",relationField:"",isStorage:0},{__config__:{jnpfKey:"billRule",label:"单据组件",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfInput",tagIcon:"icon-ym icon-ym-generator-documents",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,layout:"colFormItem",required:!1,span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,trigger:"change",rule:"",ruleName:""},style:{width:"100%"},readonly:!0,placeholder:"系统自动生成"},{__config__:{jnpfKey:"sign",label:"手写签名",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfSign",tagIcon:"icon-ym icon-ym-signature",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",defaultCurrent:!1,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},clearable:!0,disabled:!1},{__config__:{jnpfKey:"location",label:"定位",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfLocation",tagIcon:"icon-ym icon-ym-portal-mapChart",tableAlign:"left",tableFixed:"none",className:[],defaultValue:void 0,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1,regList:[],trigger:"change"},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},autoLocation:!1,adjustmentScope:500,enableLocationScope:!1,enableDesktopLocation:!1,locationScope:void 0,clearable:!0,disabled:!1},{__config__:{jnpfKey:"iframe",label:"Iframe",labelWidth:void 0,showLabel:!0,tag:"JnpfIframe",tagIcon:"icon-ym icon-ym-generator-iframe",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc"],noShow:!1},href:"",height:300,borderType:"solid",borderColor:"#E2E0E0",borderWidth:1}],s=[{__config__:{jnpfKey:"createUser",label:"创建人员",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfOpenData",tagIcon:"icon-ym icon-ym-generator-founder",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1},style:{width:"100%"},type:"currUser",readonly:!0,placeholder:""},{__config__:{jnpfKey:"createTime",label:"创建时间",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfOpenData",tagIcon:"icon-ym icon-ym-generator-createtime",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",layout:"colFormItem",required:!1,span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1},style:{width:"100%"},type:"currTime",readonly:!0,placeholder:""},{__config__:{jnpfKey:"modifyUser",label:"修改人员",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfInput",tagIcon:"icon-ym icon-ym-generator-modifier",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1},style:{width:"100%"},readonly:!0,placeholder:"系统自动生成"},{__config__:{jnpfKey:"modifyTime",label:"修改时间",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfInput",tagIcon:"icon-ym icon-ym-generator-modifytime",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1},style:{width:"100%"},readonly:!0,placeholder:"系统自动生成"},{__config__:{jnpfKey:"currOrganize",label:"所属组织",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfOpenData",tagIcon:"icon-ym icon-ym-generator-company",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1},style:{width:"100%"},type:"currOrganize",readonly:!0,showLevel:"last",placeholder:""},{__config__:{jnpfKey:"currPosition",label:"所属岗位",tipLabel:"",labelWidth:void 0,showLabel:!0,tag:"JnpfOpenData",tagIcon:"icon-ym icon-ym-generator-station",tableAlign:"left",tableFixed:"none",className:[],defaultValue:"",required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"],tableName:"",noShow:!1},style:{width:"100%"},type:"currPosition",readonly:!0,placeholder:""}],r=[{__config__:{jnpfKey:"groupTitle",label:"分组标题",labelWidth:void 0,showLabel:!1,tag:"JnpfGroupTitle",tagIcon:"icon-ym icon-ym-generator-group",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"]},content:"分组标题",helpMessage:"",contentPosition:"left"},{__config__:{jnpfKey:"divider",label:"分割线",tipLabel:"",labelWidth:void 0,showLabel:!1,tag:"JnpfDivider",tagIcon:"icon-ym icon-ym-generator-divider",tableAlign:"left",tableFixed:"none",className:[],defaultValue:null,required:!1,layout:"colFormItem",span:24,dragDisabled:!1,visibility:["pc","app"]},content:"我是分割线",contentPosition:"center"},{__config__:{jnpfKey:"collapse",label:"折叠面板",tipLabel:"",showLabel:!1,tag:"el-collapse",tagIcon:"icon-ym icon-ym-generator-fold",tableAlign:"left",tableFixed:"none",className:[],layout:"rowFormItem",span:"24",dragDisabled:!1,visibility:["pc","app"],children:[{title:"面板1",name:"1",__config__:{jnpfKey:"collapseItem",children:[]}},{title:"面板2",name:"2",__config__:{jnpfKey:"collapseItem",children:[]}}],active:["1"]},on:{change:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},accordion:!1},{__config__:{jnpfKey:"tab",label:"标签面板",tipLabel:"",showLabel:!1,tag:"el-tab",tagIcon:"icon-ym icon-ym-generator-label",tableAlign:"left",tableFixed:"none",className:[],layout:"rowFormItem",span:"24",dragDisabled:!1,visibility:["pc","app"],children:[{title:"Tab 1",name:"1",__config__:{jnpfKey:"tabItem",children:[]}},{title:"Tab 2",name:"2",__config__:{jnpfKey:"tabItem",children:[]}}],active:"1"},on:{tabClick:"({ data, rowIndex, formData, setFormData, setShowOrHide, setRequired, setDisabled, onlineUtils }) => {\n    // 在此编写代码\n    \n}"},type:"",tabPosition:"top"},{__config__:{jnpfKey:"row",label:"栅格容器",tipLabel:"",tagIcon:"icon-ym icon-ym-generator-layout",tableAlign:"left",tableFixed:"none",className:[],layout:"rowFormItem",span:"24",dragDisabled:!1,visibility:["pc","app"],layoutTree:!0,rowType:"layout"},type:"default",justify:"start",align:"top"},{__config__:{jnpfKey:"card",label:"卡片容器",tipLabel:"",showLabel:!1,tag:"el-card",tagIcon:"icon-ym icon-ym-generator-card",tableAlign:"left",tableFixed:"none",className:[],defaultValue:[],layout:"rowFormItem",span:"24",dragDisabled:!1,visibility:["pc","app"],children:[]},header:"卡片容器",shadow:"always"},{__config__:{jnpfKey:"tableGrid",label:"表格容器",showLabel:!1,tagIcon:"icon-ym icon-ym-generator-tableGrid",tableAlign:"left",tableFixed:"none",className:[],defaultValue:[],layout:"rowFormItem",span:"24",dragDisabled:!1,visibility:["pc","app"],borderType:"solid",borderColor:"#E2E0E0",borderWidth:1,rowType:"tableGrid",children:[{__config__:{jnpfKey:"tableGridTr",children:[{__config__:{jnpfKey:"tableGridTd",merged:!1,rowType:"tableGrid",colspan:1,rowspan:1,children:[],backgroundColor:""}}]}}]}}]},"97e0":function(e,t,a){},9803:function(e,t,a){},"9a1f":function(e,t,a){},"9ac5":function(e,t,a){"use strict";a("ed16")},"9d6b":function(e,t,a){},"9db1":function(e,t,a){"use strict";a("b28f")},"9dfe":function(e,t,a){"use strict";a("45b1")},"9f7a":function(e,t,a){},"9fbb":function(e,t,a){"use strict";a("f989")},a26d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"el-zoom-in-center"}},[a("div",{staticClass:"JNPF-common-layout menu-list",staticStyle:{position:"unset"}},[a("div",{staticClass:"JNPF-common-layout-center"},[a("div",{staticClass:"JNPF-preview-main flow-form-main"},[a("div",{staticClass:"JNPF-common-page-header"},[a("el-page-header",{attrs:{content:e.title},on:{back:e.goBack}}),a("div",{staticClass:"options"},[a("el-button",{on:{click:function(t){return e.goBack()}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)],1),[a("div",{staticClass:"app-container Profile-container"},[e.permissionsList.length?a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"profile-tabs",staticStyle:{height:"100%"},attrs:{"tab-position":"left"},on:{"tab-click":function(t){return e.handleTabClick(t)}},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},e._l(e.permissionsList,(function(t){return a("el-tab-pane",{key:t.id,attrs:{label:t.fullName,name:t.id}},[a("div",{staticClass:"authorize"},[a("el-tabs",{staticClass:"JNPF-el_tabs",on:{"tab-click":e.handleAuthorizeClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"应用权限",name:"system"}}),a("el-tab-pane",{attrs:{label:"菜单权限",name:"module"}}),a("el-tab-pane",{attrs:{label:"按钮权限",name:"button"}}),a("el-tab-pane",{attrs:{label:"列表权限",name:"column"}}),a("el-tab-pane",{attrs:{label:"表单权限",name:"form"}}),a("el-tab-pane",{attrs:{label:"数据权限",name:"resource"}}),a("el-tab-pane",{attrs:{label:"门户权限",name:"portalManage"}}),e.treeData.length?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"treeBox",refInFor:!0,staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1,"node-key":"id"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!0)}):a("div",{staticClass:"no-data"},[a("el-empty",{staticClass:"empty",attrs:{description:e.description}})],1)],1)],1)])})),1):a("div",{staticClass:"no-data"},[e.loading?e._e():a("el-empty",{staticClass:"empty",attrs:{description:e.description}})],1)],1)]],2)])])])},l=[],o=(a("7f7f"),a("ade3")),n=a("1bd4"),s={data:function(){return Object(o["a"])(Object(o["a"])({visible:!1,list:[],title:"",activeKey:"",loading:!1,objectType:"",id:"",type:1,description:"",permissionsList:[],treeData:[],info:[],activeTab:"system",defaultProps:{children:"children",label:"fullName"}},"activeKey",""),"treeLoading",!1)},methods:{goBack:function(){this.$emit("close")},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.visible=!0,this.list=[],this.title=e.fullName+"的权限",this.loading=!0,this.id=e.id||"",this.type=t||1,this.objectType=e.type||"",this.activeTab="system",this.getPermissionGroup()},getPermissionGroup:function(){var e=this,t={id:this.id,objectType:this.objectType};Object(n["i"])(t).then((function(t){if(e.description=0==t.data.type?"该菜单暂未分配权限！":"未分配权限",e.permissionsList=t.data.list,!e.permissionsList.length)return e.loading=!1;e.activeKey=e.permissionsList[0].id,e.getList()})).catch((function(){e.loading=!1}))},handleTabClick:function(e){this.activeKey=e.name||"",this.activeTab="system",this.getList()},handleAuthorizeClick:function(e){this.activeTab=e.name,this.getList()},getList:function(){var e=this;this.loading=!1,this.treeLoading=!0;var t={id:this.id,permissionId:this.activeKey,itemType:this.activeTab,objectType:this.objectType};Object(n["h"])(t).then((function(t){e.description=0==t.data.type?"该菜单暂未分配权限！":"未分配权限",e.treeData=t.data||[],e.treeLoading=!1}))}}},r=s,c=(a("a95e"),a("2877")),d=Object(c["a"])(r,i,l,!1,null,"e1110b00",null);t["a"]=d.exports},a430:function(e,t,a){},a521:function(e,t,a){},a63f:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"org-select",class:{"org-select__button":"button"===e.buttonType}},[a("div",{staticClass:"tags"},["button"===e.buttonType?a("el-button",{staticStyle:{"margin-bottom":"6px"},attrs:{icon:"el-icon-plus"},on:{click:function(t){e.show=!0}}},[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e(),a("div",{staticClass:"input-box",class:{"as-input":"input"===e.buttonType},on:{click:function(t){e.show=!0}}},e._l(e.selectedData,(function(t,i){return a("el-tag",e._b({key:t.key,staticClass:"org-tag",on:{close:function(a){return e.onClose(t,i)}}},"el-tag",e.tagConfig,!1),[e._v("\n        "+e._s(t.fullName)+"\n      ")])})),1)],1),a("org-transfer",{ref:"transfer",attrs:{value:e.innerValue,title:e.title,visible:e.show,type:e.type,dynamicList:e.dynamicList,dynamicParameter:e.dynamicParameter,inlet:e.inlet},on:{"update:visible":function(t){e.show=t},confirm:e.onConfirm}})],1)},l=[],o=a("c7eb"),n=(a("96cf"),a("1da1")),s=a("2909"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center transfer-dialog",attrs:{title:e.title,"close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"800px","modal-append-to-body":!1},on:{open:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),["user"===e.type?[a("userTransfer",{ref:"userTransfer",attrs:{multiple:""},model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}})]:"users"===e.type?["flow"===e.inlet?a("orgUsersSelect",{ref:"usersTransfer",attrs:{multiple:"",dynamicList:e.dynamicList,dynamicParameter:e.dynamicParameter},model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}):a("usersTransfer",{ref:"usersTransfer",attrs:{multiple:"",dynamicList:e.dynamicList,dynamicParameter:e.dynamicParameter},model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}})]:"role"===e.type?a("roleTransfer",{ref:"roleTransfer",attrs:{multiple:"",dynamicList:e.dynamicList},model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}):"organize"===e.type?a("orgTransfer",{ref:"orgTransfer",attrs:{treeData:e.treeData,multiple:"",dynamicList:e.dynamicList},model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}):"position"===e.type?a("positionTransfer",{ref:"positionTransfer",attrs:{treeData:e.treeData,multiple:"",dynamicList:e.dynamicList},model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}):a("JNPFTransfer",{ref:"JNPFTransfer",attrs:{loading:e.loading,treeData:e.treeData,type:e.type,multiple:"",dynamicList:e.dynamicList},model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeTransfer}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],2)},c=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"transfer__body",style:{height:e.height}},[a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("el-input",{attrs:{placeholder:"输入关键词进行搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),a("div",{staticClass:"transfer-pane__body"},["group"!==e.type?a("el-tabs",{staticClass:"transfer-pane__body-tab",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"部门",name:"department"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"treeBox",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.props,"default-expand-all":"","expand-on-click-node":!1,"node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,1575034392)})],1),a("el-tab-pane",{attrs:{label:"动态参数",name:"trends"}},[a("div",{staticClass:"trends"},e._l(e.dynamicList,(function(t,i){return a("p",{key:i,staticClass:"trends_list",on:{click:function(a){return e.handleNodeClick(t)}}},[e._v("\n              "+e._s(t.fullName))])})),0)])],1):a("div",[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"treeBox",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.props,"default-expand-all":"","expand-on-click-node":!1,"node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}])})],1)],1)]),a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("span",[e._v("已选")]),a("el-button",{staticClass:"removeAllBtn",attrs:{type:"text"},on:{click:e.removeAll}},[e._v("清空列表")])],1),a("div",{staticClass:"transfer-pane__body shadow right-pane"},[e._l(e.selectedTextData,(function(t,i){return a("div",{key:i,staticClass:"selected-item"},[a("span",[e._v(e._s(t.fullName))]),a("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.removeData(t,i)}}})])}))],2)])])},u=[],p={name:"JNPF-transfer",data:function(){return{selectedData:[],selectedTextData:[],filterText:"",activeName:"department"}},props:{height:{type:String,default:"400px"},loading:{type:Boolean,default:!1},dynamicList:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},treeData:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},props:{type:Object,default:function(){return{value:"id",label:"fullName",children:"children"}}},type:{type:String,default:""}},computed:{allList:function(){if(!this.type)return[];var e=this.$store.getters[this.type+"List"]||[];return[].concat(Object(s["a"])(e),Object(s["a"])(this.dynamicList))}},watch:{value:function(e){this.initHandle()}},methods:{initHandle:function(){if(!this.value||!this.value.length)return this.selectedTextData=[],void(this.selectedData=[]);for(var e=this.multiple?this.value:[this.value],t=[],a=0;a<e.length;a++){var i=e[a];e:for(var l=0;l<this.allList.length;l++)if(i===this.allList[l].id){t.push(this.allList[l]);break e}}this.selectedTextData=t,this.selectedData=this.selectedTextData.map((function(e){return e.id}))},search:function(){this.$refs.treeBox.filter(this.filterText)},filterNode:function(e,t){return!e||-1!==t.fullName.indexOf(e)},handleNodeClick:function(e){if("department"!==this.activeName||e.type===this.type){var t=this.selectedTextData.some((function(t){return t.id===e.id}));t||(this.multiple?this.selectedTextData.push(e):this.selectedTextData=[e],this.selectedData=this.selectedTextData.map((function(e){return e.id})),this.$emit("input",this.selectedData),this.$emit("getValue",this.selectedData,this.selectedTextData))}},removeData:function(e,t){this.selectedData.splice(t,1),this.selectedTextData.splice(t,1),this.$emit("input",this.selectedData),this.$emit("getValue",this.selectedData,this.selectedTextData)},removeAll:function(){this.selectedData=[],this.selectedTextData=[],this.$emit("input",this.selectedData),this.$emit("getValue",this.selectedData,this.selectedTextData)}}},f=p,m=(a("dc73"),a("2877")),_=Object(m["a"])(f,d,u,!1,null,"050155aa",null),h=_.exports,v=a("63d4"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.allLoading,expression:"allLoading"}],staticClass:"transfer__body",style:{height:e.height}},[a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("el-input",{attrs:{placeholder:"输入关键词进行搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.pagination.keyword,callback:function(t){e.$set(e.pagination,"keyword",t)},expression:"pagination.keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),a("div",{staticClass:"transfer-pane__body left-pane"},[a("el-tabs",{staticClass:"transfer-pane__body-tab hasSys-tab",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"部门",name:"department"}},[this.isAsync?e._e():a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.props,"check-on-click-node":"","expand-on-click-node":!1,"node-key":"id",lazy:"",load:e.loadNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.label}},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,372226650)}),this.isAsync?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading&&1==e.pagination.currentPage,expression:"loading && pagination.currentPage==1"}],ref:"infiniteBody",staticClass:"single-list"},[e.treeData.length?e._l(e.treeData,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user",on:{click:function(a){return e.handleNodeClick(t)}}},[a("div",{staticClass:"selected-item-main"},[a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])])],1)])})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2):e._e()],1),e.multiple?a("el-tab-pane",{attrs:{label:"角色",name:"role"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.roleLoading,expression:"roleLoading"}],ref:"roleTree",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData2,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.label}},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,372226650)})],1):e._e(),e.multiple?a("el-tab-pane",{attrs:{label:"岗位",name:"position"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.positionLoading,expression:"positionLoading"}],ref:"positionTree",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData3,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.label}},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,372226650)})],1):e._e(),e.multiple?a("el-tab-pane",{attrs:{label:"分组",name:"group"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.groupLoading,expression:"groupLoading"}],ref:"groupTree",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData4,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.label}},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,372226650)})],1):e._e(),e.dynamicParameter?a("el-tab-pane",{attrs:{label:"动态参数",name:"system"}},[a("div",{staticClass:"trends"},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.positionLoading,expression:"positionLoading"}],ref:"system",staticClass:"JNPF-common-el-tree",attrs:{data:e.dynamicList,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,1575034392)})],1)]):e._e()],1)],1)]),a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("span",[e._v("已选")]),a("el-button",{staticClass:"removeAllBtn",attrs:{type:"text"},on:{click:e.removeAll}},[e._v("清空列表")])],1),a("div",{staticClass:"transfer-pane__body shadow right-pane"},[e.selectedData.length?e._l(e.selectedData,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user"},[a("div",{staticClass:"selected-item-main"},["user"===t.type?a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}):a("div",{staticClass:"selected-item-headIcon icon"},[a("i",{class:t.icon})]),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])]),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.removeData(i)}}})],1)])})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)])])},g=[],y=a("5530"),D=(a("6762"),a("2fdb"),a("b3f4")),w=a("4709"),x=a("db93"),C=a("072a"),k={name:"JNPF-userTransfer",data:function(){return{allLoading:!1,loading:!1,roleLoading:!0,positionLoading:!0,groupLoading:!0,activeName:"",treeData:[],treeData2:[],treeData3:[],treeData4:[],selectedData:[],props:{children:"children",label:"fullName",isLeaf:"isLeaf"},nodeId:"0",ids:[],total:0,isAsync:!1,finish:!1,pagination:{keyword:"",currentPage:1,pageSize:20}}},props:{height:{type:String,default:"400px"},dynamicList:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},dynamicParameter:{type:Boolean,default:!1}},watch:{activeName:function(e){this.pagination.keyword="",this.isAsync=!1,e&&(this.nodeId="0",this.treeData=[],this.getData())}},methods:{init:function(){var e=this;this.getOtherData(),this.selectedData=[],this.ids=[],this.pagination.keyword="",this.activeName="",this.nodeId="0",this.isAsync=!1,this.finish=!1,this.$nextTick((function(){e.activeName="department",e.getSelectList()}))},bindScroll:function(){var e=this,t=e.$refs.infiniteBody;t.addEventListener("scroll",(function(){t.scrollHeight-t.clientHeight-t.scrollTop<=200&&!e.loading&&!e.finish&&(e.pagination.currentPage+=1,e.getList())}))},getData:function(){"department"===this.activeName?this.getList():["role","position","group"].includes(this.activeName)?this.$refs[this.activeName+"Tree"]&&this.$refs[this.activeName+"Tree"].filter(this.pagination.keyword):this.loading=!1},getSelectList:function(){var e=this;if(this.allLoading=!0,!this.value.length)return this.allLoading=!1;Object(D["m"])(this.value).then((function(t){e.selectedData=t.data.list.map((function(e){return Object(y["a"])(Object(y["a"])({},e),{},{id:e.type?e.id+"--"+e.type:e.id,icon:"system"===e.type?"icon-ym icon-ym-tree-user2":e.icon,organize:"system"===e.type?"动态参数":e.organize})})),e.ids=e.selectedData.map((function(e){return e.id})),e.allLoading=!1}))},getOtherData:function(){var e=this;this.roleLoading=!0,this.positionLoading=!0,this.groupLoading=!0,Object(x["g"])().then((function(t){e.treeData2=t.data.list,e.roleLoading=!1})),Object(w["h"])().then((function(t){e.treeData3=t.data.list,e.positionLoading=!1})),Object(C["f"])().then((function(t){e.treeData4=t.data,e.groupLoading=!1}))},search:function(){var e=this;this.nodeId="0",this.treeData=[],this.pagination.currentPage=1,this.isAsync=!!this.pagination.keyword,this.finish=!1,this.isAsync&&"department"===this.activeName&&this.$nextTick((function(){e.bindScroll()})),this.getData()},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)},getList:function(){var e=this;this.loading=!0,this.pagination.keyword&&(this.nodeId="0"),Object(D["j"])(this.nodeId,this.pagination).then((function(t){e.pagination.keyword?(t.data.list.length<e.pagination.pageSize&&(e.finish=!0),e.treeData=[].concat(Object(s["a"])(e.treeData),Object(s["a"])(t.data.list)),e.total=t.data.pagination.total):e.treeData=t.data.list,e.loading=!1}))},loadNode:function(e,t){if(0===e.level)return this.nodeId="0",t(this.treeData);this.nodeId=e.data.id,Object(D["j"])(this.nodeId).then((function(e){t(e.data.list)}))},handleNodeClick:function(e){var t=this.multiple?["company","department","role","position","group","user","system"]:["user"];if(t.includes(e.type)){var a=this.selectedData.some((function(t){return t.id===e.id+"--"+e.type})),i=JSON.parse(JSON.stringify(e));i.id+="--"+i.type,a||(this.multiple?this.selectedData.push(i):this.selectedData=[i],this.multiple?this.ids.push(i.id):this.ids=[i.id],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData))}},removeAll:function(){this.selectedData=[],this.ids=[],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)},removeData:function(e){this.selectedData.splice(e,1),this.ids.splice(e,1),this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)}}},T=k,F=(a("f8ad3"),Object(m["a"])(T,b,g,!1,null,"4b9a3384",null)),S=F.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.allLoading,expression:"allLoading"}],staticClass:"transfer__body",style:{height:e.height}},[a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("el-input",{attrs:{placeholder:"输入关键词进行搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),a("div",{staticClass:"transfer-pane__body"},[a("el-tabs",{staticClass:"transfer-pane__body-tab",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"组织角色",name:"organize"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree2",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData2,props:e.props,"default-expand-all":"","filter-node-method":e.filterNode,"expand-on-click-node":!1,"check-on-click-node":"","node-key":"onlyId"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}])})],1),a("el-tab-pane",{attrs:{label:"全局角色",name:"all"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree1",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.props,"default-expand-all":"","filter-node-method":e.filterNode,"expand-on-click-node":!1,"check-on-click-node":"","node-key":"onlyId"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}])})],1),a("el-tab-pane",{attrs:{label:"动态参数",name:"system"}},[a("div",{staticClass:"trends"},[a("el-tree",{ref:"system",staticClass:"JNPF-common-el-tree",attrs:{data:e.dynamicList,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}])})],1)])],1)],1)]),a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("span",[e._v("已选")]),a("el-button",{staticClass:"removeAllBtn",attrs:{type:"text"},on:{click:e.removeAll}},[e._v("清空列表")])],1),a("div",{staticClass:"transfer-pane__body shadow right-pane"},[e._l(e.selectedData,(function(t,i){return a("div",{key:i,staticClass:"selected-item"},[a("span",[e._v(e._s(t.fullName))]),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.removeData(i)}}})])}))],2)])])},L=[],O=(a("386d"),{name:"JNPF-roleTransfer",data:function(){return{allLoading:!1,loading:!1,activeName:"",treeData:[],treeData2:[],selectedData:[],allList:[],props:{children:"children",label:"fullName"},keyword:"",ids:[],dynamicDataList:[]}},props:{height:{type:String,default:"400px"},dynamicList:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},auth:{type:Boolean,default:!1}},watch:{activeName:function(e){this.keyword="",this.search()}},methods:{init:function(){this.selectedData=[],this.ids=[],this.keyword="",this.activeName="organize",this.dynamicDataList=this.dynamicList.map((function(e){return Object(y["a"])({type:"role"},e)})),this.getList()},getSelectList:function(){if(this.allLoading=!0,!this.value.length)return this.allLoading=!1;for(var e=[],t=0;t<this.value.length;t++)e:for(var a=0;a<this.allList.length;a++)if(this.value[t]===this.allList[a].id){e.push(this.allList[a]);break e}this.selectedData=e,this.ids=this.selectedData.map((function(e){return e.id})),this.allLoading=!1},search:function(){var e="organize"===this.activeName?"tree2":"tree1";this.$refs[e].filter(this.keyword)},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)},getList:function(){var e=this;this.loading=!0,this.auth?Object(x["h"])().then((function(t){var a=t.data.list;e.treeData=a.filter((function(e){return"1"===e.id})),e.treeData2=a.filter((function(e){return"1"!==e.id})),e.$store.dispatch("base/getRoleList").then((function(t){e.allList=[].concat(Object(s["a"])(t),Object(s["a"])(e.dynamicDataList)),e.getSelectList(),e.loading=!1}))})):this.$store.dispatch("base/getRoleTree").then((function(t){e.treeData=t.filter((function(e){return"1"===e.id})),e.treeData2=t.filter((function(e){return"1"!==e.id})),e.$store.dispatch("base/getRoleList").then((function(t){e.allList=[].concat(Object(s["a"])(t),Object(s["a"])(e.dynamicDataList)),e.getSelectList(),e.loading=!1}))}))},handleNodeClick:function(e){if("system"===e.type||"role"===e.type){var t=this.selectedData.some((function(t){return t.id===e.id}));if(t)return;var a={id:e.id,fullName:e.fullName};this.multiple?this.selectedData.push(a):this.selectedData=[a],this.multiple?this.ids.push(a.id):this.ids=[a.id],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)}},removeAll:function(){this.selectedData=[],this.ids=[],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)},removeData:function(e){this.selectedData.splice(e,1),this.ids.splice(e,1),this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)}}}),$=O,I=(a("8d2f"),Object(m["a"])($,N,L,!1,null,"2642c505",null)),j=I.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.allLoading,expression:"allLoading"}],staticClass:"transfer__body",style:{height:e.height}},[a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("el-input",{attrs:{placeholder:"输入关键词进行搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.pagination.keyword,callback:function(t){e.$set(e.pagination,"keyword",t)},expression:"pagination.keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),a("div",{staticClass:"transfer-pane__body left-pane"},[a("el-tabs",{staticClass:"transfer-pane__body-tab hasSys-tab",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"部门",name:"department"}},[this.isAsync?e._e():a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.props,"check-on-click-node":"","expand-on-click-node":!1,"node-key":"id",lazy:"",load:e.loadNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,1575034392)}),this.isAsync?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading&&1==e.pagination.currentPage,expression:"loading && pagination.currentPage==1"}],ref:"infiniteBody",staticClass:"single-list"},[e.treeData.length?e._l(e.treeData,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user",on:{click:function(a){return e.handleNodeClick(t)}}},[a("div",{staticClass:"selected-item-main"},[a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])])],1)])})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2):e._e()],1),e.multiple?a("el-tab-pane",{attrs:{label:"角色",name:"role"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.roleLoading,expression:"roleLoading"}],ref:"roleTree",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData2,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,1575034392)})],1):e._e(),e.multiple?a("el-tab-pane",{attrs:{label:"岗位",name:"position"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.positionLoading,expression:"positionLoading"}],ref:"positionTree",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData3,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,1575034392)})],1):e._e(),e.multiple?a("el-tab-pane",{attrs:{label:"分组",name:"group"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.groupLoading,expression:"groupLoading"}],ref:"groupTree",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData4,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,1575034392)})],1):e._e()],1)],1)]),a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("span",[e._v("已选")]),a("el-button",{staticClass:"removeAllBtn",attrs:{type:"text"},on:{click:e.removeAll}},[e._v("清空列表")])],1),a("div",{staticClass:"transfer-pane__body shadow right-pane"},[e.selectedList.length?e._l(e.selectedList,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user-multiple"},[t.children.length?[a("p",{staticClass:"selected-item-title"},[a("i",{class:t.icon}),a("span",[e._v(e._s(t.fullName))])]),e._l(t.children,(function(t,i){return a("div",{key:i,staticClass:"selected-item-main"},["user"===t.type?a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}):a("div",{staticClass:"selected-item-icon"},[e._v(e._s(t.fullName.substring(0,1)))]),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])]),a("i",{staticClass:"el-icon-delete delete",on:{click:function(a){return e.removeMulData(t.id)}}})],1)}))]:e._e()],2)})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)])])},V=[],A=(a("20d6"),[{id:"department",type:"department",fullName:"部门",icon:"icon-ym icon-ym-tree-department1",children:[]},{id:"position",type:"position",fullName:"岗位",icon:"icon-ym icon-ym-tree-position1",children:[]},{id:"user",type:"user",fullName:"用户",icon:"icon-ym icon-ym-tree-user2",children:[]},{id:"group",type:"group",fullName:"分组",icon:"icon-ym icon-ym-generator-group1",children:[]},{id:"role",type:"role",fullName:"角色",icon:"icon-ym icon-ym-generator-role",children:[]}]),P={name:"JNPF-userTransfer",data:function(){return{allLoading:!1,loading:!1,roleLoading:!0,positionLoading:!0,groupLoading:!0,activeName:"",treeData:[],treeData2:[],treeData3:[],treeData4:[],selectedData:[],props:{children:"children",label:"fullName",isLeaf:"isLeaf"},nodeId:"0",ids:[],total:0,isAsync:!1,finish:!1,pagination:{keyword:"",currentPage:1,pageSize:20},selectedList:A}},props:{height:{type:String,default:"400px"},dynamicList:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1}},watch:{activeName:function(e){this.pagination.keyword="",this.isAsync=!1,e&&(this.nodeId="0",this.treeData=[],this.getData())},selectedData:function(e){var t=this;if(this.multiple){this.selectedList=JSON.parse(JSON.stringify(A));for(var a=function(){var e=t.selectedData[i],a="company"==e.type?"department":e.type;t.selectedList.map((function(t){if(t.type==a){var i={fullName:e.fullName,type:a,headIcon:e.headIcon,organize:e.organize,id:e.id};t.children.push(i)}}))},i=0;i<this.selectedData.length;i++)a()}}},methods:{init:function(){var e=this;this.getOtherData(),this.selectedData=[],this.ids=[],this.pagination.keyword="",this.activeName="",this.nodeId="0",this.isAsync=!1,this.finish=!1,this.$nextTick((function(){e.activeName="department",e.getSelectList()}))},bindScroll:function(){var e=this,t=e.$refs.infiniteBody;t.addEventListener("scroll",(function(){t.scrollHeight-t.clientHeight-t.scrollTop<=200&&!e.loading&&!e.finish&&(e.pagination.currentPage+=1,e.getList())}))},getData:function(){"department"===this.activeName?this.getList():["role","position","group"].includes(this.activeName)?this.$refs[this.activeName+"Tree"]&&this.$refs[this.activeName+"Tree"].filter(this.pagination.keyword):this.loading=!1},getSelectList:function(){var e=this;if(this.allLoading=!0,!this.value.length)return this.allLoading=!1;Object(D["m"])(this.value).then((function(t){e.selectedData=t.data.list.map((function(e){return Object(y["a"])(Object(y["a"])({},e),{},{id:e.type?e.id+"--"+e.type:e.id,icon:"system"===e.type?"icon-ym icon-ym-tree-user2":e.icon,organize:e.organize})})),e.ids=e.selectedData.map((function(e){return e.id})),e.allLoading=!1}))},getOtherData:function(){var e=this;this.roleLoading=!0,this.positionLoading=!0,this.groupLoading=!0,Object(x["g"])().then((function(t){e.treeData2=t.data.list,e.roleLoading=!1})),Object(w["h"])().then((function(t){e.treeData3=t.data.list,e.positionLoading=!1})),Object(C["f"])().then((function(t){e.treeData4=t.data,e.groupLoading=!1}))},search:function(){var e=this;this.nodeId="0",this.treeData=[],this.pagination.currentPage=1,this.isAsync=!!this.pagination.keyword,this.finish=!1,this.isAsync&&"department"===this.activeName&&this.$nextTick((function(){e.bindScroll()})),this.getData()},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)},getList:function(){var e=this;this.loading=!0,this.pagination.keyword&&(this.nodeId="0"),Object(D["j"])(this.nodeId,this.pagination).then((function(t){e.pagination.keyword?(t.data.list.length<e.pagination.pageSize&&(e.finish=!0),e.treeData=[].concat(Object(s["a"])(e.treeData),Object(s["a"])(t.data.list)),e.total=t.data.pagination.total):e.treeData=t.data.list,e.loading=!1}))},loadNode:function(e,t){if(0===e.level)return this.nodeId="0",t(this.treeData);this.nodeId=e.data.id,Object(D["j"])(this.nodeId).then((function(e){t(e.data.list)}))},handleNodeClick:function(e){var t=this.multiple?["company","department","role","position","group","user","system"]:["user"];if(t.includes(e.type)){var a=this.selectedData.some((function(t){return t.id===e.id+"--"+e.type})),i=JSON.parse(JSON.stringify(e));i.id+="--"+i.type,a||(this.multiple?this.selectedData.push(i):this.selectedData=[i],this.multiple?this.ids.push(i.id):this.ids=[i.id],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData))}},removeAll:function(){this.selectedData=[],this.ids=[],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)},removeMulData:function(e){var t=this.selectedData.findIndex((function(t){return t.id==e}));-1!=t&&this.selectedData.splice(t,1),this.ids=this.selectedData.map((function(e){return e.id})),this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)}}},J=P,R=(a("4ff8"),Object(m["a"])(J,M,V,!1,null,"8e1df60a",null)),K=R.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"transfer__body",style:{height:e.height}},[a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("el-input",{attrs:{placeholder:"输入关键词进行搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),a("div",{staticClass:"transfer-pane__body"},[a("el-tabs",{staticClass:"transfer-pane__body-tab",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"组织",name:"organize"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"treeBox",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.props,"default-expand-all":"","expand-on-click-node":!1,"node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}])})],1),a("el-tab-pane",{attrs:{label:"动态参数",name:"trends"}},[a("div",{staticClass:"trends"},e._l(e.dynamicList,(function(t,i){return a("p",{key:i,staticClass:"trends_list",on:{click:function(a){return e.handleNodeClick(t)}}},[e._v("\n              "+e._s(t.fullName))])})),0)])],1)],1)]),a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("span",[e._v("已选")]),a("el-button",{staticClass:"removeAllBtn",attrs:{type:"text"},on:{click:e.removeAll}},[e._v("清空列表")])],1),a("div",{staticClass:"transfer-pane__body shadow right-pane"},[e._l(e.selectedTextData,(function(t,i){return a("div",{key:i,staticClass:"selected-item"},[a("span",[e._v(e._s(t))]),a("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.removeData(t,i)}}})])}))],2)])])},E=[],z={name:"JNPF-transfer",data:function(){return{selectedData:[],selectedTextData:[],filterText:"",activeName:"organize"}},props:{height:{type:String,default:"400px"},dynamicList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},treeData:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},props:{type:Object,default:function(){return{value:"id",label:"fullName",children:"children"}}},type:{type:String,default:""}},computed:{allList:function(){return this.$store.getters.departmentList||[]}},watch:{value:function(e){this.initHandle()}},methods:{initHandle:function(){if(!this.value||!this.value.length)return this.selectedTextData=[],void(this.selectedData=[]);var e=[].concat(Object(s["a"])(this.dynamicList),Object(s["a"])(this.allList)),t=this.value;this.selectedData=JSON.parse(JSON.stringify(t));for(var a=[],i=0;i<t.length;i++){for(var l=t[i],o=JSON.parse(JSON.stringify(l)),n=0;n<l.length;n++)e:for(var r=0;r<e.length;r++)if(l[n]===e[r].id){o[n]=e[r].fullName;break e}a.push(o)}this.selectedTextData=a.map((function(e){return e.join("/")}))},search:function(){this.$refs.treeBox.filter(this.filterText)},filterNode:function(e,t){return!e||-1!==t.fullName.indexOf(e)},handleNodeClick:function(e){var t=e.organizeIds,a=e.organize,i=this.selectedData.some((function(e){return e.join("/")===t.join("/")}));i||(this.selectedData.push(t),this.selectedTextData.push(a),this.$emit("input",this.selectedData),this.$emit("getValue",this.selectedData,this.selectedTextData))},removeData:function(e,t){this.selectedData.splice(t,1),this.selectedTextData.splice(t,1),this.$emit("input",this.selectedData),this.$emit("getValue",this.selectedData,this.selectedTextData)},removeAll:function(){this.selectedData=[],this.selectedTextData=[],this.$emit("input",this.selectedData),this.$emit("getValue",this.selectedData,this.selectedTextData)}}},q=z,W=(a("a663"),Object(m["a"])(q,B,E,!1,null,"25919579",null)),U=W.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.allLoading,expression:"allLoading"}],staticClass:"transfer__body",style:{height:e.height}},[a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("el-input",{attrs:{placeholder:"输入关键词进行搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),a("div",{staticClass:"transfer-pane__body left-pane"},[a("el-tabs",{staticClass:"transfer-pane__body-tab hasSys-tab",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"岗位",name:"position"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.positionLoading,expression:"positionLoading"}],ref:"position",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}])})],1),a("el-tab-pane",{attrs:{label:"动态参数",name:"system"}},[a("div",{staticClass:"trends"},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.positionLoading,expression:"positionLoading"}],ref:"system",staticClass:"JNPF-common-el-tree",attrs:{data:e.dynamicList,props:e.props,"expand-on-click-node":!1,"default-expand-all":"","check-on-click-node":"","node-key":"id","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{class:l.icon}),a("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}])})],1)])],1)],1)]),a("div",{staticClass:"transfer-pane"},[a("div",{staticClass:"transfer-pane__tools"},[a("span",[e._v("已选")]),a("el-button",{staticClass:"removeAllBtn",attrs:{type:"text"},on:{click:e.removeAll}},[e._v("清空列表")])],1),a("div",{staticClass:"transfer-pane__body shadow right-pane"},[e.selectedData.length?e._l(e.selectedData,(function(t,i){return a("div",{key:i,staticClass:"selected-item-user"},[a("div",{staticClass:"selected-item-main"},["user"===t.type?a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}):a("div",{staticClass:"selected-item-headIcon icon"},[a("i",{class:t.icon})]),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])]),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.removeData(i)}}})],1)])})):a("el-empty",{attrs:{description:"暂无数据","image-size":120}})],2)])])},G=[],Q={name:"JNPF-userTransfer",data:function(){return{allLoading:!1,loading:!1,positionLoading:!1,activeName:"position",selectedData:[],props:{children:"children",label:"fullName",isLeaf:"isLeaf"},ids:[],keyword:""}},props:{height:{type:String,default:"400px"},dynamicList:{type:Array,default:function(){return[]}},treeData:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},type:{type:String,default:""}},methods:{init:function(e){var t=this;this.allLoading=!0,Object(D["m"])(e).then((function(e){t.selectedData=e.data.list.map((function(e){return Object(y["a"])(Object(y["a"])({},e),{},{id:e.type?e.id+"--"+e.type:e.id,icon:"system"===e.type?"icon-ym icon-ym-tree-user2":e.icon,organize:"system"===e.type?"动态参数":e.organize})})),t.ids=t.selectedData.map((function(e){return e.id})),t.allLoading=!1}))},search:function(){this.$refs[this.activeName].filter(this.keyword)},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)},handleNodeClick:function(e){var t=this.selectedData.some((function(t){return t.id===e.id+"--"+e.type})),a=JSON.parse(JSON.stringify(e));a.id+="--"+a.type,t||(this.selectedData.push(a),this.ids.push(a.id),this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData))},removeAll:function(){this.selectedData=[],this.ids=[],this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)},removeData:function(e){this.selectedData.splice(e,1),this.ids.splice(e,1),this.$emit("input",this.ids),this.$emit("getValue",this.ids,this.selectedData)}}},Y=Q,Z=(a("cc69"),Object(m["a"])(Y,H,G,!1,null,"6052befc",null)),X=Z.exports,ee={name:"org-transfer",components:{JNPFTransfer:h,usersTransfer:S,roleTransfer:j,orgTransfer:U,positionTransfer:X,orgUsersSelect:K,userTransfer:v["a"]},props:{value:{type:Array,default:function(){return[]}},dynamicList:{type:Array,default:function(){return[]}},type:{type:String,default:"user"},inlet:{type:String,default:""},title:{type:String,default:"组织机构"},dynamicParameter:{type:Boolean,default:!1}},data:function(){return{loading:!1,treeData:[],selectedData:[]}},methods:{onOpen:function(){this.dataInit()},closeTransfer:function(){this.$emit("update:visible",!1)},confirm:function(){this.$emit("confirm",this.selectedData),this.closeTransfer()},dataInit:function(){var e=this;this.loading=!0,this.selectedData=[],this.treeData=[],this.$nextTick(Object(n["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("user"!==e.type){t.next=5;break}e.selectedData=JSON.parse(JSON.stringify(e.value)),e.$nextTick((function(){e.$refs.userTransfer&&e.$refs.userTransfer.init()})),t.next=32;break;case 5:if("users"!==e.type){t.next=10;break}e.selectedData=JSON.parse(JSON.stringify(e.value)),e.$nextTick((function(){e.$refs.usersTransfer&&e.$refs.usersTransfer.init()})),t.next=32;break;case 10:if("role"!==e.type){t.next=15;break}e.selectedData=JSON.parse(JSON.stringify(e.value)),e.$nextTick((function(){e.$refs.roleTransfer&&e.$refs.roleTransfer.init()})),t.next=32;break;case 15:if(a=[],"department"!==e.type&&"organize"!==e.type){t.next=20;break}return t.next=19,e.$store.dispatch("generator/getDepTree");case 19:a=t.sent;case 20:if("group"!==e.type){t.next=24;break}return t.next=23,e.$store.dispatch("generator/getGroupTree");case 23:a=t.sent;case 24:if("position"!==e.type){t.next=29;break}return t.next=27,e.$store.dispatch("base/getPositionTree");case 27:a=t.sent,e.$nextTick((function(){e.$refs.positionTransfer&&e.$refs.positionTransfer.init(e.selectedData)}));case 29:e.$refs.JNPFTransfer&&(e.$refs.JNPFTransfer.filterText=""),e.treeData=a,e.selectedData=e.value;case 32:e.loading=!1;case 33:case"end":return t.stop()}}),t)}))))}}},te=ee,ae=Object(m["a"])(te,r,c,!1,null,null,null),ie=ae.exports,le={model:{prop:"value",event:"change"},components:{OrgTransfer:ie},name:"org-select",props:{value:{type:Array,default:function(){return[]},required:!0},title:{type:String,default:"组织机构"},inlet:{type:String,default:""},type:{type:String,default:"user"},buttonType:{type:String,default:"button"},tagConfig:{type:Object,default:function(){return{type:"info",closable:!0,"disable-transitions":!1,hit:!1,color:void 0,size:"small",effect:"light"}}},dynamicParameter:{type:Boolean,default:!1}},data:function(){return{show:!1,innerValue:null,selectedData:[],dynamicList:[{fullName:"当前组织",organize:"动态参数",organizeIds:["@currentOrg"],id:"@currentOrg",type:"system",icon:"icon-ym icon-ym-tree-user2"},{fullName:"当前组织及子组织",organize:"动态参数",organizeIds:["@currentOrgAndSubOrg"],id:"@currentOrgAndSubOrg",type:"system",icon:"icon-ym icon-ym-tree-user2"},{fullName:"当前分管组织",organize:"动态参数",organizeIds:["@currentGradeOrg"],id:"@currentGradeOrg",type:"system",icon:"icon-ym icon-ym-tree-user2"}]}},watch:{value:{handler:function(e){e&&this.reloadCmpData()},immediate:!0,deep:!0}},computed:{selectedLabels:function(){return this.selectedData.map((function(e){return e.fullName})).join(",")},allList:function(){var e=[];if("user"!==this.type&&"users"!==this.type){var t="organize"===this.type||"department"===this.type?"department":this.type;e=this.$store.getters[t+"List"]}return[].concat(Object(s["a"])(e),Object(s["a"])(this.dynamicList))}},methods:{reloadCmpData:function(){var e=this;this.innerValue=this.value,this.$nextTick((function(t){e.initSelectedData()}))},getText:function(e){var t="";if("user"!==this.type&&"users"!==this.type)if("organize"===this.type&&Array.isArray(e))for(var a=0;a<e.length;a++){var i=e[a];e:for(var l=0;l<this.allList.length;l++)if(i===this.allList[l].id){t="system"===this.allList[l].type?this.allList[l].fullName:this.allList[l].organize;break e}}else{var o=this.allList.filter((function(t){return t.id===e}));if(!o.length)return"";t=o[0].fullName||""}return t},initSelectedData:function(){var e=Object(n["a"])(Object(o["a"])().mark((function e(){var t=this;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("user"!==this.type){e.next=6;break}if(this.innerValue.length){e.next=3;break}return e.abrupt("return",this.selectedData=[]);case 3:Object(D["q"])(this.innerValue).then((function(e){t.selectedData=e.data.list})),e.next=14;break;case 6:if("users"!==this.type){e.next=12;break}if(this.innerValue.length){e.next=9;break}return e.abrupt("return",this.selectedData=[]);case 9:Object(D["m"])(this.innerValue).then((function(e){t.selectedData=e.data.list})),e.next=14;break;case 12:"position"===this.type&&Object(D["m"])(this.innerValue).then((function(e){t.selectedData=e.data.list})),this.selectedData=this.innerValue.map((function(e){return{id:e,fullName:t.getText(e)}}));case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onClose:function(e,t){this.innerValue.splice(t,1),this.selectedData.splice(t,1),this.$emit("change",this.innerValue)},onConfirm:function(e){this.innerValue=e,this.$emit("change",this.innerValue)}}},oe=le,ne=(a("b7b8"),Object(m["a"])(oe,i,l,!1,null,"bbbdfc14",null));t["a"]=ne.exports},a663:function(e,t,a){"use strict";a("a6d0")},a6d0:function(e,t,a){},a7b7:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center icon-dialog",attrs:{title:"图标选择","close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"950px","modal-append-to-body":!1},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("div",{staticClass:"icon-dialog-title",attrs:{slot:"title"},slot:"title"},[e._v("\n    图标选择\n    "),a("el-input",{attrs:{placeholder:"请输入图标名称","prefix-icon":"el-icon-search",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("el-tabs",{staticClass:"JNPF-el_tabs",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"ymIcon 图标"}},[a("div",{staticClass:"icon-box-list"},e._l(e.ymIconsList,(function(t,i){return a("el-button",{key:i,class:{"is-active":e.generateYmIconCode(t)===e.active},on:{click:function(a){e.iconActiveHandle(e.generateYmIconCode(t))}}},[a("i",{class:e.generateYmIconCode(t)})])})),1)]),a("el-tab-pane",{attrs:{label:"Element-UI 图标"}},[a("div",{staticClass:"icon-box-list"},e._l(e.elementIconsList,(function(t,i){return a("el-button",{key:i,class:{"is-active":t===e.active},on:{click:function(a){return e.iconActiveHandle(t)}}},[a("i",{class:t})])})),1)]),a("el-tab-pane",{attrs:{label:"ymCustom 图标"}},[a("div",{staticClass:"icon-box-list"},e._l(e.ymCustomList,(function(t,i){return a("el-button",{key:i,class:{"is-active":e.generateYmCustomCode(t)===e.active},on:{click:function(a){e.iconActiveHandle(e.generateYmCustomCode(t))}}},[a("i",{class:e.generateYmCustomCode(t)})])})),1)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.choiceIcon()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)},l=[],o=(a("386d"),a("9ba3")),n=a("5f57"),s=a("49ab"),r=n.glyphs.map((function(e){return"icon-ym-".concat(e.font_class)})),c=s.glyphs.map((function(e){return"ym-custom-".concat(e.font_class)})),d=o.map((function(e){return"el-icon-".concat(e)})),u={props:["current"],data:function(){return{elementIcons:d,ymIcons:r,ymCustom:c,active:null,keyword:"",ymIconsList:[],ymCustomList:[],elementIconsList:[],activeName:""}},watch:{keyword:function(e){this.search()},activeName:function(e){this.keyword?this.keyword="":this.search()}},methods:{search:function(){var e=this,t="";"0"==this.activeName?t="ymIcons":"1"==this.activeName?t="elementIcons":"2"==this.activeName&&(t="ymCustom"),this.keyword?this[t+"List"]=this[t].filter((function(t){return t.indexOf(e.keyword)>-1})):this[t+"List"]=this[t]},onOpen:function(){this.active=this.current,this.keyword=""},onClose:function(){},closeDialog:function(){this.$emit("update:visible",!1)},choiceIcon:function(){this.active&&(this.$emit("choiceIcon",this.active),this.$emit("update:visible",!1))},generateYmIconCode:function(e){return"icon-ym ".concat(e)},generateYmCustomCode:function(e){return"ym-custom ".concat(e)},iconActiveHandle:function(e){this.active=e}}},p=u,f=(a("c489"),a("2877")),m=Object(f["a"])(p,i,l,!1,null,"0e23fcef",null);t["a"]=m.exports},a935:function(e,t,a){},a93f:function(e,t,a){"use strict";a("548a")},a951:function(e,t,a){"use strict";a("0977")},a95e:function(e,t,a){"use strict";a("5987")},a99e:function(e,t,a){},aa54:function(e,t,a){"use strict";a("092a")},ab49:function(e,t,a){},ab74:function(e,t,a){},aca1:function(e,t,a){"use strict";a("c7978")},acd9:function(e,t,a){},aedc:function(e,t,a){"use strict";a("7f1e")},af95:function(e,t,a){},afa2:function(e,t,a){"use strict";a("a935")},b1a2:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"process-container"},[a("div",{staticClass:"center-container"},[e.templateJson?a("process-main",{key:e.key,attrs:{conf:e.templateJson,flowType:e.flowType,formInfo:e.formData,verifyMode:e.verifyMode}}):e._e()],1)])},l=[],o=a("53ca"),n=a("2909"),s=(a("ac6a"),a("6762"),a("2fdb"),a("2638")),r=a.n(s),c=(a("20d6"),a("b85c")),d=a("d4ec"),u=a("bee2"),p={title:"触发动作设置",formType:1,formId:"",formName:"",formFieldList:[],interfaceTemplateJson:[],triggerEvent:1,ruleList:[],ruleMatchLogic:"and",msgUserType:[1],msgUserIds:[],failMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},startMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},startTime:null,cron:"",endTimeType:1,endLimit:1,endTime:null,webhookUrl:"",webhookGetFieldsUrl:"",webhookRandomStr:""},f={defaultStartForm:p,start:{type:"start",content:"请设置触发事件",properties:p},getData:{type:"getData",content:"请设置想要获取的数据",properties:{title:"获取数据",formType:1,formId:"",formName:"",formFieldList:[],interfaceTemplateJson:[],ruleList:[],ruleMatchLogic:"and"}},addData:{type:"addData",content:"请设置新增数据",properties:{title:"新增数据",flowId:"",formId:"",formName:"",formFieldList:[],transferList:[],ruleMatchLogic:"and",ruleList:[],addRule:0}},updateData:{type:"updateData",content:"请设置更新数据",properties:{title:"更新数据",formId:"",formName:"",formFieldList:[],transferList:[],ruleList:[],ruleMatchLogic:"and",unFoundRule:0}},deleteData:{type:"deleteData",content:"请设置删除数据",properties:{title:"删除数据",formId:"",formName:"",formFieldList:[],ruleList:[],ruleMatchLogic:"and",deleteRule:0}},dataInterface:{type:"dataInterface",content:"请设置数据接口",properties:{title:"数据接口",formId:"",formName:"",templateJson:[]}},message:{type:"message",content:"请设置消息通知",properties:{title:"消息通知",msgUserIds:[],msgId:"",msgName:"",templateJson:[]}},launchFlow:{type:"launchFlow",content:"请设置发起审批",properties:{title:"发起审批",flowId:"",flowName:"",formId:"",formName:"",formFieldList:[],transferList:[],initiator:[]}},empty:{type:"empty",content:"",properties:{}}},m=function(e){return!Array.isArray(e)||0===e.length},_=function(){function e(){Object(d["a"])(this,e)}return Object(u["a"])(e,null,[{key:"idGenerator",value:function(){var e=new Date-new Date("2020-08-01");e+=Math.ceil(1e3*Math.random());var t="0123456789ABCDEFGHIGKLMNOPQRSTUVWXYZabcdefghigklmnopqrstuvwxyz",a=t.split(""),i=t.length,l=[];do{var o=e%i;e=(e-o)/i,l.push(a[o])}while(e);return l.join("")}},{key:"isConditionNode",value:function(e){return e&&"condition"===e.type}},{key:"isInterflowNode",value:function(e){return e&&"approver"===e.type&&e.isInterflow}},{key:"isBranchFlowNode",value:function(e){return e&&"approver"===e.type&&e.isBranchFlow}},{key:"isStartNode",value:function(e){return e&&"start"===e.type}},{key:"isGetDataNode",value:function(e){return e&&"getData"===e.type}},{key:"isAddDataNode",value:function(e){return e&&"addData"===e.type}},{key:"isUpdateDataNode",value:function(e){return e&&"updateData"===e.type}},{key:"isDeleteDataNode",value:function(e){return e&&"deleteData"===e.type}},{key:"isDataInterfaceNode",value:function(e){return e&&"dataInterface"===e.type}},{key:"isMessageNode",value:function(e){return e&&"message"===e.type}},{key:"isLaunchFlowNode",value:function(e){return e&&"launchFlow"===e.type}},{key:"createNode",value:function(e,t){var a=JSON.parse(JSON.stringify(f[e]));return a.nodeId=this.idGenerator(),a.prevId=t,a}},{key:"getPreviousNode",value:function(e,t){if(t.nodeId===e)return t;if(t.childNode){var a=this.getPreviousNode(e,t.childNode);if(a)return a}if(t.conditionNodes){var i,l=Object(c["a"])(t.conditionNodes);try{for(l.s();!(i=l.n()).done;){var o=i.value,n=this.getPreviousNode(e,o);if(n)return n}}catch(s){l.e(s)}finally{l.f()}}}},{key:"deleteNode",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.getPreviousNode(e.prevId,t);if(a&&"empty"===i.type)if(this.isConditionNode(e)||this.isInterflowNode(e)||this.isBranchFlowNode(e)){var l=2===i.conditionNodes.length,o=l?i:e;this.deleteNode(o,t,l)}else m(i.conditionNodes)&&this.deleteNode(i,t),this.deleteNode(e,t,!1);else{var n=function(e,t){e.childNode=t.childNode,m(e.conditionNodes)&&(e.conditionNodes=t.conditionNodes),e.childNode&&(e.childNode.prevId=e.nodeId),e.conditionNodes&&e.conditionNodes.forEach((function(t){return t.prevId=e.nodeId}))};if(this.isConditionNode(e)||this.isInterflowNode(e)||this.isBranchFlowNode(e)){var s=i.conditionNodes,r=s.findIndex((function(t){return t.nodeId===e.nodeId}));if(s.length>2)s.splice(r,1);else{var c=s[+!r];if(delete i.conditionNodes,delete i.conditionType,i.childNode){var d=c;while(d.childNode)d=d.childNode;d.childNode=i.childNode,d.childNode.prevId=d.nodeId}n(i,c),i.childNode&&"empty"===i.childNode.type&&this.deleteNode(i.childNode,i)}s.forEach((function(e,t){return e.properties.priority=t}))}else n(i,e)}}},{key:"addApprovalNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=e.childNode;a=a||this.createNode("addData",e.nodeId),e.childNode=a,i&&(a.childNode=i,i.prevId=a.nodeId);var l=e.conditionNodes;Array.isArray(l)&&!t&&l.length&&(a.conditionNodes=l.map((function(e){return e.prevId=a.nodeId,e})),delete e.conditionNodes),i&&"empty"===i.type&&"empty"!==a.type&&0===i.conditionNodes.length&&this.deleteNode(i,e)}},{key:"addEmptyNode",value:function(e){var t=this.createNode("empty",e.nodeId);return this.addApprovalNode(e,!0,t),t}},{key:"addAddDataNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("addData",e.nodeId))}},{key:"addUpdateDataNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("updateData",e.nodeId))}},{key:"addDeleteDataNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("deleteData",e.nodeId))}},{key:"addDataInterfaceNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("dataInterface",e.nodeId))}},{key:"addMessageNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("message",e.nodeId))}},{key:"addLaunchFlowNode",value:function(e,t){this.addApprovalNode(e,t,this.createNode("launchFlow",e.nodeId))}},{key:"appendConditionNode",value:function(e){var t=e.conditionNodes,a=this.createNode("condition",e.nodeId),i=t.findIndex((function(e){return e.properties.isDefault}));a.properties.priority=t.length,i>-1?(t.splice(-1,0,a),a.properties.priority=t.length-2,t[t.length-1].properties.priority=t.length-1):t.push(a),this.setDefaultCondition(a,e)}},{key:"appendInterflowNode",value:function(e){var t=e.conditionNodes,a=this.createNode("interflow",e.nodeId),i=t.findIndex((function(e){return e.properties.isDefault}));a.properties.priority=t.length,i>-1?(t.splice(-1,0,a),a.properties.priority=t.length-2,t[t.length-1].properties.priority=t.length-1):t.push(a)}},{key:"appendBranchFlowNode",value:function(e){var t=e.conditionNodes,a=this.createNode("branchFlow",e.nodeId),i=t.findIndex((function(e){return e.properties.isDefault}));a.properties.priority=t.length,i>-1?(t.splice(-1,0,a),a.properties.priority=t.length-2,t[t.length-1].properties.priority=t.length-1):t.push(a)}},{key:"appendBranch",value:function(e,t){var a=e;if(Array.isArray(e.conditionNodes)&&e.conditionNodes.length)if(t)a=this.addEmptyNode(a,!0);else{var i=this.addEmptyNode(a,!0);i.conditionNodes=a.conditionNodes,i.conditionType="condition",i.conditionNodes.forEach((function(e){e.prevId=i.nodeId}))}var l=[this.createNode("condition",a.nodeId),this.createNode("condition",a.nodeId)].map((function(e,t){return e.properties.priority=t,e}));a.conditionNodes=l,a.conditionType="condition"}},{key:"appendInterflowBranch",value:function(e,t){var a=e;if(Array.isArray(e.conditionNodes)&&e.conditionNodes.length)if(t)a=this.addEmptyNode(a,!0);else{var i=this.addEmptyNode(a,!0);i.conditionNodes=a.conditionNodes,i.conditionType="interflow",i.conditionNodes.forEach((function(e){e.prevId=i.nodeId}))}var l=[this.createNode("interflow",a.nodeId),this.createNode("interflow",a.nodeId)];a.conditionNodes=l,a.conditionType="interflow"}},{key:"appendBranchFlowBranch",value:function(e,t){var a=e;if(Array.isArray(e.conditionNodes)&&e.conditionNodes.length)if(t)a=this.addEmptyNode(a,!0);else{var i=this.addEmptyNode(a,!0);i.conditionNodes=a.conditionNodes,i.conditionType="branchFlow",i.conditionNodes.forEach((function(e){e.prevId=i.nodeId}))}var l=[this.createNode("branchFlow",a.nodeId),this.createNode("branchFlow",a.nodeId)];a.conditionNodes=l,a.conditionType="branchFlow"}},{key:"resortPrioByCNode",value:function(e,t,a){if(e.properties.isDefault)e.properties.priority=t;else{var i=this.getPreviousNode(e.prevId,a),l=e.properties.priority;if(i.conditionNodes[l].properties.isDefault)e.properties.priority=t;else{var o=i.conditionNodes.splice(l,1,e)[0];o.properties.priority=t,i.conditionNodes[t]=o}}}},{key:"increasePriority",value:function(e,t){if(!e.properties.isDefault){var a=this.getPreviousNode(e.prevId,t),i=a.conditionNodes,l=i.findIndex((function(t){return t===e}));l&&(i[l-1].properties.priority=l,i[l].properties.priority=l-1,i[l-1]=i.splice(l,1,i[l-1])[0])}}},{key:"decreasePriority",value:function(e,t){var a=this.getPreviousNode(e.prevId,t),i=a.conditionNodes,l=i.findIndex((function(t){return t.nodeId===e.nodeId}));if(l<i.length-1){var o=i[l+1];if(o.properties.isDefault)return;o.properties.priority=l,i[l].properties.priority=l+1,i[l+1]=i.splice(l,1,i[l+1])[0]}}},{key:"setDefaultCondition",value:function(e,t){var a="其他情况进入此流程",i=this.getPreviousNode(e.prevId,t).conditionNodes,l=function(e){return e.properties&&(e.properties.initiator||!m(e.properties.conditions))},o=function(e){e.properties.isDefault=!1,e.content===a&&(e.content="请设置条件")},n=function(e){e.properties.isDefault=!0,e.content=a},s=0;i.slice(0,-1).forEach((function(e){l(e)&&s++,o(e)}));var r=i[i.length-1];s>0&&!l(r)?n(r):o(r)}},{key:"checkNode",value:function(e,t){var a=!0,i=e.properties;return this.isStartNode(e)&&(1==i.integrateType&&!i.formId||2==i.integrateType&&(!i.cron||!i.startTime)||3==i.integrateType&&!i.formFieldList.length)&&(a=!1),this.isGetDataNode(e)&&!i.formId&&(a=!1),this.isAddDataNode(e)&&!i.formId&&(a=!1),this.isUpdateDataNode(e)&&!i.formId&&(a=!1),this.isDeleteDataNode(e)&&!i.formId&&(a=!1),this.isDataInterfaceNode(e)&&!i.formId&&(a=!1),this.isLaunchFlowNode(e)&&!i.flowId&&(a=!1),this.isMessageNode(e)&&(!i.msgId||!i.msgUserIds.length)&&(a=!1),a}},{key:"checkAllNode",value:function(e){var t=this,a=!0,i=function e(a,i,l){!t.checkNode(a,l)&&i(),a.childNode&&e(a.childNode,i,l),m(a.conditionNodes)||a.conditionNodes.forEach((function(t){return e(t,i,a)}))};return i(e,(function(){return a=!1})),a}}])}();function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=_.createNode("start");return t.properties.integrateType=e,2==e&&(t.content="请设置定时触发器",t.properties.title="定时触发设置",t.childNode=_.createNode("getData",t.nodeId)),3==e&&(t.content="请设置触发方式",t.properties.title="webhook触发设置"),t}var v=function(e){return"condition"===e.type||"addData"===e.type&&(e.isInterflow||e.isBranchFlow)},b=function(e){return Array.isArray(e)&&e.length>0},g=function(e){return b(e.conditionNodes)},y=function(e){return e.stopPropagation()};function D(e,t,a){var i=["flow-path-card","approver"],l=function(e,t){return e&&i.push(t),e};l(_.isStartNode(t),"start-node"),l(_.isStartNode(t),"approver");return a("section",{class:i.join(" "),on:{click:this.eventLauncher.bind(e,"edit",t)}},[a("header",{class:"header"},[a("div",{class:"title-box",style:"height: 100%;width:190px;"},[a("span",{class:"title-text"},[t.properties.title])]),"getData"!==t.type&&a("div",{class:"actions"},[a("i",{class:"el-icon-close icon",on:{click:this.eventLauncher.bind(e,"deleteNode",t,e.data)}})])]),a("div",{class:"body"},[a("span",{class:"text"},[t.content])])])}var w=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return D.call.apply(D,[t[0]].concat(t))},x={start:w,addData:w,updateData:w,deleteData:w,dataInterface:w,message:w,getData:w,launchFlow:w,interflow:w,branchFlow:w,empty:function(e){return""},condition:function(e,t,a){var i=this;return a("section",{class:"flow-path-card condition",on:{click:this.eventLauncher.bind(e,"edit",t)}},[a("header",{class:"header"},[a("div",{class:"title-box",style:"height:20px;width:160px;"},[a("span",{class:"title-text"},[t.properties.title]),a("input",r()([{on:{blur:function(e){i.$forceUpdate()},input:function(e){e.target.composing||i.$set(t.properties,"title",e.target.value.trim())},click:y},class:"title-input",domProps:{value:t.properties.title}},{directives:[{name:"model",value:t.properties.title,modifiers:{trim:!0}}]}]))]),a("div",{class:"actions"},[a("i",{class:"el-icon-close icon",on:{click:this.eventLauncher.bind(e,"deleteNode",t,e.data)}})])]),a("div",{class:"body"},[a("div",{class:"text"},[t.content])])])}};function C(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(g(t),!0),o=!0,n=!0,s=!0,r=!0;if(Array.isArray(t.conditionNodes)&&t.conditionNodes.length&&(l=!1,o=!1,n=!1,s=!1,!1,r=!1),("timer"===t.type||t.childNode&&"timer"===t.childNode.type)&&!1,"subFlow"===t.type&&(l=!1),t&&t.childNode&&"getData"===t.childNode.type)return a("div",{class:"add-node-btn-box flex justify-center"});var c="empty"===t.type;return c&&!i?"":a("div",{class:"add-node-btn-box flex justify-center"},[a("div",{class:"add-node-btn"},[a("el-popover",{attrs:{placement:"right",trigger:"click",width:"440"}},[a("div",{class:"condition-box"},[a("div",[a("div",{class:"condition-icon",on:{click:e.eventLauncher.bind(e,"addAddDataNode",t,i)}},[a("i",{class:"icon-ym icon-ym-btn-add"})]),"新增数据"]),a("div",{class:{"condition-disabled":!s&&!i}},[a("div",{class:"condition-icon",on:{click:e.eventLauncher.bind(e,"addUpdateDataNode",t,i,!s&&!i)}},[a("i",{class:"icon-ym icon-ym-Refresh"})]),"更新数据"]),a("div",{class:{"condition-disabled":!l}},[a("div",{class:"condition-icon",on:{click:this.eventLauncher.bind(e,"addDeleteDataNode",t,i,!l)}},[a("i",{class:"icon-ym icon-ym-delete"})]),"删除数据"]),a("div",{class:{"condition-disabled":!n}},[a("div",{class:"condition-icon",on:{click:this.eventLauncher.bind(e,"addDataInterfaceNode",t,i,!n)}},[a("i",{class:"icon-ym icon-ym-options"})]),"数据接口"]),a("div",{class:{"condition-disabled":!o}},[a("div",{class:"condition-icon",on:{click:this.eventLauncher.bind(e,"addMessageNode",t,i,!o)}},[a("i",{class:"icon-ym icon-ym-xitong"})]),"消息通知"]),a("div",{class:{"condition-disabled":!r}},[a("div",{class:"condition-icon",on:{click:this.eventLauncher.bind(e,"addLaunchFlowNode",t,i,!r)}},[a("i",{class:"icon-ym icon-ym-launch"})]),"发起审批"])]),a("button",{class:"btn",attrs:{type:"button"},slot:"reference"},[a("i",{class:"el-icon-plus icon"})])])])])}function k(e,t,a){if(t){var i=e.verifyMode&&!1===_.checkNode(t),l="请完善配置",o=[],n="",s=a("div",{class:"node-wrap"},[a("div",{class:"node-wrap-box ".concat(t.type," ").concat(_.isInterflowNode(t)?"interflow":"","\n                ").concat(_.isBranchFlowNode(t)?"branchFlow":""," ").concat(i?"error":"")},[a("el-tooltip",{attrs:{content:l,placement:"top",effect:"dark"}},[a("div",{class:"error-tip",on:{click:this.eventLauncher.bind(e,"edit",t)}},["!!!"])]),x[t.type].call(e,e,t,a),C.call(e,e,t,a)])]);return g(t)&&(n=a("div",{class:"branch-wrap"},[a("div",{class:"branch-box-wrap"},[a("div",{class:"branch-box flex justify-center relative"},[addBranchButton(t),t.conditionNodes.map((function(t){return k.call(e,e,t,a)}))])]),C.call(e,t,a,!0)])),v(t)?a("div",{class:"col-box"},[a("div",{class:"center-line"}),a("div",{class:"top-cover-line"}),a("div",{class:"bottom-cover-line"}),s,n,k.call(e,e,t.childNode,a)]):(o.push(s),n&&o.push(n),t.childNode&&o.push(k.call(e,e,t.childNode,a)),o)}}function T(e){return e("section",{class:"end-node"},["流程结束"])}var F,S,N,L,O={props:{data:{type:Object,required:!0},verifyMode:{type:Boolean,default:!0}},watch:{},methods:{eventLauncher:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];y(a[a.length-1]);var l=["appendBranch","appendBranchFlowBranch","appendInterflowBranch","addTimerNode"];if(!l.includes(e)||!a[a.length-2]){var o={event:e,args:a.slice(0,-1)};this.$emit("emits",o)}}},render:function(e){return e("div",{style:"display: inline-flex; flex-direction: column; align-items: center;"},[this.data&&k.call(this,this,this.data,e),T(e)])}},$=O,I=(a("a951"),a("2877")),j=Object(I["a"])($,F,S,!1,null,"de38fe20",null),M=j.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.properties?a("el-drawer",{staticClass:"drawer JNPF-common-drawer",attrs:{size:"600px",visible:e.visible,"append-to-body":"",wrapperClosable:!1},on:{"update:visible":function(t){e.visible=t},close:e.cancel}},[a("header",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.properties.title))]),e.value&&e.isStartNode()?a("StartNode",{ref:"startNodeRef",attrs:{formConf:e.startForm,integrateType:e.integrateType,formFieldsOptions:e.formFieldsOptions,getFormFieldList:e.getFormFieldList,formInfo:e.formInfo}}):e._e(),e.value&&e.isAddDataNode()?a("AddDataNode",{key:e.key,ref:"addNodeRef",attrs:{formConf:e.addDataForm,integrateType:e.integrateType,usedFormItems:e.usedFormItems,formFieldsOptions:e.formFieldsOptions,flowOptions:e.flowOptions,getFormFieldList:e.getFormFieldList}}):e._e(),e.value&&e.isUpdateDataNode()?a("UpdateDataNode",{key:e.key,ref:"updateNodeRef",attrs:{formConf:e.updateDataForm,integrateType:e.integrateType,flowOptions:e.flowOptions,usedFormItems:e.usedFormItems,formFieldsOptions:e.formFieldsOptions,getFormFieldList:e.getFormFieldList}}):e._e(),e.value&&e.isDeleteDataNode()?a("DeleteDataNode",{key:e.key,ref:"deleteNodeRef",attrs:{formConf:e.deleteDataForm,integrateType:e.integrateType,usedFormItems:e.usedFormItems,formFieldsOptions:e.formFieldsOptions,getFormFieldList:e.getFormFieldList}}):e._e(),e.value&&e.isDataInterfaceNode()?a("DataInterfaceNode",{ref:"dataNodeRef",attrs:{formConf:e.dataInterfaceForm,formFieldsOptions:e.formFieldsOptions}}):e._e(),e.value&&e.isMessageNode()?a("MessageNode",{ref:"messageNodeRef",attrs:{formConf:e.messageForm,formFieldsOptions:e.formFieldsOptions}}):e._e(),e.value&&e.isGetDataNode()?a("GetDataNode",{ref:"getDataNodeRef",attrs:{formConf:e.getDataForm,usedFormItems:e.usedFormItems,formFieldsOptions:e.formFieldsOptions,getFormFieldList:e.getFormFieldList}}):e._e(),e.value&&e.isLaunchFlowNode()?a("LaunchFlowNode",{key:e.key,ref:"getLaunchFlowRef",attrs:{formConf:e.launchFlowForm,usedFormItems:e.usedFormItems,formFieldsOptions:e.formFieldsOptions,getFormFieldList:e.getFormFieldList,getFlowFormFieldList:e.getFlowFormFieldList,flowOptions:e.flowOptions}}):e._e(),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1)],1):e._e()},A=[],P=a("5530"),J=a("c7eb"),R=(a("96cf"),a("1da1")),K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"approver-pane"},[a("el-tabs",{staticClass:"pane-tabs",model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("el-tab-pane",{attrs:{name:"1",label:1==e.integrateType?"表单配置":2==e.integrateType?"触发配置":"webhook配置"}}),a("el-tab-pane",{attrs:{name:"2",label:"通知配置"}})],1),a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeKey,expression:"activeKey === '1'"}],staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.formConf}},[1==e.integrateType?[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("触发表单")]),a("FlowFormModal",{attrs:{title:e.formConf.formName,enableFlow:0,clearable:!1,placeholder:"请选择表单"},on:{change:e.onFormIdChange},model:{value:e.formId,callback:function(t){e.formId=t},expression:"formId"}})],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("触发事件")]),a("el-radio-group",{model:{value:e.formConf.triggerEvent,callback:function(t){e.$set(e.formConf,"triggerEvent",t)},expression:"formConf.triggerEvent"}},e._l(e.triggerEventOptions,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.fullName))])})),1)],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("触发条件\n            "),a("el-tooltip",{attrs:{content:"满足以下条件，触发执行动作。",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("Condition",{ref:"base",attrs:{value:e.formConf.ruleList,matchLogic:e.formConf.ruleMatchLogic,columnOptions:e.formFieldList,type:1}})],1)]:e._e(),2==e.integrateType?[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("触发开始时间")]),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"timestamp",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择触发开始时间"},model:{value:e.formConf.startTime,callback:function(t){e.$set(e.formConf,"startTime",t)},expression:"formConf.startTime"}})],1),a("el-form-item",{attrs:{label:"触发规则"}},[a("el-form-item",[a("div",{staticClass:"ant-form-item-label"},[a("label",{staticClass:"ant-form-item-no-colon"},[e._v("Cron表达式")])]),a("el-input",{attrs:{placeholder:"Cron表达式",readonly:""},model:{value:e.formConf.cron,callback:function(t){e.$set(e.formConf,"cron",t)},expression:"formConf.cron"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-edit-outline"},on:{click:e.showDialog},slot:"append"})],1)],1)],1),a("el-form-item",{attrs:{label:"触发结束时间"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("触发结束时间")]),a("el-select",{staticStyle:{width:"100%"},model:{value:e.formConf.endTimeType,callback:function(t){e.$set(e.formConf,"endTimeType",t)},expression:"formConf.endTimeType"}},e._l(e.endTimeTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1),1===e.formConf.endTimeType?a("el-input-number",{staticClass:"mt-10px",attrs:{placeholder:"次数",min:1,precision:0,addonAfter:"次后结束"},on:{change:e.oneEndLimitChange},model:{value:e.formConf.endLimit,callback:function(t){e.$set(e.formConf,"endLimit",t)},expression:"formConf.endLimit"}}):2===e.formConf.endTimeType?a("el-date-picker",{staticClass:"mt-10px",staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请触发结束时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"timestamp"},model:{value:e.formConf.endTime,callback:function(t){e.$set(e.formConf,"endTime",t)},expression:"formConf.endTime"}}):e._e()],1)]:e._e(),3==e.integrateType?[a("el-form-item",{attrs:{label:"webhook URL"}},[a("p",{staticClass:"form-item-label color",attrs:{slot:"label"},slot:"label"},[e._v("webhook URL")]),a("p",{staticClass:"form-item-color mb-10px"},[e._v("系统生成的URL，用来接收请求字段！")]),a("el-input",{attrs:{readonly:""},model:{value:e.getWebhookUrl,callback:function(t){e.getWebhookUrl=t},expression:"getWebhookUrl"}},[a("template",{slot:"append"},[a("span",{staticClass:"cursor-pointer",on:{click:function(t){return e.handleCopy(t)}}},[e._v("复制链接")])])],2)],1),a("el-form-item",{attrs:{label:"添加接口字段"}},[a("div",{staticClass:"mb-10px"},[a("span",{staticClass:"link-text mr-20px inline-block",on:{click:e.addItem}},[a("i",{staticClass:"icon-ym icon-ym-btn-add text-14px mr-4px"}),e._v("自定义添加")]),a("span",{staticClass:"link-text mr-20px inline-block",on:{click:e.openBatch}},[a("i",{staticClass:"icon-ym icon-ym-btn-add text-14px mr-4px"}),e._v("从JSON格式添加\n            ")]),a("span",{staticClass:"link-text mr-20px inline-block",on:{click:e.openWebhookRequest}},[a("i",{staticClass:"icon-ym icon-ym-btn-add text-14px mr-4px"}),e._v("从请求接口添加\n            ")])]),a("div",{staticClass:"mb-10px"},e._l(e.formConf.formFieldList,(function(t,i){return a("el-row",{key:i,staticClass:"mt-10px",attrs:{gutter:8}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"字段"},on:{change:function(a){return e.onItemChange(t)}},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}})],1),a("el-col",{attrs:{span:13}},[a("el-input",{attrs:{placeholder:"字段说明"},on:{change:function(a){return e.onItemChange(t)}},model:{value:t.fullName,callback:function(a){e.$set(t,"fullName",a)},expression:"item.fullName"}})],1),a("el-col",{staticClass:"text-center",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn clearn",on:{click:function(t){return e.delItem(i)}}})])],1)})),1)])]:e._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===e.activeKey,expression:"activeKey === '2'"}]},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.formConf}},[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("通知人")]),a("JnpfSelect",{staticStyle:{width:"100%"},attrs:{options:e.msgUserOptions,props:e.props,placeholder:"请选择",multiple:""},model:{value:e.formConf.msgUserType,callback:function(t){e.$set(e.formConf,"msgUserType",t)},expression:"formConf.msgUserType"}})],1),e.formConf.msgUserType.includes(3)?a("el-form-item",[a("div",{staticClass:"ant-form-item-label"},[a("label",{staticClass:"ant-form-item-no-colon"},[e._v("选择用户")])]),a("JnpfUsersSelect",{attrs:{placeholder:"请选择通知人",multiple:""},model:{value:e.formConf.msgUserIds,callback:function(t){e.$set(e.formConf,"msgUserIds",t)},expression:"formConf.msgUserIds"}})],1):e._e(),a("el-form-item",{attrs:{label:"执行失败"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("执行失败\n            "),a("el-tooltip",{attrs:{content:"执行失败时发送通知！",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.formConf.failMsgConfig.on,callback:function(t){e.$set(e.formConf.failMsgConfig,"on",t)},expression:"formConf.failMsgConfig.on"}},e._l(e.noticeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),1===e.formConf.failMsgConfig.on?a("div",[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.formConf.failMsgConfig.msgId,title:e.formConf.failMsgConfig.msgName,messageSource:3},on:{change:function(t){return e.onMsgChange("formConf","failMsgConfig",arguments)}}})],1),1==e.integrateType?[a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.formConf.failMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                  ")])]}}],null,!1,3193935384)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box"},[e._v("\n                    "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                  ")])}))}}],null,!1,297143636)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,3128840729)})],1)]:e._e()],2):e._e(),a("el-form-item",{attrs:{label:"开始执行"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("开始执行\n            "),a("el-tooltip",{attrs:{content:"开始执行时发送通知！",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.formConf.startMsgConfig.on,callback:function(t){e.$set(e.formConf.startMsgConfig,"on",t)},expression:"formConf.startMsgConfig.on"}},e._l(e.noticeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),1===e.formConf.startMsgConfig.on?a("div",[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.formConf.startMsgConfig.msgId,title:e.formConf.startMsgConfig.msgName,messageSource:3},on:{change:function(t){return e.onMsgChange("formConf","startMsgConfig",arguments)}}})],1),1==e.integrateType?[a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.formConf.startMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                  ")])]}}],null,!1,3193935384)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box"},[e._v("\n                    "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                  ")])}))}}],null,!1,297143636)}),a("el-table-column",{attrs:{prop:"value",label:"数据值"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请配置字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,3200901159)})],1)]:e._e()],2):e._e()],1)],1)],1),e.viewVisible?a("Detail",{ref:"View",on:{close:function(t){e.viewVisible=!1}}}):e._e(),e.jsonVisible?a("BatchDialog",{ref:"jsonBatch",on:{confirm:e.addItemForOther}}):e._e(),e.webhookRequestVisible?a("WebhookRequestDialog",{ref:"webhookRequest",on:{confirm:e.addItemForOther}}):e._e(),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"Cron表达式",visible:e.showCron,"close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"700px"},on:{"update:visible":function(t){e.showCron=t},closed:function(t){e.showCrontab=!1}}},[e.showCrontab?a("vcrontab",{ref:"vcrontab",attrs:{expression:e.formConf.cron},on:{hide:function(t){e.showCron=!1},fill:e.crontabFill}}):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showCron=!1}}},[e._v(e._s(e.$t("common.cancelButton"))+"\n      ")]),a("el-button",{attrs:{type:"warning"},on:{click:e.resetCrontab}},[e._v("重 置")]),a("el-button",{attrs:{type:"primary"},on:{click:e.getCrontabValue}},[e._v(e._s(e.$t("common.confirmButton"))+"\n      ")])],1)],1)],1)},B=[],E=a("3835"),z=(a("c5f6"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popupSelect-container"},[a("div",{staticClass:"el-select",on:{click:e.openDialog}},[a("el-input",{attrs:{placeholder:e.placeholder,readonly:"","validate-event":!1},nativeOn:{mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},[a("template",{slot:"suffix"},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-arrow-up"]}),e.showClose?a("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}):e._e()])],2)],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{title:"表单选择","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"JNPF-common-layout"},[a("div",{staticClass:"JNPF-common-layout-center"},[a("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"JNPF-common-search-box-right"},[a("el-tooltip",{attrs:{effect:"dark",content:"刷新",placement:"top"}},[a("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)],1),a("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,border:!1,"highlight-current-row":"",hasNO:!1},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" ")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"fullName",label:"表单名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"enCode",label:"表单编码"}}),a("el-table-column",{attrs:{prop:"formType",label:"表单类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.enableFlow?"流程表单":"普通表单"))])]}}])})],1),a("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.$t("common.confirmButton"))+"\n      ")])],1)])],1)}),q=[],W=(a("386d"),a("ef22")),U={name:"FlowFormDialog",props:{value:{default:""},title:{type:String,default:""},placeholder:{type:String,default:"请选择"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},enableFlow:{default:null}},model:{prop:"value",event:"input"},data:function(){return{list:[],innerValue:"",listQuery:{keyword:"",currentPage:1,pageSize:20},total:0,checked:"",checkedRow:{},listLoading:!1,inputHovering:!1,visible:!1}},computed:{showClose:function(){var e=void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.disabled&&this.inputHovering&&e;return t}},methods:{initData:function(){var e=this;this.listLoading=!0;var t=Object(P["a"])(Object(P["a"])({},this.listQuery),{},{enableFlow:this.enableFlow});Object(W["v"])(t).then((function(t){e.list=t.data.list,e.total=t.data.pagination.total,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},openDialog:function(){this.disabled||(this.checked=this.value,this.checkedRow={id:this.value,fullName:this.title},this.visible=!0,this.reset())},reset:function(){this.listQuery.keyword="",this.search()},search:function(){this.listQuery.currentPage=1,this.listQuery.pageSize=20,this.initData()},clear:function(){this.checked="",this.checkedRow={},this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow)},select:function(){this.checked&&(this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow),this.visible=!1)},rowClick:function(e){this.checked=e.id,this.checkedRow=e}}},H=U,G=(a("6fbd"),Object(I["a"])(H,z,q,!1,null,"3cc49169",null)),Q=G.exports,Y=a("8a04"),Z=[{id:1,fullName:"字段"},{id:2,fullName:"自定义"}],X=[].concat(Z,[{id:3,fullName:"为空"}]),ee=[{id:1,fullName:"创建人"},{id:2,fullName:"超级管理员"},{id:3,fullName:"自定义"}],te=[{id:3,fullName:"默认"},{id:1,fullName:"自定义"},{id:0,fullName:"关闭"}],ae=[{id:"and",fullName:"and"},{id:"or",fullName:"or"}],ie=[{id:">=",fullName:"大于等于"},{id:">",fullName:"大于"},{id:"==",fullName:"等于"},{id:"<=",fullName:"小于等于"},{id:"<",fullName:"小于"},{id:"<>",fullName:"不等于"},{id:"like",fullName:"包含"},{id:"notLike",fullName:"不包含"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}],le=[{id:"==",fullName:"等于"},{id:"<>",fullName:"不等于"},{id:"like",fullName:"包含"},{id:"notLike",fullName:"不包含"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}],oe=[{id:">=",fullName:"大于等于"},{id:">",fullName:"大于"},{id:"==",fullName:"等于"},{id:"<=",fullName:"小于等于"},{id:"<",fullName:"小于"},{id:"<>",fullName:"不等于"},{id:"between",fullName:"介于"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}],ne=[{id:"==",fullName:"等于"},{id:"<>",fullName:"不等于"}],se=[].concat(ne,[{id:"in",fullName:"包含任意一个"},{id:"notIn",fullName:"不包含任意一个"},{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}]),re=[].concat(ne,[{id:"null",fullName:"为空"},{id:"notNull",fullName:"不为空"}]),ce=["inputNumber","calculate","rate","slider","datePicker","timePicker","createTime","modifyTime"],de=["radio","checkbox","select","treeSelect","cascader","areaSelect","organizeSelect","depSelect","posSelect","userSelect","usersSelect","roleSelect","groupSelect","createUser","modifyUser","currOrganize","currPosition","popupTableSelect"],ue=["switch"],pe=["relationForm","popupSelect"],fe=a("e984"),me=a("1ee6"),_e=a("9675"),he=a.n(_e),ve=a("f71e"),be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"JSON数据格式","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{attrs:{layout:"vertical"}},[a("div",{staticClass:"json-demo"},[a("pre",[e._v('        // 示例\n        [\n          {\n            "id":"fullName",\n            "fullName":"名称"\n          }\n        ]\n      ')])]),a("el-form-item",{attrs:{label:"请输入JSON数据格式生成接口字段"}},[a("div",{staticClass:"formCodeEditor"},[a("JNPFCodeEditor",{ref:"CodeEditor",attrs:{options:e.options},model:{value:e.responseData,callback:function(t){e.responseData=t},expression:"responseData"}})],1)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)},ge=[],ye=(a("a481"),a("7c37")),De={components:{JNPFCodeEditor:ye["a"]},data:function(){return{visible:!1,options:{readOnly:!1,language:"json"},responseData:""}},methods:{init:function(){this.visible=!0,this.responseData="",this.$refs.CodeEditor.changeEditor({value:"",options:this.options})},closeDialog:function(){if(!this.responseData)return this.$message.warning("请输入字段JSON");var e=this.responseData.replace(/("\w+":)(?=[},])/g,"$1null");try{var t=JSON.parse(e);if(!Array.isArray(t))throw"error";this.$emit("confirm",t),this.visible=!1}catch(a){this.$message.warning("JSON数据格式错误")}}}},we=De,xe=(a("b70b"),Object(I["a"])(we,be,ge,!1,null,"3cd3efa4",null)),Ce=xe.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center webhook-request-dialog",attrs:{title:"请求接口","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"main"},[a("div",{staticClass:"mb-10px"},[e._v("向该接口发送请求，通过接口生成接口字段！")]),a("el-input",{attrs:{readonly:""},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[a("template",{slot:"append"},[a("span",{staticClass:"cursor-pointer",on:{click:function(t){return e.handleCopy(e.url,t)}}},[e._v("复制链接")])])],2),a("div",{staticClass:"mt-20px"},[e.loading?[a("el-alert",{attrs:{title:"请在3分钟内向URL发送一条GET或POST请求",type:"warning",closable:!1}}),e.isRetry?[a("div",{staticClass:"tip tip-error"},[e._v("当前URL没有接收到任何请求，是否重试？")]),a("el-button",{staticClass:"mt-10px",attrs:{type:"primary"},on:{click:e.handleRequest}},[e._v("重试")])]:a("div",{staticClass:"tip"},[e._v("正在接收请求......")])]:a("el-button",{attrs:{type:"primary"},on:{click:e.handleRequest}},[e._v("接收请求")])],2)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])},Te=[],Fe=a("5c45"),Se=a("4360"),Ne={data:function(){return{visible:!1,url:"",loading:!1,isRetry:!1,timer:null,id:"",randomStr:""}},computed:{sysConfig:function(){return Se["a"].getters&&Se["a"].getters.sysConfig}},methods:{init:function(e){this.visible=!0,this.url=this.sysConfig.jnpfDomain+e.url,this.randomStr=e.randomStr,this.id=e.id||"",this.loading=!1,this.isRetry=!1},handleCopy:function(e,t){Object(ve["a"])(e,t)},handleRequest:function(){var e=this;Object(Fe["q"])(this.id,this.randomStr).then((function(t){e.loading=!0,e.isRetry=!1,e.timer=setInterval((function(){e.handleWebhookParams()}),1e3),setTimeout((function(){clearTimer(),e.isRetry=!0}),18e4)}))},clearTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},handleWebhookParams:function(){var e=this;Object(Fe["k"])(this.randomStr).then((function(t){t.data.length&&(e.$emit("confirm",t.data),e.clearTimer(),e.closeModal())})).catch((function(){e.clearTimer(),e.isRetry=!0}))}}},Le=Ne,Oe=(a("ca83"),Object(I["a"])(Le,ke,Te,!1,null,"7f25d7e2",null)),$e=Oe.exports,Ie=[{id:1,fullName:"新增数据"},{id:2,fullName:"修改数据"},{id:3,fullName:"删除数据"}],je=[{id:1,fullName:"触发次数"},{id:2,fullName:"指定时间"},{id:3,fullName:"不结束"}],Me={name:"StartNode",components:{FlowFormModal:Q,Condition:Y["a"],MsgDialog:fe["a"],Detail:me["a"],vcrontab:he.a,BatchDialog:Ce,WebhookRequestDialog:$e},props:{formConf:{type:Object,default:function(){}},integrateType:{type:Number,default:1},formFieldsOptions:{type:Array,default:function(){return[]}},getFormFieldList:{type:Function,default:null},formInfo:{type:Object,default:function(){}}},data:function(){return{activeKey:"1",triggerEventOptions:Ie,columnOptions:[],msgUserOptions:ee,props:{label:"fullName",value:"id"},noticeOptions:te,viewVisible:!1,showCron:!1,showCrontab:!0,endTimeTypeOptions:je,jsonVisible:!1,webhookRequestVisible:!1,formId:JSON.parse(JSON.stringify(this.formConf.formId))}},created:function(){3==this.integrateType&&(this.formConf.formFieldList=this.formConf.formFieldList.filter((function(e){return"@formId"!==e.id})))},computed:{formFieldList:function(){return this.formConf.formFieldList.filter((function(e){return e.id.indexOf("-")<0}))},getWebhookUrl:function(){var e=Se["a"].getters&&Se["a"].getters.sysConfig;return e.jnpfDomain+this.formConf.webhookUrl}},methods:{getFormConf:function(){var e=!1;if(1==this.integrateType){if(!this.formConf.formId)return this.$message.error("请选择触发表单"),e;var t=this.$refs.base&&this.$refs.base.getData()||"";if(!t)return e;if(this.formConf.ruleMatchLogic=t.matchLogic,this.formConf.ruleList=t.conditionList,!this.formConf.ruleList||!this.validData())return e}else if(2==this.integrateType){if(!this.formConf.startTime)return this.$message.error("请选择触发开始时间"),e;if(!this.formConf.cron)return this.$message.error("请设置Cron表达式"),e;if(2==this.formConf.endTimeType&&!this.formConf.endTime)return this.$message.error("请选择触发结束时间"),e;if(1==this.formConf.startMsgConfig.on&&!this.formConf.startMsgConfig.msgId)return this.$message.error("请选择开始执行发送配置"),e;if(1==this.formConf.failMsgConfig.on&&!this.formConf.failMsgConfig.msgId)return this.$message.error("请选择执行失败发送配置"),e}else{if(!this.formConf.formFieldList.length)return this.$message.error("请设置接口字段"),e;if(!this.formFieldListExist())return;if(1!==this.formConf.failMsgConfig.on||this.formConf.failMsgConfig.msgId||this.$message.error("请选择执行失败发送配置"),1===this.formConf.startMsgConfig.on&&!this.formConf.startMsgConfig.msgId)return this.$message.error("请选择开始执行发送配置"),e}return this.formConf},getCrontabValue:function(){this.$refs.vcrontab&&this.$refs.vcrontab.submitFill()},resetCrontab:function(){this.$refs.vcrontab&&this.$refs.vcrontab.clearCron()},crontabFill:function(e){this.formConf.cron=e},showDialog:function(){this.showCron=!0,this.showCrontab=!0},validData:function(){for(var e=!0,t=0;t<this.formConf.ruleList.length;t++)for(var a=this.formConf.ruleList[t],i=0;i<a.groups.length;i++){var l=a.groups[i];if(!l.field){this.$message.warning("条件字段不能为空"),e=!1;break}if(!l.symbol){this.$message.warning("条件符号不能为空"),e=!1;break}if(!["null","notNull"].includes(l.symbol)&&!["switch"].includes(l.jnpfKey)&&(!l.fieldValue||this.jnpf.isEmpty(l.fieldValue))&&(!["inputNumber","calculate","rate"].includes(l.jnpfKey)||["inputNumber","calculate","rate"].includes(l.jnpfKey)&&0!==l.fieldValue)){this.$message.warning("数据值不能为空"),e=!1;break}}return e},onFormIdChange:function(e,t){if(!e)return this.handleNull();this.formConf.ruleList=[],this.getFormFieldList(e,"start"),this.formConf.formId!=e&&(this.formConf.formName=t.fullName,this.formConf.formId=e)},handleNull:function(){this.formConf.formName="",this.formConf.formId="",this.formConf.formFieldList=[],this.formConf.ruleList=[]},onRelationFieldChange:function(e,t){if(e){var a=this.formFieldsOptions.filter((function(t){return e===t.__vModel__}));if(a.length){var i=a[0];this.$set(t,"isSubTable",!(!i.__config__||!i.__config__.isSubTable)&&i.__config__.isSubTable)}}},onMsgChange:function(e,t,a){var i=Object(E["a"])(a,2),l=i[0],o=i[1];if(!l)return this[e][t].msgId="",this[e][t].msgName="",void(this[e][t].templateJson=[]);this[e][t].msgId!==l&&(this[e][t].msgId=l,this[e][t].msgName=o.fullName,this[e][t].templateJson=o.templateJson)},goDetail:function(e){var t=this;this.viewVisible=!0,this.$nextTick((function(){t.$refs.View.init(e)}))},oneEndLimitChange:function(e){var t=this;this.$nextTick((function(){e||(t.formConf.endLimit=1)}))},addItem:function(){this.formConf.formFieldList.push({id:"",fullName:"",label:""})},delItem:function(e){this.formConf.formFieldList.splice(e,1)},onItemChange:function(e){e.label=e.fullName?e.id+"("+e.fullName+")":e.id},handleCopy:function(e){Object(ve["a"])(this.getWebhookUrl,e)},openBatch:function(){var e=this;this.jsonVisible=!0,this.$nextTick((function(){e.$refs.jsonBatch.init()}))},openWebhookRequest:function(){var e=this;this.webhookRequestVisible=!0,this.$nextTick((function(){e.$refs.webhookRequest.init({url:e.formConf.webhookGetFieldsUrl,randomStr:e.formConf.webhookRandomStr,id:e.formInfo.id})}))},addItemForOther:function(e){var t=this;this.webhookRequestVisible=!1,this.jsonVisible=!1;var a=e.map((function(e){return Object(P["a"])(Object(P["a"])({},e),{},{label:e.fullName?e.id+"("+e.fullName+")":e.id})}));if(!this.formConf.formFieldList.length)return this.formConf.formFieldList=a;for(var i=function(){var e=a[l];if(e.id){var i=t.formConf.formFieldList.findIndex((function(t){return t.id===e.id}));i<0?t.formConf.formFieldList.push(e):t.formConf.formFieldList[i]=e}else t.formConf.formFieldList.push(e)},l=0;l<a.length;l++)i()},formFieldListExist:function(){for(var e=this.formConf.formFieldList,t=!0,a=0;a<e.length;a++){var i=e[a];if(!i.id){this.$message.warning("第".concat(a+1,"行字段不能为空")),t=!1;break}if(!i.fullName){this.$message.warning("第".concat(a+1,"行字段说明不能为空")),t=!1;break}}return t}}},Ve=Me,Ae=(a("4ddb"),Object(I["a"])(Ve,K,B,!1,null,"1b79158a",null)),Pe=Ae.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"approver-pane"},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.formConf}},[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("目标表单")]),a("FlowFormModal",{attrs:{title:e.formConf.formName,placeholder:"请选择表单",clearable:!1},on:{change:e.onFormIdChange},model:{value:e.formConf.formId,callback:function(t){e.$set(e.formConf,"formId",t)},expression:"formConf.formId"}}),e.formConf.enableFlow?a("el-select",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{placeholder:"请选择流程",filterable:""},model:{value:e.flowId,callback:function(t){e.flowId=t},expression:"flowId"}},e._l(e.flowOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):e._e()],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("字段设置")]),a("section",{staticClass:"condition-pane pd-10"},[a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:7}},[e._v("选择目标表单字段")]),a("el-col",{attrs:{span:5}}),a("el-col",{staticStyle:{"margin-left":"70px"},attrs:{span:12}},[e._v("设置触发表单字段或自定义值 ")])],1),e._l(e.transferList,(function(t,i){return a("el-row",{key:i,staticClass:"mt-10px",attrs:{gutter:8}},[a("el-col",{attrs:{span:7}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:"",disabled:t.required},model:{value:t.targetField,callback:function(a){e.$set(t,"targetField",a)},expression:"item.targetField"}},e._l(e.getTargetOptions(i),(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{staticClass:"leading-32px",attrs:{span:3}},[e._v("的值设为")]),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:"",disabled:t.required},on:{change:function(a){return e.onChangeSourceValue(t)}},model:{value:t.sourceType,callback:function(a){e.$set(t,"sourceType",a)},expression:"item.sourceType"}},e._l(e.sourceTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},[1===t.sourceType?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:""},model:{value:t.sourceValue,callback:function(a){e.$set(t,"sourceValue",a)},expression:"item.sourceValue"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):e._e(),2===t.sourceType?a("el-input",{attrs:{placeholder:"请输入值",allowClear:""},model:{value:t.sourceValue,callback:function(a){e.$set(t,"sourceValue",a)},expression:"item.sourceValue"}}):e._e()],1),t.required?e._e():a("el-col",{staticClass:"text-center  del-icon",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn",on:{click:function(t){return e.delTransferItem(i)}}})])],1)})),a("div",{staticClass:"link-text",on:{click:function(t){return e.addTransferItem()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加字段")])],2)]),1!=e.integrateType?a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("唯一性验证\n          "),a("el-tooltip",{attrs:{content:"判断目标表单与触发表单是否同一条数据",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("section",{staticClass:"condition-pane pd-10"},[e.ruleList.length?a("div",{staticClass:"mb-10px"},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("分组匹配逻辑")]),a("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.ruleMatchLogic,callback:function(t){e.ruleMatchLogic=t},expression:"ruleMatchLogic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e(),e._l(e.ruleList,(function(t,i){return a("div",{key:i,staticClass:"mb-10px"},[a("el-row",{staticStyle:{"margin-bottom":"-8px"},attrs:{gutter:8}},[a("el-col",{staticClass:"mb-10",attrs:{span:7}},[a("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:11}},[e._v("条件逻辑")]),a("el-col",{attrs:{span:13}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.logic,callback:function(a){e.$set(t,"logic",a)},expression:"item.logic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:3.5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-btn-add"},on:{click:function(t){return e.addItem(i)}}},[e._v("添加条件")])],1),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-nav-close"},on:{click:function(t){return e.delGroup(i)}}},[e._v("删除分组")])],1)],1),e._l(t.groups,(function(t,l){return a("el-row",{key:i+l,staticClass:"mt-10px",attrs:{gutter:8}},[a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择目标表单字段",filterable:""},on:{change:function(a){return e.onFieldChange(t,a,i,l)}},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"child.field"}},e._l(e.getRuleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"运算符号",filterable:"",disabled:"=="==t.symbol},model:{value:t.symbol,callback:function(a){e.$set(t,"symbol",a)},expression:"child.symbol"}},e._l(e.symbolOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择触发表单字段",filterable:"",clearable:""},on:{change:e.onChangeUpdate},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"child.fieldValue"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{staticClass:"text-center",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn del-icon",on:{click:function(t){return e.delItem(i,l)}}})])],1)}))],2)})),a("div",{staticClass:"link-text",on:{click:function(t){return e.addGroup()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加分组")])],2)]):e._e(),1!=e.integrateType?a("el-form-item",{attrs:{label:"数据存在时"}},[a("el-radio-group",{model:{value:e.addRule,callback:function(t){e.addRule=t},expression:"addRule"}},e._l(e.addRuleOptions,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.fullName))])})),1)],1):e._e()],1)],1)],1)},Re=[],Ke=(a("456d"),[{id:0,fullName:"不新增数据"},{id:1,fullName:"新增一条数据"}]),Be={field:"",symbol:"",fieldValueType:1,fieldValue:void 0,jnpfKey:"",fieldValueJnpfKey:"",cellKey:+new Date},Ee={logic:"and",groups:[Be]},ze={name:"addDataNode",components:{FlowFormModal:Q,MsgDialog:fe["a"]},props:{formConf:{type:Object,default:function(){}},integrateType:{type:Number,default:1},formFieldsOptions:{type:Array,default:function(){return[]}},getFormFieldList:{type:Function,default:null},usedFormItems:{type:Array,default:function(){return[]}},flowOptions:{type:Array,default:function(){return[]}}},data:function(){return{addRuleOptions:Ke,emptyItem:Ee,sourceTypeOptions:Z,logicOptions:ae,symbolOptions:ie,emptyChildItem:Be,transferList:JSON.parse(JSON.stringify(this.formConf.transferList)),ruleList:JSON.parse(JSON.stringify(this.formConf.ruleList)),addRule:JSON.parse(JSON.stringify(this.formConf.addRule)),ruleMatchLogic:JSON.parse(JSON.stringify(this.formConf.ruleMatchLogic)),flowId:JSON.parse(JSON.stringify(this.formConf.flowId))}},computed:{getRuleOptions:function(){var e=this.formConf.formFieldList.filter((function(e){return e.id.indexOf("-")<0}));return e.filter((function(e){return!["relationFormAttr","popupAttr","uploadFile","uploadImg","colorPicker","editor"].includes(e.__config__.jnpfKey)}))}},methods:{onChangeSourceValue:function(e){e.sourceValue&&(e.sourceValue=void 0)},getItem:function(){this.formConf.flowId=this.flowId;var e={transferList:this.transferList,ruleList:this.ruleList};return 2==this.integrateType&&(e.addRule=this.addRule,this.formConf.ruleMatchLogic=this.ruleMatchLogic),e},onChangeUpdate:function(){this.$forceUpdate()},onFormIdChange:function(e,t){if(this.ruleList=[],this.formConf.ruleList=[],1!=this.integrateType){this.ruleMatchLogic="and";var a=JSON.parse(JSON.stringify(this.emptyItem));a.groups[0].symbol="==",this.formConf.ruleList.push(a)}if(!e)return this.handleNull();this.formConf.formName=t.fullName,this.formConf.formId=e,this.formConf.enableFlow=t.enableFlow,this.formConf.flowId="",this.transferList=[],this.getFormFieldList(e,"addData")},handleNull:function(){this.formConf.formName="",this.formConf.formId="",this.formConf.enableFlow=0,this.formConf.formFieldList=[],this.transferList=[]},addTransferItem:function(){this.transferList.push({targetField:"",targetFieldLabel:"",sourceType:1,sourceValue:"",required:!1})},delTransferItem:function(e){this.transferList.splice(e,1)},addItem:function(e){var t=JSON.parse(JSON.stringify(this.emptyChildItem));1!=this.integrateType&&(t.symbol="=="),this.ruleList[e].groups.push(t)},delItem:function(e,t){if(this.ruleList.length<=1&&this.ruleList[0].groups.length<=1)return this.$message.error("必须保留一个条件");this.ruleList[e].groups.splice(t,1)},addGroup:function(){var e=JSON.parse(JSON.stringify(this.emptyItem));1!=this.integrateType&&(e.groups[0].symbol="=="),this.ruleList.push(e)},delGroup:function(e){if(this.ruleList.length<=1)return this.$message.error("必须保留一个条件");this.ruleList.splice(e,1)},onFieldChange:function(e,t,a,i){e.symbol="";var l=this.getRuleOptions.filter((function(e){return e.__vModel__==t}))[0];if(!t)return e.jnpfKey="",void(2==e.fieldValueType&&(e.fieldValue=void 0,e.fieldValueJnpfKey=""));e.jnpfKey=l.__config__.jnpfKey;for(var o=JSON.parse(JSON.stringify(this.emptyChildItem)),n=0,s=Object.keys(o);n<s.length;n++){var r=s[n];o[r]=e[r]}e=Object(P["a"])(Object(P["a"])({},o),l),1!=e.fieldValueType&&(e.fieldValue=void 0,e.fieldValueJnpfKey=""),1!=this.integrateType&&(e.symbol="=="),this.ruleList[a].groups[i]=e,this.onChangeUpdate()},getTargetOptions:function(e){for(var t=[],a=0;a<this.transferList.length;a++){var i=this.transferList[a];i.targetField&&e!==a&&t.push(i.targetField)}var l=this.formConf.formFieldList.filter((function(e){return!t.includes(e.id)}));return l}}},qe=ze,We=(a("7cef"),Object(I["a"])(qe,Je,Re,!1,null,"21ad03d6",null)),Ue=We.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"approver-pane"},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.formConf}},[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("目标表单")]),a("FlowFormModal",{attrs:{value:e.formConf.formId,title:e.formConf.formName,flowType:1,placeholder:"请选择表单",clearable:!1},on:{change:e.onFormIdChange}}),e.formConf.enableFlow?a("el-select",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{placeholder:"请选择流程",filterable:""},model:{value:e.flowId,callback:function(t){e.flowId=t},expression:"flowId"}},e._l(e.flowOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):e._e()],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("更新字段")]),a("section",{staticClass:"condition-pane pd-10"},[a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:7}},[e._v("选择目标表单字段")]),a("el-col",{attrs:{span:5}}),a("el-col",{staticStyle:{"margin-left":"70px"},attrs:{span:12}},[e._v("设置触发表单字段或自定义值 ")])],1),e._l(e.transferList,(function(t,i){return a("el-row",{key:i,staticClass:"mt-10px",attrs:{gutter:8}},[a("el-col",{attrs:{span:7}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:""},model:{value:t.targetField,callback:function(a){e.$set(t,"targetField",a)},expression:"item.targetField"}},e._l(e.getTargetOptions(i),(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{staticClass:"leading-32px",attrs:{span:3}},[e._v("的值设为")]),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:""},on:{change:function(e){t.sourceValue=""}},model:{value:t.sourceType,callback:function(a){e.$set(t,"sourceType",a)},expression:"item.sourceType"}},e._l(e.sourceTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},[1===t.sourceType?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:"",clearable:""},model:{value:t.sourceValue,callback:function(a){e.$set(t,"sourceValue",a)},expression:"item.sourceValue"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):e._e(),2===t.sourceType?a("el-input",{attrs:{placeholder:"请输入值",clearable:""},model:{value:t.sourceValue,callback:function(a){e.$set(t,"sourceValue",a)},expression:"item.sourceValue"}}):e._e()],1),t.required?e._e():a("el-col",{staticClass:"text-center",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn del-icon",on:{click:function(t){return e.delTransferItem(i)}}})])],1)})),a("span",{staticClass:"link-text mt-10px inline-block",on:{click:function(t){return e.addTransferItem()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add text-14px mr-4px"}),e._v("添加字段")])],2)]),1==e.integrateType?a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("更新条件\n        ")]),a("section",{staticClass:"condition-pane pd-10"},[e.ruleList.length?a("div",{staticClass:"mb-10px"},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("分组匹配逻辑")]),a("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.ruleMatchLogic,callback:function(t){e.ruleMatchLogic=t},expression:"ruleMatchLogic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e(),e._l(e.ruleList,(function(t,i){return a("div",{key:i,staticClass:"mb-10px"},[a("el-row",{staticStyle:{"margin-bottom":"-8px"},attrs:{gutter:8}},[a("el-col",{staticClass:"mb-10",attrs:{span:7}},[a("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:11}},[e._v("条件逻辑")]),a("el-col",{attrs:{span:13}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.logic,callback:function(a){e.$set(t,"logic",a)},expression:"item.logic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:3.5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-btn-add"},on:{click:function(t){return e.addItem(i)}}},[e._v("添加条件")])],1),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-nav-close"},on:{click:function(t){return e.delGroup(i)}}},[e._v("删除分组")])],1)],1),e._l(t.groups,(function(l,o){return a("el-row",{key:i+o,staticClass:"mt-10px",attrs:{gutter:8}},[a("el-col",{attrs:{span:6}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",clearable:"",filterable:""},on:{change:function(t){return e.onFieldChange(l,t,i,o)}},model:{value:l.field,callback:function(t){e.$set(l,"field",t)},expression:"child.field"}},e._l(e.getRuleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"运算符号",clearable:"",filterable:""},on:{change:function(t){return e.onSymbolChange(t,l,i,o)}},model:{value:l.symbol,callback:function(t){e.$set(l,"symbol",t)},expression:"child.symbol"}},e._l(e.getSymbolOptions(l.jnpfKey),(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",disabled:["null","notNull"].includes(l.symbol)},on:{change:function(t){return e.onTypeChange(l)}},model:{value:l.fieldValueType,callback:function(t){e.$set(l,"fieldValueType",t)},expression:"child.fieldValueType"}},e._l(e.sourceTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},[1===l.fieldValueType?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",clearable:"",disabled:["null","notNull"].includes(l.symbol)},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):e._e(),2===l.fieldValueType?["inputNumber"===l.jnpfKey?["between"==l.symbol?a("NumRange",{staticStyle:{width:"100%"},attrs:{disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}}):a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",disabled:l.disabled,precision:l.precision,"controls-position":"right"},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"autoComplete"===l.jnpfKey?[a("JnpfAutoComplete",{attrs:{placeholder:"请选择",interfaceId:l.interfaceId,clearable:"",disabled:l.disabled,propsValue:l.propsValue,relationField:l.relationField,templateJson:l.templateJson,total:l.total},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["radio","checkbox","select"].includes(l.jnpfKey)?[["null","notNull"].includes(l.symbol)?[a("el-input",{attrs:{disabled:l.disabled,placeholder:"请选择"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:a("el-select",{key:l.cellKey,attrs:{disabled:l.disabled,placeholder:"请选择",multiple:l.multiple,filterable:""},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}},e._l(l.options,(function(e,t){return a("el-option",{key:t,attrs:{disabled:e.disabled,label:e[l.props.label],value:e[l.props.value]}})})),1)]:["cascader"].includes(l.jnpfKey)?[a("el-cascader",{key:l.cellKey,attrs:{options:l.options,props:l.props,placeholder:l.placeholder,clearable:l.clearable,"show-all-levels":l.showAllLevels,separator:l.separator,filterable:l.filterable,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["treeSelect"].includes(l.jnpfKey)?[a("JnpfTreeSelect",{attrs:{options:l.options,props:l.props,placeholder:l.placeholder,clearable:l.clearable,multiple:l.multiple,filterable:l.filterable,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"calculate"===l.jnpfKey?["between"==l.symbol?a("NumRange",{staticStyle:{width:"100%"},attrs:{precision:l.precision,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}}):a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",precision:l.precision||0,disabled:l.disabled,"controls-position":"right"},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["rate","slider"].includes(l.jnpfKey)?["between"==l.symbol?a("NumRange",{staticStyle:{width:"100%"},attrs:{precision:l.precision,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}}):a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",precision:0,disabled:l.disabled,"controls-position":"right"},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"switch"===l.jnpfKey?[a("el-switch",{staticStyle:{"margin-top":"5px"},attrs:{"active-value":1,disabled:l.disabled,"inactive-value":0},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"timePicker"===l.jnpfKey?["between"==l.symbol?a("el-time-picker",{key:"time1",staticStyle:{width:"100%"},attrs:{disabled:l.disabled,"range-separator":"至",placeholder:"请选择",clearable:"","is-range":!0,"value-format":l.format,format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}}):a("el-time-picker",{key:"time2",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",disabled:l.disabled,"value-format":l.format,format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["datePicker"].includes(l.jnpfKey)?["between"==l.symbol?[a("JnpfDateRangePicker",{key:"year1",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:l.disabled,placeholder:"请选择",separator:"至",startPlaceholder:"开始日期",endPlaceholder:"结束日期",format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:a("JnpfDatePicker",{key:"year2",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:l.disabled,placeholder:"请选择",format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["createTime","modifyTime"].includes(l.jnpfKey)?["between"==l.symbol?[a("el-date-picker",{key:"year1",staticStyle:{width:"100%"},attrs:{clearable:"","value-format":"timestamp",disabled:l.disabled,placeholder:"请选择","range-separator":"至",type:"datetimerange",startPlaceholder:"开始日期",endPlaceholder:"结束日期"},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:a("el-date-picker",{key:"year2",staticStyle:{width:"100%"},attrs:{clearable:"",type:"datetime","value-format":"timestamp",disabled:l.disabled,placeholder:"请选择"},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["organizeSelect","currOrganize"].includes(l.jnpfKey)?[a("JnpfOrganizeSelect",{ref:"comselect",refInFor:!0,attrs:{disabled:l.disabled,placeholder:"请选择",clearable:"",multiple:l.multiple,ableIds:l.ableIds,selectType:l.selectType},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["depSelect"].includes(l.jnpfKey)?[a("JnpfDepSelect",{attrs:{placeholder:"请选择",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,clearable:"",disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"popupTableSelect"===l.jnpfKey?[a("JnpfPopupTableSelect",{attrs:{placeholder:l.placeholder,interfaceId:l.interfaceId,multiple:l.multiple,columnOptions:l.columnOptions,propsValue:l.propsValue,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,popupType:l.popupType,popupTitle:l.popupTitle,popupWidth:l.popupWidth,filterable:l.filterable,disabled:l.disabled,clearable:""},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"relationForm"===l.jnpfKey?[a("JnpfRelationForm",{attrs:{placeholder:"请选择",modelId:l.modelId,clearable:"",multiple:l.multiple,columnOptions:l.columnOptions,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"popupSelect"===l.jnpfKey?[a("JnpfPopupSelect",{attrs:{placeholder:"请选择",interfaceId:l.interfaceId,clearable:"",multiple:l.multiple,columnOptions:l.columnOptions,propsValue:l.propsValue,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,popupType:l.popupType,templateJson:t.templateJson,popupTitle:l.popupTitle,popupWidth:l.popupWidth,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["userSelect"].includes(l.jnpfKey)?[a("JnpfUserSelect",{staticClass:"item",attrs:{placeholder:"请选择",clearable:"",disabled:l.disabled,selectType:"all"!=l.selectType&&"custom"!=l.selectType?"all":l.selectType,ableIds:l.ableIds,multiple:l.multiple},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["usersSelect"].includes(l.jnpfKey)?[a("jnpf-users-select",{attrs:{clearable:"",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["createUser","modifyUser"].includes(l.jnpfKey)?[a("JnpfUserSelect",{attrs:{placeholder:"请选择",multiple:l.multiple,clearable:"",disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["posSelect"].includes(l.jnpfKey)?[a("JnpfPosSelect",{staticClass:"child",attrs:{placeholder:"请选择",clearable:"",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["currPosition"].includes(l.jnpfKey)?[a("JnpfPosSelect",{staticClass:"child",attrs:{placeholder:"请选择",clearable:"",multiple:l.multiple,disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"areaSelect"===l.jnpfKey?[a("JnpfAreaSelect",{attrs:{placeholder:"请选择",level:l.level,multiple:l.multiple,clearable:"",disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"groupSelect"===l.jnpfKey?[a("JnpfGroupSelect",{attrs:{multiple:l.multiple,placeholder:"请选择",clearable:"",disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"roleSelect"===l.jnpfKey?[a("JnpfRoleSelect",{attrs:{multiple:l.multiple,placeholder:"请选择",clearable:"",disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:[a("el-input",{attrs:{disabled:l.disabled,placeholder:"请输入"},on:{input:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]]:e._e()],2),a("el-col",{staticClass:"text-center del-icon",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn",on:{click:function(t){return e.delItem(i,o)}}})])],1)}))],2)})),a("div",{staticClass:"link-text",on:{click:function(t){return e.addGroup()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加分组")])],2)]):e._e(),1!=e.integrateType?a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("唯一性验证\n          "),a("el-tooltip",{attrs:{content:"判断目标表单与触发表单是否同一条数据",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("section",{staticClass:"condition-pane pd-10"},[e.ruleList.length?a("div",{staticClass:"mb-10px"},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("分组匹配逻辑")]),a("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.ruleMatchLogic,callback:function(t){e.ruleMatchLogic=t},expression:"ruleMatchLogic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e(),e._l(e.ruleList,(function(t,i){return a("div",{key:i,staticClass:"mb-10px"},[a("el-row",{staticStyle:{"margin-bottom":"-8px"},attrs:{gutter:8}},[a("el-col",{staticClass:"mb-10",attrs:{span:7}},[a("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:11}},[e._v("条件逻辑")]),a("el-col",{attrs:{span:13}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.logic,callback:function(a){e.$set(t,"logic",a)},expression:"item.logic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:3.5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-btn-add"},on:{click:function(t){return e.addItem(i)}}},[e._v("添加条件")])],1),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-nav-close"},on:{click:function(t){return e.delGroup(i)}}},[e._v("删除分组")])],1)],1),e._l(t.groups,(function(t,l){return a("el-row",{key:i+l,staticClass:"mt-10px",attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择目标表单字段",filterable:""},on:{change:function(a){return e.onFieldChange(t,t.field,i,l)}},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"child.field"}},e._l(e.getRuleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"运算符号",filterable:"",disabled:""},model:{value:t.symbol,callback:function(a){e.$set(t,"symbol",a)},expression:"child.symbol"}},e._l(e.symbolOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择触发表单字段",filterable:"",clearable:""},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"child.fieldValue"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{staticClass:"text-center",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn del-icon",on:{click:function(t){return e.delItem(i,l)}}})])],1)}))],2)})),a("div",{staticClass:"link-text",on:{click:function(t){return e.addGroup()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加分组")])],2)]):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("未找到数据时\n          "),a("el-tooltip",{attrs:{content:"找到数据的直接更新，未找到数据的配置以下动作！",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-radio-group",{model:{value:e.unFoundRule,callback:function(t){e.unFoundRule=t},expression:"unFoundRule"}},e._l(e.unFoundRuleOptions,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.fullName))])})),1)],1)],1)],1)],1)},Ge=[],Qe=a("9b6f"),Ye=a("17de"),Ze=a("100e"),Xe=[{id:0,fullName:"跳过不更新"},{id:1,fullName:"新增一条数据"}],et={field:"",symbol:"",fieldValueType:1,fieldValue:void 0,jnpfKey:"",fieldValueJnpfKey:"",cellKey:+new Date},tt={logic:"and",groups:[et]},at={name:"UpdateDataNode",components:{FlowFormModal:Q,MsgDialog:fe["a"]},props:{formConf:{type:Object,default:function(){}},integrateType:{type:Number,default:1},formFieldsOptions:{type:Array,default:function(){return[]}},getFormFieldList:{type:Function,default:null},usedFormItems:{type:Array,default:function(){return[]}},flowOptions:{type:Array,default:function(){return[]}}},data:function(){return{unFoundRuleOptions:Xe,emptyItem:tt,sourceTypeOptions:Z,logicOptions:ae,symbolOptions:ie,emptyChildItem:et,ruleMatchLogic:JSON.parse(JSON.stringify(this.formConf.ruleMatchLogic)),transferList:JSON.parse(JSON.stringify(this.formConf.transferList)),ruleList:JSON.parse(JSON.stringify(this.formConf.ruleList)),unFoundRule:JSON.parse(JSON.stringify(this.formConf.unFoundRule)),baseSymbolOptions:le,rangeSymbolOptions:oe,selectSymbolOptions:se,switchSymbolOptions:ne,relationFormSymbolOptions:re,useRangeSymbolList:ce,useSelectSymbolList:de,useSwitchSymbolList:ue,useRelationFormSymbolList:pe,flowId:""}},computed:{getRuleOptions:function(){var e=this.formConf.formFieldList.filter((function(e){return e.id.indexOf("-")<0}));return e.filter((function(e){return!["relationFormAttr","popupAttr","uploadFile","uploadImg","colorPicker","editor"].includes(e.__config__.jnpfKey)}))}},watch:{getRuleOptions:{handler:function(e){this.buildOptions(e)},deep:!0}},methods:{getSymbolOptions:function(e){return this.useSwitchSymbolList.includes(e)?this.switchSymbolOptions:this.useRelationFormSymbolList.includes(e)?this.relationFormSymbolOptions:this.useRangeSymbolList.includes(e)?this.rangeSymbolOptions:this.useSelectSymbolList.includes(e)?this.selectSymbolOptions:this.baseSymbolOptions},input:function(){this.$forceUpdate()},getTransferList:function(){this.formConf.flowId=this.flowId;var e={unFoundRule:this.unFoundRule,transferList:this.transferList,ruleList:this.ruleList,ruleMatchLogic:this.ruleMatchLogic};return e},onFormIdChange:function(e,t){if(this.formConf.transferList=[],this.ruleList=[],this.formConf.ruleList=[],this.formConf.flowId="",this.flowId="",!e)return this.handleNull();if(this.formConf.formName=t.fullName,this.formConf.formId=e,this.formConf.enableFlow=t.enableFlow,this.getFormFieldList(e,"updateData"),this.transferList=[],1!=this.integrateType){this.ruleMatchLogic="and";var a=JSON.parse(JSON.stringify(this.emptyItem));a.groups[0].symbol="==",this.ruleList.push(a),this.formConf.ruleList=this.ruleList}},handleNull:function(){this.formConf.formName="",this.formConf.formId="",this.formConf.enableFlow=0,this.formConf.formFieldList=[],this.transferList=[],this.ruleList=[]},addTransferItem:function(){this.transferList.push({targetField:"",targetFieldLabel:"",sourceType:1,sourceValue:"",required:!1})},delTransferItem:function(e){this.transferList.splice(e,1)},addItem:function(e){var t=JSON.parse(JSON.stringify(this.emptyChildItem));1!=this.integrateType&&(t.symbol="=="),this.ruleList[e].groups.push(t)},delItem:function(e,t){1!=this.integrateType&&this.ruleList.length<=1&&this.ruleList[0].groups.length<=1?this.$message.error("必须保留一个条件"):this.ruleList[e].groups.splice(t,1)},addGroup:function(){var e=JSON.parse(JSON.stringify(this.emptyItem));1!=this.integrateType&&(e.groups[0].symbol="=="),this.ruleList.push(e)},delGroup:function(e){if(1!=this.integrateType&&this.ruleList.length<=1)return this.$message.error("必须保留一个条件");this.ruleList.splice(e,1)},onFieldChange:function(e,t,a,i){if(e.cellKey=+new Date,e.symbol="",!t)return e.jnpfKey="",void(2==e.fieldValueType&&(e.fieldValue=void 0,e.fieldValueJnpfKey=""));var l=this.getRuleOptions.filter((function(e){return e.id==t}))[0];e.jnpfKey=l.__config__.jnpfKey;for(var o=JSON.parse(JSON.stringify(this.emptyChildItem)),n=0,s=Object.keys(o);n<s.length;n++){var r=s[n];o[r]=e[r]}e=Object(P["a"])(Object(P["a"])({},o),l),2==e.fieldValueType&&(e.fieldValue=void 0,e.fieldValueJnpfKey=""),1!=this.integrateType&&(e.symbol="=="),this.$set(this.ruleList[a].groups,i,e)},onTypeChange:function(e){1==e.fieldValueType?(e.fieldValue||"switch"==e.jnpfKey)&&(e.fieldValue=void 0):(e.fieldValue=["in","notIn"].includes(e.symbol)?[]:void 0,"switch"==e.jnpfKey&&(e.fieldValue=!1))},onSymbolChange:function(e,t,a,i){t.cellKey=+new Date,t.fieldValueType=1,t.fieldValue=void 0,t.fieldValueJnpfKey="",t.disabled=["null","notNull"].includes(e),t.multiple=["in","notIn"].includes(e),["select","radio","checkbox","areaSelect"].includes(t.jnpfKey)&&(["in","notIn"].includes(e)?t.fieldValue=[]:t.fieldValue=""),this.$set(this.ruleList[a].groups,i,t)},getTargetOptions:function(e){for(var t=[],a=0;a<this.transferList.length;a++){var i=this.transferList[a];i.targetField&&e!==a&&t.push(i.targetField)}var l=this.formConf.formFieldList.filter((function(e){return!t.includes(e.id)}));return l},buildOptions:function(e){return e.forEach((function(e){e.disabled=!1;var t=e.__config__;Ze["b"].includes(t.jnpfKey)&&("dictionary"===t.dataType&&t.dictionaryType&&(e.options=[],Object(Qe["i"])(t.dictionaryType).then((function(t){e.options=t.data.list}))),"dynamic"===t.dataType&&t.propsUrl&&(e.options=[],Object(Ye["o"])(t.propsUrl).then((function(t){e.options=Array.isArray(t.data)?t.data:[]}))))})),e}}},it=at,lt=(a("7e5f"),Object(I["a"])(it,He,Ge,!1,null,"522bd324",null)),ot=lt.exports,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"approver-pane"},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.formConf}},[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("目标表单")]),a("FlowFormModal",{attrs:{value:e.formConf.formId,title:e.formConf.formName,flowType:1,clearable:!1,allowClear:!1,placeholder:"请选择表单"},on:{change:e.onFormIdChange}})],1),1==e.integrateType?a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("删除条件\n        ")]),a("section",{staticClass:"condition-pane pd-10"},[e.ruleList.length?a("div",{staticClass:"mb-10px"},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("分组匹配逻辑")]),a("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.ruleMatchLogic,callback:function(t){e.ruleMatchLogic=t},expression:"ruleMatchLogic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e(),e._l(e.ruleList,(function(t,i){return a("div",{key:i,staticClass:"mb-10px"},[a("el-row",{staticStyle:{"margin-bottom":"-8px"},attrs:{gutter:8}},[a("el-col",{staticClass:"mb-10",attrs:{span:7}},[a("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:11}},[e._v("条件逻辑")]),a("el-col",{attrs:{span:13}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.logic,callback:function(a){e.$set(t,"logic",a)},expression:"item.logic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:3.5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-btn-add"},on:{click:function(t){return e.addItem(i)}}},[e._v("添加条件")])],1),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-nav-close"},on:{click:function(t){return e.delGroup(i)}}},[e._v("删除分组")])],1)],1),e._l(t.groups,(function(l,o){return a("el-row",{key:i+o,staticClass:"mt-10px",attrs:{gutter:8}},[a("el-col",{attrs:{span:6}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",clearable:"",filterable:""},on:{change:function(t){return e.onFieldChange(l,t,i,o)}},model:{value:l.field,callback:function(t){e.$set(l,"field",t)},expression:"child.field"}},e._l(e.getRuleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"运算符号",clearable:"",filterable:""},on:{change:function(t){return e.onSymbolChange(t,l,i,o)}},model:{value:l.symbol,callback:function(t){e.$set(l,"symbol",t)},expression:"child.symbol"}},e._l(e.getSymbolOptions(l.jnpfKey),(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",disabled:["null","notNull"].includes(l.symbol)},on:{change:function(t){return e.onTypeChange(l)},input:function(t){return e.input()}},model:{value:l.fieldValueType,callback:function(t){e.$set(l,"fieldValueType",t)},expression:"child.fieldValueType"}},e._l(e.sourceTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},[1===l.fieldValueType?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",clearable:"",disabled:["null","notNull"].includes(l.symbol)},on:{change:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):e._e(),2===l.fieldValueType?["inputNumber"===l.jnpfKey?["between"==l.symbol?a("NumRange",{staticStyle:{width:"100%"},attrs:{disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}}):a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",disabled:l.disabled,precision:l.precision,"controls-position":"right"},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"autoComplete"===l.jnpfKey?[a("JnpfAutoComplete",{attrs:{placeholder:"请选择",interfaceId:l.interfaceId,clearable:"",disabled:l.disabled,propsValue:l.propsValue,relationField:l.relationField,templateJson:l.templateJson,total:l.total},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["radio","checkbox","select"].includes(l.jnpfKey)?[["null","notNull"].includes(l.symbol)?[a("el-input",{attrs:{disabled:l.disabled,placeholder:"请选择"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:a("el-select",{key:l.cellKey,attrs:{disabled:l.disabled,placeholder:"请选择",multiple:l.multiple,filterable:""},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}},e._l(l.options,(function(e,t){return a("el-option",{key:t,attrs:{disabled:e.disabled,label:e[l.props.label],value:e[l.props.value]}})})),1)]:["cascader"].includes(l.jnpfKey)?[a("el-cascader",{key:l.cellKey,attrs:{options:l.options,props:l.props,placeholder:l.placeholder,clearable:l.clearable,"show-all-levels":l.showAllLevels,separator:l.separator,filterable:l.filterable,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["treeSelect"].includes(l.jnpfKey)?[a("JnpfTreeSelect",{attrs:{conditionFilter:"",options:l.options,props:l.props,placeholder:l.placeholder,clearable:l.clearable,multiple:l.multiple,filterable:l.filterable,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"calculate"===l.jnpfKey?["between"==l.symbol?a("NumRange",{staticStyle:{width:"100%"},attrs:{precision:l.precision,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}}):a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",precision:l.precision||0,disabled:l.disabled,"controls-position":"right"},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["rate","slider"].includes(l.jnpfKey)?["between"==l.symbol?a("NumRange",{staticStyle:{width:"100%"},attrs:{precision:l.precision,disabled:l.disabled},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}}):a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",precision:0,disabled:l.disabled,"controls-position":"right"},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"switch"===l.jnpfKey?[a("el-switch",{staticStyle:{"margin-top":"5px"},attrs:{"active-value":1,disabled:l.disabled,"inactive-value":0},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"timePicker"===l.jnpfKey?["between"==l.symbol?a("el-time-picker",{key:"time1",staticStyle:{width:"100%"},attrs:{disabled:l.disabled,"range-separator":"至",placeholder:"请选择",clearable:"","is-range":!0,"value-format":l.format,format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}}):a("el-time-picker",{key:"time2",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",disabled:l.disabled,"value-format":l.format,format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["datePicker"].includes(l.jnpfKey)?["between"==l.symbol?[a("JnpfDateRangePicker",{key:"year1",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:l.disabled,placeholder:"请选择",separator:"至",startPlaceholder:"开始日期",endPlaceholder:"结束日期",format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:a("JnpfDatePicker",{key:"year2",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:l.disabled,placeholder:"请选择",format:l.format},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["createTime","modifyTime"].includes(l.jnpfKey)?["between"==l.symbol?[a("el-date-picker",{key:"year1",staticStyle:{width:"100%"},attrs:{clearable:"","value-format":"timestamp",disabled:l.disabled,placeholder:"请选择","range-separator":"至",type:"datetimerange",startPlaceholder:"开始日期",endPlaceholder:"结束日期"},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:a("el-date-picker",{key:"year2",staticStyle:{width:"100%"},attrs:{clearable:"",type:"datetime","value-format":"timestamp",disabled:l.disabled,placeholder:"请选择"},on:{input:function(t){return e.input()}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["organizeSelect","currOrganize"].includes(l.jnpfKey)?[a("JnpfOrganizeSelect",{ref:"comselect",refInFor:!0,attrs:{disabled:l.disabled,placeholder:"请选择",clearable:"",multiple:l.multiple,ableIds:l.ableIds,selectType:l.selectType},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["depSelect"].includes(l.jnpfKey)?[a("JnpfDepSelect",{attrs:{placeholder:"请选择",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,clearable:"",disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"popupTableSelect"===l.jnpfKey?[a("JnpfPopupTableSelect",{attrs:{placeholder:l.placeholder,interfaceId:l.interfaceId,multiple:l.multiple,columnOptions:l.columnOptions,propsValue:l.propsValue,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,popupType:l.popupType,popupTitle:l.popupTitle,popupWidth:l.popupWidth,filterable:l.filterable,templateJson:l.templateJson,disabled:l.disabled,clearable:""},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"relationForm"===l.jnpfKey?[a("JnpfRelationForm",{attrs:{placeholder:"请选择",modelId:l.modelId,clearable:"",multiple:l.multiple,columnOptions:l.columnOptions,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"popupSelect"===l.jnpfKey?[a("JnpfPopupSelect",{attrs:{placeholder:"请选择",interfaceId:l.interfaceId,clearable:"",multiple:l.multiple,columnOptions:l.columnOptions,propsValue:l.propsValue,relationField:l.relationField,hasPage:l.hasPage,pageSize:l.pageSize,popupType:l.popupType,templateJson:t.templateJson,popupTitle:l.popupTitle,popupWidth:l.popupWidth,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["userSelect"].includes(l.jnpfKey)?[a("JnpfUserSelect",{staticClass:"item",attrs:{placeholder:"请选择",clearable:"",disabled:l.disabled,selectType:"all"!=l.selectType&&"custom"!=l.selectType?"all":l.selectType,ableIds:l.ableIds,multiple:l.multiple},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["usersSelect"].includes(l.jnpfKey)?[a("jnpf-users-select",{attrs:{clearable:"",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["createUser","modifyUser"].includes(l.jnpfKey)?[a("JnpfUserSelect",{attrs:{placeholder:"请选择",multiple:l.multiple,clearable:"",disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["posSelect"].includes(l.jnpfKey)?[a("JnpfPosSelect",{staticClass:"child",attrs:{placeholder:"请选择",clearable:"",selectType:l.selectType,ableIds:l.ableIds,multiple:l.multiple,disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:["currPosition"].includes(l.jnpfKey)?[a("JnpfPosSelect",{staticClass:"child",attrs:{placeholder:"请选择",clearable:"",multiple:l.multiple,disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"areaSelect"===l.jnpfKey?[a("JnpfAreaSelect",{attrs:{placeholder:"请选择",level:l.level,multiple:l.multiple,clearable:"",disabled:l.disabled},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"groupSelect"===l.jnpfKey?[a("JnpfGroupSelect",{attrs:{multiple:l.multiple,placeholder:"请选择",clearable:"",disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:"roleSelect"===l.jnpfKey?[a("JnpfRoleSelect",{attrs:{multiple:l.multiple,placeholder:"请选择",clearable:"",disabled:l.disabled,ableIds:l.ableIds,selectType:l.selectType},on:{change:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]:[a("el-input",{attrs:{disabled:l.disabled,placeholder:"请输入"},on:{input:e.input},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"child.fieldValue"}})]]:e._e()],2),a("el-col",{staticClass:"text-center del-icon",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn",on:{click:function(t){return e.delItem(i,o)}}})])],1)}))],2)})),a("div",{staticClass:"link-text",on:{click:function(t){return e.addGroup()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加分组")])],2)]):e._e(),1!=e.integrateType?a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("唯一性验证")]),a("section",{staticClass:"condition-pane pd-10"},[e.ruleList.length?a("div",{staticClass:"mb-10px"},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("分组匹配逻辑")]),a("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.ruleMatchLogic,callback:function(t){e.ruleMatchLogic=t},expression:"ruleMatchLogic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e(),e._l(e.ruleList,(function(t,i){return a("div",{key:i,staticClass:"mb-10px"},[a("el-row",{staticStyle:{"margin-bottom":"-8px"},attrs:{gutter:8}},[a("el-col",{staticClass:"mb-10",attrs:{span:7}},[a("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:11}},[e._v("条件逻辑")]),a("el-col",{attrs:{span:13}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.logic,callback:function(a){e.$set(t,"logic",a)},expression:"item.logic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:3.5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-btn-add"},on:{click:function(t){return e.addItem(i)}}},[e._v("添加条件")])],1),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"condition-btn",attrs:{icon:"icon-ym icon-ym-nav-close"},on:{click:function(t){return e.delGroup(i)}}},[e._v("删除分组")])],1)],1),e._l(t.groups,(function(t,l){return a("el-row",{key:i+l,staticClass:"mt-10px",attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择目标表单字段",filterable:""},on:{change:function(a){return e.onFieldChange(t,t.field,i,l)}},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"child.field"}},e._l(e.getRuleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"运算符号",filterable:"",disabled:""},model:{value:t.symbol,callback:function(a){e.$set(t,"symbol",a)},expression:"child.symbol"}},e._l(e.symbolOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择触发表单字段",filterable:"",clearable:""},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"child.fieldValue"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{staticClass:"text-center",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn del-icon",on:{click:function(t){return e.delItem(i,l)}}})])],1)}))],2)})),a("div",{staticClass:"link-text",on:{click:function(t){return e.addGroup()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加分组")])],2)]):e._e(),1!=e.integrateType?a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("删除内容")]),a("el-radio-group",{model:{value:e.deleteRule,callback:function(t){e.deleteRule=t},expression:"deleteRule"}},e._l(e.deleteRuleOptions,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.fullName))])})),1)],1):e._e()],1)],1)],1)},st=[],rt=[{id:0,fullName:"删除未找到的数据"},{id:1,fullName:"删除已找到的数据"}],ct={field:"",symbol:"",fieldValueType:1,fieldValue:void 0,jnpfKey:"",fieldValueJnpfKey:"",cellKey:+new Date},dt={logic:"and",groups:[ct]},ut={name:"DeleteDataNode",components:{FlowFormModal:Q},props:{formConf:{type:Object,default:function(){}},integrateType:{type:Number,default:1},formFieldsOptions:{type:Array,default:function(){return[]}},getFormFieldList:{type:Function,default:null},usedFormItems:{type:Array,default:function(){return[]}}},data:function(){return{deleteRuleOptions:rt,emptyItem:dt,sourceTypeOptions:Z,logicOptions:ae,symbolOptions:ie,emptyChildItem:ct,deleteRule:JSON.parse(JSON.stringify(this.formConf.deleteRule)),ruleList:JSON.parse(JSON.stringify(this.formConf.ruleList)),ruleMatchLogic:JSON.parse(JSON.stringify(this.formConf.ruleMatchLogic)),baseSymbolOptions:le,rangeSymbolOptions:oe,selectSymbolOptions:se,switchSymbolOptions:ne,relationFormSymbolOptions:re,useRangeSymbolList:ce,useSelectSymbolList:de,useSwitchSymbolList:ue,useRelationFormSymbolList:pe}},computed:{getRuleOptions:function(){var e=this.formConf.formFieldList.filter((function(e){return e.id.indexOf("-")<0}));return e.filter((function(e){return!["relationFormAttr","popupAttr","uploadFile","uploadImg","colorPicker","editor"].includes(e.__config__.jnpfKey)}))}},watch:{getRuleOptions:{handler:function(e){this.buildOptions(e)},deep:!0}},methods:{getSymbolOptions:function(e){return this.useSwitchSymbolList.includes(e)?this.switchSymbolOptions:this.useRelationFormSymbolList.includes(e)?this.relationFormSymbolOptions:this.useRangeSymbolList.includes(e)?this.rangeSymbolOptions:this.useSelectSymbolList.includes(e)?this.selectSymbolOptions:this.baseSymbolOptions},input:function(){this.$forceUpdate()},getRuleList:function(){return this.formConf.deleteRule=this.deleteRule,this.formConf.ruleMatchLogic=this.ruleMatchLogic,this.ruleList},onFormIdChange:function(e,t){if(!e)return this.handleNull();if(this.formConf.formName=t.fullName,this.formConf.formId=e,this.getFormFieldList(e,"deleteData"),this.ruleList=[],this.ruleMatchLogic="and",this.formConf.ruleList=[],1!=this.integrateType){this.ruleMatchLogic="and";var a=JSON.parse(JSON.stringify(this.emptyItem));a.groups[0].symbol="==",this.ruleList.push(a),this.formConf.ruleList=this.ruleList}},handleNull:function(){this.formConf.formName="",this.formConf.formId="",this.formConf.formFieldList=[]},addItem:function(e){var t=JSON.parse(JSON.stringify(this.emptyChildItem));1!=this.integrateType&&(t.symbol="=="),this.ruleList[e].groups.push(t)},delItem:function(e,t){1!=this.integrateType&&this.ruleList.length<=1&&this.ruleList[0].groups.length<=1?this.$message.error("必须保留一个条件"):this.ruleList[e].groups.splice(t,1)},addGroup:function(){var e=JSON.parse(JSON.stringify(this.emptyItem));1!=this.integrateType&&(e.groups[0].symbol="=="),this.ruleList.push(e)},delGroup:function(e){if(1!=this.integrateType&&this.ruleList.length<=1)return this.$message.error("必须保留一个条件");this.ruleList.splice(e,1)},onTypeChange:function(e){1==e.fieldValueType?e.fieldValue&&(e.fieldValue=void 0):(e.fieldValue&&(e.fieldValue=["in","notIn"].includes(e.symbol)?[]:void 0),"switch"==e.jnpfKey&&(e.fieldValue=!1))},onFieldChange:function(e,t,a,i){if(e.cellKey=+new Date,e.symbol="",!t)return e.jnpfKey="",void(2==e.fieldValueType&&(e.fieldValue=void 0,e.fieldValueJnpfKey=""));var l=this.getRuleOptions.filter((function(e){return e.id==t}))[0];e.jnpfKey=l.__config__.jnpfKey;for(var o=JSON.parse(JSON.stringify(this.emptyChildItem)),n=0,s=Object.keys(o);n<s.length;n++){var r=s[n];o[r]=e[r]}e=Object(P["a"])(Object(P["a"])({},o),l),2==e.fieldValueType&&(e.fieldValue=void 0,e.fieldValueJnpfKey=""),1!=this.integrateType&&(e.symbol="=="),this.$set(this.ruleList[a].groups,i,e)},onSymbolChange:function(e,t,a,i){t.cellKey=+new Date,t.fieldValueType=1,t.fieldValue=void 0,t.fieldValueJnpfKey="",t.disabled=["null","notNull"].includes(e),t.multiple=["in","notIn"].includes(e),["select","radio","checkbox"].includes(t.jnpfKey)&&(["in","notIn"].includes(e)?t.fieldValue=[]:t.fieldValue=""),this.$set(this.ruleList[a].groups,i,t)},buildOptions:function(e){return e.forEach((function(e){e.disabled=!1;var t=e.__config__;Ze["b"].includes(t.jnpfKey)&&("dictionary"===t.dataType&&t.dictionaryType&&(e.options=[],Object(Qe["i"])(t.dictionaryType).then((function(t){e.options=t.data.list}))),"dynamic"===t.dataType&&t.propsUrl&&(e.options=[],Object(Ye["o"])(t.propsUrl).then((function(t){e.options=Array.isArray(t.data)?t.data:[]}))))})),e}}},pt=ut,ft=(a("f948"),Object(I["a"])(pt,nt,st,!1,null,"52fc0cb4",null)),mt=ft.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"approver-pane"},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.formConf}},[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("执行数据接口")]),a("InterfaceDialog",{attrs:{value:e.formConf.formId,title:e.formConf.formName,placeholder:"请选择接口"},on:{change:e.onFormIdChange}}),a("div",{staticClass:"ant-form-item-label mt-12px"},[a("label",{staticClass:"ant-form-item-no-colon"},[e._v("参数设置")])]),a("el-table",{attrs:{data:e.formConf.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n              "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(e){t.row.relationField=""}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},[t.row.required?e._l(e.noNullOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id,disabled:e.disabled}})})):e._l(e.interfaceSourceTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id,disabled:e.disabled}})}))],2)]}}])}),a("el-table-column",{attrs:{prop:"value",label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName?e.id+"("+e.fullName+")":e.id,value:e.id}})})),1):2==t.row.sourceType?[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入参数值",clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]:e._e()]}}])})],1)],1)],1)],1),e._v(">\n")],1)},ht=[],vt=a("03e8"),bt=X.filter((function(e){return 3!=e.id})),gt={name:"DeleteDataNode",components:{InterfaceDialog:vt["a"]},props:{formConf:{type:Object,default:function(){}},integrateType:{type:Number,default:1},formFieldsOptions:{type:Array,default:function(){return[]}}},data:function(){return{interfaceSourceTypeOptions:X,noNullOptions:bt}},computed:{getRuleOptions:function(){return this.formConf.formFieldList.filter((function(e){return e.id.indexOf("-")<0}))}},methods:{getRuleList:function(){return this.formConf},onFormIdChange:function(e,t){if(!e)return this.handleNull();this.formConf.formName=t.fullName,this.formConf.formId=e,this.formConf.templateJson=(t.templateJson||[]).map((function(e){return Object(P["a"])(Object(P["a"])({},e),{},{sourceType:1,relationField:""})})),this.$forceUpdate()},handleNull:function(){this.formConf.formName="",this.formConf.formId="",this.formConf.templateJson=[]},onRelationFieldChange:function(e,t){if(e){var a=this.formFieldsOptions.filter((function(t){return t.id===e}));if(a.length){var i=a[0];t.isSubTable=!(!i.__config__||!i.__config__.isSubTable)&&i.__config__.isSubTable}}}}},yt=gt,Dt=(a("36ae"),Object(I["a"])(yt,_t,ht,!1,null,"fd129ad8",null)),wt=Dt.exports,xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"approver-pane"},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.formConf}},[a("el-form-item",{attrs:{label:"接收人"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("接收人")]),a("JnpfUsersSelect",{attrs:{multiple:"",placeholder:"请选择接收人"},model:{value:e.dataForm.msgUserIds,callback:function(t){e.$set(e.dataForm,"msgUserIds",t)},expression:"dataForm.msgUserIds"}})],1),a("el-form-item",{attrs:{label:"通知内容"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{title:e.dataForm.msgName,messageSource:3},on:{change:function(t){return e.onMsgChange(t,arguments)}},model:{value:e.dataForm.msgId,callback:function(t){e.$set(e.dataForm,"msgId",t)},expression:"dataForm.msgId"}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.dataForm.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n              ")])]}}])}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box"},[e._v("\n                "+e._s(t.field)+"("+e._s(t.fieldName)+")\n              ")])}))}}])}),a("el-table-column",{attrs:{prop:"value",label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,class:{"mt-8px":i>0},attrs:{placeholder:"请配置字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName?e.id+"("+e.fullName+")":e.id,value:e.id}})})),1)}))}}])})],1)],1)],1)],1),e.viewVisible?a("Detail",{ref:"View",on:{close:function(t){e.viewVisible=!1}}}):e._e()],1)},Ct=[],kt={name:"DeleteDataNode",components:{MsgDialog:fe["a"],Detail:me["a"]},props:{formConf:{type:Object,default:function(){}},integrateType:{type:Number,default:1},formFieldsOptions:{type:Array,default:function(){return[]}}},data:function(){return{dataForm:JSON.parse(JSON.stringify(this.formConf)),viewVisible:!1}},methods:{getDataForm:function(){return this.dataForm},onMsgChange:function(e,t){var a=Object(E["a"])(t,2),i=a[0],l=a[1];if(!i)return this.dataForm.msgId="",this.dataForm.msgName="",void(this.dataForm.templateJson=[]);this.dataForm.msgId=i,this.dataForm.msgName=l.fullName,this.dataForm.templateJson=l.templateJson},onRelationFieldChange:function(e,t){if(e){var a=this.formFieldsOptions.filter((function(t){return t.id===e}));if(a.length){var i=a[0];t.isSubTable=!(!i.__config__||!i.__config__.isSubTable)&&i.__config__.isSubTable}}},goDetail:function(e){var t=this;this.viewVisible=!0,this.$nextTick((function(){t.$refs.View.init(e)}))}}},Tt=kt,Ft=(a("3aee"),Object(I["a"])(Tt,xt,Ct,!1,null,"5cbb03c0",null)),St=Ft.exports,Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"approver-pane"},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.dataForm}},[a("el-form-item",{attrs:{label:"获取方式"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("获取方式")]),a("el-radio-group",{staticClass:"common-radio formType-radio",on:{change:e.onFormTypeChange},model:{value:e.dataForm.formType,callback:function(t){e.$set(e.dataForm,"formType",t)},expression:"dataForm.formType"}},[a("el-radio",{attrs:{label:1}},[e._v("从普通表单中获取")]),a("el-radio",{attrs:{label:2}},[e._v("从流程表单中获取\n            "),a("el-tooltip",{attrs:{content:"只获取已完成的流程数据",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-radio",{attrs:{label:3}},[e._v("从数据接口中获取")])],1),1==e.dataForm.formType||2==e.dataForm.formType?a("FlowFormModal",{attrs:{value:e.dataForm.formId,title:e.dataForm.formName,enableFlow:1==e.dataForm.formType?0:1,clearable:!1,placeholder:"请选择表单"},on:{change:e.onFormIdChange}}):e._e(),3==e.dataForm.formType?[a("InterfaceDialog",{attrs:{value:e.dataForm.formId,title:e.dataForm.formName,placeholder:"请选择接口"},on:{change:e.onInterfaceChange}}),a("div",{staticClass:"ant-form-item-label mt-12px"},[a("label",{staticClass:"ant-form-item-no-colon"},[e._v("参数设置")])]),a("el-table",{attrs:{data:e.dataForm.interfaceTemplateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n              ")]}}],null,!1,3459614967)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数来源"},on:{change:function(e){t.row.relationField=""}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.interfaceSourceTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id,disabled:e.disabled}})})),1)]}}],null,!1,1270259055)}),a("el-table-column",{attrs:{prop:"value",label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.sourceType?[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",staticStyle:{width:"100%"},attrs:{placeholder:"请输入参数值",clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入参数值",clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]:e._e()]}}],null,!1,3717317025)})],1)]:e._e()],2),1==e.dataForm.formType||2==e.dataForm.formType?a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("获取条件\n          "),a("el-tooltip",{attrs:{content:"满足以下条件，触发执行动作。",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("Condition",{ref:"base",attrs:{value:e.dataForm.ruleList,matchLogic:e.dataForm.ruleMatchLogic,columnOptions:e.dataForm.formFieldList,type:1}})],1):e._e()],1)],1)],1)},Lt=[],Ot=[{id:2,fullName:"自定义"},{id:3,fullName:"为空"}],$t=(new Date,{name:"addDataNode",components:{Condition:Y["a"],FlowFormModal:Q,InterfaceDialog:vt["a"]},props:{formConf:{type:Object,default:function(){}},integrateType:{type:Number,default:1},formFieldsOptions:{type:Array,default:function(){return[]}},usedFormItems:{type:Array,default:function(){return[]}}},data:function(){return{dataForm:JSON.parse(JSON.stringify(this.formConf)),interfaceSourceTypeOptions:Ot}},methods:{getItem:function(){var e=this.$refs.base&&this.$refs.base.getData()||"";return this.dataForm.ruleList=e?e.conditionList:[],this.validData()?this.dataForm:""},onFormTypeChange:function(){this.handleNull()},handleNull:function(){this.dataForm.formName="",this.dataForm.formId="",this.dataForm.formFieldList=[],this.dataForm.ruleList=[],this.dataForm.interfaceTemplateJson=[]},validData:function(){for(var e=!0,t=0;t<this.dataForm.ruleList.length;t++)for(var a=this.dataForm.ruleList[t],i=0;i<a.groups.length;i++){var l=a.groups[i];if(!l.field)return this.$message.warning("条件字段不能为空"),void(e=!1);if(!l.symbol)return this.$message.warning("条件符号不能为空"),void(e=!1);if(!["null","notNull"].includes(l.symbol)&&(!l.fieldValue||this.jnpf.isEmpty(l.fieldValue))&&(!["inputNumber","calculate"].includes(l.jnpfKey)||["inputNumber","calculate"].includes(l.jnpfKey)&&0!==l.fieldValue))return this.$message.warning("数据值不能为空"),void(e=!1)}return e},onInterfaceChange:function(e,t){if(!e)return this.handleNull();if(this.dataForm.formId!==e){this.dataForm.formName=t.fullName,this.dataForm.formId=e,this.dataForm.ruleList=[];var a=t.fieldJson?JSON.parse(t.fieldJson):[];this.dataForm.formFieldList=a.map((function(e){return Object(P["a"])(Object(P["a"])({},e),{},{id:e.defaultValue,fullName:e.field,label:e.field?e.defaultValue+"("+e.field+")":e.defaultValue})})),this.dataForm.interfaceTemplateJson=(t.templateJson||[]).map((function(e){return Object(P["a"])(Object(P["a"])({},e),{},{sourceType:2,relationField:""})}))}},onFormIdChange:function(e,t){if(!e)return this.handleNull();this.dataForm.formName=t.fullName,this.dataForm.formId=e,this.dataForm.ruleList=[],this.getFormFieldList(e)},getFormFieldList:function(e){var t=this;Object(W["m"])(e).then((function(e){var a=e.data,i=a.formData,l=(a.enableFlow,a.flowId,{}),o=[];i&&(l=JSON.parse(i)),o=l.fields||[];var n=t.transformFieldList(o);t.dataForm.formFieldList=n.map((function(e){return Object(P["a"])(Object(P["a"])({},e),{},{label:e.fullName?e.id+"("+e.fullName+")":e.id})}))}))},transformFormJson:function(e){var t=e.map((function(e){return{__config__:{label:e.filedName,jnpfKey:e.jnpfKey||"",required:e.required||!1},__vModel__:e.filedId,multiple:e.multiple||!1}}));return t},transformFieldList:function(e){var t=[],a=function e(a,i){if(a){if(a.__vModel__&&"table"!==a.__config__.jnpfKey){var l=i&&i.__config__&&"table"===i.__config__.jnpfKey;t.push(Object(P["a"])({id:l?i.__vModel__+"-"+a.__vModel__:a.__vModel__,fullName:l?i.__config__.label+"-"+a.__config__.label:a.__config__.label},a))}Array.isArray(a)&&a.forEach((function(t){return e(t,i)})),a.__config__&&a.__config__.children&&Array.isArray(a.__config__.children)&&e(a.__config__.children,a)}};return a(e),t}}}),It=$t,jt=(a("4a0b"),Object(I["a"])(It,Nt,Lt,!1,null,"ee2f3d0e",null)),Mt=jt.exports,Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"approver-pane"},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.formConf}},[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("选择流程")]),a("FlowModal",{attrs:{value:e.flowId,title:e.formConf.flowName,placeholder:"请选择流程",allowClear:!1},on:{change:e.onFlowIdChange}})],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("自动发起审批\n          "),a("el-tooltip",{attrs:{content:"流程发起的下一节点设置选择分支或候选审批人时无法自动发起审批",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)]),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("字段设置")]),a("section",{staticClass:"condition-pane pd-10"},[a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:7}},[e._v("选择目标表单字段")]),a("el-col",{attrs:{span:5}}),a("el-col",{staticStyle:{"margin-left":"70px"},attrs:{span:12}},[e._v("设置触发表单字段或自定义值 ")])],1),e._l(e.transferList,(function(t,i){return a("el-row",{key:i,staticClass:"mt-10px",attrs:{gutter:8}},[a("el-col",{attrs:{span:7}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:"",disabled:t.required},model:{value:t.targetField,callback:function(a){e.$set(t,"targetField",a)},expression:"item.targetField"}},e._l(e.getTargetOptions(i),(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{staticClass:"leading-32px",attrs:{span:3}},[e._v("的值设为")]),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:"",disabled:t.required},on:{change:function(a){return e.onChangeSourceValue(t)}},model:{value:t.sourceType,callback:function(a){e.$set(t,"sourceType",a)},expression:"item.sourceType"}},e._l(e.sourceTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},[1===t.sourceType?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择字段",filterable:""},model:{value:t.sourceValue,callback:function(a){e.$set(t,"sourceValue",a)},expression:"item.sourceValue"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):e._e(),2===t.sourceType?a("el-input",{attrs:{placeholder:"请输入值",allowClear:""},model:{value:t.sourceValue,callback:function(a){e.$set(t,"sourceValue",a)},expression:"item.sourceValue"}}):e._e()],1),t.required?e._e():a("el-col",{staticClass:"text-center  del-icon",attrs:{span:1}},[a("i",{staticClass:"icon-ym icon-ym-btn-clearn",on:{click:function(t){return e.delTransferItem(i)}}})])],1)})),a("div",{staticClass:"link-text",on:{click:function(t){return e.addTransferItem()}}},[a("i",{staticClass:"icon-ym icon-ym-btn-add add-text"}),e._v("添加字段")])],2)]),a("el-form-item",{staticClass:"form-item"},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("发起人\n          "),a("el-tooltip",{attrs:{content:"多个审批人时产生多条流程实例",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("JnpfUserSelect",{staticClass:"ml-10",attrs:{placeholder:"请选择发起人",multiple:""},model:{value:e.initiator,callback:function(t){e.initiator=t},expression:"initiator"}})],1)],1)],1)],1)},At=[],Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popupSelect-container"},[a("div",{staticClass:"el-select",on:{click:e.openDialog}},[a("el-input",{attrs:{placeholder:e.placeholder,readonly:"","validate-event":!1},nativeOn:{mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},[a("template",{slot:"suffix"},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-arrow-up"]}),e.showClose?a("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}):e._e()])],2)],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{title:"选择流程","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"JNPF-common-layout"},[a("div",{staticClass:"JNPF-common-layout-center"},[a("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"JNPF-common-search-box-right"},[a("el-tooltip",{attrs:{effect:"dark",content:"刷新",placement:"top"}},[a("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)],1),a("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,border:!1,"highlight-current-row":"",hasNO:!1},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" ")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"fullName",label:"流程名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"flowName",label:"所属流程"}}),a("el-table-column",{attrs:{prop:"formType",label:"流程类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.flowType?"功能流程":"发起流程"))])]}}])})],1),a("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.$t("common.confirmButton"))+"\n      ")])],1)])],1)},Jt=[],Rt=a("5451"),Kt={name:"FlowFormDialog",props:{value:{default:""},title:{type:String,default:""},placeholder:{type:String,default:"请选择子流程"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},flowType:{type:Number,default:null}},model:{prop:"value",event:"input"},data:function(){return{list:[],innerValue:"",listQuery:{keyword:"",currentPage:1,pageSize:20},total:0,checked:"",checkedRow:{},listLoading:!1,inputHovering:!1,visible:!1}},computed:{showClose:function(){var e=void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.disabled&&this.inputHovering&&e;return t}},methods:{initData:function(){var e=this;this.listLoading=!0;var t=Object(P["a"])(Object(P["a"])({},this.listQuery),{},{flowType:this.flowType});Object(Rt["i"])(t).then((function(t){e.list=t.data.list,e.total=t.data.pagination.total,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},openDialog:function(){this.disabled||(this.checked=this.value,this.checkedRow={id:this.value,fullName:this.title},this.visible=!0,this.reset())},reset:function(){this.listQuery.keyword="",this.search()},search:function(){this.listQuery.currentPage=1,this.listQuery.pageSize=20,this.initData()},clear:function(){this.checked="",this.checkedRow={},this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow)},select:function(){this.checked&&(this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow),this.visible=!1)},rowClick:function(e){this.checked=e.id,this.checkedRow=e}}},Bt=Kt,Et=(a("0cc1"),Object(I["a"])(Bt,Pt,Jt,!1,null,"b6d34a22",null)),zt=Et.exports,qt={field:"",symbol:"==",fieldValueType:1,fieldValue:void 0,jnpfKey:"",fieldValueJnpfKey:"",cellKey:+new Date},Wt={logic:"and",groups:[qt]},Ut={name:"addDataNode",components:{FlowModal:zt},props:{formConf:{type:Object,default:function(){}},integrateType:{type:Number,default:1},formFieldsOptions:{type:Array,default:function(){return[]}},getFormFieldList:{type:Function,default:null},getFlowFormFieldList:{type:Function,default:null},usedFormItems:{type:Array,default:function(){return[]}},flowOptions:{type:Array,default:function(){return[]}}},data:function(){return{sourceTypeOptions:Z,transferList:JSON.parse(JSON.stringify(this.formConf.transferList)),flowId:JSON.parse(JSON.stringify(this.formConf.flowId)),initiator:JSON.parse(JSON.stringify(this.formConf.initiator||[]))}},computed:{getRuleOptions:function(){var e=this.formConf.formFieldList.filter((function(e){return e.id.indexOf("-")<0}));return e.filter((function(e){return!["relationFormAttr","popupAttr","uploadFile","uploadImg","colorPicker","editor"].includes(e.__config__.jnpfKey)}))}},methods:{onChangeFlow:function(){var e=this;if(!this.flowId)return this.formConf.flowName="";var t=this.flowOptions.filter((function(t){return t.id===e.flowId}))[0];this.formConf.flowName=t.fullName},onChangeSourceValue:function(e){e.sourceValue&&(e.sourceValue=void 0)},getItem:function(){var e={transferList:this.transferList,flowId:this.flowId,initiator:this.initiator||[]};return e},onChangeUpdate:function(){this.$forceUpdate()},onFlowIdChange:function(e,t){if(this.formConf.transferList=[JSON.parse(JSON.stringify(Wt))],!e)return handleNull();this.formConf.flowName=t.fullName,this.getFlowFormFieldList(e,"launchFlow"),this.flowId=e,this.transferList=[],this.formConf.transferList=[],this.formConf.flowId=e},handleNull:function(){this.formConf.flowName="",this.formConf.flowId="",this.flowId="",this.formConf.formFieldList=[],this.transferList=[]},addTransferItem:function(){this.transferList.push({targetField:"",targetFieldLabel:"",sourceType:1,sourceValue:"",required:!1})},delTransferItem:function(e){this.transferList.splice(e,1)},getTargetOptions:function(e){for(var t=[],a=0;a<this.transferList.length;a++){var i=this.transferList[a];i.targetField&&e!==a&&t.push(i.targetField)}var l=this.formConf.formFieldList.filter((function(e){return!t.includes(e.id)}));return l}}},Ht=Ut,Gt=(a("b904"),Object(I["a"])(Ht,Vt,At,!1,null,"b92af2e6",null)),Qt=Gt.exports,Yt={props:["value","processData","flowType","formInfo"],components:{StartNode:Pe,AddDataNode:Ue,UpdateDataNode:ot,DeleteDataNode:mt,DataInterfaceNode:wt,MessageNode:St,GetDataNode:Mt,LaunchFlowNode:Qt},data:function(){return{properties:{},activeKey:"1",startForm:JSON.parse(JSON.stringify(f.defaultStartForm)),addDataForm:{},updateDataForm:{},deleteDataForm:{},dataInterfaceForm:{},integrateType:this.formInfo.type||1,messageForm:{},getDataForm:{},launchFlowForm:{},visible:!1,formFieldList:[],flowOptions:[],key:"",key2:""}},computed:{notUseConNum:function(){return this.pconditions.length-this.showingPCons.length+1},formFieldsOptions:function(){var e=[];e=2!=this.integrateType?this.processData.properties.formFieldList||[]:this.processData.childNode.properties.formFieldList||[];var t=e.some((function(e){return"@formId"===e.id}));return t||e.unshift({fullName:"@表单ID",id:"@formId",label:"@formId(@表单ID)"}),e},usedFormItems:function(){return this.formFieldsOptions.filter((function(e){return e.id.indexOf("-")<0}))},funcOptions:function(){var e=[].concat(Object(n["a"])(systemFieldOptions),Object(n["a"])(this.formFieldsOptions));return e},funcRequiredOptions:function(){return this.formFieldsOptions.filter((function(e){return e.__config__&&e.__config__.required}))},rejectStepOptions:function(){var e=[],t=[{nodeId:"2",properties:{title:"自选审批节点"}}];return e=[].concat(Object(n["a"])(defaultStep),t,Object(n["a"])(this.realNodeList)),2==this.approverForm.rejectType&&(e=e.filter((function(e){return 1!=e.nodeId}))),e}},methods:{initCommonNodeData:function(e){var t=this,a=JSON.parse(JSON.stringify(this.value.properties));Object.assign(this[e+"Form"],a),this.$nextTick(Object(R["a"])(Object(J["a"])().mark((function a(){var i,l,o;return Object(J["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(("addData"===e||"updateData"===e||"launchFlow"==e)&&t[e+"Form"].enableFlow&&t[e+"Form"].formId&&t.getFlowOptions(t[e+"Form"].formId),2==t.integrateType&&["addData","updateData","deleteData"].includes(e)&&!t[e+"Form"].ruleList.length&&(i={field:"",symbol:"==",fieldValueType:1,fieldValue:void 0,jnpfKey:"",fieldValueJnpfKey:"",cellKey:+new Date},l={logic:"and",groups:[i]},t[e+"Form"].ruleList.push(JSON.parse(JSON.stringify(l))),t.key=+new Date),3!=t.integrateType||"start"!==e||t[e+"Form"].webhookUrl){a.next=11;break}return a.next=5,Object(Fe["l"])(t.formInfo.id);case 5:if(o=a.sent,o){a.next=8;break}return a.abrupt("return");case 8:t[e+"Form"].webhookUrl=o.data.webhookUrl,t[e+"Form"].webhookGetFieldsUrl=o.data.requestUrl,t[e+"Form"].webhookRandomStr=o.data.randomStr;case 11:case"end":return a.stop()}}),a)}))))},transferExist:function(e){for(var t=this[e+"Form"].transferList,a=!0,i=0;i<t.length;i++){var l=t[i];if(l.required){if(!l.sourceValue){this.$message.warning("".concat(l.targetFieldLabel,"的值不能为空")),a=!1;break}}else if(!l.targetField){this.$message.warning("目标表单字段不能为空"),a=!1;break}}return a},conditionExist:function(e){var t=this[e+"Form"].ruleList,a=!0;e:for(var i=0;i<t.length;i++){var l=t[i];1==this.integrateType&&("updateData"===e&&"更新条件","deleteData"===e&&"删除条件"),2==this.integrateType&&"目标表单";for(var o=0;o<l.groups.length;o++){var n=l.groups[o];if(!n.field){this.$message.warning("条件字段不能为空"),a=!1;break e}if(!n.symbol){this.$message.warning("条件符号不能为空"),a=!1;break}if(!["null","notNull"].includes(n.symbol)&&!["switch"].includes(n.jnpfKey)&&(!n.fieldValue||this.jnpf.isEmpty(n.fieldValue))&&(!["inputNumber","calculate","rate"].includes(n.jnpfKey)||["inputNumber","calculate","rate"].includes(n.jnpfKey)&&0!==n.fieldValue)){this.$message.warning("数据值不能为空"),a=!1;break}}}return a},getFormFieldList:function(e,t){var a=this;this.flowOptions=[],Object(W["m"])(e).then((function(e){var i=e.data,l=i.formData,o=i.enableFlow,n=i.flowId,s={},r=[];l&&(s=JSON.parse(l)),r=s.fields||[];var c=a.transformFieldList(r);a[t+"Form"].formFieldList=c.map((function(e){return Object(P["a"])(Object(P["a"])({},e),{},{label:e.fullName?e.id+"("+e.fullName+")":e.id})})),1==o&&a.getFlowOptions(n),"addData"!==t&&"launchFlow"!==t||a.updateTransferList(t),a.key=+new Date}))},getFlowFormFieldList:function(e,t){var a=this;this.flowOptions=[],Object(Rt["t"])(e).then((function(e){var i=e.data,l=i.formType,o=void 0===l?1:l,n=i.propertyJson,s={},r=[];n&&(s=JSON.parse(n)),r=1==o?a.transformFormJson(s):s.fields;var c=a.transformFieldList(r);a[t+"Form"].formFieldList=c.map((function(e){return Object(P["a"])(Object(P["a"])({},e),{},{label:e.fullName?e.id+"("+e.fullName+")":e.id})})),"launchFlow"===t&&a.updateTransferList(t)}))},getFlowOptions:function(e){var t=this;Object(Rt["v"])(e,"1").then((function(e){t.flowOptions=e.data}))},transformFormJson:function(e){var t=e.map((function(e){return{__config__:{label:e.filedName,jnpfKey:e.jnpfKey||"",required:e.required||!1},__vModel__:e.filedId,multiple:e.multiple||!1}}));return t},transformFieldList:function(e){var t=[],a=function e(a,i){if(a){if(a.__vModel__&&"table"!==a.__config__.jnpfKey){var l=i&&i.__config__&&"table"===i.__config__.jnpfKey;t.push(Object(P["a"])({id:l?i.__vModel__+"-"+a.__vModel__:a.__vModel__,fullName:l?i.__config__.label+"-"+a.__config__.label:a.__config__.label},a))}Array.isArray(a)&&a.forEach((function(t){return e(t,i)})),a.__config__&&a.__config__.children&&Array.isArray(a.__config__.children)&&e(a.__config__.children,a)}};return a(e),t},updateTransferList:function(e){for(var t=this[e+"Form"].formFieldList,a=[],i=0;i<t.length;i++)t[i].__config__.required&&a.push({targetField:t[i].id,targetFieldLabel:t[i].fullName,sourceType:1,sourceValue:"",required:!0});this[e+"Form"].transferList=a,this.key=+new Date},isStartNode:function(){return!!this.value&&_.isStartNode(this.value)},isAddDataNode:function(){return!!this.value&&_.isAddDataNode(this.value)},isUpdateDataNode:function(){return!!this.value&&_.isUpdateDataNode(this.value)},isDeleteDataNode:function(){return!!this.value&&_.isDeleteDataNode(this.value)},isDataInterfaceNode:function(){return!!this.value&&_.isDataInterfaceNode(this.value)},isMessageNode:function(){return!!this.value&&_.isMessageNode(this.value)},isGetDataNode:function(){return!!this.value&&_.isGetDataNode(this.value)},isLaunchFlowNode:function(){return!!this.value&&_.isLaunchFlowNode(this.value)},startNodeConfirm:function(){var e=this.$refs&&this.$refs.startNodeRef.getFormConf();if(e){if(this.startForm=e,1==this.integrateType){Object.assign(this.properties,this.startForm);var t=1==this.startForm.triggerEvent?"新增数据":2==this.startForm.triggerEvent?"修改数据":"删除数据",a="当[".concat(this.startForm.formName,"]表单[").concat(t,"]成功时");this.$emit("confirm",this.properties,a)}else 2==this.integrateType?(Object.assign(this.properties,this.startForm),this.$emit("confirm",this.properties,this.startForm.cron)):(Object.assign(this.properties,this.startForm),this.$emit("confirm",this.properties,"已设置"));this.cancel()}},addDataNodeConfirm:function(){var e=this.$refs&&this.$refs.addNodeRef.getItem();if(this.addDataForm.transferList=e.transferList,this.addDataForm.ruleList=e.ruleList,2==this.integrateType&&(this.addDataForm.addRule=e.addRule),!this.addDataForm.formId)return this.$message.error("请选择目标表单");if(this.addDataForm.enableFlow&&!this.addDataForm.flowId)return this.$message.error("请选择流程");if(this.transferExist("addData")&&(1==this.integrateType||this.conditionExist("addData"))){Object.assign(this.properties,this.addDataForm);var t="在[".concat(this.addDataForm.formName,"]表单中新增数据");this.$emit("confirm",this.properties,t),this.cancel()}},updateDataNodeConfirm:function(){var e=this.$refs&&this.$refs.updateNodeRef.getTransferList();if(this.updateDataForm.transferList=e.transferList,this.updateDataForm.ruleList=e.ruleList,this.updateDataForm.unFoundRule=e.unFoundRule,this.updateDataForm.ruleMatchLogic=e.ruleMatchLogic,!this.updateDataForm.formId)return this.$message.error("请选择目标表单");if(this.updateDataForm.enableFlow&&!this.updateDataForm.flowId)return this.$message.error("请选择流程");if(this.transferExist("updateData")&&this.conditionExist("updateData")){Object.assign(this.properties,this.updateDataForm);var t="在[".concat(this.updateDataForm.formName,"]表单中更新数据");this.$emit("confirm",this.properties,t),this.cancel()}},deleteDataNodeConfirm:function(){if(!this.deleteDataForm.formId)return this.$message.error("请选择目标表单");var e=this.$refs.deleteNodeRef.getRuleList();if(this.deleteDataForm.ruleList=e,this.conditionExist("deleteData")){Object.assign(this.properties,this.deleteDataForm);var t="执行[".concat(this.deleteDataForm.formName,"]表单中[删除数据]");this.$emit("confirm",this.properties,t),this.cancel()}},dataInterfaceNodeConfirm:function(){if(!this.dataInterfaceForm.formId)return this.$message.error("请选择执行数据接口");Object.assign(this.properties,this.dataInterfaceForm);var e="执行[".concat(this.dataInterfaceForm.formName,"]数据接口");this.$emit("confirm",this.properties,e),this.cancel()},messageNodeConfirm:function(){if(this.messageForm=this.$refs&&this.$refs.messageNodeRef.getDataForm(),!this.messageForm.msgUserIds||!this.messageForm.msgUserIds.length)return this.$message.error("请选择接收人");if(!this.messageForm.msgId)return this.$message.error("请选择发送配置");Object.assign(this.properties,this.messageForm);var e="执行[".concat(this.messageForm.msgName,"]的消息发送");this.$emit("confirm",this.properties,e),this.cancel()},getDataNodeConfirm:function(){var e=this.$refs&&this.$refs.getDataNodeRef.getItem();if(e){this.getDataForm=e;var t=3==this.getDataForm.formType?"请选择数据接口":"请选择表单";if(!this.getDataForm.formId)return this.$message.error(t);Object.assign(this.properties,this.getDataForm);var a="从[".concat(this.getDataForm.formName,"]中获取数据");this.$emit("confirm",this.properties,a),this.cancel()}},launchFlowConfirm:function(){var e=this.$refs.getLaunchFlowRef.getItem();if(this.launchFlowForm.transferList=e.transferList||[],!e.flowId)return this.$message.error("请选择流程");if(this.launchFlowForm.flowId=e.flowId,!e.initiator.length)return this.$message.error("请选择发起人");if(this.launchFlowForm.initiator=e.initiator,this.transferExist("launchFlow")){Object.assign(this.properties,this.launchFlowForm);var t="发起[".concat(this.launchFlowForm.flowName,"]流程");this.$emit("confirm",this.properties,t),this.cancel()}},cancel:function(){var e=this;setTimeout((function(){e.$emit("cancel"),e.visible=!1}),0)},handleOk:function(){this.isStartNode()&&this.startNodeConfirm(),this.isAddDataNode()&&this.addDataNodeConfirm(),this.isUpdateDataNode()&&this.updateDataNodeConfirm(),this.isDeleteDataNode()&&this.deleteDataNodeConfirm(),this.isDataInterfaceNode()&&this.dataInterfaceNodeConfirm(),this.isMessageNode()&&this.messageNodeConfirm(),this.isGetDataNode()&&this.getDataNodeConfirm(),this.isLaunchFlowNode()&&this.launchFlowConfirm()}},watch:{visible:function(e){if(!e)return this.addDataForm=JSON.parse(JSON.stringify(f.defaultStartForm)),this.startForm=JSON.parse(JSON.stringify(f.defaultStartForm)),this.updateDataForm=JSON.parse(JSON.stringify(f.defaultStartForm)),this.deleteDataForm=JSON.parse(JSON.stringify(f.defaultStartForm)),this.dataInterfaceForm=JSON.parse(JSON.stringify(f.defaultStartForm)),this.messageForm=JSON.parse(JSON.stringify(f.defaultStartForm)),void(this.getDataForm=JSON.parse(JSON.stringify(f.defaultStartForm)));this.isStartNode()&&this.initCommonNodeData("start"),this.isAddDataNode()&&this.initCommonNodeData("addData"),this.isUpdateDataNode()&&this.initCommonNodeData("updateData"),this.isDeleteDataNode()&&this.initCommonNodeData("deleteData"),this.isDataInterfaceNode()&&this.initCommonNodeData("dataInterface"),this.isMessageNode()&&this.initCommonNodeData("message"),this.isGetDataNode()&&this.initCommonNodeData("getData"),this.isLaunchFlowNode()&&this.initCommonNodeData("launchFlow")},value:function(e){e&&e.properties&&(this.visible=!0,this.properties=JSON.parse(JSON.stringify(e.properties)),this.properties&&_.isConditionNode(e)&&this.getPriorityLength())}}},Zt=Yt,Xt=(a("9fbb"),a("cade"),Object(I["a"])(Zt,V,A,!1,null,"23b3c1bb",null)),ea=Xt.exports,ta=a("fa72"),aa=function(e){return["billRule","createUser","createTime","modifyTime","modifyUser","currPosition","currOrganize","table"].includes(e)},ia=function(e){if(!e.__config__||!e.__config__.jnpfKey)return"";var t=e.__config__.jnpfKey;return["inputNumber","datePicker","rate","slider"].includes(t)?"number":["checkbox","uploadFile","uploadImg","cascader","organizeSelect","areaSelect"].includes(t)||["select","depSelect","posSelect","userSelect","usersSelect","treeSelect","roleSelect","groupSelect"].includes(t)&&e.multiple?"array":""},la={name:"ProcessMain",props:["conf","flowType","verifyMode","formInfo"],data:function(){var e={};return e=this.conf,{data:e,scaleVal:100,step:5,updateId:0,activeData:null,isProcessCmp:!0}},methods:{updateFiled:function(e){var t=this,a=function e(a){Array.isArray(a)&&a.forEach((function(t){return e(t)})),"approver"!==a.type&&"start"!==a.type||t.initFormOperates(a),a.conditionNodes&&Array.isArray(a.conditionNodes)&&e(a.conditionNodes),a.childNode&&e(a.childNode)};a(e)},initFormOperates:function(e){var t=e.properties&&e.properties.formOperates||[],a=[],i=function(a){var i=t.filter((function(e){return e.id===a}));return i.length?i[0].write:_.isStartNode(e)},l=function(e){var a=t.filter((function(t){return t.id===e}));return!a.length||a[0].read},o=function(e){var a=t.filter((function(t){return t.id===e}));return!!a.length&&a[0].required},n=function e(t,n){if(t){if(t.__vModel__){var s=n&&n.__config__&&"table"===n.__config__.jnpfKey,r=s?n.__vModel__+"-"+t.__vModel__:t.__vModel__;a.push({id:r,name:s?n.__config__.label+"-"+t.__config__.label:t.__config__.label,required:t.__config__.required||o(r),requiredDisabled:aa(t.__config__.jnpfKey)||t.__config__.required,jnpfKey:t.__config__.jnpfKey,dataType:ia(t),read:l(r),write:i(r)})}Array.isArray(t)&&t.forEach((function(t){return e(t,n)})),t.__config__&&t.__config__.children&&Array.isArray(t.__config__.children)&&e(t.__config__.children,t)}};n(Object(ta["a"])()),e.properties.formOperates=a},eventReceiver:function(e){var t=e.event,a=e.args;"edit"!==t?(_[t].apply(_,Object(n["a"])(a)),this.forceUpdate()):this.activeData=a[0]},forceUpdate:function(){this.updateId=this.updateId+1},changeScale:function(e){if(this.scaleVal>=0&&this.scaleVal<=200){if(200===this.scaleVal&&this.scaleVal+e>200)return;if(0===this.scaleVal&&this.scaleVal+e<0)return;this.scaleVal+=e}},onPropEditConfirm:function(e,t){this.activeData.content=t||"请设置条件";var a=this.activeData.properties;this.activeData.properties=e,_.isConditionNode(this.activeData)&&(e.priority!==a.priority&&_.resortPrioByCNode(this.activeData,a.priority,this.data),_.setDefaultCondition(this.activeData,this.data)),_.isStartNode(this.activeData)&&this.$emit("startNodeChange",this.data),this.onClosePanel(),this.forceUpdate()},onClosePanel:function(){this.activeData=null},isFilledPCon:function(e){var t=!1,a=function(e,t){return e.childNode&&i(e.childNode,t)},i=function(i,l){if(!t&&i){if(Array.isArray(i.conditionNodes)){var o=i.conditionNodes.some((function(t){var a=t.properties.conditions||[];return Array.isArray(e)?a.some((function(t){return e.includes(t.formId)})):a.length>0}));o?l():i.conditionNodes.forEach((function(e){return a(e,l)}))}a(i,l)}};return i(this.data,(function(){return t=!0})),t}},render:function(e){return e("div",{class:"flow-container"},[e("div",{class:"scale-slider"},[e("i",{class:"btn  el-icon-minus",on:{click:this.changeScale.bind(this,-this.step)}}),e("span",{style:"font-size:14px;"},[this.scaleVal,"%"]),e("i",{class:"btn  el-icon-plus ",on:{click:this.changeScale.bind(this,this.step)}})]),e(M,{attrs:{verifyMode:this.verifyMode,data:this.data},key:this.updateId,on:{emits:this.eventReceiver},style:{transform:"scale(".concat(this.scaleVal/100,")")}}),e(ea,{attrs:{value:this.activeData,flowType:this.flowType||0,processData:this.data,formInfo:this.formInfo},on:{confirm:this.onPropEditConfirm,cancel:this.onClosePanel}})])}},oa=la,na=(a("78a8"),Object(I["a"])(oa,N,L,!1,null,"70327672",null)),sa=na.exports,ra=a("1980"),ca=a.n(ra),da={name:"Process",props:["flowType","conf","formInfo"],data:function(){return{activeConf:null,key:+new Date,loading:!1,verifyMode:!1,flowList:[],visible:!1,handleType:"",defaultData:{},formFieldList:{},templateJson:null,formData:null}},components:{ProcessMain:sa,draggable:ca.a},created:function(){this.init()},methods:{init:function(){var e=this;Object(Fe["f"])(this.formInfo.id).then((function(t){e.formData=t.data||{},e.templateJson=t.data.templateJson?JSON.parse(t.data.templateJson):null,e.defaultData=h(e.formData.type),e.initData()}))},initData:function(){var e=this;this.loading=!0,null!==this.templateJson&&"object"===Object(o["a"])(this.templateJson)&&"{}"!==JSON.stringify(this.templateJson)?this.templateJson=this.templateJson:this.templateJson=JSON.parse(JSON.stringify(this.defaultData)),this.$nextTick((function(){e.loading=!1}))},getData:function(){var e=this;return new Promise((function(t,a){e.verifyMode=!0,e.formData.templateJson=e.templateJson,_.checkAllNode(e.formData.templateJson)?t({data:e.formData}):a({msg:""})}))}}},ua=da,pa=(a("3d85"),Object(I["a"])(ua,i,l,!1,null,"079eb553",null));t["a"]=pa.exports},b243:function(e,t,a){},b28f:function(e,t,a){},b3c4:function(e,t,a){"use strict";a("4790")},b551:function(e,t,a){"use strict";a("c925")},b70b:function(e,t,a){"use strict";a("3376")},b715:function(e,t,a){},b7b8:function(e,t,a){"use strict";a("95a4")},b847:function(e,t,a){"use strict";a("8de7")},b8bb:function(e,t,a){"use strict";a("5ca16")},b8c9:function(e,t,a){"use strict";a("f91c")},b904:function(e,t,a){"use strict";a("c529")},ba42:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popupSelect-container"},[a("div",{staticClass:"el-select"},[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center table-dialog",attrs:{title:1==e.type?"查询条件选择":"显示内容选择","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"600px","modal-append-to-body":!1},on:{"update:visible":function(t){e.visible=t},close:e.onClose}},[a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.list,border:!1,"highlight-current-row":"","row-key":"__vModel__",hasNO:!1,"has-c":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{label:"字段",prop:"__vModel__",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.__config__.label?t.row.__vModel__+"("+t.row.__config__.label+")":t.row.__vModel__)+"\n          ")]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)],1)])},l=[],o=(a("ac6a"),a("ade3")),n={props:{type:{default:""},placeholder:{type:String,default:"请选择"},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},collapseTags:{type:Boolean,default:!1},selectedList:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}},clearable:{type:Boolean,default:!1},size:String},model:{prop:"value",event:"input"},data:function(){return Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({listQuery:{currentPage:1,pageSize:20,sort:"desc",sidx:""},treeData:[],allList:[],keyword:"",innerValue:"",visible:!1,loading:!1,props:{children:"children",label:"table",isLeaf:"isLeaf"},listLoading:!1},"keyword",""),"checked",""),"checkedList",[]),"selectedData",[]),"tagsList",[]),"inputHovering",!1),"inputWidth",0),"initialInputHeight",0),"total",0)},computed:{showClose:function(){var e=void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.disabled&&this.inputHovering&&e;return t}},created:function(){},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))}},methods:Object(o["a"])(Object(o["a"])({echoTable:function(e){var t=this;e.forEach((function(e){t.$refs.multipleTable.$refs.JNPFTable.toggleRowSelection(e,!0)}))},closeDialog:function(){this.checked="",this.selectedData=[],this.$emit("update:visible",!1)},handleSelectionChange:function(e){this.selectedData=e},onClose:function(){},openDialog:function(){var e=this;this.selectDisabled||(this.selectedData=this.selectedList,this.selectedData.length||(this.selectedData=[]),this.visible=!0,this.$nextTick((function(){if(e.list&&e.list.forEach((function(t){e.$refs.multipleTable.$refs.JNPFTable.toggleRowSelection(t,!1)})),e.list.length&&e.selectedList.length){var t=[];e.list.forEach((function(a){e.selectedList.forEach((function(e){a.__vModel__==e.__vModel__&&t.push(a)}))})),e.echoTable(t)}})))},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)},confirm:function(){if(this.multiple){this.innerValue="",this.tagsList=JSON.parse(JSON.stringify(this.selectedData));var e=this.selectedData.map((function(e){return e.id}));this.$emit("input",e),this.$emit("change",e,this.selectedData),this.$emit("changeField",this.selectedData)}this.visible=!1},deleteTag:function(e,t){this.selectedData.splice(t,1),this.confirm(),e.stopPropagation()},handleClearClick:function(e){this.selectedData=[],this.confirm(),e.stopPropagation()},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,a=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],i=e.$refs.tags,l=i?Math.round(i.getBoundingClientRect().height):0,o=e.initialInputHeight||40;a.style.height=0===e.selectedData.length?o+"px":Math.max(i?l+(l>o?6:0):0,o)+"px"}}))}},"resetInputWidth",(function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width})),"handleResize",(function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()}))},s=n,r=(a("67a4"),a("2877")),c=Object(r["a"])(s,i,l,!1,null,"1edcccd6",null);t["a"]=c.exports},ba4e:function(e,t,a){"use strict";a("e211")},ba8c:function(e,t,a){"use strict";a("d658")},bcaaf:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"columnDesign-box"},[i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.webType||3==e.webType||4==e.webType,expression:"webType==2||webType==3||webType==4"}],staticStyle:{height:"100%"}},[i("column-main",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.currentTab,expression:"currentTab==='pc'"}],ref:"columnMain",attrs:{conf:e.columnData,modelType:e.modelType,webType:e.webType,interfaceId:e.interfaceId,templateJson:e.templateJson,viewFields:e.viewFields}}),i("column-main-app",{directives:[{name:"show",rawName:"v-show",value:"app"===e.currentTab,expression:"currentTab==='app'"}],ref:"columnMainApp",attrs:{conf:e.appColumnData,modelType:e.modelType,webType:e.webType,interfaceId:e.interfaceId,templateJson:e.templateJson,viewFields:e.viewFields}}),i("div",{staticClass:"head-tabs"},[i("el-button",{class:{"unActive-btn":"pc"!==e.currentTab},attrs:{icon:"icon-ym icon-ym-pc",type:"text",size:"medium"},on:{click:function(t){return e.currentTabChange("pc")}}},[e._v("桌面端")]),i("el-button",{class:{"unActive-btn":"app"!==e.currentTab},attrs:{icon:"icon-ym icon-ym-mobile",type:"text",size:"medium"},on:{click:function(t){return e.currentTabChange("app")}}},[e._v("移动端")])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2!=e.webType&&4!=e.webType,expression:"webType!=2&&webType!=4"}],staticClass:"column-empty-info"},[i("img",{staticClass:" empty-img",attrs:{src:a("786f")}}),i("p",[e._v("开启后，表单带有数据列表")]),i("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.$emit("openList")}}},[e._v("开启列表\n    ")])],1)])},l=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columnDesign-container"},[a("div",{staticClass:"main-board"},[a("div",{staticClass:"search-box"},[a("h4",{staticClass:"cap"},[e._v("查询字段")]),a("el-table",{ref:"dragTableSearch",staticClass:"JNPF-common-table",attrs:{data:e.columnData.searchList,"row-key":function(e){return e.id}}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"label",label:"列名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"列名"},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"字段",width:"600"}}),4==e.webType?a("el-table-column",{attrs:{prop:"jnpfKey",label:"输入类型",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{key:e.key,attrs:{placeholder:"请选择",disabled:t.row.__config__.isFromParam},on:{change:function(a){return e.onJnpfKeyChange(a,t.row,t.$index)}},model:{value:t.row.jnpfKey,callback:function(a){e.$set(t.row,"jnpfKey",a)},expression:"scope.row.jnpfKey"}},e._l(e.viewJnpfKeyOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1),["select","datePicker","timePicker","organizeSelect","depSelect","userSelect"].includes(t.row.__config__.jnpfKey)&&!t.row.__config__.isFromParam?[a("i",{staticClass:"el-icon-setting",staticStyle:{"margin-left":"10px","font-size":"16px",cursor:"pointer"},attrs:{title:"组件属性设置"},on:{click:function(a){return e.openExtraConfig(t.row,t.$index)}}})]:e._e()]}}],null,!1,2303200658)}):e._e(),a("el-table-column",{attrs:{prop:"searchType",label:"条件类型",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.__config__.isFromParam?e._e():a("el-select",{attrs:{placeholder:"请选择",disabled:"input"!==t.row.jnpfKey&&"textarea"!==t.row.jnpfKey},model:{value:t.row.searchType,callback:function(a){e.$set(t.row,"searchType",a)},expression:"scope.row.searchType"}},[a("el-option",{attrs:{label:"等于查询",value:1}}),a("el-option",{attrs:{label:"模糊查询",value:2}}),a("el-option",{attrs:{label:"范围查询",value:3}})],1)]}}])}),4!=e.webType?a("el-table-column",{attrs:{prop:"label",label:"默认值",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.textBoxList.includes(t.row.jnpfKey)?a("el-input",{attrs:{placeholder:"默认值"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"inputNumber"===t.row.jnpfKey||"rate"===t.row.jnpfKey||"slider"===t.row.jnpfKey?a("num-range",{attrs:{precision:t.row.precision,clearable:"",filterable:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),e.selectionBoxList.includes(t.row.jnpfKey)?a("el-select",{key:t.row.__config__.renderKey,staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",multiple:t.row.searchMultiple,clearable:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}},e._l(t.row.options,(function(e,i){return a("el-option",{key:i,attrs:{label:e[t.row.props.label],value:e[t.row.props.value]}})})),1):e._e(),"cascader"===t.row.jnpfKey?a("JnpfCascader",{staticStyle:{width:"100%"},attrs:{options:t.row.options,clearable:"","show-all-levels":t.row.showAllLevels,props:t.row.props,multiple:t.row.searchMultiple,filterable:"",placeholder:"请选择"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"autoComplete"===t.row.jnpfKey?a("JnpfAutoComplete",{attrs:{placeholder:"请选择",interfaceId:t.row.interfaceId,clearable:"",propsValue:t.row.propsValue,relationField:t.row.relationField,templateJson:t.row.templateJson,total:t.row.total},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"areaSelect"===t.row.jnpfKey?a("JnpfAreaSelect",{attrs:{placeholder:"请选择"+t.row.fullName,level:t.row.level,clearable:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"datePicker"===t.row.jnpfKey?a("JnpfDateRangePicker",{attrs:{type:t.row.type,clearable:"",format:t.row.format,startPlaceholder:"开始日期",endPlaceholder:"结束日期"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"timePicker"===t.row.jnpfKey?a("el-time-picker",{staticClass:"item",staticStyle:{width:"100%"},attrs:{"start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:"","value-format":t.row.format,format:t.row.format,"is-range":""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"organizeSelect"===t.row.jnpfKey?a("JnpfOrganizeSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.row.label,clearable:"",multiple:t.row.searchMultiple,selectType:t.row.selectType,ableIds:t.row.ableIds},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"depSelect"===t.row.__config__.jnpfKey?a("JnpfDepSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:t.row.selectType,ableIds:t.row.ableIds,multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"posSelect"===t.row.__config__.jnpfKey?a("JnpfPosSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:t.row.selectType,ableIds:t.row.ableIds,multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"userSelect"===t.row.jnpfKey?a("JnpfUserSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:"all"!=t.row.selectType&&"custom"!=t.row.selectType?"all":t.row.selectType,ableIds:t.row.ableIds,multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"usersSelect"===t.row.jnpfKey?a("JnpfUsersSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:t.row.selectType,ableIds:t.row.ableIds,multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"roleSelect"===t.row.__config__.jnpfKey?a("JnpfRoleSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",multiple:t.row.searchMultiple,ableIds:t.row.ableIds,selectType:t.row.selectType},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"groupSelect"===t.row.__config__.jnpfKey?a("JnpfGroupSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:t.row.selectType,multiple:t.row.searchMultiple,ableIds:t.row.ableIds},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e()]}}],null,!1,2960253106)}):e._e(),4!=e.webType?a("el-table-column",{attrs:{prop:"isKeyword",label:"关键词",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{disabled:!e.canSetKeyword.includes(t.row.jnpfKey)||e.getIsKeywordDisabled&&!t.row.isKeyword},model:{value:t.row.isKeyword,callback:function(a){e.$set(t.row,"isKeyword",a)},expression:"scope.row.isKeyword"}})]}}],null,!1,3151298112)}):e._e(),a("el-table-column",{attrs:{prop:"searchMultiple",label:"是否多选",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[["select","depSelect","roleSelect","userSelect","usersSelect","organizeSelect","posSelect","groupSelect"].includes(t.row.jnpfKey)?a("el-checkbox",{on:{change:function(a){return e.onSearchMultipleChange(t.row,t.$index)}},model:{value:t.row.searchMultiple,callback:function(a){e.$set(t.row,"searchMultiple",a)},expression:"scope.row.searchMultiple"}}):a("el-checkbox",{attrs:{disabled:""}})]}}])})],1)],1),a("el-divider"),a("div",{staticClass:"column-box"},[a("h4",{staticClass:"cap"},[e._v("列表字段")]),a("el-table",{ref:"dragTable",staticClass:"JNPF-common-table",attrs:{data:e.columnData.columnList,"row-key":function(e){return e.prop}}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),4!=e.webType?a("el-table-column",{attrs:{prop:"label",label:"列名"}}):a("el-table-column",{attrs:{prop:"label",label:"列名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"列名"},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"字段"}}),a("el-table-column",{attrs:{prop:"sortable",label:"排序",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{disabled:t.row.__config__&&(t.row.__config__.isSubTable||e.noGroupList.includes(t.row.__config__.jnpfKey))},model:{value:t.row.sortable,callback:function(a){e.$set(t.row,"sortable",a)},expression:"scope.row.sortable"}})]}}])}),2!=e.columnData.childTableStyle?a("el-table-column",{attrs:{prop:"align",label:"冻结"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",filterable:"",disabled:t.row.__config__&&t.row.__config__.isSubTable},on:{change:e.onFixedChange},model:{value:t.row.fixed,callback:function(a){e.$set(t.row,"fixed",a)},expression:"scope.row.fixed"}},e._l(e.fixedOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}],null,!1,1844020476)}):e._e(),a("el-table-column",{attrs:{prop:"align",label:"对齐"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.align,callback:function(a){e.$set(t.row,"align",a)},expression:"scope.row.align"}},e._l(e.alignOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"width",label:"宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"宽度",min:0,precision:0,"controls-position":"right"},model:{value:t.row.width,callback:function(a){e.$set(t.row,"width",a)},expression:"scope.row.width"}})]}}])})],1)],1)],1),a("div",{staticClass:"right-board"},[a("el-tabs",{staticClass:"top-tabs",model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:"查询字段",name:"search"}}),a("el-tab-pane",{attrs:{label:"列表字段",name:"field"}}),a("el-tab-pane",{attrs:{label:"列表属性",name:"column"}})],1),a("div",{staticClass:"field-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"search"===e.currentTab,expression:"currentTab==='search'"}],staticClass:"searchList"},[a("el-table",{ref:"searchTable",staticClass:"JNPF-common-table",attrs:{data:e.getSearchOptions,height:"100%"},on:{"selection-change":e.searchSelectionChange}},[(e.webType,a("el-table-column",{attrs:{prop:"fullName",label:"查询字段"}})),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"field"===e.currentTab,expression:"currentTab==='field'"}],staticClass:"columnList"},[a("el-table",{ref:"columnTable",staticClass:"JNPF-common-table",attrs:{data:e.columnOptions,height:"100%"},on:{"selection-change":e.columnSelectionChange}},[4!=e.webType?a("el-table-column",{attrs:{prop:"label",label:"列表字段"}}):a("el-table-column",{attrs:{prop:"fullName",label:"列表字段"}}),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}})],1)],1),a("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:"column"===e.currentTab,expression:"currentTab==='column'"}],staticClass:"right-scrollbar"},[a("div",{staticClass:"setting-box"},[a("el-form",{attrs:{model:e.columnData,"label-width":"80px","label-position":"left"}},[a("div",{staticClass:"typeList"},e._l(e.typeList,(function(t,i){return a("div",{key:i,staticClass:"item",class:{"item-box":4==e.webType},on:{click:function(a){return e.toggleType(t.value)}}},[a("div",{staticClass:"item-img",class:{checked:e.columnData.type==t.value}},[a("img",{attrs:{src:t.url,alt:""}}),e.columnData.type==t.value?a("div",{staticClass:"icon-checked"},[a("i",{staticClass:"el-icon-check"})]):e._e()]),a("p",{staticClass:"item-name"},[e._v(e._s(t.name))])])})),0),2==e.columnData.type?[a("el-divider",[e._v("左侧配置")]),a("jnpf-form-tip-item",{staticClass:"left-tree-query",attrs:{"tip-label":"暂不支持异步的左侧查询",label:"左侧查询"}},[a("el-switch",{model:{value:e.columnData.hasTreeQuery,callback:function(t){e.$set(e.columnData,"hasTreeQuery",t)},expression:"columnData.hasTreeQuery"}})],1),a("el-form-item",{attrs:{label:"左侧标题"}},[a("el-input",{attrs:{placeholder:"树形标题"},model:{value:e.columnData.treeTitle,callback:function(t){e.$set(e.columnData,"treeTitle",t)},expression:"columnData.treeTitle"}})],1),a("el-form-item",{attrs:{label:"数据来源"}},[a("el-select",{attrs:{placeholder:"请选择数据来源"},on:{change:e.dataTypeChange},model:{value:e.columnData.treeDataSource,callback:function(t){e.$set(e.columnData,"treeDataSource",t)},expression:"columnData.treeDataSource"}},[a("el-option",{attrs:{label:"数据字典",value:"dictionary"}}),a("el-option",{attrs:{label:"远端数据",value:"api"}}),a("el-option",{attrs:{label:"组织数据",value:"organize"}}),a("el-option",{attrs:{label:"部门数据",value:"department"}})],1)],1),"dictionary"===e.columnData.treeDataSource?[a("el-form-item",{attrs:{label:"数据字典"}},[a("DicSelect",{attrs:{placeholder:"请选择数据字典"},model:{value:e.columnData.treeDictionary,callback:function(t){e.$set(e.columnData,"treeDictionary",t)},expression:"columnData.treeDictionary"}})],1),a("el-form-item",{attrs:{label:"主键字段"}},[a("el-select",{attrs:{placeholder:"请选择主键字段"},model:{value:e.columnData.treePropsValue,callback:function(t){e.$set(e.columnData,"treePropsValue",t)},expression:"columnData.treePropsValue"}},[a("el-option",{attrs:{label:"id",value:"id"}}),a("el-option",{attrs:{label:"enCode",value:"enCode"}})],1)],1)]:e._e(),"api"===e.columnData.treeDataSource?[a("el-form-item",{attrs:{label:"数据接口"}},[a("el-row",{staticClass:"jnpf-el-row"},[a("el-col",{attrs:{span:18}},[a("JnpfTreeSelect",{attrs:{options:e.dataInterfaceSelector,isDataInterface:1,placeholder:"请选择数据接口",lastLevel:"",lastLevelKey:"categoryId",lastLevelValue:"1",clearable:""},on:{selectChange:e.getDataInterfaceSelector,change:e.getDataInterfaceInfo},model:{value:e.columnData.treePropsUrl,callback:function(t){e.$set(e.columnData,"treePropsUrl",t)},expression:"columnData.treePropsUrl"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{on:{click:function(t){return e.goDataInterface()}}},[e._v("\n                        添加")])],1)],1)],1),a("el-form-item",{attrs:{label:"主键字段"}},[a("el-input",{attrs:{placeholder:"主键字段"},model:{value:e.columnData.treePropsValue,callback:function(t){e.$set(e.columnData,"treePropsValue",t)},expression:"columnData.treePropsValue"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入显示字段"},on:{select:function(t){return e.handleSelect(t)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.columnData.treePropsLabel,callback:function(t){e.$set(e.columnData,"treePropsLabel",t)},expression:"columnData.treePropsLabel"}})],1),a("el-form-item",{attrs:{label:"子级字段"}},[a("el-input",{attrs:{placeholder:"子级字段"},model:{value:e.columnData.treePropsChildren,callback:function(t){e.$set(e.columnData,"treePropsChildren",t)},expression:"columnData.treePropsChildren"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"关联字段"}},[a("el-select",{attrs:{placeholder:"请选择关联字段",filterable:""},on:{change:function(t){return e.onTreeRelationChange(t)}},model:{value:e.columnData.treeRelation,callback:function(t){e.$set(e.columnData,"treeRelation",t)},expression:"columnData.treeRelation"}},e._l(e.list,(function(e,t){return a("el-option",{key:t,attrs:{label:e.fullName,value:e.id}})})),1)],1),"api"===e.columnData.treeDataSource?[a("el-form-item",{attrs:{label:"数据加载"}},[a("el-radio-group",{model:{value:e.columnData.treeSynType,callback:function(t){e.$set(e.columnData,"treeSynType",t)},expression:"columnData.treeSynType"}},[a("el-radio",{attrs:{label:0}},[e._v("同步")]),a("el-radio",{attrs:{label:1}},[e._v("异步")])],1)],1),1==e.columnData.treeSynType?[a("jnpf-form-tip-item",{staticClass:"left-tree-query",attrs:{"tip-label":"提供异步调用的数据接口",label:"数据接口"}},[a("interface-dialog",{attrs:{value:e.columnData.treeInterfaceId,title:e.columnData.treeInterfaceName},on:{change:e.onInterfaceChange}})],1),a("el-table",{attrs:{data:e.columnData.treeTemplateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                        "+e._s(t.row.field)+"\n                      ")]}}],null,!1,1511207802)}),a("el-table-column",{attrs:{prop:"value",label:"映射参数名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]}}],null,!1,1938180997)})],1)]:e._e()]:e._e()]:e._e(),a("el-divider",[e._v("表格配置")]),4!=e.webType?a("el-form-item",{attrs:{label:"数据过滤"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:e.filterPanelShow}},[e._v("\n                "+e._s(this.columnData.ruleList&&this.columnData.ruleList.conditionList&&this.columnData.ruleList.conditionList.length>0?"编辑过滤条件":"添加过滤条件")+"\n              ")])],1):e._e(),[1,2,4].includes(e.columnData.type)?a("el-form-item",{attrs:{label:"复杂表头"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:e.addComplexHeader}},[e._v(e._s(e.columnData.complexHeaderList.length?"编辑复杂表头":"复杂表头配置"))])],1):e._e(),a("Condition",{ref:"conditionpane",attrs:{modelType:e.modelType,formFieldsOptions:4==e.webType?e.columnOptions:e.list},on:{ruleConfig:e.ruleConfig}}),3==e.columnData.type?[a("el-form-item",{attrs:{label:"分组字段"}},[a("el-select",{attrs:{placeholder:"请选择分组字段",clearable:"",filterable:""},model:{value:e.columnData.groupField,callback:function(t){e.$set(e.columnData,"groupField",t)},expression:"columnData.groupField"}},e._l(e.groupFieldOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.fullName,value:e.id}})})),1)],1)]:e._e(),5==e.columnData.type?[a("el-form-item",{attrs:{label:"父级字段"}},[a("el-select",{attrs:{placeholder:"请选择父级字段",filterable:""},model:{value:e.columnData.parentField,callback:function(t){e.$set(e.columnData,"parentField",t)},expression:"columnData.parentField"}},e._l(e.treeFieldOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.fullName,value:e.id}})})),1)],1)]:e._e(),a("el-form-item",{attrs:{label:"默认排序"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:e.editDefaultSortConfig}},[e._v("\n                默认排序配置\n              ")])],1),4!=e.webType?a("el-form-item",{attrs:{label:"高级查询"}},[a("el-switch",{model:{value:e.columnData.hasSuperQuery,callback:function(t){e.$set(e.columnData,"hasSuperQuery",t)},expression:"columnData.hasSuperQuery"}})],1):e._e(),a("jnpf-form-tip-item",{staticClass:"left-tree-query",attrs:{"tip-label":"启用：溢出省略号显示；<br/>禁用：显示全部信息，溢出换行显示",label:"溢出省略"}},[a("el-switch",{model:{value:e.columnData.showOverflow,callback:function(t){e.$set(e.columnData,"showOverflow",t)},expression:"columnData.showOverflow"}})],1),3!==e.columnData.type&&5!==e.columnData.type?[a("el-form-item",{attrs:{label:"分页设置"}},[a("el-switch",{model:{value:e.columnData.hasPage,callback:function(t){e.$set(e.columnData,"hasPage",t)},expression:"columnData.hasPage"}})],1),e.columnData.hasPage?a("el-form-item",{attrs:{label:"分页条数"}},[a("el-radio-group",{model:{value:e.columnData.pageSize,callback:function(t){e.$set(e.columnData,"pageSize",t)},expression:"columnData.pageSize"}},[a("el-radio-button",{attrs:{label:20}},[e._v("20条")]),a("el-radio-button",{attrs:{label:50}},[e._v("50条")]),a("el-radio-button",{attrs:{label:100}},[e._v("100条")]),a("el-radio-button",{attrs:{label:500}},[e._v("500条")])],1)],1):e._e()]:e._e(),1==e.columnData.type||2==e.columnData.type||4==e.columnData.type?a("div",[a("el-form-item",{attrs:{label:"合计配置"}},[a("el-switch",{model:{value:e.columnData.showSummary,callback:function(t){e.$set(e.columnData,"showSummary",t)},expression:"columnData.showSummary"}})],1),e.columnData.showSummary?a("el-form-item",{attrs:{label:"合计字段"}},[a("el-select",{attrs:{placeholder:"请选择合计字段",clearable:"",multiple:"",filterable:""},model:{value:e.columnData.summaryField,callback:function(t){e.$set(e.columnData,"summaryField",t)},expression:"columnData.summaryField"}},[e._l(e.groupFieldOptions,(function(t,i){return[["input","inputNumber","calculate"].includes(t.__config__.jnpfKey)&&!t.useMask?a("el-option",{key:i,attrs:{label:t.fullName,value:t.id}}):e._e()]}))],2)],1):e._e()],1):e._e(),1!=e.columnData.type&&2!=e.columnData.type||4==e.webType?e._e():a("el-form-item",{attrs:{label:"子表样式"}},[a("el-select",{attrs:{placeholder:"请选择子表样式"},model:{value:e.columnData.childTableStyle,callback:function(t){e.$set(e.columnData,"childTableStyle",t)},expression:"columnData.childTableStyle"}},[a("el-option",{attrs:{label:"分组展示",value:1}}),a("el-option",{attrs:{label:"折叠展示",value:2}})],1)],1),a("el-divider",[e._v("按钮配置")]),a("el-checkbox-group",{staticClass:"btnsList",model:{value:e.btnsList,callback:function(t){e.btnsList=t},expression:"btnsList"}},e._l(e.btnsOption,(function(t){return a("div",{key:t.value},[a("el-checkbox",{attrs:{label:t.value}},[a("span",{staticClass:"btn-label"},[e._v(e._s(e._f("btnText")(t.value)))]),a("el-input",{model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}})],1),"upload"===t.value&&-1!=e.btnsList.indexOf("upload")?a("el-button",{staticClass:"upload",on:{click:e.setUploaderTemplateJson}},[e._v("请设置导入模板")]):e._e()],1)})),0),e.btnsList.includes("batchPrint")?[a("el-form-item",{attrs:{label:"","label-width":"104px"}},[a("JnpfTreeSelect",{key:"sel",attrs:{options:e.printTplList,multiple:"",placeholder:"请选择打印模板",lastLevel:"",clearable:"","node-key":"id"},model:{value:e.columnData.printIds,callback:function(t){e.$set(e.columnData,"printIds",t)},expression:"columnData.printIds"}},[a("div",{staticClass:"printWrap",attrs:{slot:"header"},slot:"header"},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openPrint}},[e._v("添加打印模板\n                    ")]),a("el-link",{staticStyle:{position:"absolute",right:"8px",top:"18px"},attrs:{type:"info",underline:!1},on:{click:e.refreshPrintOptions}},[a("i",{staticClass:"el-icon-refresh el-icon--right"})]),a("el-divider",{staticStyle:{margin:"10px"}})],1)])],1)]:e._e(),a("el-checkbox-group",{staticClass:"btnsList columnBtnList",model:{value:e.columnBtnsList,callback:function(t){e.columnBtnsList=t},expression:"columnBtnsList"}},e._l(e.columnBtnsOption,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[a("span",{staticClass:"btn-label"},[e._v(e._s(e._f("btnText")(t.value)))]),a("el-input",{model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}})],1)})),1),1==e.modelType?[a("p",{staticClass:"btn-cap mt-10 mb-10"},[e._v("自定义按钮区")]),a("div",{staticClass:"custom-btns-list"},[a("draggable",{attrs:{list:e.columnData.customBtnsList,animation:340,group:"customItem",handle:".option-drag"}},e._l(e.columnData.customBtnsList,(function(t,i){return a("div",{key:i,staticClass:"custom-item"},[a("div",{staticClass:"custom-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("p",{staticClass:"custom-line-value"},[e._v(e._s(t.value))]),a("el-input",{attrs:{placeholder:"按钮名称",size:"small"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}},[a("template",{slot:"append"},[a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:function(a){return e.editFunc(t)}}},[e._v("事件\n                        ")])],1)],2),a("div",{staticClass:"close-btn custom-line-icon",on:{click:function(t){return e.columnData.customBtnsList.splice(i,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0)],1),a("div",[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.addCustomBtn}},[e._v("添加按钮")])],1)]:e._e(),4!=e.webType?[a("el-divider",[e._v("权限设置")]),a("el-form-item",{attrs:{label:"按钮权限"}},[a("el-switch",{model:{value:e.columnData.useBtnPermission,callback:function(t){e.$set(e.columnData,"useBtnPermission",t)},expression:"columnData.useBtnPermission"}})],1),a("el-form-item",{attrs:{label:"列表权限"}},[a("el-switch",{model:{value:e.columnData.useColumnPermission,callback:function(t){e.$set(e.columnData,"useColumnPermission",t)},expression:"columnData.useColumnPermission"}})],1),a("el-form-item",{attrs:{label:"表单权限"}},[a("el-switch",{model:{value:e.columnData.useFormPermission,callback:function(t){e.$set(e.columnData,"useFormPermission",t)},expression:"columnData.useFormPermission"}})],1),a("el-form-item",{attrs:{label:"数据权限"}},[a("el-switch",{model:{value:e.columnData.useDataPermission,callback:function(t){e.$set(e.columnData,"useDataPermission",t)},expression:"columnData.useDataPermission"}})],1)]:e._e(),1==e.modelType?[a("el-divider",[e._v("脚本事件")]),a("el-form-item",{attrs:{label:"表格事件","label-width":"85px"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:function(t){return e.addFunc(e.columnData.funcs.afterOnload,"afterOnload",!0)}}},[e._v("脚本编写\n                ")])],1),a("el-form-item",{attrs:{label:"表格行样式","label-width":"85px"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:function(t){return e.addFunc(e.columnData.funcs.rowStyle,"rowStyle",!0)}}},[e._v("脚本编写\n                ")])],1),a("el-form-item",{attrs:{label:"单元格样式","label-width":"85px"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:function(t){return e.addFunc(e.columnData.funcs.cellStyle,"cellStyle",!0)}}},[e._v("脚本编写\n                ")])],1)]:e._e()],2)],1)])],1)],1),e.formScriptVisible?a("form-script",{key:e.scriptKey,ref:"formScript",attrs:{value:e.activeItem,type:e.funcName},on:{updateScript:e.updateScript,closeDialog:function(t){e.formScriptVisible=!1}}}):e._e(),e.customBtnVisible?a("custom-btn",{key:e.scriptKey,ref:"customBtn",on:{updateCustomBtn:e.updateCustomBtn,closeDialog:function(t){e.customBtnVisible=!1}}}):e._e(),a("upload-box",{ref:"uploadRef",attrs:{visible:e.uploadBoxVisible},on:{"update:visible":function(t){e.uploadBoxVisible=t},onConfirm:e.onConfirm}}),e.complexHeaderVisible?a("ComplexHeader",{ref:"ComplexHeader",attrs:{type:1},on:{closeForm:e.closeForm}}):e._e(),e.searchConfigVisible?a("DefaultSortConfigModal",{ref:"SearchConfig",on:{confirm:e.updateDefaultSortConfig}}):e._e(),e.ExtraConfigModalVisible?a("ExtraConfigModal",{ref:"ExtraConfigModal",on:{confirm:e.updateSearchRow}}):e._e()],1)},n=[],s=(a("d263"),a("5530")),r=(a("ac6a"),a("53ca")),c=(a("2fdb"),a("6762"),a("2909")),d=a("17de"),u=a("bb1a"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"过滤规则配置",visible:e.dialogVisible,width:"800px","append-to-body":"","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("Condition",{ref:"base",attrs:{value:e.conditionList,modelType:e.modelType,matchLogic:e.matchLogic,columnOptions:e.formFieldsOptions}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},f=[],m=(a("c5f6"),a("8a04")),_={props:{modelType:{type:[String,Number],default:""},value:{type:Array,default:function(){return[]}},formFieldsOptions:{type:Array,default:function(){return[]}},options:{type:Array,default:function(){return[]}}},data:function(){return{tempCondition:[],dialogVisible:!1,conditionList:[],columnOptions:[],matchLogic:"and"}},methods:{init:function(e){var t=this.$store.getters.ruleData;t&&t.length>0?(this.conditionList=JSON.parse(JSON.stringify(t.conditionList)),this.matchLogic=t.matchLogic):(this.$store.commit("generator/SET_FILTER_DATA",JSON.parse(JSON.stringify(e))),this.conditionList=e.conditionList,this.matchLogic=e.matchLogic)},validData:function(){for(var e=!0,t=0;t<this.conditionList.length;t++)for(var a=this.conditionList[t],i=0;i<a.groups.length;i++){var l=a.groups[i];if(!l.field)return this.$message.warning("条件字段不能为空"),void(e=!1);if(!l.symbol)return this.$message.warning("条件符号不能为空"),void(e=!1);if(!["null","notNull"].includes(l.symbol)&&!["switch"].includes(l.jnpfKey)&&(!l.fieldValue&&0!==l.fieldValue||"object"===Object(r["a"])(l.fieldValue)&&0==l.fieldValue.length||this.jnpf.isEmpty(l.fieldValue)))return this.$message.warning("数据值不能为空"),void(e=!1)}return e},confirm:function(){var e=this;this.$nextTick((function(){var t=e.$refs.base&&e.$refs.base.getData()||"";if(e.conditionList=t?t.conditionList:[],e.validData()){var a={conditionList:JSON.parse(JSON.stringify(e.conditionList)),matchLogic:t.matchLogic};e.$store.commit("generator/SET_FILTER_DATA",a),e.$emit("ruleConfig",a),e.dialogVisible=!1}}))},handleClose:function(){this.$emit("ruleConfig",this.$store.getters.ruleData),this.dialogVisible=!1},show:function(e){this.dialogVisible=!0,e&&"object"===Object(r["a"])(e)&&0==e.length||0==e.conditionList.length?(this.conditionList=[],this.addCondition()):this.init(e)},addCondition:function(){var e={logic:"and",groups:[{fieldValue:"",field:"",symbol:"",jnpfKey:"",cellKey:+new Date}]};this.conditionList.push(e)}},components:{Condition:m["a"]}},h=_,v=(a("5684"),a("2877")),b=Object(v["a"])(h,p,f,!1,null,"474d3296",null),g=b.exports,y=a("53fe"),D=a.n(y),w=a("1980"),x=a.n(w),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center form-script-dialog",attrs:{"close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"1000px","modal-append-to-body":!1,"destroy-on-close":"",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},"el-dialog",e.$attrs,!1),e.$listeners),[a("span",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.title)+"\n      "),a("el-tooltip",{attrs:{content:"小程序不支持在线JS脚本",placement:"top-start"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)]),a("div",{staticClass:"form-script-dialog-body"},[a("div",{staticClass:"right-main"},[a("div",{staticClass:"codeEditor"},[a("JNPFCodeEditor",{ref:"CodeEditor",attrs:{options:e.options},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),a("div",{staticClass:"tips"},[a("p",[e._v("支持JavaScript的脚本，\n          "),a("ScriptDemo",{attrs:{type:e.type}})],1)])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onClose()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])},k=[],T=a("7c37"),F=a("f2c3"),S={components:{JNPFCodeEditor:T["a"],ScriptDemo:F["a"]},props:["value","type"],data:function(){return{text:"",options:{language:"javascript"},title:"",dialogVisible:!1}},methods:{init:function(){var e=this;this.dialogVisible=!0,this.text=this.value,this.$nextTick((function(){e.$refs.CodeEditor.changeEditor({value:e.text,options:e.options})})),this.setTitle()},onClose:function(){this.$emit("updateScript",this.text),this.closeDialog()},closeDialog:function(){this.$emit("closeDialog")},setTitle:function(){switch(this.type){case"afterOnload":this.title="表格脚本";break;case"rowStyle":this.title="行样式";break;case"cellStyle":this.title="单元格样式";break;default:break}}}},N=S,L=Object(v["a"])(N,C,k,!1,null,null,null),O=L.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center form-script-dialog",attrs:{"close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"800px","modal-append-to-body":!1,"destroy-on-close":"",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},"el-dialog",e.$attrs,!1),e.$listeners),[a("span",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v("按钮事件配置\n      "),a("el-tooltip",{attrs:{content:"小程序不支持在线JS脚本",placement:"top-start"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)]),a("el-form",{ref:"dataForm",staticClass:"form-script-dialog-body",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"90px","label-position":"left","hide-required-asterisk":!0}},[a("el-form-item",{attrs:{label:"类型选择",prop:"btnType"}},[a("el-radio-group",{on:{change:e.onBtnTypeChange},model:{value:e.dataForm.btnType,callback:function(t){e.$set(e.dataForm,"btnType",t)},expression:"dataForm.btnType"}},[a("el-radio",{attrs:{label:1}},[e._v("弹窗配置")]),a("el-radio",{attrs:{label:2}},[e._v("JS脚本")]),a("el-radio",{attrs:{label:3}},[e._v("接口配置")])],1)],1),1==e.dataForm.btnType?[a("el-form-item",{attrs:{label:"选择表单",prop:"modelId"}},[a("JnpfTreeSelect",{attrs:{options:e.treeData,placeholder:"请选择表单",lastLevel:"",clearable:""},on:{change:e.onModeIdChange},model:{value:e.dataForm.modelId,callback:function(t){e.$set(e.dataForm,"modelId",t)},expression:"dataForm.modelId"}})],1),a("el-form-item",{attrs:{label:"弹窗标题",prop:"popupTitle"}},[a("el-input",{attrs:{placeholder:"请输入弹窗标题",clearable:""},model:{value:e.dataForm.popupTitle,callback:function(t){e.$set(e.dataForm,"popupTitle",t)},expression:"dataForm.popupTitle"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"弹窗类型"}},[a("el-select",{attrs:{placeholder:"请选择弹窗类型"},model:{value:e.dataForm.popupType,callback:function(t){e.$set(e.dataForm,"popupType",t)},expression:"dataForm.popupType"}},[a("el-option",{attrs:{label:"居中弹窗",value:"dialog"}}),a("el-option",{attrs:{label:"右侧弹窗",value:"drawer"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"弹窗宽度"}},[a("el-select",{attrs:{placeholder:"请选择弹窗宽度",filterable:""},model:{value:e.dataForm.popupWidth,callback:function(t){e.$set(e.dataForm,"popupWidth",t)},expression:"dataForm.popupWidth"}},e._l(e.popupWidthOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"赋值规则"}}),a("el-table",{attrs:{data:e.dataForm.formOptions}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"当前表单值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.currentField,callback:function(a){e.$set(t.row,"currentField",a)},expression:"scope.row.currentField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)]}}],null,!1,400936190)}),a("el-table-column",{attrs:{prop:"field",label:"赋值给",width:"80",align:"center"}},[[e._v("赋值给")]],2),a("el-table-column",{attrs:{prop:"value",label:"弹窗表单值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{"visible-change":e.visibleChange},model:{value:t.row.field,callback:function(a){e.$set(t.row,"field",a)},expression:"scope.row.field"}},e._l(e.fieldOptions,(function(e){return a("el-option",{key:e.vmodel,attrs:{label:e.label,value:e.vmodel}})})),1)]}}],null,!1,2701183782)}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index)}}},[e._v("删除\n            ")])]}}],null,!1,1738630073)})],1),a("div",{staticClass:"table-actions",staticStyle:{"margin-bottom":"18px"},on:{click:e.addRelationOption}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("新增")])],1),a("el-form-item",{attrs:{label:"自定义按钮事件","label-width":"110px"}},[a("el-switch",{model:{value:e.dataForm.customBtn,callback:function(t){e.$set(e.dataForm,"customBtn",t)},expression:"dataForm.customBtn"}}),a("span",{staticClass:"tips"},[e._v("（开启后，弹窗中按钮事件失效，调用接口事件。）")])],1),e.dataForm.customBtn?[a("el-form-item",{attrs:{label:"数据接口",prop:"interfaceId"}},[a("interface-dialog",{attrs:{value:e.dataForm.interfaceId,title:e.dataForm.interfaceName,dataType:"1,3"},on:{change:e.onInterfaceChange}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"参数设置"}}),a("el-table",{staticStyle:{"margin-bottom":"18px"},attrs:{data:e.dataForm.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n              "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n            ")]}}],null,!1,2148291447)}),a("el-table-column",{attrs:{prop:"value",label:"参数来源",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(e){t.row.relationField=""}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!1,713065987)}),a("el-table-column",{attrs:{prop:"value",label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择弹窗表单字段",clearable:"",filterable:""},on:{"visible-change":e.visibleChange},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.fieldOptions,(function(e){return a("el-option",{key:e.vmodel,attrs:{label:e.label,value:e.vmodel}})})),1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,610435013)})],1)]:e._e()]:2==e.dataForm.btnType?[a("div",{staticClass:"right-main"},[a("div",{staticClass:"codeEditor"},[a("JNPFCodeEditor",{ref:"CodeEditor",attrs:{options:e.options},model:{value:e.dataForm.func,callback:function(t){e.$set(e.dataForm,"func",t)},expression:"dataForm.func"}})],1),a("div",{staticClass:"tips"},[a("p",[e._v("支持JavaScript的脚本，\n            "),a("ScriptDemo",{attrs:{type:"btnEvent"}})],1)])])]:[a("el-form-item",{attrs:{label:"数据接口",prop:"interfaceId"}},[a("interface-dialog",{attrs:{value:e.dataForm.interfaceId,title:e.dataForm.interfaceName,dataType:"1,3"},on:{change:e.onInterfaceChange}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"参数设置"}}),a("el-table",{staticStyle:{"margin-bottom":"18px"},attrs:{data:e.dataForm.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n            "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"value",label:"参数来源",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(e){t.row.relationField=""}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"value",label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择当前表单字段",clearable:"",filterable:""},on:{"visible-change":e.visibleChange},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}])})],1),a("el-form-item",{attrs:{label:"启用确认框"}},[a("el-switch",{model:{value:e.dataForm.useConfirm,callback:function(t){e.$set(e.dataForm,"useConfirm",t)},expression:"dataForm.useConfirm"}})],1),e.dataForm.useConfirm?a("el-form-item",{attrs:{"label-width":"0",prop:"confirmTitle"}},[a("el-input",{attrs:{placeholder:"请输入确认框提示语",clearable:""},model:{value:e.dataForm.confirmTitle,callback:function(t){e.$set(e.dataForm,"confirmTitle",t)},expression:"dataForm.confirmTitle"}})],1):e._e()]],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("\n      "+e._s(e.$t("common.confirmButton")))])],1)],1)},I=[],j=a("fa72"),M=a("ef22"),V=a("03e8"),A=a("100e"),P="({ data, index, refresh, onlineUtils }) => {\r\n   \r\n}",J={components:{JNPFCodeEditor:T["a"],InterfaceDialog:V["a"],ScriptDemo:F["a"]},data:function(){return{visible:!1,popupWidthOptions:["600px","800px","1000px","40%","50%","60%","70%","80%"],treeData:[],fieldOptions:[],parameterSource:[{label:"字段",value:1},{label:"自定义",value:2},{label:"为空",value:3}],showType:"pc",modelId:"",options:{language:"javascript"},dataForm:{btnType:1,modelId:"",popupTitle:"自定义操作",popupType:"dialog",popupWidth:"800px",formOptions:[],customBtn:!1,func:"",interfaceId:"",interfaceName:"",templateJson:[],useConfirm:!1,confirmTitle:"此操作将通过接口处理"},dataRule:{btnType:[{required:!0,message:"类型不能为空",trigger:"change"}],modelId:[{required:!0,message:"表单不能为空",trigger:"click"}],popupTitle:[{required:!0,message:"弹窗标题不能为空",trigger:"input"}],interfaceId:[{required:!0,message:"数据接口不能为空",trigger:"change"}],confirmTitle:[{required:!0,message:"确认框不能为空",trigger:"input"}]},webType:"",columnOptions:[]}},computed:{formFieldsOptions:function(){if(4==this.webType)return this.columnOptions;var e=["table","uploadImg","uploadFile","billRule","relationForm","popupSelect","createUser","createTime","modifyUser","modifyTime"].concat(Object(c["a"])(A["j"])),t=[],a=function a(i,l){i&&(i.__config__&&"table"!==i.__config__.jnpfKey&&i.__config__.children&&Array.isArray(i.__config__.children)&&a(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(e){return a(e,l)})),i.__vModel__&&!e.includes(i.__config__.jnpfKey)&&t.push(Object(s["a"])({fullName:i.__config__.label,id:i.__vModel__},i)))};return a(Object(j["a"])()),t.unshift({fullName:"@表单ID",id:"@formId"}),t}},methods:{init:function(e,t,a,i){var l=this;this.webType=a,this.columnOptions=i||[],this.showType=e||"pc",this.visible=!0,this.$nextTick((function(){l.resetData(),l.dataForm=Object.assign(l.dataForm,JSON.parse(JSON.stringify(t))),l.getFeatureSelector(),2==l.dataForm.btnType&&l.initEditor(),l.dataForm.modelId&&l.getFieldOptions()}))},initEditor:function(){var e=this;this.$nextTick((function(){e.$refs.CodeEditor.changeEditor({value:e.dataForm.func,options:e.options})}))},getFeatureSelector:function(){var e=this;Object(M["o"])({type:1,webType:"1,2",enableFlow:0,isRelease:1}).then((function(t){e.treeData=t.data.list}))},onModeIdChange:function(e){this.clearField(),this.dataForm.relationField="",e?(this.modelId!=e&&this.dataForm.formOptions.length&&this.dataForm.formOptions.forEach((function(e){e.field=""})),this.getFieldOptions(),this.modelId=e):this.fieldOptions=[]},clearField:function(){this.dataForm.formOptions=this.dataForm.formOptions.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{field:""})})),this.dataForm.templateJson=this.dataForm.templateJson.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{relationField:1===e.sourceType?"":e.relationField})}))},getFieldOptions:function(){var e=this;this.dataForm.modelId&&Object(M["q"])(this.dataForm.modelId,1).then((function(t){e.fieldOptions=t.data.list||[]}))},onInterfaceChange:function(e,t){if(!e)return this.dataForm.interfaceId="",this.dataForm.interfaceName="",void(this.dataForm.templateJson=[]);this.dataForm.interfaceId!==e&&(this.dataForm.interfaceId=e,this.dataForm.interfaceName=t.fullName,this.dataForm.templateJson=t.templateJson?t.templateJson.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{relationField:"",sourceType:1})})):[])},addRelationOption:function(){this.dataForm.formOptions.push({currentField:"",field:""})},handleDel:function(e){this.dataForm.formOptions.splice(e,1)},confirm:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){if(1==e.dataForm.btnType){if(!e.dataForm.formOptions.length)return e.$message({message:"赋值规则不能为空",type:"warning"});if(e.dataForm.formOptions.length)for(var a=0;a<e.dataForm.formOptions.length;a++){var i=e.dataForm.formOptions[a];if(!i.currentField)return e.$message({message:"赋值规则第".concat(a+1,"行当前表单值不能为空"),type:"warning"});if(!i.field)return e.$message({message:"赋值规则第".concat(a+1,"行弹窗表单值不能为空"),type:"warning"})}}e.$emit("updateCustomBtn",e.dataForm),e.closeDialog()}}))},closeDialog:function(){this.$emit("closeDialog"),this.visible=!1},resetData:function(){this.dataForm.modelId="",this.dataForm.popupTitle="自定义操作",this.dataForm.popupType="dialog",this.dataForm.popupWidth="800px",this.dataForm.formOptions=[],this.dataForm.customBtn=!1,this.dataForm.func=P,this.dataForm.interfaceId="",this.dataForm.interfaceName="",this.dataForm.templateJson=[],this.dataForm.useConfirm=!1,this.dataForm.confirmTitle="此操作将通过接口处理",this.fieldOptions=[]},onBtnTypeChange:function(e){this.$refs["dataForm"].clearValidate(),this.resetData(),2==e&&this.initEditor()},visibleChange:function(e){e&&(this.dataForm.modelId||1!=this.dataForm.btnType||this.$message.warning("请先选择表单"))}}},R=J,K=(a("9db1"),Object(v["a"])(R,$,I,!1,null,"1f67f1e2",null)),B=K.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-export",attrs:{title:"模板设置","close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"600px","modal-append-to-body":!1}},"el-dialog",e.$attrs,!1),e.$listeners),[a("div",{staticClass:"dialog-main"},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"导入模式"}},[a("el-radio-group",{model:{value:e.dataForm.dataType,callback:function(t){e.$set(e.dataForm,"dataType",t)},expression:"dataForm.dataType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("仅新增数据\n            "),a("el-tooltip",{attrs:{content:"导入数据只能进行新增，同一条数据无法重复导入",placement:"top-start"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-radio",{attrs:{label:"2"}},[e._v("更新和新增数据\n            "),a("el-tooltip",{attrs:{content:"允许新增数据的同时支持导入数据更新",placement:"top-start"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1)],1),a("div",{staticClass:"upload-line"},[a("p",{staticClass:"export-label",attrs:{slot:"label"},slot:"label"},[e._v("表单数据"),a("span",[e._v("请选择要导入的字段")])])]),a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.columnList,(function(t){return a("el-checkbox",{key:t.id,staticClass:"column-item",attrs:{label:t.id,disabled:t.disabled}},[e._v("\n          "+e._s(t.fullName)+"\n        ")])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onConfirm()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])},z=[],q=(a("4f7f"),a("5df3"),a("1c4c"),[].concat(Object(c["a"])(A["h"]),Object(c["a"])(A["e"]),["uploadFile","uploadImg","colorPicker","popupTableSelect","relationForm","popupSelect","calculate","groupTitle"])),W={props:["value"],data:function(){return{visible:!1,dataForm:{dataType:"1"},checkAll:!1,checkedList:[],isIndeterminate:!1,columnList:[],defaultCheckedList:[]}},methods:{init:function(e,t,a){this.visible=!0,this.columnList=[],this.checkedList=[],this.defaultCheckedList=[];for(var i=0;i<e.length;i++){var l=e[i],o=l.__config__.required,n=l.__config__.jnpfKey,s=A["j"].includes(n)||o;q.includes(n)||(this.columnList.push({id:l.id,fullName:l.fullName,disabled:s}),(o||A["j"].includes(n))&&(this.checkedList.push(l.id),this.defaultCheckedList.push(l.id)))}var r;t&&t.length&&((r=this.checkedList).push.apply(r,Object(c["a"])(t)),this.checkedList=Array.from(new Set(this.checkedList)));this.checkedList.length&&(this.isIndeterminate=this.checkedList.length>0&&this.checkedList.length<this.columnList.length,this.checkAll=this.checkedList.length===this.columnList.length),a&&(this.dataForm.dataType=a)},closeDialog:function(){this.$emit("update:visible",!1)},handleCheckAllChange:function(e){this.checkedList=e?this.columnList.map((function(e){return e.id})):this.defaultCheckedList,this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.columnList.length,this.isIndeterminate=t>0&&t<this.columnList.length},onConfirm:function(){if(!this.checkedList.length)return this.$message.warning("请至少选择一个导入字段");this.$emit("onConfirm",{dataType:this.dataForm.dataType,selectKey:this.checkedList}),this.closeDialog()}}},U=W,H=(a("ec0f"),Object(v["a"])(U,E,z,!1,null,"5d0b457a",null)),G=H.exports,Q=a("9b6f"),Y=a("da54"),Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center dialog_height",attrs:{title:"默认排序配置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("JNPF-table",{ref:"dragTable",attrs:{data:e.list,hasNO:!1,"row-key":"id"}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"childColumns",label:"字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排序字段"},model:{value:t.row.field,callback:function(a){e.$set(t.row,"field",a)},expression:"scope.row.field"}},e._l(e.getOptions(t.$index),(function(e,t){return a("el-option",{key:t,attrs:{label:e.fullName,value:e.id}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"align",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{model:{value:t.row.sort,callback:function(a){e.$set(t.row,"sort",a)},expression:"scope.row.sort"}},[a("el-radio",{attrs:{label:"asc"}},[e._v("升序")]),a("el-radio",{attrs:{label:"desc"}},[e._v("降序")])],1)]}}])}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addHandle()}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("添加")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog(1)}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)},X=[],ee={data:function(){return{visible:!1,options:[],list:[],data:{},sortTypeOptions:[{id:"asc",fullName:"升序"},{id:"desc",fullName:"降序"}]}},methods:{init:function(e){var t=this;this.data=e?JSON.parse(JSON.stringify(e)):{},this.list=this.data.list,this.visible=!0,this.$nextTick((function(){t.setSort()}))},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=D.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,a)},handle:".drag-handler"})},getOptions:function(e){for(var t=this,a=this.data.columnOptions.filter((function(e){return!["editor"].includes(e.__config__.jnpfKey)})),i=function(){var i=t.list[l];i.field&&e!==l&&(a=a.filter((function(e){return e.id!==i.field})))},l=0;l<this.list.length;l++)i();return a},closeDialog:function(){for(var e=!0,t=0;t<this.list.length;t++)if(!this.list[t].field){this.$message({message:"字段不能为空",type:"warning"}),e=!1;break}e&&(this.$emit("confirm",this.list),this.visible=!1)},handleDel:function(e){this.list.splice(e,1)},addHandle:function(){var e="sort"+this.jnpf.idGenerator(),t={field:"",sort:"desc",id:e};this.list.push(t)}}},te=ee,ae=(a("d0ea"),Object(v["a"])(te,Z,X,!1,null,"4d40d472",null)),ie=ae.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center dialog_height",attrs:{title:"组件属性配置","close-on-click-modal":!1,visible:e.dialogVisible,"lock-scroll":"",width:"600px","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"activeData",attrs:{model:e.activeData,"label-width":"80px"}},["select"===e.activeData.jnpfKey?[a("el-form-item",{attrs:{label:"数据来源"}},[a("el-radio-group",{staticStyle:{"text-align":"center"},attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.__config__.dataType,callback:function(t){e.$set(e.activeData.__config__,"dataType",t)},expression:"activeData.__config__.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dictionary"}},[e._v("数据字典")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.__config__.dataType?[a("draggable",{attrs:{list:e.activeData.options,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.options,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"选项名",size:"small"},model:{value:t.fullName,callback:function(a){e.$set(t,"fullName",a)},expression:"item.fullName"}}),a("el-input",{attrs:{placeholder:"选项值",size:"small"},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.options.splice(i,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addSelectItem}},[e._v("\n            添加选项\n          ")]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{type:"text"},on:{click:e.updateSelectItem}},[e._v("\n            批量编辑\n          ")])],1)]:e._e(),"dictionary"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"数据字典"}},[a("el-row",{staticClass:"jnpf-el-row"},[a("el-col",{attrs:{span:18}},[a("JnpfTreeSelect",{attrs:{options:e.dicOptions,placeholder:"请选择数据字典",lastLevel:"",clearable:""},on:{change:e.dictionaryTypeChange,selectChange:e.selectChange},model:{value:e.activeData.__config__.dictionaryType,callback:function(t){e.$set(e.activeData.__config__,"dictionaryType",t)},expression:"activeData.__config__.dictionaryType"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{on:{click:function(t){return e.goDictionary()}}},[e._v("\n                添加")])],1)],1)],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-select",{attrs:{placeholder:"请选择存储字段"},model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}},[a("el-option",{attrs:{label:"id",value:"id"}}),a("el-option",{attrs:{label:"enCode",value:"enCode"}})],1)],1)]:e._e(),"dynamic"===e.activeData.__config__.dataType?[a("el-form-item",{attrs:{label:"远端数据"}},[a("interface-dialog",{attrs:{value:e.activeData.__config__.propsUrl,title:e.activeData.__config__.propsName,popupTitle:"远端数据"},on:{change:e.propsUrlChange}})],1),a("el-form-item",{attrs:{label:"存储字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入存储字段"},on:{select:function(t){return e.handleSelect(t,"value")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.value,callback:function(t){e.$set(e.activeData.props,"value",t)},expression:"activeData.props.value"}})],1),a("el-form-item",{attrs:{label:"显示字段"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入显示字段"},on:{select:function(t){return e.handleSelect(t,"label")}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!1,582861419),model:{value:e.activeData.props.label,callback:function(t){e.$set(e.activeData.props,"label",t)},expression:"activeData.props.label"}})],1)]:e._e()]:e._e(),"datePicker"===e.activeData.jnpfKey?a("el-form-item",{attrs:{label:"日期类型"}},[a("jnpf-select",{attrs:{placeholder:"请选择日期类型",options:e.dateFormatOptions,props:e.props},model:{value:e.activeData.format,callback:function(t){e.$set(e.activeData,"format",t)},expression:"activeData.format"}})],1):e._e(),"timePicker"===e.activeData.jnpfKey?a("el-form-item",{attrs:{label:"时间类型"}},[a("jnpf-select",{attrs:{placeholder:"请选择时间类型",options:e.timeFormatOptions,props:e.props},model:{value:e.activeData.format,callback:function(t){e.$set(e.activeData,"format",t)},expression:"activeData.format"}})],1):e._e(),["organizeSelect","depSelect","userSelect"].includes(e.activeData.jnpfKey)?a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{model:{value:e.activeData.isIncludeSubordinate,callback:function(t){e.$set(e.activeData,"isIncludeSubordinate",t)},expression:"activeData.isIncludeSubordinate"}},[e._v("\n        查询当前"+e._s("organizeSelect"===e.activeData.jnpfKey?"组织及子组织":"depSelect"===e.activeData.jnpfKey?"部门及子部门":"用户及下属")+"\n      ")])],1):e._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("common.confirmButton")))])],1),a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{visible:e.dicVisible,"append-to-body":"","lock-scroll":"",width:"80%"},on:{"update:visible":function(t){e.dicVisible=t},close:e.defaultValueChange}},[a("dicIndex",{ref:"dicIndex"})],1)],1),e.updateVisible?a("BatchEditing",{ref:"batchEditing",on:{change:e.handleSure}}):e._e()],1)},oe=[],ne=(a("f6b3"),a("5ea0")),se=a("7cf1"),re=["treeSelect","radio","checkbox","select","cascader"],ce={components:{draggable:x.a,BatchEditing:ne["a"],dicIndex:se["default"],InterfaceDialog:V["a"]},data:function(){return{dicOptions:[],dictionaryId:"",fieldJsonList:[],hasPage:!1}},methods:{addSelectItem:function(){var e=this.jnpf.idGenerator();this.activeData.options.push({id:e,fullName:"选项"+e})},updateSelectItem:function(){var e=this;this.updateVisible=!0,this.$nextTick((function(){e.$refs.batchEditing.init(e.activeData.options)}))},dataTypeChange:function(e){this.activeData.options=[],this.activeData.props.value="id",this.activeData.props.label="fullName",Reflect.has(this.activeData.props,"children")&&(this.activeData.props.children="children"),this.activeData.__config__.dictionaryType="",this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[]},handleSure:function(e){this.activeData.options=e||[]},selectChange:function(){this.$emit("changeSelect"),this.dictionaryTypeChange(this.dictionaryId)},defaultValueChange:function(){this.selectChange()},dictionaryTypeChange:function(e){var t=this;this.dictionaryId=e,this.activeData.__config__.defaultValue=this.defaultValue,e?Object(Q["i"])(e).then((function(e){t.activeData.options=e.data.list})):this.activeData.options=[]},goDictionary:function(){var e=this;this.dicVisible=!0,this.$nextTick((function(){e.$refs.dicIndex.initData()}))},getDicOptions:function(){var e=this;Object(Q["m"])().then((function(t){e.dicOptions=t.data.list}))},propsUrlChange:function(e,t){var a=this,i=this.activeData.__config__.jnpfKey;if(this.activeData.__config__.defaultValue="cascader"===i?[]:"treeSelect"===i?this.activeData.multiple?[]:"":this.defaultValue,!e)return this.activeData.__config__.propsUrl="",this.activeData.__config__.propsName="",this.activeData.__config__.templateJson=[],void(this.activeData.options=[]);var l=t.parameterJson?JSON.parse(t.parameterJson):[];this.activeData.__config__.propsUrl=e,this.activeData.__config__.propsName=t.fullName,this.activeData.__config__.templateJson=l.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{relationField:""})}));var o={paramList:this.activeData.__config__.templateJson||[]};Object(d["o"])(e,o).then((function(e){var t=e.data;Array.isArray(t)?a.activeData.options=t:a.activeData.options=[]})).catch((function(){a.activeData.__config__.propsUrl="",a.activeData.__config__.propsName="",a.activeData.__config__.templateJson=[],a.activeData.options=[]}))},querySearch:function(e,t){var a=this.fieldJsonList||[],i=e?a.filter(this.createStateFilter(e)):a;t(i)},createStateFilter:function(e){return function(t){return 0===t.defaultValue.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e,t,a){var i=this.activeData.__config__.jnpfKey;"autoComplete"===i&&(this.activeData[t]=e.defaultValue),"popupSelect"!==i&&"popupTableSelect"!==i||(isNaN(a)?this.activeData[t]=e.defaultValue:this.activeData.columnOptions[a][t]=e.defaultValue),re.includes(i)&&(this.activeData.props[t]=e.defaultValue),this.activeData.__config__.renderKey=+new Date}}},de={mixins:[ce],data:function(){return{dialogVisible:!1,activeData:{__config__:{dataType:"static"}},radio1:"静态数据",loading:!0,updateVisible:!1,dicVisible:!1,dateFormatOptions:[{id:"yyyy",fullName:"yyyy"},{id:"yyyy-MM",fullName:"yyyy-MM"},{id:"yyyy-MM-dd",fullName:"yyyy-MM-dd"},{id:"yyyy-MM-dd HH:mm",fullName:"yyyy-MM-dd HH:mm"},{id:"yyyy-MM-dd HH:mm:ss",fullName:"yyyy-MM-dd HH:mm:ss"}],props:{label:"fullName",value:"id"},timeFormatOptions:[{id:"HH:mm:ss",fullName:"HH:mm:ss"},{id:"HH:mm",fullName:"HH:mm"}]}},methods:{init:function(e){this.activeData=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0,this.loading=!1,this.getDicOptions(),console.log(e)},handleSubmit:function(){this.$emit("confirm",this.activeData)}}},ue=de,pe=(a("15f4"),Object(v["a"])(ue,le,oe,!1,null,"1d44aaec",null)),fe=pe.exports,me=[].concat(Object(c["a"])(A["h"]),Object(c["a"])(A["e"]),["colorPicker","popupTableSelect","relationForm","popupSelect","calculate","groupTitle"]),_e=function(e){var t=e.__config__.jnpfKey,a=["select","depSelect","roleSelect","userSelect","usersSelect","organizeSelect","posSelect","groupSelect"];return!!a.includes(t)},he=function(e){var t=e.__config__.jnpfKey,a=["areaSelect","datePicker","inputNumber","organizeSelect","calculate"];return a.includes(t)||e.multiple?[]:void 0},ve=function(e){var t=e.__config__.jnpfKey,a=[].concat(Object(c["a"])(A["l"]),["location"]),i=[].concat(Object(c["a"])(A["k"]),["timePicker","datePicker","inputNumber","calculate","rate","slider"]);return i.includes(t)?3:a.includes(t)?2:1},be="({ data, index, refresh, onlineUtils }) => {\r\n   \r\n}",ge="({ data, tableRef, onlineUtils }) => {\r\n   \r\n}",ye="({row,rowIndex}) => {\r\n   \r\n}",De="({row, column, rowIndex, columnIndex}) => {\r\n   \r\n}",we={matchLogic:"and",conditionList:[]},xe={printIds:[],ruleList:we,complexHeaderList:[],searchList:[],hasSuperQuery:!0,showOverflow:!0,childTableStyle:1,showSummary:!1,summaryField:[],thousands:!1,thousandsField:[],columnList:[],columnOptions:[],defaultColumnList:[],type:1,defaultSortConfig:[],hasPage:!0,pageSize:20,hasTreeQuery:!1,treeTitle:"左侧标题",treeDataSource:"dictionary",treeDictionary:"",treeRelation:"",treeSynType:0,treeInterfaceId:"",treeInterfaceName:"",treeTemplateJson:[],treePropsUrl:"",treePropsName:"",treePropsValue:"id",treePropsChildren:"children",treePropsLabel:"fullName",groupField:"",parentField:"",useColumnPermission:!1,useFormPermission:!1,useBtnPermission:!1,useDataPermission:!1,customBtnsList:[],btnsList:[{value:"add",icon:"icon-ym icon-ym-btn-add",label:"新增"}],columnBtnsList:[{value:"edit",icon:"icon-ym icon-ym-btn-edit",label:"编辑"},{value:"remove",icon:"icon-ym icon-ym-btn-clearn",label:"删除"},{value:"detail",icon:"icon-ym icon-ym-generator-menu",label:"详情"}],funcs:{afterOnload:"",rowStyle:"",cellStyle:""},uploaderTemplateJson:{}},Ce={afterOnload:"",rowStyle:"",cellStyle:""},ke=[{value:"add",icon:"icon-ym icon-ym-btn-add",label:"新增"},{value:"download",icon:"icon-ym icon-ym-btn-download",label:"导出"},{value:"upload",icon:"icon-ym icon-ym-btn-upload",label:"导入"},{value:"batchRemove",icon:"icon-ym icon-ym-btn-clearn",label:"批量删除"},{value:"batchPrint",icon:"icon-ym icon-ym-report-icon-preview-printPreview",label:"批量打印"}],Te={name:"columnDesign",props:{conf:{type:Object,default:function(){}},webType:"",modelType:"",interfaceId:"",templateJson:{type:Array,default:function(){return[]}},viewFields:{type:Array,default:function(){return[]}}},components:{draggable:x.a,FormScript:O,uploadBox:G,CustomBtn:B,InterfaceDialog:V["a"],Condition:g,ComplexHeader:Y["a"],DefaultSortConfigModal:ie,ExtraConfigModal:fe},data:function(){return{activeSearchRowIndex:0,key:+new Date,fieldJsonList:[],hasPage:!1,currentTab:"column",alignOptions:["left","center","right"],fixedOptions:["none","left","right"],textBoxList:["input","billRule"],canSetKeyword:["input","textarea","autoComplete"],selectionBoxList:A["m"],list:[],searchList:[],columnList:[],columnData:JSON.parse(JSON.stringify(xe)),btnsOption:ke,columnBtnsOption:[{value:"edit",icon:"icon-ym icon-ym-btn-edit",label:"编辑"},{value:"remove",icon:"icon-ym icon-ym-btn-clearn",label:"删除"},{value:"detail",icon:"icon-ym icon-ym-generator-menu",label:"详情"}],columnOptions:[],printTplList:[],searchOptions:[],groupFieldOptions:[],thousandsOptions:[],treeFieldOptions:[],btnsList:[],columnBtnsList:[],typeList:[{url:a("786f"),value:1,name:"普通表格"},{url:a("3d69"),value:2,name:"左侧树+普通表格"},{url:a("871b"),value:4,name:"编辑表格"},{url:a("d250"),value:3,name:"分组表格"},{url:a("4b4f"),value:5,name:"树形表格"}],dataInterfaceSelector:[],formScriptVisible:!1,customBtnVisible:!1,dataFilterVisible:!1,activeItem:{},funcName:"",scriptKey:"",uploadBoxVisible:!1,complexHeaderVisible:!1,searchConfigVisible:!1,ExtraConfigModalVisible:!1,viewJnpfKeyOptions:[{id:"input",fullName:"单行输入"},{id:"inputNumber",fullName:"数字输入"},{id:"select",fullName:"下拉选择"},{id:"datePicker",fullName:"日期选择"},{id:"timePicker",fullName:"时间选择"},{id:"organizeSelect",fullName:"组织选择"},{id:"depSelect",fullName:"部门选择"},{id:"roleSelect",fullName:"角色选择"},{id:"posSelect",fullName:"岗位选择"},{id:"groupSelect",fullName:"分组选择"},{id:"userSelect",fullName:"用户选择"}],noGroupList:A["e"]}},filters:{btnText:function(e){var t="";switch(e){case"download":t="导出";break;case"batchRemove":t="批量删除";break;case"batchPrint":t="批量打印";break;case"edit":t="编辑";break;case"remove":t="删除";break;case"detail":t="详情";break;case"upload":t="导入";break;default:t="新增";break}return t}},watch:{"columnData.type":{handler:function(e){5==e&&(this.columnData.printIds=[])},deep:!0,immediate:!0},"columnData.ruleList":{handler:function(){if(Array.isArray(this.columnData.ruleList)&&0==this.columnData.ruleList.length)return this.columnData.ruleList=we;var e=this.$store.getters.ruleData;e&&e.conditionList&&e.conditionList.length>0&&0==this.columnData.ruleList.conditionList.length&&(this.columnData.ruleList.conditionList=e.conditionList,this.columnData.ruleList.matchLogic=e.matchLogic)},deep:!0,immediate:!0},btnsList:function(e){for(var t=[],a=0;a<this.btnsOption.length;a++)e:for(var i=0;i<e.length;i++)if(e[i]===this.btnsOption[a].value){t.push(this.btnsOption[a]);break e}this.columnData.btnsList=t},columnBtnsList:function(e){for(var t=[],a=0;a<this.columnBtnsOption.length;a++)e:for(var i=0;i<e.length;i++)if(e[i]===this.columnBtnsOption[a].value){t.push(this.columnBtnsOption[a]);break e}this.columnData.columnBtnsList=t}},created:function(){var e=this;if(this.getDataInterfaceSelector(),"object"===Object(r["a"])(this.conf)&&null!==this.conf&&(this.columnData=Object.assign({},xe,this.conf),this.columnData.funcs=Object.assign({},Ce,this.columnData.funcs)),[1,2,4].includes(this.columnData.type)&&this.columnData.complexHeaderList.length){for(var t=[],a=0;a<this.columnData.complexHeaderList.length;a++)for(var i=this.columnData.complexHeaderList[a],l=0;l<i.childColumns.length;l++){var o=i.childColumns[l];t.push(o)}t.length&&(this.$store.commit("generator/SET_HEADER_DATA",JSON.parse(JSON.stringify(this.columnData.complexHeaderList))),this.columnData.complexHeaderList=this.$store.getters.complexHeaderData)}if(4!=this.webType){5==this.columnData.type&&this.updateBtnsList(5);var n=[],d=function e(t,a){if(t&&(t.__config__&&t.__config__.children&&Array.isArray(t.__config__.children)&&e(t.__config__.children,t),Array.isArray(t)&&t.forEach((function(t){return e(t,a)})),t.__config__&&t.__config__.jnpfKey)){var i=!t.__config__.visibility||Array.isArray(t.__config__.visibility)&&t.__config__.visibility.includes("pc");if("colFormItem"===t.__config__.layout&&t.__vModel__&&i){var l=a&&a.__config__&&"table"===a.__config__.jnpfKey;n.push(Object(s["a"])({id:l?a.__vModel__+"-"+t.__vModel__:t.__vModel__,fullName:l?a.__config__.label+"-"+t.__config__.label:t.__config__.label},t))}}};d(Object(j["a"])()),this.list=n;var u=n.filter((function(e){return A["d"].indexOf(e.__config__.jnpfKey)<0||1==e.isStorage})),p=n.filter((function(e){return A["f"].indexOf(e.__config__.jnpfKey)<0}));this.groupFieldOptions=n.filter((function(e){return e.id.indexOf("-")<0&&![].concat(Object(c["a"])(A["e"]),["editor"]).includes(e.__config__.jnpfKey)})),this.treeFieldOptions=n.filter((function(e){return e.id.indexOf("-")<0&&"treeSelect"==e.__config__.jnpfKey})),this.columnOptions=u.map((function(e){return Object(s["a"])({label:e.fullName,prop:e.id,fixed:"none",align:"left",jnpfKey:e.__config__.jnpfKey,sortable:!1,width:null},e)})),this.searchOptions=p.map((function(e){return Object(s["a"])({label:e.fullName,prop:e.id,jnpfKey:e.__config__.jnpfKey,value:he(e),searchType:ve(e),searchMultiple:_e(e),isKeyword:!1},e)})),this.searchList=this.searchOptions,this.columnData.columnOptions=u,this.columnOptions.length||(this.columnData.columnList=[]),this.searchOptions.length||(this.columnData.searchList=[]),this.setBtnValue(this.columnData.btnsList,this.btnsOption),this.setBtnValue(this.columnData.columnBtnsList,this.columnBtnsOption),this.btnsList=this.columnData.btnsList.map((function(e){return e.value}))}if(4==this.webType){if(this.btnsOption=[{value:"download",icon:"icon-ym icon-ym-btn-download",label:"导出"}],this.columnBtnsOption=[],this.typeList=this.typeList.filter((function(e){return 1==e.value||3==e.value})),!this.interfaceId)return;var f=this.viewFields;this.columnOptions=f.map((function(e){return{label:e.field,prop:e.defaultValue,fixed:"none",align:"left",jnpfKey:"input",sortable:!1,width:null,__vModel__:e.defaultValue,id:e.defaultValue,fullName:e.field,__config__:{jnpfKey:"input"}}}));var m=(this.templateJson||[]).filter((function(e){return e.useSearch})).map((function(e){var t="input";return"int"!==e.dataType&&"decimal"!==e.dataType||(t="inputNumber"),"datetime"===e.dataType&&(t="datePicker"),{id:e.field,fullName:e.fieldName,label:e.fieldName,prop:e.field,jnpfKey:t,__vModel__:e.field,__config__:{isFromParam:!0,jnpfKey:t}}}));this.searchOptions=f.map((function(e){return Object(s["a"])({label:e.field,prop:e.defaultValue,jnpfKey:"input",value:"",searchType:1,__vModel__:e.defaultValue,id:e.defaultValue,fullName:e.field,searchMultiple:!1,__config__:{label:e.field,jnpfKey:"input"}},e)}));var _=this.searchOptions.filter((function(e){return!m.some((function(t){return t.id===e.id}))}));this.searchOptions=[].concat(Object(c["a"])(m),Object(c["a"])(_)),this.groupFieldOptions=f.map((function(e){return{label:e.field,prop:e.defaultValue,jnpfKey:"input",__vModel__:e.defaultValue,id:e.defaultValue,fullName:e.field,__config__:{label:e.field,jnpfKey:"input"}}})),this.columnOptions.length||(this.columnData.columnList=[]),this.searchOptions.length||(this.columnData.searchList=[]),this.$nextTick((function(){e.columnData.columnList=e.setListValue(e.columnData.columnList,JSON.parse(JSON.stringify(e.columnOptions)),"column"),e.columnData.searchList=e.setListValue(e.columnData.searchList,JSON.parse(JSON.stringify(e.searchOptions)),"search")}))}this.columnBtnsList=this.columnData.columnBtnsList.map((function(e){return e.value})),this.setBtnValue(this.columnData.btnsList,this.btnsOption),this.btnsList=this.columnData.btnsList.map((function(e){return e.value}))},mounted:function(){var e=this;this.getDataInterfaceInfo("","",1),this.setSort(),this.$nextTick((function(){e.columnData.columnList=e.setListValue(e.columnData.columnList,JSON.parse(JSON.stringify(e.columnOptions)),"column"),e.columnData.searchList=e.setListValue(e.columnData.searchList,JSON.parse(JSON.stringify(e.searchOptions)),"search"),e.getPrintTplList(),-1!=e.btnsList.indexOf("upload")&&e.setDefaultUpLoadData(),e.buildOptions(e.columnData.searchList)}))},computed:{getSearchOptions:function(){var e=this;return 2==this.columnData.type&&this.columnData.treeRelation?this.searchOptions.filter((function(t){return t.id!==e.columnData.treeRelation})):this.searchOptions},getIsKeywordDisabled:function(){return this.columnData.searchList.filter((function(e){return e.isKeyword})).length>=3}},methods:{getDataInterfaceInfo:function(e,t,a){var i=this;1!=a&&(this.columnData.treePropsName=t.fullName),this.columnData.treePropsUrl&&Object(d["k"])(this.columnData.treePropsUrl).then((function(e){i.fieldJsonList=e.data&&e.data.fieldJson&&(JSON.parse(e.data.fieldJson)||[])||[],i.hasPage=1==e.data.hasPage}))},querySearch:function(e,t){var a=this.fieldJsonList||[],i=e?a.filter(this.createStateFilter(e)):a;t(i)},createStateFilter:function(e){return function(t){return 0===t.defaultValue.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.columnData.treePropsLabel=e.defaultValue},onTreeRelationChange:function(e){var t=this;if(e){var a=this.columnData.searchList,i=JSON.parse(JSON.stringify(this.searchList));this.searchOptions=2==this.columnData.type?i.filter((function(t){return t.id!==e})):i,this.$nextTick((function(){t.columnData.searchList=t.setListValue(a,JSON.parse(JSON.stringify(t.searchOptions)),"search")}))}},buildOptions:function(e){4!=this.webType&&e.forEach((function(e){var t=e.__config__;if(A["b"].includes(t.jnpfKey)&&("dictionary"===t.dataType&&t.dictionaryType&&(e.options=[],Object(Q["i"])(t.dictionaryType).then((function(t){e.options=t.data.list}))),"dynamic"===t.dataType&&t.propsUrl)){e.options=[];var a={paramList:t.templateJson||[]};Object(d["o"])(t.propsUrl,a).then((function(t){e.options=Array.isArray(t.data)?t.data:[]}))}}))},onSearchMultipleChange:function(e,t){this.columnData.searchList[t].value=he(e),this.columnData.searchList[t].__config__.renderKey=+new Date},updateDefaultSortConfig:function(e){this.columnData.defaultSortConfig=e},closeForm:function(e){e&&(this.columnData.complexHeaderList=e),this.complexHeaderVisible=!1},addComplexHeader:function(){var e=this;this.complexHeaderVisible=!0;var t=JSON.parse(JSON.stringify(this.columnOptions)),a=t.filter((function(e){return"none"===e.fixed&&e.id.indexOf("-")<0}));this.$nextTick((function(){e.$refs.ComplexHeader.init(e.columnData.complexHeaderList,a)}))},editDefaultSortConfig:function(){var e=this;this.searchConfigVisible=!0,this.$nextTick((function(){e.$refs.SearchConfig.init({list:e.columnData.defaultSortConfig,columnOptions:e.groupFieldOptions.filter((function(e){return e.id.indexOf("_jnpf_")<0}))})}))},refreshPrintOptions:function(){var e=this;Object(u["k"])(2).then((function(t){var a=t.data.list,i=a.filter((function(e){return e.children&&e.children.length}));e.printTplList=i.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{hasChildren:!0})}))})).catch((function(e){reject(e)}))},open:function(e){window.open(e,"_blank")},updateSearchRow:function(e){this.ExtraConfigModalVisible=!1,this.columnData.searchList[this.activeSearchRowIndex]=e},openPrint:function(){var e=this.$router.resolve({path:"/system/printDev?open=true"});this.open(e.href)},getPrintTplList:function(){var e=this;this.$store.dispatch("base/getPrintFormTree").then((function(t){var a=t.filter((function(e){return e.children&&e.children.length}));e.printTplList=a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{hasChildren:!0})}))}))},filterPanelShow:function(){this.$refs.conditionpane.show(this.columnData.ruleList)},ruleConfig:function(e){this.columnData.ruleList=e},setBtnValue:function(e,t,a){a=a||"value";for(var i=0;i<e.length;i++)e:for(var l=0;l<t.length;l++)if(e[i][a]===t[l][a]){t[l]=e[i];break e}},setListValue:function(e,t,a){var i=this;e=e.filter((function(e){return t.some((function(t){return e.prop==t.prop}))})),"search"==a&&(e=e.filter((function(e){return e.id!==i.columnData.treeRelation})));for(var l=0;l<e.length;l++)e:for(var o=0;o<t.length;o++)if(e[l].prop===t[o].prop){"column"===a&&(t[o].fixed=e[l].fixed,t[o].align=e[l].align,t[o].width=e[l].width,t[o].sortable=e[l].sortable,4==this.webType&&(t[o].label=e[l].label)),"search"===a&&(e[l].jnpfKey===t[o].jnpfKey&&(t[o].searchType=e[l].searchType,t[o].searchMultiple=e[l].searchMultiple,t[o].value=e[l].value),t[o].label=e[l].label,t[o].isKeyword=e[l].isKeyword,4==this.webType&&(t[o]=e[l])),e[l]=t[o];break e}for(var n=0;n<e.length;n++)for(var s=0;s<this[a+"Options"].length;s++)e[n].prop===this[a+"Options"][s].prop&&this.$refs[a+"Table"].toggleRowSelection(this[a+"Options"][s],!0);return e},updateListValue:function(e,t){var a=this;if(!e.length)return this.columnData[t+"List"]=[];var i=e.map((function(e){return e.prop}));this.columnData[t+"List"]=this.columnData[t+"List"].filter((function(e){return i.some((function(t){return e.prop==t}))}));for(var l=function(i){a.columnData[t+"List"].some((function(t){return t.prop===e[i].prop}))||(a.columnData[t+"List"].push(JSON.parse(JSON.stringify(e[i]))),"search"==t&&a.buildOptions([e[i]]))},o=0;o<e.length;o++)l(o)},openExtraConfig:function(e,t){var a=this;this.ExtraConfigModalVisible=!0,this.activeSearchRowIndex=t,this.$nextTick((function(){a.$refs.ExtraConfigModal.init(e,t)}))},onJnpfKeyChange:function(e,t,a){t.__config__.jnpfKey=e;var i={id:t.id,fullName:t.fullName,label:t.label,prop:t.prop,jnpfKey:e,value:he(t),searchType:ve(t),__vModel__:t.__vModel__,searchMultiple:_e(t),isKeyword:!1,__config__:{label:t.label,jnpfKey:e}};"datePicker"===e&&(i.format="yyyy-MM-dd"),"timePicker"===e&&(i.format="HH:mm:ss"),"select"===e&&(i.options=[],i.props={label:"fullName",value:"id"},i.__config__=Object(s["a"])(Object(s["a"])({},i.__config__),{},{dataType:"static",propsUrl:"",propsName:"",templateJson:[],dictionaryType:""})),["organizeSelect","depSelect","userSelect"].includes(e)&&(i.isIncludeSubordinate=!1),this.columnData.searchList[a]=JSON.parse(JSON.stringify(i)),this.key=+new Date},setDefaultUpLoadData:function(){for(var e=this,t=this.columnData.uploaderTemplateJson.selectKey,a=[],i=function(){var i=t[l];e.list.some((function(e){return e.id==i}))&&a.push(i)},l=0;l<t.length;l++)i();for(var o=0;o<this.list.length;o++){var n=this.list[o],s=n.__config__.required,r=n.__config__.jnpfKey;me.includes(r)||(s||A["j"].includes(r))&&(t.includes(n.id)||a.push(n.id))}this.columnData.uploaderTemplateJson.selectKey=a},getData:function(){var e=this;if(this.btnsList.includes("batchPrint")&&0===this.columnData.printIds.length)return this.$message.warning("请选择打印模板");if(!this.columnData.printIds)return this.$message.warning("请选择打印模板");if(!this.columnData.columnList.length)return this.$message.warning("列表字段不允许为空");if(!this.columnData.uploaderTemplateJson.selectKey&&-1!=this.btnsList.indexOf("upload"))return this.$message.warning("请设置导入模板");if(2==this.columnData.type){if("dictionary"===this.columnData.treeDataSource&&!this.columnData.treeDictionary)return this.$message.warning("请选择数据字典");if("api"===this.columnData.treeDataSource){if(!this.columnData.treePropsValue)return this.$message.warning("请输入主键字段");if(!this.columnData.treePropsLabel)return this.$message.warning("请输入显示字段");if(!this.columnData.treePropsChildren)return this.$message.warning("请输入子级字段")}if(!this.columnData.treeRelation)return this.$message.warning("请选择关联字段");if(!this.columnData.treeInterfaceId&&1==this.columnData.treeSynType)return this.$message.warning("请选择异步数据接口")}return 3!=this.columnData.type||this.columnData.groupField?5!=this.columnData.type||this.columnData.parentField?(this.columnData.defaultColumnList=this.columnOptions.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{checked:e.columnData.columnList.some((function(e){return e.prop===t.prop}))})})),this.columnData):this.$message.warning("请选择父级字段"):this.$message.warning("请选择分组字段")},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=D.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.columnData.columnList.splice(t.oldIndex,1)[0];e.columnData.columnList.splice(t.newIndex,0,a)},handle:".drag-handler"});var a=this.$refs.dragTableSearch.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];D.a.create(a,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.columnData.searchList.splice(t.oldIndex,1)[0];e.columnData.searchList.splice(t.newIndex,0,a)},handle:".drag-handler"})},searchSelectionChange:function(e){this.updateListValue(e,"search")},columnSelectionChange:function(e){var t=this;this.updateListValue(e,"column"),this.$nextTick((function(){t.updateComplexHeader()}))},onFixedChange:function(){this.updateComplexHeader()},updateComplexHeader:function(){if(this.columnData.complexHeaderList.length)for(var e=this.columnData.columnList.filter((function(e){return"none"===e.fixed&&e.id.indexOf("-")<0})),t=0;t<this.columnData.complexHeaderList.length;t++){var a=this.columnData.complexHeaderList[t];a.childColumns=a.childColumns.filter((function(t){return e.some((function(e){return e.id==t}))}))}},getDataInterfaceSelector:function(){var e=this;Object(d["p"])().then((function(t){e.dataInterfaceSelector=t.data}))},dataTypeChange:function(){this.columnData.treePropsValue="id",this.columnData.treePropsChildren="children",this.columnData.treePropsLabel="fullName"},addCustomBtn:function(){var e=this.jnpf.idGenerator();this.columnData.customBtnsList.push({value:"btn_"+e,label:"按钮"+e,event:""})},editFunc:function(e){var t=this;e.event.func||(e.event=be),this.activeItem=e,this.customBtnVisible=!0,this.$nextTick((function(){t.$refs.customBtn.init("pc",e.event,t.webType,t.columnOptions)}))},updateScript:function(e){this.columnData.funcs[this.funcName]=e},updateCustomBtn:function(e){var t=this;this.columnData.customBtnsList.forEach((function(a,i){a.value==t.activeItem.value&&t.$set(t.columnData.customBtnsList[i],"event",e)}))},addFunc:function(e,t){var a=this;e||"afterOnload"!=t||(e=ge),e||"rowStyle"!=t||(e=ye),e||"cellStyle"!=t||(e=De),this.activeItem=e,this.funcName=t,this.formScriptVisible=!0,this.$nextTick((function(){a.$refs.formScript.init()}))},setUploaderTemplateJson:function(){var e=this;this.uploadBoxVisible=!0,this.$nextTick((function(){var t=e.columnData.uploaderTemplateJson.selectKey?e.columnData.uploaderTemplateJson.selectKey:[],a=e.columnData.uploaderTemplateJson.dataType?e.columnData.uploaderTemplateJson.dataType:"",i=e.list.filter((function(e){return"location"!=e.__config__.jnpfKey}));e.$refs.uploadRef.init(i,t,a)}))},onConfirm:function(e){this.columnData.uploaderTemplateJson=e},onInterfaceChange:function(e,t){if(!e)return this.columnData.treeInterfaceId="",this.columnData.treeInterfaceName="",void(this.columnData.treeTemplateJson=[]);this.columnData.treeInterfaceId!==e&&(this.columnData.treeInterfaceId=e,this.columnData.treeInterfaceName=t.fullName,this.columnData.treeTemplateJson=t.templateJson?t.templateJson.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{relationField:""})})):[])},goDataInterface:function(){var e=window.location.protocol+"//"+window.location.host+"/systemData/dataInterface";window.open(e,"_blank")},toggleType:function(e){this.columnData.type!=e&&(this.columnData.type=e,this.onTreeRelationChange(this.columnData.treeRelation),this.columnData.childTableStyle=1,this.updateBtnsList(e))},updateBtnsList:function(e){"4"!=this.webType&&(5==e?(this.btnsOption=[ke[0]],this.btnsList=this.btnsList.filter((function(e){return"add"===e}))):this.btnsOption=ke)}}},Fe=Te,Se=(a("15a9"),Object(v["a"])(Fe,o,n,!1,null,"21cadda2",null)),Ne=Se.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columnDesign-container"},[a("div",{staticClass:"main-board"},[a("div",{staticClass:"search-box"},[a("h4",{staticClass:"cap"},[e._v("查询字段")]),a("el-table",{ref:"dragTableSearch",staticClass:"JNPF-common-table",attrs:{data:e.columnData.searchList,"row-key":function(e){return e.prop}}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"label",label:"列名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"列名"},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"字段",width:"600"}}),4==e.webType?a("el-table-column",{attrs:{prop:"jnpfKey",label:"输入类型",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{key:e.key,attrs:{placeholder:"请选择",disabled:t.row.__config__.isFromParam},on:{change:function(a){return e.onJnpfKeyChange(a,t.row,t.$index)}},model:{value:t.row.jnpfKey,callback:function(a){e.$set(t.row,"jnpfKey",a)},expression:"scope.row.jnpfKey"}},e._l(e.viewJnpfKeyOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1),["select","datePicker","timePicker","organizeSelect","depSelect","userSelect"].includes(t.row.__config__.jnpfKey)&&!t.row.__config__.isFromParam?[a("i",{staticClass:"el-icon-setting",staticStyle:{"margin-left":"10px","font-size":"16px",cursor:"pointer"},attrs:{title:"组件属性设置"},on:{click:function(a){return e.openExtraConfig(t.row,t.$index)}}})]:e._e()]}}],null,!1,2303200658)}):e._e(),a("el-table-column",{attrs:{prop:"searchType",label:"条件类型",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.__config__.isFromParam?e._e():a("el-select",{attrs:{placeholder:"请选择",disabled:"input"!==t.row.jnpfKey&&"textarea"!==t.row.jnpfKey},model:{value:t.row.searchType,callback:function(a){e.$set(t.row,"searchType",a)},expression:"scope.row.searchType"}},[a("el-option",{attrs:{label:"等于查询",value:1}}),a("el-option",{attrs:{label:"模糊查询",value:2}}),a("el-option",{attrs:{label:"范围查询",value:3}})],1)]}}])}),4!=e.webType?a("el-table-column",{attrs:{prop:"label",label:"默认值",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.textBoxList.includes(t.row.jnpfKey)?a("el-input",{attrs:{placeholder:"默认值"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"inputNumber"===t.row.jnpfKey||"rate"===t.row.jnpfKey||"slider"===t.row.jnpfKey?a("num-range",{attrs:{precision:t.row.precision,clearable:"",filterable:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),e.selectionBoxList.includes(t.row.jnpfKey)?a("el-select",{key:t.row.__config__.renderKey,staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:"",multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}},e._l(t.row.options,(function(e,i){return a("el-option",{key:i,attrs:{label:e[t.row.props.label],value:e[t.row.props.value]}})})),1):e._e(),"cascader"===t.row.jnpfKey?a("JnpfCascader",{staticStyle:{width:"100%"},attrs:{options:t.row.options,clearable:"","show-all-levels":t.row.showAllLevels,props:t.row.props,multiple:t.row.searchMultiple,filterable:"",placeholder:"请选择"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"autoComplete"===t.row.jnpfKey?a("JnpfAutoComplete",{attrs:{placeholder:"请选择",interfaceId:t.row.interfaceId,clearable:"",propsValue:t.row.propsValue,relationField:t.row.relationField,templateJson:t.row.templateJson,total:t.row.total},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"areaSelect"===t.row.jnpfKey?a("JnpfAreaSelect",{attrs:{placeholder:"请选择"+t.row.fullName,level:t.row.level,clearable:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"datePicker"===t.row.jnpfKey?a("JnpfDateRangePicker",{attrs:{type:t.row.type,clearable:"",format:t.row.format,startPlaceholder:"开始日期",endPlaceholder:"结束日期"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"timePicker"===t.row.jnpfKey?a("el-time-picker",{staticClass:"item",staticStyle:{width:"100%"},attrs:{"start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:"","value-format":t.row.format,format:t.row.format,"is-range":""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"organizeSelect"===t.row.__config__.jnpfKey?a("JnpfOrganizeSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",multiple:t.row.searchMultiple,selectType:t.row.selectType,ableIds:t.row.ableIds},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"depSelect"===t.row.__config__.jnpfKey?a("JnpfDepSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:t.row.selectType,ableIds:t.row.ableIds,multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"posSelect"===t.row.__config__.jnpfKey?a("JnpfPosSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:t.row.selectType,ableIds:t.row.ableIds,ablePosIds:t.row.ablePosIds,multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"userSelect"===t.row.jnpfKey?a("JnpfUserSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:"all"!=t.row.selectType&&"custom"!=t.row.selectType?"all":t.row.selectType,ableIds:t.row.ableIds,multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"usersSelect"===t.row.jnpfKey?a("JnpfUsersSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:t.row.selectType,ableIds:t.row.ableIds,multiple:t.row.searchMultiple},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"roleSelect"===t.row.__config__.jnpfKey?a("JnpfRoleSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",multiple:t.row.searchMultiple,ableIds:t.row.ableIds,selectType:t.row.selectType},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e(),"groupSelect"===t.row.__config__.jnpfKey?a("JnpfGroupSelect",{attrs:{placeholder:"请选择"+t.row.fullName,clearable:"",selectType:t.row.selectType,multiple:t.row.searchMultiple,ableIds:t.row.ableIds},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):e._e()]}}],null,!1,1943739527)}):e._e(),4!=e.webType?a("el-table-column",{attrs:{prop:"isKeyword",label:"关键词",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{disabled:!e.canSetKeyword.includes(t.row.jnpfKey)||e.getIsKeywordDisabled&&!t.row.isKeyword},model:{value:t.row.isKeyword,callback:function(a){e.$set(t.row,"isKeyword",a)},expression:"scope.row.isKeyword"}})]}}],null,!1,3151298112)}):e._e(),a("el-table-column",{attrs:{prop:"searchMultiple",label:"是否多选",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[["select","depSelect","roleSelect","userSelect","usersSelect","organizeSelect","posSelect","groupSelect"].includes(t.row.jnpfKey)?a("el-checkbox",{on:{change:function(a){return e.onSearchMultipleChange(t.row,t.$index)}},model:{value:t.row.searchMultiple,callback:function(a){e.$set(t.row,"searchMultiple",a)},expression:"scope.row.searchMultiple"}}):a("el-checkbox",{attrs:{disabled:""}})]}}])})],1)],1),a("el-divider"),a("div",{staticClass:"column-box"},[a("h4",{staticClass:"cap"},[e._v("列表字段")]),a("el-table",{ref:"dragTable",staticClass:"JNPF-common-table",attrs:{data:e.columnData.columnList,"row-key":function(e){return e.prop}}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),4!=e.webType?a("el-table-column",{attrs:{prop:"label",label:"列名"}}):a("el-table-column",{attrs:{prop:"label",label:"列名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"列名"},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"字段"}}),a("el-table-column",{attrs:{prop:"sortable",label:"排序",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{disabled:t.row.__config__&&(t.row.__config__.isSubTable||e.noGroupList.includes(t.row.__config__.jnpfKey))},model:{value:t.row.sortable,callback:function(a){e.$set(t.row,"sortable",a)},expression:"scope.row.sortable"}})]}}])})],1)],1)],1),a("div",{staticClass:"right-board"},[a("el-tabs",{staticClass:"top-tabs",model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:"查询字段",name:"search"}}),a("el-tab-pane",{attrs:{label:"列表字段",name:"column"}}),a("el-tab-pane",{attrs:{label:"列表属性",name:"attr"}})],1),a("div",{staticClass:"field-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"search"===e.currentTab,expression:"currentTab==='search'"}],staticClass:"columnList"},[a("el-table",{ref:"searchTable",staticClass:"JNPF-common-table",attrs:{data:e.searchOptions,height:"100%"},on:{"selection-change":e.searchSelectionChange}},[(e.webType,a("el-table-column",{attrs:{prop:"fullName",label:"查询字段"}})),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"column"===e.currentTab,expression:"currentTab==='column'"}],staticClass:"columnList"},[a("el-table",{ref:"columnTable",staticClass:"JNPF-common-table",attrs:{data:e.columnOptions,height:"100%"},on:{"selection-change":e.columnSelectionChange}},[4!=e.webType?a("el-table-column",{attrs:{prop:"label",label:"列表字段"}}):a("el-table-column",{attrs:{prop:"fullName",label:"列表字段"}}),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}})],1)],1),a("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:"attr"===e.currentTab,expression:"currentTab==='attr'"}],staticClass:"right-scrollbar"},[a("div",{staticClass:"setting-box"},[a("el-form",{attrs:{model:e.columnData,"label-width":"80px","label-position":"left"}},[a("el-divider",[e._v("表格配置")]),4!=e.webType?a("el-form-item",{attrs:{label:"数据过滤"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:e.filterPanelShow}},[e._v("\n                "+e._s(this.columnData.ruleListApp&&this.columnData.ruleListApp.conditionList&&this.columnData.ruleListApp.conditionList.length>0?"编辑过滤条件":"添加过滤条件")+"\n              ")])],1):e._e(),a("Condition",{ref:"conditionpane",attrs:{modelType:e.modelType,formFieldsOptions:4==e.webType?e.columnOptions:e.list},on:{ruleConfig:e.ruleConfig}}),a("el-form-item",{attrs:{label:"默认排序"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:e.editDefaultSortConfig}},[e._v("\n                默认排序配置\n              ")])],1),a("el-form-item",{attrs:{label:"分页设置"}},[a("el-switch",{model:{value:e.columnData.hasPage,callback:function(t){e.$set(e.columnData,"hasPage",t)},expression:"columnData.hasPage"}})],1),e.columnData.hasPage?a("el-form-item",{attrs:{label:"分页条数"}},[a("el-radio-group",{model:{value:e.columnData.pageSize,callback:function(t){e.$set(e.columnData,"pageSize",t)},expression:"columnData.pageSize"}},[a("el-radio-button",{attrs:{label:20}},[e._v("20条")]),a("el-radio-button",{attrs:{label:50}},[e._v("50条")]),a("el-radio-button",{attrs:{label:100}},[e._v("100条")]),a("el-radio-button",{attrs:{label:500}},[e._v("500条")])],1)],1):e._e(),a("el-divider",[e._v("按钮配置")]),4!=e.webType?a("el-checkbox-group",{staticClass:"btnsList",model:{value:e.btnsList,callback:function(t){e.btnsList=t},expression:"btnsList"}},e._l(e.btnsOption,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[a("span",{staticClass:"btn-label"},[e._v(e._s(e._f("btnText")(t.value)))]),a("el-input",{model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}})],1)})),1):e._e(),4!=e.webType?a("el-checkbox-group",{staticClass:"btnsList columnBtnList",model:{value:e.columnBtnsList,callback:function(t){e.columnBtnsList=t},expression:"columnBtnsList"}},e._l(e.columnBtnsOption,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[a("span",{staticClass:"btn-label"},[e._v(e._s(e._f("btnText")(t.value)))]),a("el-input",{model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}})],1)})),1):e._e(),1==e.modelType?[a("p",{staticClass:"btn-cap mt-10 mb-10"},[e._v("自定义按钮区")]),a("div",{staticClass:"custom-btns-list"},[a("draggable",{attrs:{list:e.columnData.customBtnsList,animation:340,group:"customItem",handle:".option-drag"}},e._l(e.columnData.customBtnsList,(function(t,i){return a("div",{key:i,staticClass:"custom-item"},[a("div",{staticClass:"custom-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("p",{staticClass:"custom-line-value"},[e._v(e._s(t.value))]),a("el-input",{attrs:{placeholder:"按钮名称",size:"small"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}},[a("template",{slot:"append"},[a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:function(a){return e.editFunc(t)}}},[e._v("事件\n                        ")])],1)],2),a("div",{staticClass:"close-btn custom-line-icon",on:{click:function(t){return e.columnData.customBtnsList.splice(i,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0)],1),a("div",[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.addCustomBtn}},[e._v("添加按钮")])],1)]:e._e(),4!=e.webType?[a("el-divider",[e._v("权限设置")]),a("el-form-item",{attrs:{label:"按钮权限"}},[a("el-switch",{model:{value:e.columnData.useBtnPermission,callback:function(t){e.$set(e.columnData,"useBtnPermission",t)},expression:"columnData.useBtnPermission"}})],1),a("el-form-item",{attrs:{label:"列表权限"}},[a("el-switch",{model:{value:e.columnData.useColumnPermission,callback:function(t){e.$set(e.columnData,"useColumnPermission",t)},expression:"columnData.useColumnPermission"}})],1),a("el-form-item",{attrs:{label:"表单权限"}},[a("el-switch",{model:{value:e.columnData.useFormPermission,callback:function(t){e.$set(e.columnData,"useFormPermission",t)},expression:"columnData.useFormPermission"}})],1),a("el-form-item",{attrs:{label:"数据权限"}},[a("el-switch",{model:{value:e.columnData.useDataPermission,callback:function(t){e.$set(e.columnData,"useDataPermission",t)},expression:"columnData.useDataPermission"}})],1)]:e._e(),1==e.modelType?[a("el-divider",[e._v("脚本事件")]),a("el-form-item",{attrs:{label:"表格事件"}},[a("el-button",{staticStyle:{width:"100%"},on:{click:function(t){return e.addFunc(e.columnData.funcs.afterOnload,"afterOnload",!0)}}},[e._v("脚本编写\n                ")])],1)]:e._e()],2)],1)])],1)],1),e.formScriptVisible?a("form-script",{ref:"formScript",attrs:{value:e.activeItem,type:e.funcName},on:{updateScript:e.updateScript,closeDialog:function(t){e.formScriptVisible=!1}}}):e._e(),e.customBtnVisible?a("custom-btn",{ref:"customBtn",attrs:{activeItem:e.activeItem},on:{updateCustomBtn:e.updateCustomBtn,closeDialog:function(t){e.customBtnVisible=!1}}}):e._e(),e.searchConfigVisible?a("DefaultSortConfigModal",{ref:"SearchConfig",on:{confirm:e.updateDefaultSortConfig}}):e._e(),e.ExtraConfigModalVisible?a("ExtraConfigModal",{ref:"ExtraConfigModal",on:{confirm:e.updateSearchRow}}):e._e()],1)},Oe=[],$e=function(e){var t=e.__config__.jnpfKey,a=["select","depSelect","roleSelect","userSelect","usersSelect","organizeSelect","posSelect","groupSelect"];return!!a.includes(t)},Ie=function(e){var t=e.__config__.jnpfKey,a=["areaSelect","datePicker","inputNumber","organizeSelect","calculate"];return a.includes(t)||e.multiple?[]:void 0},je=function(e){var t=e.__config__.jnpfKey,a=Object(c["a"])(A["l"]),i=[].concat(Object(c["a"])(A["k"]),["timePicker","datePicker","inputNumber","calculate"]);return i.includes(t)?3:a.includes(t)?2:1},Me="({ data, index, refresh, onlineUtils }) => {\r\n   \r\n}",Ve="({ data, tableRef, onlineUtils }) => {\r\n   \r\n}",Ae={ruleListApp:{matchLogic:"and",conditionList:[]},searchList:[],hasSuperQuery:!1,columnList:[],columnOptions:[],defaultColumnList:[],defaultSortConfig:[],hasPage:!0,pageSize:20,useColumnPermission:!1,useFormPermission:!1,useBtnPermission:!1,useDataPermission:!1,customBtnsList:[],thousands:!1,thousandsField:[],btnsList:[{value:"add",icon:"icon-ym icon-ym-btn-add",label:"新增"}],columnBtnsList:[{value:"edit",icon:"icon-ym icon-ym-btn-edit",label:"编辑"},{value:"remove",icon:"icon-ym icon-ym-btn-clearn",label:"删除"},{value:"detail",icon:"icon-ym icon-ym-generator-menu",label:"详情"}],funcs:{afterOnload:""},loading:!1},Pe={name:"columnDesign",props:{conf:{type:Object,default:function(){}},webType:"",modelType:"",interfaceId:"",templateJson:{type:Array,default:function(){return[]}},viewFields:{type:Array,default:function(){return[]}}},components:{draggable:x.a,FormScript:O,CustomBtn:B,Condition:g,ExtraConfigModal:fe,DefaultSortConfigModal:ie},data:function(){return{searchConfigVisible:!1,viewJnpfKeyOptions:[{id:"input",fullName:"单行输入"},{id:"inputNumber",fullName:"数字输入"},{id:"select",fullName:"下拉选择"},{id:"datePicker",fullName:"日期选择"},{id:"timePicker",fullName:"时间选择"},{id:"organizeSelect",fullName:"组织选择"},{id:"depSelect",fullName:"部门选择"},{id:"roleSelect",fullName:"角色选择"},{id:"posSelect",fullName:"岗位选择"},{id:"groupSelect",fullName:"分组选择"},{id:"userSelect",fullName:"用户选择"}],key:+new Date,activeSearchRowIndex:0,ExtraConfigModalVisible:!1,textBoxList:["input","billRule"],selectionBoxList:A["m"],currentTab:"attr",alignOptions:["left","center","right"],list:[],columnData:JSON.parse(JSON.stringify(Ae)),btnsOption:[{value:"add",icon:"el-icon-plus",label:"新增"}],columnBtnsOption:[{value:"edit",icon:"icon-ym icon-ym-btn-edit",label:"编辑"},{value:"remove",icon:"icon-ym icon-ym-btn-clearn",label:"删除"},{value:"detail",icon:"icon-ym icon-ym-generator-menu",label:"详情"}],canSetKeyword:["input","textarea","inputNumber","autoComplete"],columnOptions:[],searchOptions:[],groupFieldOptions:[],sortOptions:[],sortList:[],btnsList:[],columnBtnsList:[],formScriptVisible:!1,customBtnVisible:!1,activeItem:{},funcName:"",thousandsOptions:[],noGroupList:A["e"]}},filters:{btnText:function(e){var t="";switch(e){case"edit":t="编辑";break;case"remove":t="删除";break;case"detail":t="详情";break;default:t="新增";break}return t}},computed:{getIsKeywordDisabled:function(){return this.columnData.searchList.filter((function(e){return e.isKeyword})).length>=3}},watch:{btnsList:function(e){for(var t=[],a=0;a<this.btnsOption.length;a++)e:for(var i=0;i<e.length;i++)if(e[i]===this.btnsOption[a].value){t.push(this.btnsOption[a]);break e}this.columnData.btnsList=t},columnBtnsList:function(e){for(var t=[],a=0;a<this.columnBtnsOption.length;a++)e:for(var i=0;i<e.length;i++)if(e[i]===this.columnBtnsOption[a].value){t.push(this.columnBtnsOption[a]);break e}this.columnData.columnBtnsList=t}},created:function(){var e=this;if(this.loading=!1,"object"===Object(r["a"])(this.conf)&&null!==this.conf&&(this.columnData=Object.assign({},Ae,this.conf)),4!=this.webType){var t=[],a=[],i=function e(i,l){if(i&&(i.__config__&&i.__config__.children&&Array.isArray(i.__config__.children)&&e(i.__config__.children,i),Array.isArray(i)&&i.forEach((function(t){return e(t,l)})),i.__config__&&i.__config__.jnpfKey)){var o=!i.__config__.visibility||Array.isArray(i.__config__.visibility)&&i.__config__.visibility.includes("app");if("colFormItem"===i.__config__.layout&&i.__vModel__&&o){var n=l&&l.__config__&&"table"===l.__config__.jnpfKey,s=n?l.__vModel__+"-"+i.__vModel__:i.__vModel__,r=n?l.__config__.label+"-"+i.__config__.label:i.__config__.label;i.id=s,i.fullName=r,t.push(i),i.__vModel__.indexOf("_jnpf_")<0&&a.push(i)}}};i(Object(j["a"])()),this.list=t;var l=t.filter((function(e){return A["d"].indexOf(e.__config__.jnpfKey)<0||1==e.isStorage})),o=t.filter((function(e){return A["f"].indexOf(e.__config__.jnpfKey)<0}));this.thousandsOptions=t.filter((function(e){return A["f"].indexOf(e.__config__.jnpfKey)<0&&("inputNumber"==e.__config__.jnpfKey||"calculate"==e.__config__.jnpfKey)}));var n=a.filter((function(e){return A["d"].indexOf(e.__config__.jnpfKey)<0||1==e.isStorage}));n=n.filter((function(e){return e.id.indexOf("-")<0})),this.groupFieldOptions=t.filter((function(e){return e.id.indexOf("-")<0&&!A["e"].includes(e.__config__.jnpfKey)})),this.columnOptions=l.map((function(e){return Object(s["a"])({label:e.fullName,prop:e.id,align:"left",jnpfKey:e.__config__.jnpfKey,sortable:!1,width:null},e)})),this.searchOptions=o.map((function(e){return Object(s["a"])({label:e.fullName,prop:e.id,jnpfKey:e.__config__.jnpfKey,value:Ie(e),searchType:je(e),searchMultiple:$e(e),isKeyword:!1},e)})),this.sortOptions=n.map((function(e){return Object(s["a"])({label:e.fullName,prop:e.id,jnpfKey:e.__config__.jnpfKey},e)})),this.columnData.columnOptions=l,this.columnOptions.length||(this.columnData.columnList=[]),this.searchOptions.length||(this.columnData.searchList=[]),this.sortOptions.length||(this.columnData.sortList=[]),this.setBtnValue(this.columnData.btnsList,this.btnsOption),this.setBtnValue(this.columnData.columnBtnsList,this.columnBtnsOption)}else{if(!this.interfaceId)return;this.templateJson;this.loading=!0;var d=this.viewFields;this.columnOptions=d.map((function(e){return{label:e.field,prop:e.defaultValue,fixed:"none",align:"left",jnpfKey:"input",sortable:!1,width:null,__vModel__:e.defaultValue,id:e.defaultValue,fullName:e.field,__config__:{jnpfKey:"input"}}}));var u=(this.templateJson||[]).filter((function(e){return e.useSearch})).map((function(e){var t="input";return"int"!==e.dataType&&"decimal"!==e.dataType||(t="inputNumber"),"datetime"===e.dataType&&(t="datePicker"),{id:e.field,fullName:e.fieldName,label:e.fieldName,prop:e.field,jnpfKey:t,__vModel__:e.field,__config__:{isFromParam:!0,jnpfKey:t}}}));this.searchOptions=d.map((function(e){return{label:e.field,prop:e.defaultValue,jnpfKey:"input",value:"",searchType:1,__vModel__:e.defaultValue,id:e.defaultValue,fullName:e.field,searchMultiple:!1,__config__:{label:e.field,jnpfKey:"input"}}}));var p=this.searchOptions.filter((function(e){return!u.some((function(t){return t.id===e.id}))}));this.searchOptions=[].concat(Object(c["a"])(u),Object(c["a"])(p)),this.sortOptions=d.map((function(e){return{label:e.field,prop:e.defaultValue,id:e.defaultValue,fullName:e.field,jnpfKey:e}})),this.groupFieldOptions=d.map((function(e){return{label:e.field,prop:e.defaultValue,jnpfKey:"input",__vModel__:e.defaultValue,id:e.defaultValue,fullName:e.field,__config__:{label:e.field,jnpfKey:"input"}}})),this.columnOptions.length||(this.columnData.columnList=[]),this.searchOptions.length||(this.columnData.searchList=[])}this.$nextTick((function(){e.columnData.columnList=e.setListValue(e.columnData.columnList,JSON.parse(JSON.stringify(e.columnOptions)),"column"),e.columnData.searchList=e.setListValue(e.columnData.searchList,JSON.parse(JSON.stringify(e.searchOptions)),"search"),e.loading=!1})),this.btnsList=this.columnData.btnsList.map((function(e){return e.value})),this.columnBtnsList=this.columnData.columnBtnsList.map((function(e){return e.value}))},mounted:function(){this.setSort(),this.buildOptions(this.columnData.searchList)},methods:{buildOptions:function(e){4!=this.webType&&e.forEach((function(e){var t=e.__config__;if(A["b"].includes(t.jnpfKey)&&("dictionary"===t.dataType&&t.dictionaryType&&(e.options=[],Object(Q["i"])(t.dictionaryType).then((function(t){e.options=t.data.list}))),"dynamic"===t.dataType&&t.propsUrl)){e.options=[];var a={paramList:t.templateJson||[]};Object(d["o"])(t.propsUrl,a).then((function(t){e.options=Array.isArray(t.data)?t.data:[]}))}}))},updateSearchRow:function(e){this.ExtraConfigModalVisible=!1,this.columnData.searchList[this.activeSearchRowIndex]=e},onSearchMultipleChange:function(e,t){this.columnData.searchList[t].value=Ie(e),this.columnData.searchList[t].__config__.renderKey=+new Date},filterPanelShow:function(){this.$refs.conditionpane.show(this.columnData.ruleListApp)},ruleConfig:function(e){this.columnData.ruleListApp=e},setBtnValue:function(e,t,a){a=a||"value";for(var i=0;i<e.length;i++)e:for(var l=0;l<t.length;l++)if(e[i][a]===t[l][a]){t[l]=e[i];break e}},openExtraConfig:function(e,t){var a=this;this.ExtraConfigModalVisible=!0,this.activeSearchRowIndex=t,this.$nextTick((function(){a.$refs.ExtraConfigModal.init(e,t)}))},updateDefaultSortConfig:function(e){this.columnData.defaultSortConfig=e},onJnpfKeyChange:function(e,t,a){t.__config__.jnpfKey=e;var i={id:t.id,fullName:t.fullName,label:t.label,prop:t.prop,jnpfKey:e,value:Ie(t),searchType:je(t),__vModel__:t.__vModel__,searchMultiple:$e(t),isKeyword:!1,__config__:{label:t.label,jnpfKey:e}};"datePicker"===e&&(i.format="yyyy-MM-dd"),"timePicker"===e&&(i.format="HH:mm:ss"),"select"===e&&(i.options=[],i.props={label:"fullName",value:"id"},i.__config__=Object(s["a"])(Object(s["a"])({},i.__config__),{},{dataType:"static",propsUrl:"",propsName:"",templateJson:[],dictionaryType:""})),["organizeSelect","depSelect","userSelect"].includes(e)&&(i.isIncludeSubordinate=!1),this.columnData.searchList[a]=JSON.parse(JSON.stringify(i)),this.key=+new Date},setListValue:function(e,t,a){e=e.filter((function(e){return t.some((function(t){return e.prop==t.prop}))}));for(var i=0;i<e.length;i++)e:for(var l=0;l<t.length;l++)if(e[i].prop===t[l].prop){"column"===a&&(t[l].fixed=e[i].fixed,t[l].align=e[i].align,t[l].width=e[i].width,t[l].sortable=e[i].sortable,4==this.webType&&(t[l].label=e[i].label)),"search"===a&&(e[i].jnpfKey===t[l].jnpfKey&&(t[l].searchType=e[i].searchType,t[l].searchMultiple=e[i].searchMultiple,t[l].value=e[i].value),t[l].label=e[i].label,t[l].isKeyword=e[i].isKeyword,4==this.webType&&(t[l]=e[i])),e[i]=t[l];break e}for(var o=0;o<e.length;o++)for(var n=0;n<this[a+"Options"].length;n++)e[o].prop===this[a+"Options"][n].prop&&this.$refs[a+"Table"].toggleRowSelection(this[a+"Options"][n],!0);return e},editDefaultSortConfig:function(){var e=this;this.searchConfigVisible=!0,this.$nextTick((function(){e.$refs.SearchConfig.init({list:e.columnData.defaultSortConfig,columnOptions:e.groupFieldOptions})}))},updateListValue:function(e,t){var a=this;if(!e.length)return this.columnData[t+"List"]=[];var i=e.map((function(e){return e.prop}));this.columnData[t+"List"]=this.columnData[t+"List"].filter((function(e){return i.some((function(t){return e.prop==t}))}));for(var l=function(i){a.columnData[t+"List"].some((function(t){return t.prop===e[i].prop}))||(a.columnData[t+"List"].push(JSON.parse(JSON.stringify(e[i]))),"search"==t&&a.buildOptions([e[i]]))},o=0;o<e.length;o++)l(o)},getData:function(){var e=this;return this.columnData.defaultColumnList=this.columnOptions.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{checked:e.columnData.columnList.some((function(e){return e.prop===t.prop}))})})),this.columnData},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=D.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.columnData.columnList.splice(t.oldIndex,1)[0];e.columnData.columnList.splice(t.newIndex,0,a)},handle:".drag-handler"});var a=this.$refs.dragTableSearch.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];D.a.create(a,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.columnData.searchList.splice(t.oldIndex,1)[0];e.columnData.searchList.splice(t.newIndex,0,a)},handle:".drag-handler"})},sortSelectionChange:function(e){this.updateListValue(e,"sort")},searchSelectionChange:function(e){this.updateListValue(e,"search")},columnSelectionChange:function(e){this.updateListValue(e,"column")},addCustomBtn:function(){var e=this.jnpf.idGenerator();this.columnData.customBtnsList.push({value:"btn_"+e,label:"按钮"+e,event:{func:""}})},editFunc:function(e){var t=this;e.event.func||(e.event.func=Me),this.activeItem=e,this.customBtnVisible=!0,this.$nextTick((function(){t.$refs.customBtn.init("app",e.event,t.webType,t.columnOptions)}))},updateScript:function(e){this.columnData.funcs[this.funcName]=e},updateCustomBtn:function(e){var t=this;this.columnData.customBtnsList.forEach((function(a,i){a.value==t.activeItem.value&&t.$set(t.columnData.customBtnsList[i],"event",e)}))},addFunc:function(e,t){var a=this;e||(e=Ve),this.activeItem=e,this.funcName=t,this.formScriptVisible=!0,this.$nextTick((function(){a.$refs.formScript.init()}))}}},Je=Pe,Re=(a("74f2"),Object(v["a"])(Je,Le,Oe,!1,null,"6bb42faa",null)),Ke=Re.exports,Be={name:"columnDesign-box",props:{columnData:{type:Object,default:function(){}},appColumnData:{type:Object,default:function(){}},viewFields:{type:Array,default:function(){return[]}},webType:"",modelType:"",interfaceId:"",templateJson:{type:Array,default:function(){return[]}}},components:{ColumnMain:Ne,ColumnMainApp:Ke},data:function(){return{currentTab:"pc"}},created:function(){},methods:{currentTabChange:function(e){this.currentTab=e,this.$store.state.generator.ruleData=[]},getData:function(){var e=this;return new Promise((function(t,a){var i=e.$refs.columnMain.getData();i||a({msg:"",target:2});var l=e.$refs.columnMainApp.getData();l.columnList&&l.columnList.length||(l.columnList=i.columnList),t({columnData:i,appColumnData:l,target:2})}))}}},Ee=Be,ze=(a("d43e"),Object(v["a"])(Ee,i,l,!1,null,"4e6540e5",null));t["a"]=ze.exports},bdfea:function(e,t,a){"use strict";a("2574")},bf55:function(e,t,a){"use strict";a("91e2")},c151:function(e,t,a){"use strict";a("f80e")},c153:function(e,t,a){},c25c:function(e,t,a){"use strict";a("1822")},c288:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"portal-common-title",style:{background:e.card.titleBgColor}},[a("div",{staticClass:"title",style:{color:e.card.titleFontColor,"font-size":e.card.titleFontSize+"px","justify-content":e.card.titleLeft,"font-weight":e.card.titleFontWeight?"bolder":"normal"}},[a("i",{class:e.card.cardIcon,style:{color:e.card.cardIconColor||"#000"}}),a("span",[e._v(e._s(e.title))])]),e.card.cardRightBtn?a("web-link",{attrs:{linkType:e.card.linkType,urlAddress:e.card.urlAddress,linkTarget:e.card.linkTarget,type:e.card.type,propertyJson:e.card.propertyJson}},[a("el-button",{staticClass:"button",attrs:{type:"text"}},[e._v(e._s(e.card.cardRightBtn))])],1):e._e()],1)},l=[],o=a("6058"),n={components:{webLink:o["a"]},props:{title:{type:String,default:""},card:{type:Object,default:function(){}}}},s=n,r=(a("d621"),a("2877")),c=Object(r["a"])(s,i,l,!1,null,"5c59c534",null);t["a"]=c.exports},c351:function(e,t,a){"use strict";a("ecdb")},c489:function(e,t,a){"use strict";a("37ff")},c4ff:function(e,t,a){"use strict";a("2746")},c529:function(e,t,a){},c5cd:function(e,t,a){"use strict";var i={initiator:[],title:"流程发起",errorRule:1,errorRuleUser:[],resurgenceDataRule:0,funcConfigRule:0,timeLimitConfig:{on:0,nodeLimit:0,duringDeal:24,formField:""},overTimeConfig:{on:0,firstOver:0,overTimeDuring:2,overNotice:!1,overAutoApprove:!1,overAutoApproveTime:5,overEvent:!1,overEventTime:5},noticeConfig:{on:0,firstOver:1,overTimeDuring:2,overNotice:!1,overEvent:!1,overEventTime:5},overTimeFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},noticeFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},initFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},endFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},flowRecallFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},waitMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},endMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},approveMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},rejectMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},copyMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},overTimeMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},noticeMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},hasSubmitBtn:!0,submitBtnText:"提 交",hasSaveBtn:!0,saveBtnText:"暂 存",hasPressBtn:!0,pressBtnText:"催 办",hasRevokeBtn:!0,revokeBtnText:"撤 回",hasPrintBtn:!1,printBtnText:"打 印",printId:"",isComment:!1,isBatchApproval:!1,isSummary:!1,summaryType:0,titleType:0,defaultContent:"{发起用户名}的{流程名称}",titleContent:"",formOperates:[],circulateUser:[],isCustomCopy:!1,isFormFieldCopy:!1,copyFormFieldType:1,copyFormField:"",extraCopyRule:1,hasSign:!1,hasOpinion:!0,formId:"",formName:"",allFormMap:{},revokeRule:2};t["a"]={defaultStartForm:i,start:{type:"start",content:"所有人",properties:i},approver:{type:"approver",content:"请设置审批人",properties:{title:"审批节点"}},copy:{type:"copy",content:"发起人自选",properties:{title:"抄送人",members:[],userOptional:!0}},timer:{type:"timer",content:"请设置时间",properties:{title:"定时器",day:0,hour:0,minute:0,second:0}},subFlow:{type:"subFlow",content:"请设置发起人",properties:{title:"子流程"}},interflow:{type:"approver",content:"请设置审批人",isInterflow:!0,properties:{title:"审批节点"}},branchFlow:{type:"approver",content:"请设置审批人",isBranchFlow:!0,properties:{title:"审批节点"}},condition:{type:"condition",content:"请设置条件",properties:{title:"条件",matchLogic:"and",conditions:[],initiator:null,conditionType:0,swerveNode:"",swerveLabel:""}},branch:{type:"branch",content:"",properties:{}},empty:{type:"empty",content:"",properties:{}}}},c775:function(e,t,a){"use strict";a("1cd5")},c797:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-scrollbar",{staticClass:"layout-area"},[e.layout.length?[i("grid-layout",{attrs:{layout:e.layout,"row-height":40},on:{"update:layout":function(t){e.layout=t}}},e._l(e.layout,(function(t){return i("grid-item",{key:t.i,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,maxH:t.maxH,minH:t.minH,minW:t.minW,maxW:t.maxW,static:!!e.enabledLock},on:{resized:function(a){return e.resizedEvent(t.i,t)},moved:e.movedEvent}},[i("parser",{attrs:{item:t,detailed:!0}}),e.mask&&!e.noNeedMaskList.includes(t.jnpfKey)?i("div",{staticClass:"mask"}):e._e()],1)})),1)]:i("div",{staticClass:"portal-layout-nodata"},[i("img",{staticClass:"layout-nodata-img",attrs:{src:a("c13c"),alt:""}}),i("p",{staticClass:"layout-nodata-txt"},[e._v("暂无数据")])])],2)},l=[],o=(a("c5f6"),a("6433")),n=a("7be8"),s=a.n(n),r=a("32aa"),c={props:{layout:{type:Array,default:function(){return[]}},mask:{type:Boolean,default:!1},detailed:{type:Boolean,default:!1},enabledLock:{type:Number,default:1}},components:{GridLayout:s.a.GridLayout,GridItem:s.a.GridItem,parser:o["a"]},data:function(){return{noNeedMaskList:r["x"],timer:""}},methods:{movedEvent:function(){this.$emit("layoutUpdatedEvent")},resizedEvent:function(e,t){var a=this;this.$eventBus.$emit("eChart"+e);var i=function e(i){i.children&&t.children.length&&i.children.map((function(t){t.jnpfKey&&a.$eventBus.$emit("eChart"+t.i),t.children&&t.children.length&&e(t)}))};i(t),this.movedEvent()}}},d=c,u=(a("8a1f"),a("2877")),p=Object(u["a"])(d,i,l,!1,null,"2a94f086",null);t["a"]=p.exports},c7978:function(e,t,a){},c874:function(e,t,a){},c925:function(e,t,a){},ca83:function(e,t,a){"use strict";a("cd74")},cade:function(e,t,a){"use strict";a("c874")},cb8b:function(e,t,a){"use strict";a("9803")},cc69:function(e,t,a){"use strict";a("e6ee")},cd74:function(e,t,a){},cddf:function(e,t,a){"use strict";a("c153")},d0ea:function(e,t,a){"use strict";a("3104")},d159:function(e,t,a){},d2d3:function(e,t,a){"use strict";a("2871")},d3a7:function(e,t,a){},d3c8:function(e,t,a){},d43e:function(e,t,a){"use strict";a("d71e")},d621:function(e,t,a){"use strict";a("02b3")},d658:function(e,t,a){},d71e:function(e,t,a){},d8ff:function(e,t,a){},d90d:function(e,t,a){"use strict";a("9d6b")},da54:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center dialog_height",attrs:{title:"复杂表头配置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("JNPF-table",{ref:"dragTable",attrs:{data:e.list,hasNO:!1,"row-key":"id"}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"fullName",label:"表头列名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.row.fullName,callback:function(a){e.$set(t.row,"fullName",a)},expression:"scope.row.fullName"}})]}}])}),a("el-table-column",{attrs:{prop:"childColumns",label:"子列"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.type?a("el-select",{attrs:{multiple:"",placeholder:"请选择子列"},model:{value:t.row.childColumns,callback:function(a){e.$set(t.row,"childColumns",a)},expression:"scope.row.childColumns"}},e._l(e.getColumnOptions(t.$index),(function(e,t){return a("el-option",{key:t,attrs:{label:e.fullName,value:e.id}})})),1):a("el-select",{attrs:{multiple:"",placeholder:"请选择子列"},model:{value:t.row.childColumns,callback:function(a){e.$set(t.row,"childColumns",a)},expression:"scope.row.childColumns"}},e._l(e.getColumnOptions(t.$index),(function(e,t){return a("el-option",{key:t,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"align",label:"对齐方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.align,callback:function(a){e.$set(t.row,"align",a)},expression:"scope.row.align"}},e._l(e.alignOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.fullName,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addHandle()}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("添加")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog(1)}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)},l=[],o=(a("6762"),a("53fe")),n=a.n(o),s={props:["type"],components:{},data:function(){return{visible:!1,list:[],options:[],alignOptions:[{value:"left",fullName:"左对齐"},{value:"center",fullName:"居中对齐"},{value:"right",fullName:"右对齐"}]}},methods:{init:function(e,t){var a=this;this.list=e?JSON.parse(JSON.stringify(e)):[],this.options=t?JSON.parse(JSON.stringify(t)):[],this.visible=!0,this.$nextTick((function(){a.setSort()}))},closeDialog:function(){1==this.type&&this.$store.commit("generator/SET_HEADER_DATA",JSON.parse(JSON.stringify(this.list))),this.$emit("closeForm",this.list),this.visible=!1},getColumnOptions:function(e){for(var t=[],a=0;a<this.list.length;a++)for(var i=this.list[a],l=0;l<i.childColumns.length;l++){var o=i.childColumns[l];a!=e&&t.push(o)}return this.options.filter((function(e){return!t.includes(e.__vModel__)}))},handleDel:function(e){this.list.splice(e,1)},addHandle:function(){var e="complex"+this.jnpf.idGenerator(),t={fullName:"表头列名"+e,childColumns:[],align:"center",id:e};this.list.push(t)},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=n.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,a)},handle:".drag-handler"})}}},r=s,c=(a("9dfe"),a("2877")),d=Object(c["a"])(r,i,l,!1,null,"0f374fbe",null);t["a"]=d.exports},dc73:function(e,t,a){"use strict";a("5a80")},e03e:function(e,t,a){},e1bb:function(e,t,a){"use strict";a("4187")},e1f5:function(e,t,a){"use strict";a("54b4")},e211:function(e,t,a){},e235:function(e,t,a){},e287:function(e,t,a){"use strict";var i=a("5530"),l=a("2909"),o=a("53ca"),n=(a("6762"),a("2fdb"),a("3b2b"),a("456d"),a("ac6a"),a("ed08"));function s(e,t){var a=this;e.props.value=t,e.on.input=function(e){a.$emit("input",e)}}function r(e){var t=this;["on","nativeOn"].forEach((function(a){var i=Object.keys(e[a]||{});i.forEach((function(i){e[a][i];"string"===typeof i&&(e[a][i]=function(){for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return t.$emit(i,a)})}))}))}function c(e,t,a){var n=this,r=e.__config__.jnpfKey;Object.keys(e).forEach((function(a){var r=e[a];"__vModel__"===a?s.call(n,t,e.__config__.defaultValue):"props"===a?t[a][a]=r:void 0!==t[a]?null===t[a]||t[a]instanceof RegExp||["boolean","string","number","function"].includes(Object(o["a"])(t[a]))?t[a]=r:Array.isArray(t[a])?t[a]=[].concat(Object(l["a"])(t[a]),Object(l["a"])(r)):t[a]=Object(i["a"])(Object(i["a"])({},t[a]),r):t.attrs[a]=r})),["calculate","table","barcode","qrcode","popupSelect","popupTableSelect","autoComplete"].includes(r)&&(t.attrs["formData"]=a),["table"].includes(r)&&(t.attrs["relations"]=this.relations,t.attrs["vModel"]=e.__vModel__),["popupAttr","calculate","relationFormAttr"].includes(r)&&(t.attrs["defaultValue"]=e.__config__.defaultValue),["relationForm","popupSelect"].includes(r)&&(t.attrs["field"]=e.__config__.tableName?e.__vModel__+"_jnpfTable_"+e.__config__.tableName+(e.__config__.isSubTable?"0":"1"):e.__vModel__),d(t)}function d(e){delete e.attrs.__config__,delete e.attrs.__slot__,delete e.attrs.__methods__}function u(){return{class:{},attrs:{},props:{},domProps:{},nativeOn:{},on:{},style:{},directives:[],scopedSlots:{},slot:null,key:null,ref:null,refInFor:!0}}t["a"]={props:{conf:{type:Object,required:!0},formData:{type:Object,default:function(){}},relations:Object},render:function(e){var t=u(),a=Object(n["b"])(this.conf),i=this.$slots.default||[];return r.call(this,a),c.call(this,a,t,this.formData),e(this.conf.__config__.tag,t,i)}}},e2c8:function(e,t,a){},e36f:function(e,t,a){"use strict";a("a430")},e5d0:function(e,t,a){},e6ee:function(e,t,a){},e74b:function(e,t,a){},e75f:function(e,t,a){"use strict";a("eff4")},e83a:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"process-container"},[a("div",{staticClass:"left-container"},[a("div",{staticClass:"left-search"},[a("el-input",{attrs:{placeholder:"输入关键字搜索","suffix-icon":"el-icon-search",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("draggable",{staticClass:"left-list",attrs:{list:e.flowList,animation:340,group:"selectItem",handle:".option-drag"}},[e.getFlowList.length?e._l(e.getFlowList,(function(t,i){return a("div",{key:t.flowId,staticClass:"left-item",class:{active:e.activeConf.flowId===t.flowId},on:{click:function(a){return e.changeFlow(t)}}},[e.keyword?e._e():a("div",{staticClass:"option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("el-dropdown",{on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"icon el-icon-more"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return e.copyFlow(t)}}},[e._v("复制")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.editFlow(t)}}},[e._v("编辑")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.delFlow(i,t.isDelete)}}},[e._v("删除")])],1)],1)],1)})):a("el-empty",{staticClass:"template-description",attrs:{"image-size":120,description:"暂无数据"}})],2),a("div",{staticClass:"add-btn",on:{click:e.addFlow}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("添加流程")])],1)],1),a("div",{staticClass:"center-container"},[e.activeConf&&e.activeConf.flowTemplateJson?a("process-main",{key:e.key,attrs:{conf:e.activeConf.flowTemplateJson,flowType:e.flowType,formInfo:e.formInfo,verifyMode:e.verifyMode}}):e._e()],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"add"===e.handleType?"新建":"编辑","close-on-click-modal":!1,"append-to-body":"",visible:e.visible,"lock-scroll":"",width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"流程名称",prop:"fullName"}},[a("el-input",{attrs:{placeholder:"流程名称",maxlength:"50"},model:{value:e.dataForm.fullName,callback:function(t){e.$set(e.dataForm,"fullName",t)},expression:"dataForm.fullName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n        "+e._s(e.$t("common.confirmButton")))])],1)],1)],1)},l=[],o=(a("ac6a"),a("5530")),n=(a("6762"),a("2fdb"),a("2909")),s=a("2638"),r=a.n(s),c=a("2e29"),d=function(e){return"condition"===e.type||"approver"===e.type&&(e.isInterflow||e.isBranchFlow)},u=function(e){return Array.isArray(e)&&e.length>0},p=function(e){return u(e.conditionNodes)},f=function(e){return e.stopPropagation()};function m(e,t,a){var i=this,l=["flow-path-card"],o=function(e,t){return e&&l.push(t),e},n=(o(c["a"].isStartNode(t),"start-node"),o(c["a"].isApproverNode(t),"approver"),o(c["a"].isCopyNode(t),"copy"),o(c["a"].isTimerNode(t),"timer")),s=o(c["a"].isSubFlowNode(t),"subFlow");return a("section",{class:l.join(" "),on:{click:this.eventLauncher.bind(e,"edit",t)}},[a("header",{class:"header"},[a("div",{class:"title-box",style:"height: 100%;width:190px;"},[a("span",{class:"title-text"},[t.properties.title]),!n&&a("input",r()([{on:{blur:function(e){i.$forceUpdate()},input:function(e){e.target.composing||i.$set(t.properties,"title",e.target.value.trim())},click:f},class:"title-input",domProps:{value:t.properties.title}},{directives:[{name:"model",value:t.properties.title,modifiers:{trim:!0}}]}]))]),a("div",{class:"actions"},[a("i",{class:"el-icon-close icon",on:{click:this.eventLauncher.bind(e,"deleteNode",t,e.data)}})]),s&&a("el-tag",{class:"async-state",attrs:{size:"mini",effect:"plain"}},[t.properties.isAsync?"异步":"同步"])]),a("div",{class:"body"},[a("span",{class:"text"},[t.content])])])}var _=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return m.call.apply(m,[t[0]].concat(t))},h={start:_,approver:_,copy:_,timer:_,subFlow:_,interflow:_,branchFlow:_,empty:function(e){return""},condition:function(e,t,a){var i=this;return a("section",{class:"flow-path-card condition",on:{click:this.eventLauncher.bind(e,"edit",t)}},[a("header",{class:"header"},[a("div",{class:"title-box",style:"height:20px;width:160px;"},[a("span",{class:"title-text"},[t.properties.title]),a("input",r()([{on:{blur:function(e){i.$forceUpdate()},input:function(e){e.target.composing||i.$set(t.properties,"title",e.target.value.trim())},click:f},class:"title-input",domProps:{value:t.properties.title}},{directives:[{name:"model",value:t.properties.title,modifiers:{trim:!0}}]}]))]),a("div",{class:"actions"},[a("i",{class:"el-icon-close icon",on:{click:this.eventLauncher.bind(e,"deleteNode",t,e.data)}})])]),a("div",{class:"body"},[a("div",{class:"text"},[t.content])])])}};function v(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("condition"===t.type&&1===t.properties.conditionType)return a("div",{class:"add-node-btn-box flex justify-center"},[a("div",{class:"add-node-btn"},[a("button",{class:"btn disabled-btn",attrs:{type:"button"}},[a("i",{class:"icon-ym icon-ym-nav-close icon"})])])]);p(t);var l=!0,o=!0,n=!0,s=!0,r=!0;Array.isArray(t.conditionNodes)&&t.conditionNodes.length&&(l=!1,o=!1,n=!1,s=!1,r=!1),("timer"===t.type||t.childNode&&"timer"===t.childNode.type)&&(r=!1),"subFlow"===t.type&&(l=!1);var c="empty"===t.type;return c&&!i?"":a("div",{class:"add-node-btn-box flex justify-center"},[a("div",{class:"add-node-btn"},[a("el-popover",{attrs:{placement:"right",trigger:"click",width:"440"}},[a("el-alert",{attrs:{title:"增加节点后可能会导致下面节点配置的数据传递规则失效",type:"warning",closable:!1,"show-icon":!0}}),a("div",{class:"condition-box"},[a("div",[a("div",{class:"condition-icon",on:{click:e.eventLauncher.bind(e,"addApprovalNode",t,i)}},[a("i",{class:"icon-ym icon-ym-flowTodo"})]),"审批节点"]),a("div",{class:{"condition-disabled":!s&&!i}},[a("div",{class:"condition-icon",on:{click:e.eventLauncher.bind(e,"addSubFlowNode",t,i,!s&&!i)}},[a("i",{class:"icon-ym icon-ym-generator-subFlow"})]),"子流程"]),a("div",{class:{"condition-disabled":!l}},[a("div",{class:"condition-icon",on:{click:this.eventLauncher.bind(e,"appendBranch",t,i,!l)}},[a("i",{class:"ym-custom ym-custom-sitemap"})]),"条件分支"]),a("div",{class:{"condition-disabled":!n}},[a("div",{class:"condition-icon",on:{click:this.eventLauncher.bind(e,"appendBranchFlowBranch",t,i,!n)}},[a("i",{class:"icon-ym icon-ym-branch"})]),"选择分支"]),a("div",{class:{"condition-disabled":!o}},[a("div",{class:"condition-icon",on:{click:this.eventLauncher.bind(e,"appendInterflowBranch",t,i,!o)}},[a("i",{class:"icon-ym icon-ym-node"})]),"并行分支"]),a("div",{class:{"condition-disabled":!r}},[a("div",{class:"condition-icon",on:{click:e.eventLauncher.bind(e,"addTimerNode",t,i,!r)}},[a("i",{class:"icon-ym icon-ym-timer"})]),"定时器"])]),a("button",{class:"btn",attrs:{type:"button"},slot:"reference"},[a("i",{class:"el-icon-plus icon"})])])])])}function b(e,t,a){if(t){var i=e.verifyMode&&!1===c["a"].checkNode(t),l="未设置审批人";c["a"].isStartNode(t)&&(l="未设置".concat(1==this.flowType?"功能":"表单","配置")),c["a"].isConditionNode(t)&&(l="未设置条件"),c["a"].isSubFlowNode(t)&&(l="未设置发起人");var o=[],n="",s=a("div",{class:"node-wrap"},[a("div",{class:"node-wrap-box ".concat(t.type," ").concat(c["a"].isInterflowNode(t)?"interflow":""," ").concat(c["a"].isBranchFlowNode(t)?"branchFlow":""," ").concat(i?"error":"")},[a("el-tooltip",{attrs:{content:l,placement:"top",effect:"dark"}},[a("div",{class:"error-tip",on:{click:this.eventLauncher.bind(e,"edit",t)}},["!!!"])]),h[t.type].call(e,e,t,a),v.call(e,e,t,a)])]);return p(t)&&(c["a"].isConditionNode(t.conditionNodes[0])&&(n=a("div",{class:"branch-wrap"},[a("div",{class:"branch-box-wrap"},[a("div",{class:"branch-box flex justify-center relative"},[a("el-popover",{attrs:{placement:"right",trigger:"click",width:"180"},class:"popover"},[a("div",{class:"add-popover-main add-condition-popover-main"},[a("div",{class:"condition-box"},[a("div",{on:{click:this.eventLauncher.bind(null,"appendConditionNode",t,0)}},[a("div",{class:"condition-icon"},[a("i",{class:"icon-ym icon-ym icon-ym-condition"})]),"条件逻辑"]),a("div",{on:{click:this.eventLauncher.bind(null,"appendConditionNode",t,1)}},[a("div",{class:"condition-icon"},[a("i",{class:"icon-ym icon-ym icon-ym-turn"})]),"转向逻辑"])])]),a("button",{class:"btn",attrs:{type:"button"},slot:"reference"},["添加条件"])]),t.conditionNodes.map((function(t){return b.call(e,e,t,a)}))])]),v.call(e,e,t,a,!0)])),c["a"].isInterflowNode(t.conditionNodes[0])&&(n=a("div",{class:"branch-wrap"},[a("div",{class:"branch-box-wrap"},[a("div",{class:"branch-box flex justify-center relative"},[a("button",{on:{click:this.eventLauncher.bind(e,"appendInterflowNode",t)},class:"btn"},["添加分流"]),t.conditionNodes.map((function(t){return b.call(e,e,t,a)}))])]),v.call(e,e,t,a,!0)])),c["a"].isBranchFlowNode(t.conditionNodes[0])&&(n=a("div",{class:"branch-wrap"},[a("div",{class:"branch-box-wrap"},[a("div",{class:"branch-box flex justify-center relative"},[a("button",{on:{click:this.eventLauncher.bind(e,"appendBranchFlowNode",t)},class:"btn"},["添加分支"]),t.conditionNodes.map((function(t){return b.call(e,e,t,a)}))])]),v.call(e,e,t,a,!0)]))),d(t)?a("div",{class:"col-box"},[a("div",{class:"center-line"}),a("div",{class:"top-cover-line"}),a("div",{class:"bottom-cover-line"}),s,n,b.call(e,e,t.childNode,a)]):(o.push(s),n&&o.push(n),t.childNode&&o.push(b.call(e,e,t.childNode,a)),o)}}function g(e){return e("section",{class:"end-node"},["流程结束"])}var y,D,w,x,C={props:{data:{type:Object,required:!0},verifyMode:{type:Boolean,default:!0}},watch:{},methods:{eventLauncher:function(e){for(var t=this,a=arguments.length,i=new Array(a>1?a-1:0),l=1;l<a;l++)i[l-1]=arguments[l];f(i[i.length-1]);var o=["appendBranch","appendBranchFlowBranch","appendInterflowBranch","addTimerNode"];if(!o.includes(e)||!i[i.length-2]){var n={event:e,args:i.slice(0,-1)};"deleteNode"===e?this.$confirm("此操作将永久删除该节点，删除后可能会导致下面节点配置的数据传递规则失效，是否继续?","提示",{type:"warning"}).then((function(){t.$emit("emits",n)})).catch((function(){})):this.$emit("emits",n)}}},render:function(e){return e("div",{style:"display: inline-flex; flex-direction: column; align-items: center;"},[this.data&&b.call(this,this,this.data,e),g(e)])}},k=C,T=(a("bdfea"),a("2877")),F=Object(T["a"])(k,y,D,!1,null,"5eee0d35",null),S=F.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.properties?a("el-drawer",{staticClass:"drawer JNPF-common-drawer",attrs:{size:e.value&&e.isConditionNode()?"750px":"600px",visible:e.visible,"append-to-body":"",wrapperClosable:!1},on:{"update:visible":function(t){e.visible=t},close:e.cancel}},[!e.value||"condition"!=e.value.type&&"approver"!=e.value.type&&"subFlow"!=e.value.type&&"start"!=e.value.type?a("header",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.properties.title))]):a("header",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-input",{staticStyle:{"z-index":"9","max-width":"200px"},attrs:{size:"mini",placeholder:"请输入"},model:{value:e.properties.title,callback:function(t){e.$set(e.properties,"title",t)},expression:"properties.title"}})],1),e.value&&e.isConditionNode()?a("section",{staticClass:"condition-pane pd-10"},[a("div",{staticClass:"condition-main"},[e.pconditions.length?a("div",{staticClass:"mb-10"},[a("span",{staticStyle:{"font-size":"14px","margin-left":"10px"}},[e._v("分组匹配逻辑")]),a("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.properties.matchLogic,callback:function(t){e.$set(e.properties,"matchLogic",t)},expression:"properties.matchLogic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._l(e.pconditions,(function(t,i){return a("div",{key:i,staticClass:"condition-list",staticStyle:{"margin-top":"10px"}},[a("el-col",[a("el-col",{staticClass:"mb-10",attrs:{span:7}},[a("el-col",{attrs:{span:8}},[e._v("条件逻辑")]),a("el-col",{attrs:{span:16}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.logicChange(a,t)}},model:{value:t.logic,callback:function(a){e.$set(t,"logic",a)},expression:"item.logic"}},e._l(e.logicOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{staticClass:"mb-10",staticStyle:{"margin-top":"-2px"},attrs:{span:3.5}},[a("el-button",{staticStyle:{height:"32px","margin-top":"4px"},attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addItem(i)}}},[e._v("添加条件")])],1),a("el-col",{staticClass:"mb-10",staticStyle:{width:"unset","margin-top":"-2px"},attrs:{span:5}},[a("el-button",{staticClass:"condition-del-btn",staticStyle:{height:"32px","margin-top":"4px"},attrs:{icon:"icon-ym icon-ym-btn-clearn"},on:{click:function(t){return e.delGroup(i)}}},[e._v("删除分组")])],1)],1),e._l(t.groups,(function(l,o){return a("el-col",{key:i+o,staticClass:"mb-10",attrs:{span:24}},[a("el-col",{staticClass:"label",attrs:{span:9}},[a("el-select",{staticClass:"condition-select condition-type-select",attrs:{placeholder:"请选择",filterable:""},on:{change:function(t){return e.fieldTypeChange(l,i,o)}},model:{value:l.fieldType,callback:function(t){e.$set(l,"fieldType",t)},expression:"subItem.fieldType"}},e._l(e.conditionTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),3===l.fieldType?a("el-button",{staticClass:"edit-script-btn",attrs:{size:"mini"},on:{click:function(a){return e.editFormula(t)}}},[e._v("公式编辑\n            ")]):a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:function(t){return e.fieldNameChange(t,l,i,o)}},model:{value:l.field,callback:function(t){e.$set(l,"field",t)},expression:"subItem.field"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1),a("el-col",{attrs:{span:5}},[a("el-select",{staticClass:"condition-select",attrs:{placeholder:"运算符号",filterable:""},on:{change:function(t){return e.symbolChange(t,l)}},model:{value:l.symbol,callback:function(t){e.$set(l,"symbol",t)},expression:"subItem.symbol"}},e._l(e.symbolOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{staticClass:"fieldValue",attrs:{span:9}},[a("el-select",{staticClass:"condition-select condition-type-select",attrs:{placeholder:"请选择",filterable:""},on:{change:function(t){return e.fieldValueTypeChange(l)}},model:{value:l.fieldValueType,callback:function(t){e.$set(l,"fieldValueType",t)},expression:"subItem.fieldValueType"}},e._l(e.conditionTypeOptions1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),1===l.fieldValueType?a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:function(t){return e.fieldValueChange(t,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1):e._e(),2===l.fieldValueType?a("div",["inputNumber"===l.jnpfKey?[a("el-input-number",{attrs:{placeholder:"请输入",precision:l.precision,"controls-position":"right"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"calculate"===l.jnpfKey?[a("el-input-number",{attrs:{placeholder:"请输入",precision:l.precision||0,"controls-position":"right"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["rate","slider"].includes(l.jnpfKey)?[a("el-input-number",{attrs:{placeholder:"请输入","controls-position":"right"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"switch"===l.jnpfKey?[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"timePicker"===l.jnpfKey?[a("el-time-picker",{attrs:{placeholder:"请选择",clearable:"","value-format":l.format,format:l.format},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["createTime","modifyTime","datePicker"].includes(l.jnpfKey)?[a("JnpfDatePicker",{attrs:{clearable:"",placeholder:"请选择",type:l.type,format:l.format},on:{change:function(t){return e.onConditionDateChange(t,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["organizeSelect","currOrganize"].includes(l.jnpfKey)?[a("JnpfOrganizeSelect",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.onConditionListChange(arguments,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["depSelect"].includes(l.jnpfKey)?[a("JnpfDepSelect",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.onConditionObjChange(arguments,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["userSelect","createUser","modifyUser"].includes(l.jnpfKey)?[a("JnpfUserSelect",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.onConditionObjChange(arguments,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["usersSelect"].includes(l.jnpfKey)?[a("JnpfUsersSelect",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.onConditionObjChange(arguments,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:["posSelect","currPosition"].includes(l.jnpfKey)?[a("JnpfPosSelect",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.onConditionObjChange(arguments,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"areaSelect"===l.jnpfKey?[a("JnpfAreaSelect",{attrs:{placeholder:"请选择",level:l.level,clearable:""},on:{change:function(t){return e.onConditionListChange(arguments,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"groupSelect"===l.jnpfKey?[a("JnpfGroupSelect",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.onConditionObjChange(arguments,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:"roleSelect"===l.jnpfKey?[a("JnpfRoleSelect",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.onConditionObjChange(arguments,l)}},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]:[a("el-input",{attrs:{placeholder:"请输入"},model:{value:l.fieldValue,callback:function(t){e.$set(l,"fieldValue",t)},expression:"subItem.fieldValue"}})]],2):e._e()],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:1}},[a("div",{staticClass:"icon-ym icon-ym-btn-clearn condition-clearn",staticStyle:{width:"100%"},on:{click:function(t){return e.delItem(i,o)}}})])],1)}))],2)})),a("el-button",{staticClass:"icon-ym icon-ym-btn-add",staticStyle:{"margin-left":"4px"},on:{click:e.addGroup}},[e._v("添加分组")])],2),a("el-form",{staticClass:"mt-10",attrs:{"label-position":"top"}},[1===e.properties.conditionType?a("el-form-item",{attrs:{label:"转向节点"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("转向节点")]),a("el-select",{staticClass:"form-item-content",attrs:{clearable:""},on:{change:function(t){return e.onSwerveNodeChange(t)}},model:{value:e.properties.swerveNode,callback:function(t){e.$set(e.properties,"swerveNode",t)},expression:"properties.swerveNode"}},e._l(e.beforeNodeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1):e._e()],1)],1):e._e(),e.value&&e.isTimerNode()?a("section",{staticClass:"condition-pane pd-10-20"},[a("el-row",[a("el-alert",{attrs:{title:"定时器将根据设置的延迟时间流转审批",type:"warning",closable:!1,"show-icon":""}}),a("el-col",{attrs:{span:24}},[a("el-form",{staticClass:"mt-10",attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"时间设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("延迟时间")]),a("div",{staticClass:"form-item-content"},[a("div",{staticClass:"mb-10"},[a("el-input-number",{attrs:{min:0,precision:0,"controls-position":"right"},model:{value:e.properties.day,callback:function(t){e.$set(e.properties,"day",t)},expression:"properties.day"}}),a("span",{staticClass:"ml-8"},[e._v("天")])],1),a("div",{staticClass:"mb-10"},[a("el-input-number",{attrs:{min:0,precision:0,"controls-position":"right"},model:{value:e.properties.hour,callback:function(t){e.$set(e.properties,"hour",t)},expression:"properties.hour"}}),a("span",{staticClass:"ml-8"},[e._v("小时")])],1),a("div",{staticClass:"mb-10"},[a("el-input-number",{attrs:{min:0,precision:0,"controls-position":"right"},model:{value:e.properties.minute,callback:function(t){e.$set(e.properties,"minute",t)},expression:"properties.minute"}}),a("span",{staticClass:"ml-8"},[e._v("分钟")])],1),a("div",[a("el-input-number",{attrs:{min:0,precision:0,"controls-position":"right"},model:{value:e.properties.second,callback:function(t){e.$set(e.properties,"second",t)},expression:"properties.second"}}),a("span",{staticClass:"ml-8"},[e._v("秒")])],1)])])],1)],1)],1)],1):e._e(),e.value&&e.isSubFlowNode()?a("section",{staticClass:"approver-pane"},[a("el-tabs",{staticStyle:{height:"100%"}},[a("el-tab-pane",{attrs:{label:"基础设置"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.subFlowForm}},[a("el-form-item",{attrs:{label:"发起设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("发起设置")]),a("div",{staticClass:"form-item-content"},[a("el-radio-group",{on:{change:e.resetOrgColl},model:{value:e.subFlowForm.initiateType,callback:function(t){e.$set(e.subFlowForm,"initiateType",t)},expression:"subFlowForm.initiateType"}},e._l(e.initiateTypeOptions,(function(t){return a("el-radio",{key:t.value,staticClass:"radio-item",attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label)+"\n                  ")])})),1),1===e.subFlowForm.initiateType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  发起者的主管将作为子流程发起人")]):e._e(),2===e.subFlowForm.initiateType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  发起者的部门主管将作为子流程发起人")]):e._e(),3===e.subFlowForm.initiateType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  发起者自己将作为子流程发起人")]):e._e(),4===e.subFlowForm.initiateType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  选择表单字段的值作为子流程发起人")]):e._e(),5===e.subFlowForm.initiateType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  设置审批流程中某个环节的审批人作为子流程发起人")]):e._e(),6===e.subFlowForm.initiateType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  所指定的成员将作为子流程发起人，多人时，发起多个子流程")]):e._e(),7===e.subFlowForm.initiateType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  指定可供选择的候选人发起多个子流程")]):e._e(),9===e.subFlowForm.initiateType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  从目标服务中获取子流程发起人")]):e._e(),1===e.subFlowForm.initiateType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"},attrs:{label:"发起者的"}},[a("el-select",{attrs:{filterable:""},model:{value:e.subFlowForm.managerLevel,callback:function(t){e.$set(e.subFlowForm,"managerLevel",t)},expression:"subFlowForm.managerLevel"}},e._l(10,(function(e){return a("el-option",{key:e,attrs:{label:1===e?"直接主管":"第"+e+"级主管",value:e}})})),1)],1):e._e(),2===e.subFlowForm.initiateType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"},attrs:{label:"发起者的"}},[a("el-select",{attrs:{filterable:""},model:{value:e.subFlowForm.departmentLevel,callback:function(t){e.$set(e.subFlowForm,"departmentLevel",t)},expression:"subFlowForm.departmentLevel"}},e._l(10,(function(e){return a("el-option",{key:e,attrs:{label:"第"+e+"级部门主管",value:e}})})),1)],1):e._e(),4===e.subFlowForm.initiateType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"},attrs:{label:"表单字段"}},[a("div",{staticClass:"assignee-form"},[a("el-select",{staticClass:"form-field-type",attrs:{placeholder:"请选择字段"},model:{value:e.subFlowForm.formFieldType,callback:function(t){e.$set(e.subFlowForm,"formFieldType",t)},expression:"subFlowForm.formFieldType"}},[a("el-option",{attrs:{value:1,label:"用户"}}),a("el-option",{attrs:{value:2,label:"部门"}}),a("el-option",{attrs:{value:3,label:"岗位"}}),a("el-option",{attrs:{value:4,label:"角色"}}),a("el-option",{attrs:{value:5,label:"分组"}})],1),a("el-select",{staticClass:"form-field",attrs:{placeholder:"请选择字段",filterable:""},model:{value:e.subFlowForm.formField,callback:function(t){e.$set(e.subFlowForm,"formField",t)},expression:"subFlowForm.formField"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1)]):e._e(),5===e.subFlowForm.initiateType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"},attrs:{label:"审批节点"}},[a("el-select",{attrs:{placeholder:"请选择节点",filterable:""},model:{value:e.subFlowForm.nodeId,callback:function(t){e.$set(e.subFlowForm,"nodeId",t)},expression:"subFlowForm.nodeId"}},e._l(e.nodeOptions,(function(e){return a("el-option",{key:e.nodeId,attrs:{label:e.properties.title,value:e.nodeId}})})),1)],1):e._e(),9===e.subFlowForm.initiateType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("请求路径\n                    "),a("el-tooltip",{attrs:{placement:"top",content:'请求自带参数：taskId、taskNodeId，返回结构：JSON对象{"handleId":"id1,id2"}'}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-input",{attrs:{placeholder:"请输入http或https接口地址"},model:{value:e.subFlowForm.getUserUrl,callback:function(t){e.$set(e.subFlowForm,"getUserUrl",t)},expression:"subFlowForm.getUserUrl"}},[a("template",{slot:"prepend"},[e._v("POST")])],2)],1):e._e(),6===e.subFlowForm.initiateType||7===e.subFlowForm.initiateType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"}},[a("org-Select",{ref:"subFlow-user-org",attrs:{title:"添加审批人",type:"users"},model:{value:e.subFlowForm.initiator,callback:function(t){e.$set(e.subFlowForm,"initiator",t)},expression:"subFlowForm.initiator"}})],1):e._e()],1)]),a("el-form-item",{attrs:{label:"子流程类型"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("子流程类型")]),a("el-radio-group",{staticClass:"form-item-content",model:{value:e.subFlowForm.isAsync,callback:function(t){e.$set(e.subFlowForm,"isAsync",t)},expression:"subFlowForm.isAsync"}},[a("el-radio",{attrs:{label:!1}},[e._v("同步")]),a("el-radio",{attrs:{label:!0}},[e._v("异步")])],1)],1),a("el-form-item",{attrs:{label:"子流程表单"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("子流程表单")]),a("flow-dialog",{staticClass:"form-item-content",attrs:{value:e.subFlowForm.flowId,title:e.subFlowForm.flowName,flowType:e.flowType},on:{change:e.onSubFlowIdChange}})],1),a("el-form-item",{attrs:{label:"子流程传递"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("子流程传递")]),a("div",{staticClass:"form-item-content hand",on:{click:e.openRuleBox}},[a("el-input",{staticClass:"hand",attrs:{value:e.subFlowForm.assignList.length?"已设置":"",placeholder:"请设置子流程传递规则","suffix-icon":"el-icon-arrow-down",readonly:""}})],1)]),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("异常处理\n                "),a("el-tooltip",{attrs:{content:"子流程发起节点人员异常时遵循该规则",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("div",{staticClass:"form-item-content"},[a("el-select",{staticClass:"mb-10",on:{change:function(t){e.subFlowForm.errorRuleUser=[]}},model:{value:e.subFlowForm.errorRule,callback:function(t){e.$set(e.subFlowForm,"errorRule",t)},expression:"subFlowForm.errorRule"}},[a("el-option",{attrs:{label:"超级管理员",value:1}}),a("el-option",{attrs:{label:"指定人员",value:2}}),a("el-option",{attrs:{label:"发起者本人",value:6}})],1),2===e.subFlowForm.errorRule?a("org-select",{attrs:{type:"user",title:"选择用户",buttonType:"button"},model:{value:e.subFlowForm.errorRuleUser,callback:function(t){e.$set(e.subFlowForm,"errorRuleUser",t)},expression:"subFlowForm.errorRuleUser"}}):e._e()],1)]),a("el-form-item",{attrs:{label:"子流程发起后自动提交"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("子流程发起后自动提交\n                "),a("el-tooltip",{attrs:{content:"流程发起的下一节点设置选择分支或候选审批人时无法自动发起审批",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-radio-group",{staticClass:"form-item-content",model:{value:e.subFlowForm.autoSubmit,callback:function(t){e.$set(e.subFlowForm,"autoSubmit",t)},expression:"subFlowForm.autoSubmit"}},[a("el-radio",{attrs:{label:!1}},[e._v("否")]),a("el-radio",{attrs:{label:!0}},[e._v("是")])],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"节点通知"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{model:e.subFlowForm,"label-position":"top"}},[a("el-alert",{attrs:{title:"该通知设置在【消息中心】-【消息发送配置】维护，选择默认则站内信提醒，选择关闭则不提醒。",type:"warning",closable:!1,"show-icon":""}}),a("el-form-item",{staticClass:"mt-10"},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("子流程发起\n                "),a("el-tooltip",{attrs:{content:"该子流程被发起的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.subFlowForm.launchMsgConfig.on,callback:function(t){e.$set(e.subFlowForm.launchMsgConfig,"on",t)},expression:"subFlowForm.launchMsgConfig.on"}},e._l(e.noticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.subFlowForm.launchMsgConfig.on?a("div",{staticClass:"form-item-content"},[a("el-form-item",{attrs:{label:" 发送配置"}},[a("msg-dialog",{attrs:{value:e.subFlowForm.launchMsgConfig.msgId,title:e.subFlowForm.launchMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("subFlowForm","launchMsgConfig",arguments)}}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"参数设置"}}),a("el-table",{attrs:{data:e.subFlowForm.launchMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},e._l(e.funcOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)}))}}],null,!1,865070175)})],1)],1):e._e()],1)],1)],1)],1)],1):e._e(),e.value&&e.isStartNode()?a("section",{staticClass:"approver-pane"},[a("el-tabs",{staticStyle:{height:"100%"}},[a("el-tab-pane",{attrs:{label:"基础设置"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.startForm}},[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v(e._s(1==e.flowType?"功能":"表单")+"设置")]),a("div",{staticClass:"form-item-content"},[a("flow-form-dialog",{attrs:{value:e.startForm.formId,title:e.startForm.formName,type:e.flowType,clearable:!1,disabled:!!e.formInfo.onlineDev,placeholder:"请选择"+(1==e.flowType?"功能":"表单")},on:{change:e.onStartFormIdChange}})],1)]),1!=e.flowType?a("el-form-item",{attrs:{label:"发起设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("发起设置\n                "),a("el-tooltip",{attrs:{content:"谁可以发起 默认所有人,需要设置请选择",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("div",{staticClass:"form-item-content"},[a("org-select",{ref:"start-user-org",attrs:{type:"users",title:"添加发起人",inlet:"flow"},model:{value:e.initiator,callback:function(t){e.initiator=t},expression:"initiator"}})],1)]):e._e(),a("el-form-item",{attrs:{label:"抄送设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("抄送设置")]),a("div",{staticClass:"form-item-content"},[a("org-select",{ref:"start-copy-user-org",staticClass:"mb-5",attrs:{title:"添加抄送人",type:"users",inlet:"flow"},model:{value:e.startForm.circulateUser,callback:function(t){e.$set(e.startForm,"circulateUser",t)},expression:"startForm.circulateUser"}}),a("el-form-item",[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("抄送人范围\n                    "),a("el-tooltip",{attrs:{content:"抄送人员增加人员选择范围附加条件",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{attrs:{filterable:""},model:{value:e.startForm.extraCopyRule,callback:function(t){e.$set(e.startForm,"extraCopyRule",t)},expression:"startForm.extraCopyRule"}},e._l(e.extraRuleOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:1==e.value?"无抄送人范围":e.label,value:e.value}})})),1)],1),a("el-checkbox",{model:{value:e.startForm.isCustomCopy,callback:function(t){e.$set(e.startForm,"isCustomCopy",t)},expression:"startForm.isCustomCopy"}},[e._v("允许自选抄送人")]),a("div",[a("el-checkbox",{model:{value:e.startForm.isFormFieldCopy,callback:function(t){e.$set(e.startForm,"isFormFieldCopy",t)},expression:"startForm.isFormFieldCopy"}},[e._v("抄送给表单变量")])],1),e.startForm.isFormFieldCopy?a("div",{staticClass:"option-box-tip"},[e._v("选择流程表单字段的值作为抄送人\n                ")]):e._e(),e.startForm.isFormFieldCopy?a("el-form-item",[a("div",{staticClass:"assignee-form"},[a("el-select",{staticClass:"form-field-type",attrs:{placeholder:"请选择字段"},model:{value:e.startForm.copyFormFieldType,callback:function(t){e.$set(e.startForm,"copyFormFieldType",t)},expression:"startForm.copyFormFieldType"}},[a("el-option",{attrs:{value:1,label:"用户"}}),a("el-option",{attrs:{value:2,label:"部门"}}),a("el-option",{attrs:{value:3,label:"岗位"}}),a("el-option",{attrs:{value:4,label:"角色"}}),a("el-option",{attrs:{value:5,label:"分组"}})],1),a("el-select",{staticClass:"form-field",attrs:{placeholder:"请选择字段",filterable:""},model:{value:e.startForm.copyFormField,callback:function(t){e.$set(e.startForm,"copyFormField",t)},expression:"startForm.copyFormField"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1)]):e._e()],1)])],1)],1)],1),a("el-tab-pane",{attrs:{label:"高级设置"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"操作设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("操作设置")]),a("div",{staticClass:"form-item-content"},[a("div",{staticClass:"per-cell"},[a("el-checkbox",{attrs:{disabled:""},model:{value:e.startForm.hasSubmitBtn,callback:function(t){e.$set(e.startForm,"hasSubmitBtn",t)},expression:"startForm.hasSubmitBtn"}},[e._v("提交")]),a("el-input",{model:{value:e.startForm.submitBtnText,callback:function(t){e.$set(e.startForm,"submitBtnText",t)},expression:"startForm.submitBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{attrs:{disabled:""},model:{value:e.startForm.hasSaveBtn,callback:function(t){e.$set(e.startForm,"hasSaveBtn",t)},expression:"startForm.hasSaveBtn"}},[e._v("暂存")]),a("el-input",{model:{value:e.startForm.saveBtnText,callback:function(t){e.$set(e.startForm,"saveBtnText",t)},expression:"startForm.saveBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.startForm.hasRevokeBtn,callback:function(t){e.$set(e.startForm,"hasRevokeBtn",t)},expression:"startForm.hasRevokeBtn"}},[e._v("撤回")]),a("el-input",{model:{value:e.startForm.revokeBtnText,callback:function(t){e.$set(e.startForm,"revokeBtnText",t)},expression:"startForm.revokeBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.startForm.hasPressBtn,callback:function(t){e.$set(e.startForm,"hasPressBtn",t)},expression:"startForm.hasPressBtn"}},[e._v("催办")]),a("el-input",{model:{value:e.startForm.pressBtnText,callback:function(t){e.$set(e.startForm,"pressBtnText",t)},expression:"startForm.pressBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.startForm.hasPrintBtn,callback:function(t){e.$set(e.startForm,"hasPrintBtn",t)},expression:"startForm.hasPrintBtn"}},[e._v("打印")]),a("el-input",{model:{value:e.startForm.printBtnText,callback:function(t){e.$set(e.startForm,"printBtnText",t)},expression:"startForm.printBtnText"}})],1),e.startForm.hasPrintBtn?a("div",{staticClass:"per-cell"},[a("p",{staticStyle:{width:"112px"}}),a("JnpfTreeSelect",{attrs:{options:e.printTplList,placeholder:"请选择打印模板",lastLevel:"",clearable:"",multiple:""},model:{value:e.startForm.printId,callback:function(t){e.$set(e.startForm,"printId",t)},expression:"startForm.printId"}},[a("div",{staticClass:"printWrap",staticStyle:{padding:"10px 0","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openPrint}},[e._v("添加打印模板\n                      ")]),a("el-link",{staticStyle:{position:"absolute",right:"8px",top:"18px"},attrs:{type:"info",underline:!1},on:{click:e.refreshPrintOptions}},[a("i",{staticClass:"el-icon-refresh el-icon--right"})]),a("el-divider")],1)])],1):e._e()])]),a("el-form-item",{attrs:{label:"标题设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("标题设置")]),a("div",{staticClass:"form-item-content"},[a("el-radio-group",{model:{value:e.startForm.titleType,callback:function(t){e.$set(e.startForm,"titleType",t)},expression:"startForm.titleType"}},[a("el-radio",{attrs:{label:0}},[e._v("默认")]),a("el-radio",{attrs:{label:1}},[e._v("自定义")])],1),0==e.startForm.titleType?[a("el-input",{staticClass:"mt-8",attrs:{placeholder:"请输入内容",readOnly:""},model:{value:e.startForm.defaultContent,callback:function(t){e.$set(e.startForm,"defaultContent",t)},expression:"startForm.defaultContent"}})]:e._e(),1==e.startForm.titleType?[a("el-autocomplete",{staticClass:"mt-8",staticStyle:{width:"100%"},attrs:{placeholder:"请输入内容",clearable:"","fetch-suggestions":e.querySearch},on:{select:e.handleSelect},model:{value:e.startForm.titleContent,callback:function(t){e.$set(e.startForm,"titleContent",t)},expression:"startForm.titleContent"}})]:e._e()],2)]),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("异常处理\n                "),a("el-tooltip",{attrs:{content:"审批节点内设置的审批人员异常时遵循该规则",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("div",{staticClass:"form-item-content"},[a("el-select",{on:{change:function(t){e.startForm.errorRuleUser=[]}},model:{value:e.startForm.errorRule,callback:function(t){e.$set(e.startForm,"errorRule",t)},expression:"startForm.errorRule"}},[a("el-option",{attrs:{label:"超级管理员",value:1}}),a("el-option",{attrs:{label:"指定人员",value:2}}),a("el-option",{attrs:{label:"上一节点审批人指定",value:3}}),a("el-option",{attrs:{label:"默认审批通过",value:4}}),a("el-option",{attrs:{label:"无法提交",value:5}})],1),2===e.startForm.errorRule?a("org-select",{staticClass:"mt-10",attrs:{type:"user",title:"选择用户",buttonType:"button"},model:{value:e.startForm.errorRuleUser,callback:function(t){e.$set(e.startForm,"errorRuleUser",t)},expression:"startForm.errorRuleUser"}}):e._e()],1)]),a("el-form-item",{staticClass:"form-item-label",attrs:{label:"撤回后处理规则"}},[a("div",{staticClass:"form-item-content"},[a("el-select",{model:{value:e.startForm.revokeRule,callback:function(t){e.$set(e.startForm,"revokeRule",t)},expression:"startForm.revokeRule"}},[a("el-option",{attrs:{label:"撤回后可以重新提交流程",value:2}}),a("el-option",{attrs:{label:"撤回后终止流程",value:1}})],1)],1)]),a("el-form-item",{staticClass:"form-item-label",attrs:{label:"复活取值规则"}},[a("div",{staticClass:"form-item-content"},[a("el-select",{model:{value:e.startForm.resurgenceDataRule,callback:function(t){e.$set(e.startForm,"resurgenceDataRule",t)},expression:"startForm.resurgenceDataRule"}},[a("el-option",{attrs:{label:"复活后，取最后流转数据",value:0}}),a("el-option",{attrs:{label:"复活后，恢复到当时数据",value:1}})],1)],1)])],1),a("el-form",{staticClass:"pd-10-20",staticStyle:{"margin-top":"-20px"},attrs:{"label-width":"90px","label-position":"left"}},[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("手写签名\n                "),a("el-tooltip",{attrs:{content:"发起人在进行流程撤回操作时需手写签名",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.startForm.hasSign,callback:function(t){e.$set(e.startForm,"hasSign",t)},expression:"startForm.hasSign"}})],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("意见填写\n                "),a("el-tooltip",{attrs:{content:"发起人在进行流程撤回操作需填写意见",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.startForm.hasOpinion,callback:function(t){e.$set(e.startForm,"hasOpinion",t)},expression:"startForm.hasOpinion"}})],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("审核汇总\n                "),a("el-tooltip",{attrs:{content:"流程流转记录会按部门及岗位进行汇总展示",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.startForm.isSummary,callback:function(t){e.$set(e.startForm,"isSummary",t)},expression:"startForm.isSummary"}})],1),e.startForm.isSummary?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("汇总设置")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.startForm.summaryType,callback:function(t){e.$set(e.startForm,"summaryType",t)},expression:"startForm.summaryType"}},[a("el-option",{attrs:{label:"汇总全部流转记录",value:0}}),a("el-option",{attrs:{label:"汇总通过及退回流转记录",value:1}})],1)],1):e._e(),a("el-form-item",{attrs:{label:"流程评论"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("流程评论\n                "),a("el-tooltip",{attrs:{content:"流程内涉及的用户均可进行意见评论",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.startForm.isComment,callback:function(t){e.$set(e.startForm,"isComment",t)},expression:"startForm.isComment"}})],1),a("el-form-item",{attrs:{label:"批量审批"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("批量审批\n                "),a("el-tooltip",{attrs:{content:"流程待审批工单可进行批量操作",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.startForm.isBatchApproval,callback:function(t){e.$set(e.startForm,"isBatchApproval",t)},expression:"startForm.isBatchApproval"}})],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"表单权限"}},[a("div",{staticClass:"form-auth-table"},[a("el-table",{staticClass:"JNPF-common-table",attrs:{data:e.formOperatesList,size:"mini",height:"100%"}},[a("el-table-column",{attrs:{prop:"name",label:"表单字段",align:"left"}}),a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-checkbox",{attrs:{indeterminate:e.indeterminateReadFlag},on:{change:function(t){return e.updateReadAllSelected(t,1)}},model:{value:e.readAllChecked,callback:function(t){e.readAllChecked=t},expression:"readAllChecked"}},[e._v("查看")])]}},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(t){return e.handleCheckedCitiesChange(t,1)}},model:{value:t.row.read,callback:function(a){e.$set(t.row,"read",a)},expression:"scope.row.read"}},[e._v("查看")])]}}],null,!1,4152011034)}),a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-checkbox",{attrs:{indeterminate:e.indeterminateWriteFlag},on:{change:function(t){return e.updateReadAllSelected(t,2)}},model:{value:e.writeAllChecked,callback:function(t){e.writeAllChecked=t},expression:"writeAllChecked"}},[e._v("编辑")])]}},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(t){return e.handleCheckedCitiesChange(t,2)}},model:{value:t.row.write,callback:function(a){e.$set(t.row,"write",a)},expression:"scope.row.write"}},[e._v("编辑")])]}}],null,!1,2995566869)}),a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-checkbox",{attrs:{indeterminate:e.indeterminateRequiredFlag},on:{change:function(t){return e.updateReadAllSelected(t,3)}},model:{value:e.requiredAllChecked,callback:function(t){e.requiredAllChecked=t},expression:"requiredAllChecked"}},[e._v("必填")])]}},{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{disabled:t.row.requiredDisabled},on:{change:function(t){return e.handleCheckedCitiesChange(t,3)}},model:{value:t.row.required,callback:function(a){e.$set(t.row,"required",a)},expression:"scope.row.required"}},[e._v("必填")])]}}],null,!1,3030614050)})],1)],1)]),a("el-tab-pane",{attrs:{label:"流程事件"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{model:e.startForm,"label-position":"left"}},[a("el-form-item",{staticClass:"mt-10",attrs:{label:"事件处理规则"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("事件处理规则")]),a("el-tooltip",{attrs:{content:"发起、撤回、同意、退回四个事件按此规则执行",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})]),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.startForm.funcConfigRule,callback:function(t){e.$set(e.startForm,"funcConfigRule",t)},expression:"startForm.funcConfigRule"}},[a("el-option",{attrs:{label:"事件执行失败，流程继续流转。",value:0}}),a("el-option",{attrs:{label:"事件执行失败，终止后续节点。",value:1}})],1)],1),a("el-form-item",{staticClass:"mt-10",attrs:{label:"发起事件"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("发起事件")]),a("el-switch",{model:{value:e.startForm.initFuncConfig.on,callback:function(t){e.$set(e.startForm.initFuncConfig,"on",t)},expression:"startForm.initFuncConfig.on"}})],1),e.startForm.initFuncConfig.on?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("接口设置")]),a("el-form-item",{attrs:{"label-width":"0"}},[a("interface-dialog",{attrs:{value:e.startForm.initFuncConfig.interfaceId,title:e.startForm.initFuncConfig.interfaceName},on:{change:function(t){return e.onFuncChange("startForm","initFuncConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.initFuncConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                    "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n                  ")]}}],null,!1,97883127)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(a){return e.onChangeRelationField(t.$index,"startForm","initFuncConfig")}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]}}],null,!1,4033118553)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),t.row.required?a("el-option-group",e._l(e.funcRequiredOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1):a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,529792982)})],1)],1):e._e(),a("el-form-item",{attrs:{label:"结束事件"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("结束事件")]),a("el-switch",{model:{value:e.startForm.endFuncConfig.on,callback:function(t){e.$set(e.startForm.endFuncConfig,"on",t)},expression:"startForm.endFuncConfig.on"}})],1),e.startForm.endFuncConfig.on?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("接口设置")]),a("el-form-item",{attrs:{"label-width":"0"}},[a("interface-dialog",{attrs:{value:e.startForm.endFuncConfig.interfaceId,title:e.startForm.endFuncConfig.interfaceName},on:{change:function(t){return e.onFuncChange("startForm","endFuncConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.endFuncConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                    "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n                  ")]}}],null,!1,97883127)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(a){return e.onChangeRelationField(t.$index,"startForm","endFuncConfig")}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]}}],null,!1,3424662252)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),t.row.required?a("el-option-group",e._l(e.funcRequiredOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1):a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,529792982)})],1)],1):e._e(),a("el-form-item",{attrs:{label:"撤回事件"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("撤回事件")]),a("el-switch",{model:{value:e.startForm.flowRecallFuncConfig.on,callback:function(t){e.$set(e.startForm.flowRecallFuncConfig,"on",t)},expression:"startForm.flowRecallFuncConfig.on"}})],1),e.startForm.flowRecallFuncConfig.on?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("接口设置")]),a("el-form-item",{attrs:{"label-width":"0"}},[a("interface-dialog",{attrs:{value:e.startForm.flowRecallFuncConfig.interfaceId,title:e.startForm.flowRecallFuncConfig.interfaceName},on:{change:function(t){return e.onFuncChange("startForm","flowRecallFuncConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.flowRecallFuncConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                    "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n                  ")]}}],null,!1,97883127)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(a){return e.onChangeRelationField(t.$index,"startForm","flowRecallFuncConfig")}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]}}],null,!1,2065861284)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),t.row.required?a("el-option-group",e._l(e.funcRequiredOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1):a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,529792982)})],1)],1):e._e()],1)],1)],1),a("el-tab-pane",{attrs:{label:"流程通知"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{model:e.startForm,"label-position":"top"}},[a("el-alert",{attrs:{title:"该通知设置在【消息中心】-【消息发送配置】维护，选择默认则站内信提醒，选择关闭则不提醒。",type:"warning",closable:!1,"show-icon":""}}),a("el-form-item",{staticClass:"mt-10"},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("流程待办\n                "),a("el-tooltip",{attrs:{content:"流程处于等待的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.waitMsgConfig.on,callback:function(t){e.$set(e.startForm.waitMsgConfig,"on",t)},expression:"startForm.waitMsgConfig.on"}},e._l(e.noticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.waitMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.startForm.waitMsgConfig.msgId,title:e.startForm.waitMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("startForm","waitMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.waitMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,848379261)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("流程结束\n                "),a("el-tooltip",{attrs:{content:"流程结束的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.endMsgConfig.on,callback:function(t){e.$set(e.startForm.endMsgConfig,"on",t)},expression:"startForm.endMsgConfig.on"}},e._l(e.noticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.endMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.startForm.endMsgConfig.msgId,title:e.startForm.endMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("startForm","endMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.endMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,848379261)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点同意\n                "),a("el-tooltip",{attrs:{content:"所有节点审核人同意的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.approveMsgConfig.on,callback:function(t){e.$set(e.startForm.approveMsgConfig,"on",t)},expression:"startForm.approveMsgConfig.on"}},e._l(e.noticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.approveMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.startForm.approveMsgConfig.msgId,title:e.startForm.approveMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("startForm","approveMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.approveMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,848379261)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点退回\n                "),a("el-tooltip",{attrs:{content:"所有节点审核人退回的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.rejectMsgConfig.on,callback:function(t){e.$set(e.startForm.rejectMsgConfig,"on",t)},expression:"startForm.rejectMsgConfig.on"}},e._l(e.noticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.rejectMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.startForm.rejectMsgConfig.msgId,title:e.startForm.rejectMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("startForm","rejectMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.rejectMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,848379261)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点抄送\n                "),a("el-tooltip",{attrs:{content:"所有节点抄送的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.copyMsgConfig.on,callback:function(t){e.$set(e.startForm.copyMsgConfig,"on",t)},expression:"startForm.copyMsgConfig.on"}},e._l(e.noticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.copyMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.startForm.copyMsgConfig.msgId,title:e.startForm.copyMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("startForm","copyMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.copyMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,848379261)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点超时\n                "),a("el-tooltip",{attrs:{content:"所有节点超时的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.overTimeMsgConfig.on,callback:function(t){e.$set(e.startForm.overTimeMsgConfig,"on",t)},expression:"startForm.overTimeMsgConfig.on"}},e._l(e.noticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.overTimeMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.startForm.overTimeMsgConfig.msgId,title:e.startForm.overTimeMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("startForm","overTimeMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.overTimeMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},e._l(e.funcOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)}))}}],null,!1,865070175)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点提醒\n                "),a("el-tooltip",{attrs:{content:"所有节点提醒的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.noticeMsgConfig.on,callback:function(t){e.$set(e.startForm.noticeMsgConfig,"on",t)},expression:"startForm.noticeMsgConfig.on"}},e._l(e.noticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.noticeMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.startForm.noticeMsgConfig.msgId,title:e.startForm.noticeMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("startForm","noticeMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.startForm.noticeMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},e._l(e.funcOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)}))}}],null,!1,865070175)})],1)],1):e._e()],1)],1)],1),a("el-tab-pane",{attrs:{label:"超时处理"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{model:e.startForm,"label-position":"top"}},[a("el-form-item",{attrs:{label:"限时设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("限时设置")]),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.timeLimitConfig.on,callback:function(t){e.$set(e.startForm.timeLimitConfig,"on",t)},expression:"startForm.timeLimitConfig.on"}},e._l(e.noticeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.timeLimitConfig.on?a("div",{staticClass:"form-item-content"},[a("el-form-item",{attrs:{label:"节点限定时长起始值"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择",filterable:""},model:{value:e.startForm.timeLimitConfig.nodeLimit,callback:function(t){e.$set(e.startForm.timeLimitConfig,"nodeLimit",t)},expression:"startForm.timeLimitConfig.nodeLimit"}},e._l(e.overTimeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("节点处理限定时长(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.startForm.timeLimitConfig.duringDeal,callback:function(t){e.$set(e.startForm.timeLimitConfig,"duringDeal",t)},expression:"startForm.timeLimitConfig.duringDeal"}})],1)],1)],1):e._e(),a("el-form-item",{staticClass:"mt-10"},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("超时设置\n                "),a("el-tooltip",{attrs:{content:"超过设置的节点处理限定时间即为超时",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.overTimeConfig.on,callback:function(t){e.$set(e.startForm.overTimeConfig,"on",t)},expression:"startForm.overTimeConfig.on"}},e._l(e.noticeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.overTimeConfig.on?a("div",{staticClass:"form-item-content"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("第一次超时时间(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:0,step:1},model:{value:e.startForm.overTimeConfig.firstOver,callback:function(t){e.$set(e.startForm.overTimeConfig,"firstOver",t)},expression:"startForm.overTimeConfig.firstOver"}})],1)],1),a("el-row",{staticClass:"mt-10",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("超时间隔(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:0,step:1},model:{value:e.startForm.overTimeConfig.overTimeDuring,callback:function(t){e.$set(e.startForm.overTimeConfig,"overTimeDuring",t)},expression:"startForm.overTimeConfig.overTimeDuring"}})],1)],1),a("el-row",[e._v("超时事务")]),a("el-row",[a("el-checkbox",{model:{value:e.startForm.overTimeConfig.overNotice,callback:function(t){e.$set(e.startForm.overTimeConfig,"overNotice",t)},expression:"startForm.overTimeConfig.overNotice"}},[e._v("超时通知\n                  "),a("el-tooltip",{attrs:{content:"勾选后才能进行超时消息发送（站内信系统默认发送，第三方超时消息需在流程通知内配置）",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("el-row",[a("el-checkbox",{model:{value:e.startForm.overTimeConfig.overAutoApprove,callback:function(t){e.$set(e.startForm.overTimeConfig,"overAutoApprove",t)},expression:"startForm.overTimeConfig.overAutoApprove"}},[e._v("超时自动审批\n                  "),a("el-tooltip",{attrs:{content:"当前审批节点表单必填字段为空会使工单流转失败，下一审批节点设置候选人员、选择分支时当前审批节点规则失效",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("超时次数(次)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.startForm.overTimeConfig.overAutoApproveTime,callback:function(t){e.$set(e.startForm.overTimeConfig,"overAutoApproveTime",t)},expression:"startForm.overTimeConfig.overAutoApproveTime"}})],1)],1),a("el-row",[a("el-checkbox",{model:{value:e.startForm.overTimeConfig.overEvent,callback:function(t){e.$set(e.startForm.overTimeConfig,"overEvent",t)},expression:"startForm.overTimeConfig.overEvent"}},[e._v("超时事件\n                  "),a("el-tooltip",{attrs:{content:"请在流程事件内配置超时事件",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("超时次数(次)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.startForm.overTimeConfig.overEventTime,callback:function(t){e.$set(e.startForm.overTimeConfig,"overEventTime",t)},expression:"startForm.overTimeConfig.overEventTime"}})],1)],1)],1):e._e(),a("el-form-item",{staticClass:"mt-10"},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("提醒设置\n                "),a("el-tooltip",{attrs:{content:"还未到达设置的节点处理限定时间即为提醒",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.startForm.noticeConfig.on,callback:function(t){e.$set(e.startForm.noticeConfig,"on",t)},expression:"startForm.noticeConfig.on"}},e._l(e.noticeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.startForm.noticeConfig.on?a("div",{staticClass:"form-item-content"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("第一次提醒时间(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.startForm.noticeConfig.firstOver,callback:function(t){e.$set(e.startForm.noticeConfig,"firstOver",t)},expression:"startForm.noticeConfig.firstOver"}})],1)],1),a("el-row",{staticClass:"mt-10",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("提醒间隔(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:0,step:1},model:{value:e.startForm.noticeConfig.overTimeDuring,callback:function(t){e.$set(e.startForm.noticeConfig,"overTimeDuring",t)},expression:"startForm.noticeConfig.overTimeDuring"}})],1)],1),a("el-row",[e._v("提醒事务")]),a("el-row",[a("el-checkbox",{model:{value:e.startForm.noticeConfig.overNotice,callback:function(t){e.$set(e.startForm.noticeConfig,"overNotice",t)},expression:"startForm.noticeConfig.overNotice"}},[e._v("提醒通知\n                  "),a("el-tooltip",{attrs:{content:"勾选后才能进行提醒消息发送（站内信系统默认发送，第三方超时消息需在流程通知内配置）",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("el-row",[a("el-checkbox",{model:{value:e.startForm.noticeConfig.overEvent,callback:function(t){e.$set(e.startForm.noticeConfig,"overEvent",t)},expression:"startForm.noticeConfig.overEvent"}},[e._v("提醒事件\n                  "),a("el-tooltip",{attrs:{content:"请在流程事件内配置提醒事件",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("提醒次数(次)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.startForm.noticeConfig.overEventTime,callback:function(t){e.$set(e.startForm.noticeConfig,"overEventTime",t)},expression:"startForm.noticeConfig.overEventTime"}})],1)],1)],1)],1):e._e()],1)],1)],1)],1)],1):e._e(),e.value&&e.isApproverNode()?a("section",{staticClass:"approver-pane"},[a("el-tabs",{staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础设置",name:"config"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top",model:e.approverForm}},[1!==e.flowType?[a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("表单配置\n                  "),a("el-tooltip",{attrs:{content:"审批节点不配置表单，默认引用发起节点表单",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("div",{staticClass:"form-item-content"},[a("flow-form-dialog",{attrs:{value:e.approverForm.formId,title:e.approverForm.formName,type:e.flowType,placeholder:"请选择表单"},on:{change:e.onApproverFormIdChange}})],1)]),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("数据传递\n                  "),a("el-tooltip",{attrs:{content:"不设置传递规则时字段名称相同自动赋值；设置传递规则时相同名称字段会自动赋值字段后再按传递规则赋值",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("div",{staticClass:"form-item-content hand",on:{click:e.openApproverTransmitRuleBox}},[a("el-input",{staticClass:"hand",attrs:{value:e.approverForm.assignList.length?"已设置":"",placeholder:"请设置数据传递规则","suffix-icon":"el-icon-arrow-down",readonly:""}})],1)])]:e._e(),a("el-form-item",{attrs:{label:"审批设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("审批设置")]),a("div",{staticClass:"form-item-content"},[a("el-radio-group",{on:{change:e.resetOrgColl},model:{value:e.approverForm.assigneeType,callback:function(t){e.$set(e.approverForm,"assigneeType",t)},expression:"approverForm.assigneeType"}},e._l(e.assigneeTypeOptions,(function(t){return a("el-radio",{key:t.value,staticClass:"radio-item",attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label)+"\n                  ")])})),1),1===e.approverForm.assigneeType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  发起者主管将作为审批人处理审批单")]):e._e(),2===e.approverForm.assigneeType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  发起者的部门主管将作为审批人处理审批单")]):e._e(),3===e.approverForm.assigneeType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  发起者自己将作为审批人处理审批单")]):e._e(),4===e.approverForm.assigneeType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  选择流程表单字段的值作为审批人")]):e._e(),5===e.approverForm.assigneeType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  设置审批人为审批流程中某个环节的审批人")]):e._e(),6===e.approverForm.assigneeType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  指定审批人处理审批单")]):e._e(),7===e.approverForm.assigneeType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  默认所有人，需要设置请指定候选人范围处理审批单")]):e._e(),9===e.approverForm.assigneeType?a("div",{staticClass:"option-box-tip"},[e._v("\n                  从目标服务中获取审批人")]):e._e(),1===e.approverForm.assigneeType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"},attrs:{label:"发起者的"}},[a("el-select",{attrs:{filterable:""},model:{value:e.approverForm.managerLevel,callback:function(t){e.$set(e.approverForm,"managerLevel",t)},expression:"approverForm.managerLevel"}},e._l(10,(function(e){return a("el-option",{key:e,attrs:{label:1===e?"直属主管":"第"+e+"级主管",value:e}})})),1)],1):e._e(),4===e.approverForm.assigneeType?a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"表单字段"}},[a("div",{staticClass:"assignee-form"},[a("el-select",{staticClass:"form-field-type",attrs:{placeholder:"请选择字段"},model:{value:e.approverForm.formFieldType,callback:function(t){e.$set(e.approverForm,"formFieldType",t)},expression:"approverForm.formFieldType"}},[a("el-option",{attrs:{value:1,label:"用户"}}),a("el-option",{attrs:{value:2,label:"部门"}}),a("el-option",{attrs:{value:3,label:"岗位"}}),a("el-option",{attrs:{value:4,label:"角色"}}),a("el-option",{attrs:{value:5,label:"分组"}})],1),a("el-select",{staticClass:"form-field",attrs:{placeholder:"请选择字段",filterable:""},model:{value:e.approverForm.formField,callback:function(t){e.$set(e.approverForm,"formField",t)},expression:"approverForm.formField"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1)]):e._e(),5===e.approverForm.assigneeType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"},attrs:{label:"审批节点"}},[a("el-select",{attrs:{placeholder:"请选择节点",filterable:""},model:{value:e.approverForm.nodeId,callback:function(t){e.$set(e.approverForm,"nodeId",t)},expression:"approverForm.nodeId"}},e._l(e.nodeOptions,(function(e){return a("el-option",{key:e.nodeId,attrs:{label:e.properties.title,value:e.nodeId}})})),1)],1):e._e(),9===e.approverForm.assigneeType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("请求路径\n                    "),a("el-tooltip",{attrs:{placement:"top",content:'请求自带参数：taskId、taskNodeId，返回结构：JSON对象{"handleId":"id1,id2"}'}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-input",{attrs:{placeholder:"请输入http或https接口地址"},model:{value:e.approverForm.getUserUrl,callback:function(t){e.$set(e.approverForm,"getUserUrl",t)},expression:"approverForm.getUserUrl"}},[a("template",{slot:"prepend"},[e._v("POST")])],2)],1):e._e(),6===e.approverForm.assigneeType||7===e.approverForm.assigneeType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"}},[a("org-select",{ref:"approver-user-org",attrs:{type:"users",title:6===e.approverForm.assigneeType?"添加审批人":"添加候选人",inlet:"flow"},on:{change:e.onApproversChange},model:{value:e.approverForm.approvers,callback:function(t){e.$set(e.approverForm,"approvers",t)},expression:"approverForm.approvers"}})],1):e._e(),6===e.approverForm.assigneeType?a("el-form-item",{staticStyle:{"margin-bottom":"0!important"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("审批人范围\n                    "),a("el-tooltip",{attrs:{content:"指定成员增加人员选择范围附加条件",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{attrs:{filterable:""},model:{value:e.approverForm.extraRule,callback:function(t){e.$set(e.approverForm,"extraRule",t)},expression:"approverForm.extraRule"}},e._l(e.extraRuleOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()],1)]),a("el-form-item",{attrs:{label:"审批方式"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("审批方式")]),a("div",{staticClass:"form-item-content"},[a("el-radio",{attrs:{label:0},model:{value:e.approverForm.counterSign,callback:function(t){e.$set(e.approverForm,"counterSign",t)},expression:"approverForm.counterSign"}},[e._v("\n                  或签（一名审批人同意或退回即可）")]),a("el-radio",{attrs:{label:1},model:{value:e.approverForm.counterSign,callback:function(t){e.$set(e.approverForm,"counterSign",t)},expression:"approverForm.counterSign"}},[e._v("\n                  会签（无序会签，当审批达到会签比例时，则该审批通过）")]),6===e.approverForm.assigneeType?a("el-radio",{attrs:{label:2},model:{value:e.approverForm.counterSign,callback:function(t){e.$set(e.approverForm,"counterSign",t)},expression:"approverForm.counterSign"}},[e._v("\n                  依次审批（按顺序依次审批）")]):e._e()],1)]),1==e.approverForm.counterSign?a("el-form-item",{attrs:{label:"设置会签流转规则"}},[a("div",{staticClass:"countersign-cell mb-10"},[a("span",{staticClass:"w-70px inline-block"},[e._v("同意规则")]),a("el-select",{staticClass:"countersign-cell-item",model:{value:e.approverForm.counterSignConfig.auditType,callback:function(t){e.$set(e.approverForm.counterSignConfig,"auditType",t)},expression:"approverForm.counterSignConfig.auditType"}},e._l(e.auditTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1),1===e.approverForm.counterSignConfig.auditType?a("el-select",{staticClass:"countersign-cell-item",model:{value:e.approverForm.counterSignConfig.auditRatio,callback:function(t){e.$set(e.approverForm.counterSignConfig,"auditRatio",t)},expression:"approverForm.counterSignConfig.auditRatio"}},e._l(10,(function(e){return a("el-option",{key:10*e,attrs:{label:10*e+"%",value:10*e}})})),1):e._e(),2===e.approverForm.counterSignConfig.auditType?a("el-input-number",{staticClass:"countersign-cell-item",attrs:{placeholder:"人数",precision:0,min:1,"controls-position":"right"},on:{change:function(t){return e.onSignNumberChange(t,"auditNum")}},model:{value:e.approverForm.counterSignConfig.auditNum,callback:function(t){e.$set(e.approverForm.counterSignConfig,"auditNum",t)},expression:"approverForm.counterSignConfig.auditNum"}}):e._e(),a("span",[e._v("同意时进入下一节点")])],1),a("div",{staticClass:"countersign-cell"},[a("span",{staticClass:"w-70px inline-block"},[e._v("不同意规则")]),a("el-select",{staticClass:"countersign-cell-item",model:{value:e.approverForm.counterSignConfig.rejectType,callback:function(t){e.$set(e.approverForm.counterSignConfig,"rejectType",t)},expression:"approverForm.counterSignConfig.rejectType"}},e._l(e.rejectTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1),1===e.approverForm.counterSignConfig.rejectType?a("el-select",{staticClass:"countersign-cell-item",model:{value:e.approverForm.counterSignConfig.rejectRatio,callback:function(t){e.$set(e.approverForm.counterSignConfig,"rejectRatio",t)},expression:"approverForm.counterSignConfig.rejectRatio"}},e._l(10,(function(e){return a("el-option",{key:10*e,attrs:{label:10*e+"%",value:10*e}})})),1):e._e(),2===e.approverForm.counterSignConfig.rejectType?a("el-input-number",{staticClass:"countersign-cell-item",attrs:{placeholder:"人数",precision:0,min:1,"controls-position":"right"},on:{change:function(t){return e.onSignNumberChange(t,"rejectNum")}},model:{value:e.approverForm.counterSignConfig.rejectNum,callback:function(t){e.$set(e.approverForm.counterSignConfig,"rejectNum",t)},expression:"approverForm.counterSignConfig.rejectNum"}}):e._e(),e.approverForm.counterSignConfig.rejectType?a("span",[e._v("不同意时退回")]):e._e()],1)]):e._e(),e.getCanSetApproversSort?a("el-form-item",{attrs:{label:"设置依次审批顺序"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("设置依次审批顺序")]),a("el-button",{attrs:{preIcon:"icon-ym icon-ym-btn-add"},on:{click:e.openApproversSortListModal}},[e._v("设置审批顺序")])],1):e._e(),a("el-form-item",{attrs:{label:"退回设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("退回设置\n                "),a("el-tooltip",{attrs:{content:"纯表单流程设置退回到发起节点无效",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("div",{staticClass:"form-item-content"},[e._v("被退回的节点重新提交时")]),a("el-radio-group",{staticClass:"form-item-content",on:{input:e.radioInput},model:{value:e.approverForm.rejectType,callback:function(t){e.$set(e.approverForm,"rejectType",t)},expression:"approverForm.rejectType"}},[a("el-radio",{attrs:{label:1}},[e._v("重新审批\n                  "),a("el-tooltip",{attrs:{content:"若流程为A->B->C,C退回至A，则C->A->B->C",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-radio",{attrs:{label:2}},[e._v("从当前节点审批\n                  "),a("el-tooltip",{attrs:{content:"若流程为A->B->C,C退回至A，则C->A->C",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-radio",{attrs:{label:3}},[e._v("自定义审批\n                  "),a("el-tooltip",{attrs:{content:"由用户选择重新审批或从当前节点审批",placement:"top"}},[a("i",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("div",{staticClass:"form-item-content"},[e._v("设置退回到的节点")]),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.rejectStep,callback:function(t){e.$set(e.approverForm,"rejectStep",t)},expression:"approverForm.rejectStep"}},e._l(e.rejectStepOptions,(function(e){return a("el-option",{key:e.nodeId,attrs:{label:e.properties.title,value:e.nodeId}})})),1)],1),a("el-form-item",{attrs:{label:"进度设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("进度设置")]),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.progress,callback:function(t){e.$set(e.approverForm,"progress",t)},expression:"approverForm.progress"}},e._l(e.progressOptions,(function(e){return a("el-option",{key:e,attrs:{label:e+"%",value:e}})})),1)],1),a("el-form-item",{attrs:{label:"抄送设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("抄送设置")]),a("div",{staticClass:"form-item-content"},[a("org-select",{ref:"approver-copy-user-org",staticClass:"mb-5",attrs:{title:"添加抄送人",type:"users",inlet:"flow"},model:{value:e.approverForm.circulateUser,callback:function(t){e.$set(e.approverForm,"circulateUser",t)},expression:"approverForm.circulateUser"}}),a("el-form-item",[a("div",{attrs:{slot:"label"},slot:"label"},[e._v("抄送人范围\n                    "),a("el-tooltip",{attrs:{content:"抄送人员增加人员选择范围附加条件",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{attrs:{filterable:""},model:{value:e.approverForm.extraCopyRule,callback:function(t){e.$set(e.approverForm,"extraCopyRule",t)},expression:"approverForm.extraCopyRule"}},e._l(e.extraRuleOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:1==e.value?"无抄送人范围":e.label,value:e.value}})})),1)],1),a("el-checkbox",{model:{value:e.approverForm.isCustomCopy,callback:function(t){e.$set(e.approverForm,"isCustomCopy",t)},expression:"approverForm.isCustomCopy"}},[e._v("允许自选抄送人")]),a("div",[a("el-checkbox",{model:{value:e.approverForm.isInitiatorCopy,callback:function(t){e.$set(e.approverForm,"isInitiatorCopy",t)},expression:"approverForm.isInitiatorCopy"}},[e._v("抄送给流程发起人")])],1),a("div",[a("el-checkbox",{model:{value:e.approverForm.isFormFieldCopy,callback:function(t){e.$set(e.approverForm,"isFormFieldCopy",t)},expression:"approverForm.isFormFieldCopy"}},[e._v("抄送给表单变量")])],1),e.approverForm.isFormFieldCopy?a("div",{staticClass:"option-box-tip"},[e._v("选择流程表单字段的值作为抄送人\n                ")]):e._e(),e.approverForm.isFormFieldCopy?a("el-form-item",[a("div",{staticClass:"assignee-form"},[a("el-select",{staticClass:"form-field-type",attrs:{placeholder:"请选择字段"},model:{value:e.approverForm.copyFormFieldType,callback:function(t){e.$set(e.approverForm,"copyFormFieldType",t)},expression:"approverForm.copyFormFieldType"}},[a("el-option",{attrs:{value:1,label:"用户"}}),a("el-option",{attrs:{value:2,label:"部门"}}),a("el-option",{attrs:{value:3,label:"岗位"}}),a("el-option",{attrs:{value:4,label:"角色"}}),a("el-option",{attrs:{value:5,label:"分组"}})],1),a("el-select",{staticClass:"form-field",attrs:{placeholder:"请选择字段",filterable:""},model:{value:e.approverForm.copyFormField,callback:function(t){e.$set(e.approverForm,"copyFormField",t)},expression:"approverForm.copyFormField"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1)]):e._e()],1)])],2)],1)],1),a("el-tab-pane",{attrs:{label:"高级设置",name:"senior"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"操作设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("操作设置")]),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.approverForm.hasSaveBtn,callback:function(t){e.$set(e.approverForm,"hasSaveBtn",t)},expression:"approverForm.hasSaveBtn"}},[e._v("暂存")]),a("el-input",{model:{value:e.approverForm.saveBtnText,callback:function(t){e.$set(e.approverForm,"saveBtnText",t)},expression:"approverForm.saveBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.approverForm.hasAuditBtn,callback:function(t){e.$set(e.approverForm,"hasAuditBtn",t)},expression:"approverForm.hasAuditBtn"}},[e._v("同意")]),a("el-input",{model:{value:e.approverForm.auditBtnText,callback:function(t){e.$set(e.approverForm,"auditBtnText",t)},expression:"approverForm.auditBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.approverForm.hasRejectBtn,callback:function(t){e.$set(e.approverForm,"hasRejectBtn",t)},expression:"approverForm.hasRejectBtn"}},[e._v("退回")]),a("el-input",{model:{value:e.approverForm.rejectBtnText,callback:function(t){e.$set(e.approverForm,"rejectBtnText",t)},expression:"approverForm.rejectBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.approverForm.hasRevokeBtn,callback:function(t){e.$set(e.approverForm,"hasRevokeBtn",t)},expression:"approverForm.hasRevokeBtn"}},[e._v("撤回")]),a("el-input",{model:{value:e.approverForm.revokeBtnText,callback:function(t){e.$set(e.approverForm,"revokeBtnText",t)},expression:"approverForm.revokeBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.approverForm.hasTransferBtn,callback:function(t){e.$set(e.approverForm,"hasTransferBtn",t)},expression:"approverForm.hasTransferBtn"}},[e._v("转审")]),a("el-input",{model:{value:e.approverForm.transferBtnText,callback:function(t){e.$set(e.approverForm,"transferBtnText",t)},expression:"approverForm.transferBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.approverForm.hasCancelBtn,callback:function(t){e.$set(e.approverForm,"hasCancelBtn",t)},expression:"approverForm.hasCancelBtn"}},[e._v("驳回")]),a("el-input",{model:{value:e.approverForm.cancelBtnText,callback:function(t){e.$set(e.approverForm,"cancelBtnText",t)},expression:"approverForm.cancelBtnText"}})],1),a("div",{staticClass:"per-cell"},[a("el-checkbox",{model:{value:e.approverForm.hasPrintBtn,callback:function(t){e.$set(e.approverForm,"hasPrintBtn",t)},expression:"approverForm.hasPrintBtn"}},[e._v("打印")]),a("el-input",{model:{value:e.approverForm.printBtnText,callback:function(t){e.$set(e.approverForm,"printBtnText",t)},expression:"approverForm.printBtnText"}})],1),e.approverForm.hasPrintBtn?a("div",{staticClass:"per-cell"},[a("p",{staticStyle:{width:"112px"}}),a("JnpfTreeSelect",{attrs:{options:e.printTplList,placeholder:"请选择打印模板",lastLevel:"",clearable:"",multiple:""},model:{value:e.approverForm.printId,callback:function(t){e.$set(e.approverForm,"printId",t)},expression:"approverForm.printId"}},[a("div",{staticClass:"printWrap",attrs:{slot:"header"},slot:"header"},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openPrint}},[e._v("添加打印模板\n                    ")]),a("el-link",{staticStyle:{position:"absolute",right:"8px",top:"18px"},attrs:{type:"info",underline:!1},on:{click:e.refreshPrintOptions}},[a("i",{staticClass:"el-icon-refresh el-icon--right"})]),a("el-divider")],1)])],1):e._e(),a("div",{staticClass:"per-cell"},[a("div",{staticClass:"has-free-approver ",attrs:{slot:"label"},slot:"label"},[a("el-checkbox",{model:{value:e.approverForm.hasFreeApproverBtn,callback:function(t){e.$set(e.approverForm,"hasFreeApproverBtn",t)},expression:"approverForm.hasFreeApproverBtn"}},[e._v("加签"),a("el-tooltip",{attrs:{content:"允许在审批单中增加临时审批人",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question form-item-approver"})])],1)],1),a("el-input",{model:{value:e.approverForm.hasFreeApproverBtnText,callback:function(t){e.$set(e.approverForm,"hasFreeApproverBtnText",t)},expression:"approverForm.hasFreeApproverBtnText"}})],1)])],1),a("el-form",{staticClass:"pd-10-20",staticStyle:{"margin-top":"-20px"},attrs:{"label-width":"90px","label-position":"left"}},[a("el-form-item",{attrs:{label:"自动同意"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("自动同意\n                "),a("el-tooltip",{attrs:{content:"当前审批节点表单必填字段为空工单流转时不做校验，下一审批节点设置候选人员、选择分支、异常节点时当前审批节点规则失效",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.approverForm.hasAgreeRule,callback:function(t){e.$set(e.approverForm,"hasAgreeRule",t)},expression:"approverForm.hasAgreeRule"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.approverForm.hasAgreeRule,expression:"approverForm.hasAgreeRule"}],staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("同意规则配置")]),a("el-row",[a("el-select",{attrs:{multiple:""},model:{value:e.approverForm.agreeRules,callback:function(t){e.$set(e.approverForm,"agreeRules",t)},expression:"approverForm.agreeRules"}},[a("el-option",{attrs:{label:"审批人为发起人",value:2}}),a("el-option",{attrs:{label:"审批人与上一审批节点处理人相同",value:3}}),a("el-option",{attrs:{label:"审批人审批过",value:4}})],1)],1)],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("手写签名\n                "),a("el-tooltip",{attrs:{content:"审批人在进行审批操作时需手写签名",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.approverForm.hasSign,callback:function(t){e.$set(e.approverForm,"hasSign",t)},expression:"approverForm.hasSign"}})],1),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("意见填写\n                "),a("el-tooltip",{attrs:{content:"审批人在进行审批操作需填写意见",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-switch",{model:{value:e.approverForm.hasOpinion,callback:function(t){e.$set(e.approverForm,"hasOpinion",t)},expression:"approverForm.hasOpinion"}})],1),a("el-form-item",{attrs:{label:"说明"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("说明")]),a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.approverForm.description,callback:function(t){e.$set(e.approverForm,"description",t)},expression:"approverForm.description"}})],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"表单权限",name:"formAuth"}},[a("div",{staticClass:"form-auth-table"},[a("el-table",{staticClass:"JNPF-common-table",attrs:{data:e.formOperatesList,size:"mini",height:"100%"}},[a("el-table-column",{attrs:{prop:"name",label:"表单字段",align:"left"}}),a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-checkbox",{attrs:{indeterminate:e.indeterminateReadFlag},on:{change:function(t){return e.updateReadAllSelected(t,1)}},model:{value:e.readAllChecked,callback:function(t){e.readAllChecked=t},expression:"readAllChecked"}},[e._v("查看")])]}},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(t){return e.handleCheckedCitiesChange(t,1)}},model:{value:t.row.read,callback:function(a){e.$set(t.row,"read",a)},expression:"scope.row.read"}},[e._v("查看")])]}}],null,!1,4152011034)}),a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-checkbox",{attrs:{indeterminate:e.indeterminateWriteFlag},on:{change:function(t){return e.updateReadAllSelected(t,2)}},model:{value:e.writeAllChecked,callback:function(t){e.writeAllChecked=t},expression:"writeAllChecked"}},[e._v("编辑")])]}},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(t){return e.handleCheckedCitiesChange(t,2)}},model:{value:t.row.write,callback:function(a){e.$set(t.row,"write",a)},expression:"scope.row.write"}},[e._v("编辑")])]}}],null,!1,2995566869)}),a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-checkbox",{attrs:{indeterminate:e.indeterminateRequiredFlag},on:{change:function(t){return e.updateReadAllSelected(t,3)}},model:{value:e.requiredAllChecked,callback:function(t){e.requiredAllChecked=t},expression:"requiredAllChecked"}},[e._v("必填")])]}},{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{disabled:t.row.requiredDisabled},on:{change:function(t){return e.handleCheckedCitiesChange(t,3)}},model:{value:t.row.required,callback:function(a){e.$set(t.row,"required",a)},expression:"scope.row.required"}},[e._v("必填")])]}}],null,!1,3030614050)})],1)],1)]),a("el-tab-pane",{attrs:{label:"节点事件"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{model:e.approverForm,"label-position":"left"}},[a("el-alert",{attrs:{title:"开启后可配置触发事件同时进行参数赋值",type:"warning",closable:!1,"show-icon":""}}),a("el-form-item",{staticClass:"mt-10",attrs:{label:"同意事件"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("同意事件")]),a("el-switch",{model:{value:e.approverForm.approveFuncConfig.on,callback:function(t){e.$set(e.approverForm.approveFuncConfig,"on",t)},expression:"approverForm.approveFuncConfig.on"}})],1),e.approverForm.approveFuncConfig.on?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("接口设置")]),a("el-form-item",{attrs:{"label-width":"0"}},[a("interface-dialog",{attrs:{value:e.approverForm.approveFuncConfig.interfaceId,title:e.approverForm.approveFuncConfig.interfaceName},on:{change:function(t){return e.onFuncChange("approverForm","approveFuncConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.approveFuncConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                    "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n                  ")]}}],null,!1,97883127)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(a){return e.onChangeRelationField(t.$index,"approverForm","approveFuncConfig")}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]}}],null,!1,2852480881)}),a("el-table-column",{attrs:{prop:"value",label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),t.row.required?a("el-option-group",e._l(e.funcRequiredOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1):a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,529792982)})],1)],1):e._e(),a("el-form-item",{attrs:{label:"退回事件"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("退回事件")]),a("el-switch",{model:{value:e.approverForm.rejectFuncConfig.on,callback:function(t){e.$set(e.approverForm.rejectFuncConfig,"on",t)},expression:"approverForm.rejectFuncConfig.on"}})],1),e.approverForm.rejectFuncConfig.on?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("接口设置")]),a("el-form-item",{attrs:{"label-width":"0"}},[a("interface-dialog",{attrs:{value:e.approverForm.rejectFuncConfig.interfaceId,title:e.approverForm.rejectFuncConfig.interfaceName},on:{change:function(t){return e.onFuncChange("approverForm","rejectFuncConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.rejectFuncConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                    "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n                  ")]}}],null,!1,97883127)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(a){return e.onChangeRelationField(t.$index,"approverForm","rejectFuncConfig")}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]}}],null,!1,2680806577)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),t.row.required?a("el-option-group",e._l(e.funcRequiredOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1):a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,529792982)})],1)],1):e._e(),a("el-form-item",{attrs:{label:"撤回事件"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("撤回事件")]),a("el-switch",{model:{value:e.approverForm.recallFuncConfig.on,callback:function(t){e.$set(e.approverForm.recallFuncConfig,"on",t)},expression:"approverForm.recallFuncConfig.on"}})],1),e.approverForm.recallFuncConfig.on?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("接口设置")]),a("el-form-item",{attrs:{"label-width":"0"}},[a("interface-dialog",{attrs:{value:e.approverForm.recallFuncConfig.interfaceId,title:e.approverForm.recallFuncConfig.interfaceName},on:{change:function(t){return e.onFuncChange("approverForm","recallFuncConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.recallFuncConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                    "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n                  ")]}}],null,!1,97883127)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(a){return e.onChangeRelationField(t.$index,"approverForm","recallFuncConfig")}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]}}],null,!1,3006252907)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),t.row.required?a("el-option-group",e._l(e.funcRequiredOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1):a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,529792982)})],1)],1):e._e(),a("el-form-item",{staticClass:"mt-10",attrs:{label:"超时事件"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("超时事件")]),a("el-switch",{model:{value:e.approverForm.overTimeFuncConfig.on,callback:function(t){e.$set(e.approverForm.overTimeFuncConfig,"on",t)},expression:"approverForm.overTimeFuncConfig.on"}})],1),e.approverForm.overTimeFuncConfig.on?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("接口设置")]),a("el-form-item",{attrs:{"label-width":"0"}},[a("interface-dialog",{attrs:{value:e.approverForm.overTimeFuncConfig.interfaceId,title:e.approverForm.overTimeFuncConfig.interfaceName},on:{change:function(t){return e.onFuncChange("approverForm","overTimeFuncConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.overTimeFuncConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                    "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n                  ")]}}],null,!1,97883127)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(a){return e.onChangeRelationField(t.$index,"approverForm","overTimeFuncConfig")}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]}}],null,!1,4287641221)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),t.row.required?a("el-option-group",e._l(e.funcRequiredOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1):a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,529792982)})],1)],1):e._e(),a("el-form-item",{staticClass:"mt-10",attrs:{label:"提醒事件"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("提醒事件")]),a("el-switch",{model:{value:e.approverForm.noticeFuncConfig.on,callback:function(t){e.$set(e.approverForm.noticeFuncConfig,"on",t)},expression:"approverForm.noticeFuncConfig.on"}})],1),e.approverForm.noticeFuncConfig.on?a("div",{staticClass:"form-item-content form-item-content-first"},[a("div",{staticClass:"form-sub-title"},[e._v("接口设置")]),a("el-form-item",{attrs:{"label-width":"0"}},[a("interface-dialog",{attrs:{value:e.approverForm.noticeFuncConfig.interfaceId,title:e.approverForm.noticeFuncConfig.interfaceName},on:{change:function(t){return e.onFuncChange("approverForm","noticeFuncConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.noticeFuncConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"required-sign"},[e._v(e._s(t.row.required?"*":""))]),e._v("\n                    "+e._s(t.row.fieldName?t.row.field+"("+t.row.fieldName+")":t.row.field)+"\n                  ")]}}],null,!1,97883127)}),a("el-table-column",{attrs:{prop:"field",label:"参数来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择参数来源"},on:{change:function(a){return e.onChangeRelationField(t.$index,"approverForm","noticeFuncConfig")}},model:{value:t.row.sourceType,callback:function(a){e.$set(t.row,"sourceType",a)},expression:"scope.row.sourceType"}},e._l(e.parameterSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]}}],null,!1,2601902404)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sourceType?a("el-select",{attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t.row)}},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),t.row.required?a("el-option-group",e._l(e.funcRequiredOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1):a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1):[["int","decimal"].includes(t.row.dataType)?a("JnpfInputNumber",{staticClass:"input-number",attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:"",controls:"",controlsPosition:"right"},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):"datetime"==t.row.dataType?a("JnpfDatePicker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择参数值",format:"yyyy-MM-dd HH:mm:ss",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}}):a("el-input",{attrs:{placeholder:"请输入参数值",disabled:3==t.row.sourceType,clearable:""},model:{value:t.row.relationField,callback:function(a){e.$set(t.row,"relationField",a)},expression:"scope.row.relationField"}})]]}}],null,!1,529792982)})],1)],1):e._e()],1)],1)],1),a("el-tab-pane",{attrs:{label:"节点通知"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{model:e.approverForm,"label-position":"top"}},[a("el-alert",{attrs:{title:"该通知设置在【消息中心】-【消息发送配置】维护，选择默认则站内信提醒，选择关闭则不提醒。",type:"warning",closable:!1,"show-icon":""}}),a("el-form-item",{staticClass:"mt-10"},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点同意\n                "),a("el-tooltip",{attrs:{content:"当前节点审核人同意的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.approveMsgConfig.on,callback:function(t){e.$set(e.approverForm.approveMsgConfig,"on",t)},expression:"approverForm.approveMsgConfig.on"}},e._l(e.nodeNoticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.approverForm.approveMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.approverForm.approveMsgConfig.msgId,title:e.approverForm.approveMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("approverForm","approveMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.approveMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,848379261)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点退回\n                "),a("el-tooltip",{attrs:{content:"当前节点审核人退回的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.rejectMsgConfig.on,callback:function(t){e.$set(e.approverForm.rejectMsgConfig,"on",t)},expression:"approverForm.rejectMsgConfig.on"}},e._l(e.nodeNoticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.approverForm.rejectMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.approverForm.rejectMsgConfig.msgId,title:e.approverForm.rejectMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("approverForm","rejectMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.rejectMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,848379261)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点抄送\n                "),a("el-tooltip",{attrs:{content:"当前节点抄送的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.copyMsgConfig.on,callback:function(t){e.$set(e.approverForm.copyMsgConfig,"on",t)},expression:"approverForm.copyMsgConfig.on"}},e._l(e.nodeNoticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.approverForm.copyMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.approverForm.copyMsgConfig.msgId,title:e.approverForm.copyMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("approverForm","copyMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.copyMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},[a("el-option-group",e._l(e.systemFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1),a("el-option-group",e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)],1)}))}}],null,!1,848379261)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点超时\n                "),a("el-tooltip",{attrs:{content:"当前节点超时的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.overTimeMsgConfig.on,callback:function(t){e.$set(e.approverForm.overTimeMsgConfig,"on",t)},expression:"approverForm.overTimeMsgConfig.on"}},e._l(e.nodeNoticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.approverForm.overTimeMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.approverForm.overTimeMsgConfig.msgId,title:e.approverForm.overTimeMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("approverForm","overTimeMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.overTimeMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},e._l(e.funcOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)}))}}],null,!1,865070175)})],1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("节点提醒\n                "),a("el-tooltip",{attrs:{content:"当前节点提醒的时候",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.noticeMsgConfig.on,callback:function(t){e.$set(e.approverForm.noticeMsgConfig,"on",t)},expression:"approverForm.noticeMsgConfig.on"}},e._l(e.nodeNoticeOptionsData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.approverForm.noticeMsgConfig.on?a("div",{staticClass:"form-item-content",staticStyle:{"margin-bottom":"18px"}},[a("el-form-item",{attrs:{label:"发送配置"}},[a("msg-dialog",{attrs:{value:e.approverForm.noticeMsgConfig.msgId,title:e.approverForm.noticeMsgConfig.msgName},on:{change:function(t){return e.onMsgChange("approverForm","noticeMsgConfig",arguments)}}})],1),a("div",{staticClass:"form-sub-title"},[e._v("参数设置")]),a("el-table",{attrs:{data:e.approverForm.noticeMsgConfig.templateJson}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"field",label:"模板名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goDetail(t.row.templateId)}}},[e._v(e._s(t.row.msgTemplateName)+"\n                    ")])]}}],null,!1,3316289560)}),a("el-table-column",{attrs:{prop:"field",label:"参数名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("div",{key:i,staticClass:"parameter-box",attrs:{title:t.field+"("+t.fieldName+")"}},[e._v("\n                      "+e._s(t.field)+"("+e._s(t.fieldName)+")\n                    ")])}))}}],null,!1,3769128179)}),a("el-table-column",{attrs:{prop:"value",label:"表单字段"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.paramJson,(function(t,i){return a("el-select",{key:i,staticClass:"variable-box",attrs:{placeholder:"请选择表单字段",clearable:"",filterable:""},on:{change:function(a){return e.onRelationFieldChange(a,t)}},model:{value:t.relationField,callback:function(a){e.$set(t,"relationField",a)},expression:"it.relationField"}},e._l(e.funcOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label?e.__vModel__+"("+e.__config__.label+")":e.__vModel__,value:e.__vModel__}})})),1)}))}}],null,!1,865070175)})],1)],1):e._e()],1)],1)],1),a("el-tab-pane",{attrs:{label:"超时处理"}},[a("el-scrollbar",{staticClass:"config-scrollbar"},[a("el-form",{staticClass:"pd-10-20",attrs:{model:e.approverForm,"label-position":"top"}},[a("el-form-item",{attrs:{label:"限时设置"}},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("限时设置")]),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.timeLimitConfig.on,callback:function(t){e.$set(e.approverForm.timeLimitConfig,"on",t)},expression:"approverForm.timeLimitConfig.on"}},e._l(e.nodeNoticeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.approverForm.timeLimitConfig.on?a("div",{staticClass:"form-item-content"},[a("el-form-item",{attrs:{label:"节点限定时长起始值"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.timeLimitConfig.nodeLimit,callback:function(t){e.$set(e.approverForm.timeLimitConfig,"nodeLimit",t)},expression:"approverForm.timeLimitConfig.nodeLimit"}},e._l(e.overTimeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),2===e.approverForm.timeLimitConfig.nodeLimit?a("el-form-item",{attrs:{label:"表单字段"}},[a("el-select",{attrs:{placeholder:"请选择字段",filterable:""},model:{value:e.approverForm.timeLimitConfig.formField,callback:function(t){e.$set(e.approverForm.timeLimitConfig,"formField",t)},expression:"approverForm.timeLimitConfig.formField"}},e._l(e.usedFormItems,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1):e._e(),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("节点处理限定时长(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.approverForm.timeLimitConfig.duringDeal,callback:function(t){e.$set(e.approverForm.timeLimitConfig,"duringDeal",t)},expression:"approverForm.timeLimitConfig.duringDeal"}})],1)],1)],1):e._e(),a("el-form-item",{staticClass:"mt-10"},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("超时设置\n                "),a("el-tooltip",{attrs:{content:"超过设置的节点处理限定时间即为超时",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.overTimeConfig.on,callback:function(t){e.$set(e.approverForm.overTimeConfig,"on",t)},expression:"approverForm.overTimeConfig.on"}},e._l(e.nodeNoticeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.approverForm.overTimeConfig.on?a("div",{staticClass:"form-item-content"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("第一次超时时间(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:0,step:1},model:{value:e.approverForm.overTimeConfig.firstOver,callback:function(t){e.$set(e.approverForm.overTimeConfig,"firstOver",t)},expression:"approverForm.overTimeConfig.firstOver"}})],1)],1),a("el-row",{staticClass:"mt-10",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("超时间隔(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:0,step:1},model:{value:e.approverForm.overTimeConfig.overTimeDuring,callback:function(t){e.$set(e.approverForm.overTimeConfig,"overTimeDuring",t)},expression:"approverForm.overTimeConfig.overTimeDuring"}})],1)],1),a("el-row",[e._v("超时事务")]),a("el-row",[a("el-checkbox",{model:{value:e.approverForm.overTimeConfig.overNotice,callback:function(t){e.$set(e.approverForm.overTimeConfig,"overNotice",t)},expression:"approverForm.overTimeConfig.overNotice"}},[e._v("超时通知\n                  "),a("el-tooltip",{attrs:{content:"勾选后才能进行超时消息发送（站内信系统默认发送，第三方超时消息需在节点通知内配置）",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("el-row",[a("el-checkbox",{model:{value:e.approverForm.overTimeConfig.overAutoApprove,callback:function(t){e.$set(e.approverForm.overTimeConfig,"overAutoApprove",t)},expression:"approverForm.overTimeConfig.overAutoApprove"}},[e._v("超时自动审批\n                  "),a("el-tooltip",{attrs:{content:"当前审批节点表单必填字段为空工单流转时不做校验，下一审批节点设置候选人员、选择分支、异常节点时当前审批节点规则失效",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("超时次数(次)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.approverForm.overTimeConfig.overAutoApproveTime,callback:function(t){e.$set(e.approverForm.overTimeConfig,"overAutoApproveTime",t)},expression:"approverForm.overTimeConfig.overAutoApproveTime"}})],1)],1),a("el-row",[a("el-checkbox",{model:{value:e.approverForm.overTimeConfig.overEvent,callback:function(t){e.$set(e.approverForm.overTimeConfig,"overEvent",t)},expression:"approverForm.overTimeConfig.overEvent"}},[e._v("超时事件\n                  "),a("el-tooltip",{attrs:{content:"请在节点事件内配置超时事件",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("超时次数(次)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.approverForm.overTimeConfig.overEventTime,callback:function(t){e.$set(e.approverForm.overTimeConfig,"overEventTime",t)},expression:"approverForm.overTimeConfig.overEventTime"}})],1)],1)],1):e._e(),a("el-form-item",{staticClass:"mt-10"},[a("div",{staticClass:"form-item-label",attrs:{slot:"label"},slot:"label"},[e._v("提醒设置\n                "),a("el-tooltip",{attrs:{content:"还未到达设置的节点处理限定时间即为提醒",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-select",{staticClass:"form-item-content",attrs:{placeholder:"请选择",filterable:""},model:{value:e.approverForm.noticeConfig.on,callback:function(t){e.$set(e.approverForm.noticeConfig,"on",t)},expression:"approverForm.noticeConfig.on"}},e._l(e.nodeNoticeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1===e.approverForm.noticeConfig.on?a("div",{staticClass:"form-item-content"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("第一次提醒时间(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.approverForm.noticeConfig.firstOver,callback:function(t){e.$set(e.approverForm.noticeConfig,"firstOver",t)},expression:"approverForm.noticeConfig.firstOver"}})],1)],1),a("el-row",{staticClass:"mt-10",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("提醒间隔(时)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:0,step:1},model:{value:e.approverForm.noticeConfig.overTimeDuring,callback:function(t){e.$set(e.approverForm.noticeConfig,"overTimeDuring",t)},expression:"approverForm.noticeConfig.overTimeDuring"}})],1)],1),a("el-row",[e._v("提醒事务")]),a("el-row",[a("el-checkbox",{model:{value:e.approverForm.noticeConfig.overNotice,callback:function(t){e.$set(e.approverForm.noticeConfig,"overNotice",t)},expression:"approverForm.noticeConfig.overNotice"}},[e._v("提醒通知\n                  "),a("el-tooltip",{attrs:{content:"勾选后才能进行提醒消息发送（站内信系统默认发送，第三方超时消息需在节点通知内配置）",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)],1),a("el-row",[a("el-checkbox",{model:{value:e.approverForm.noticeConfig.overEvent,callback:function(t){e.$set(e.approverForm.noticeConfig,"overEvent",t)},expression:"approverForm.noticeConfig.overEvent"}},[e._v("提醒事件\n                  "),a("el-tooltip",{attrs:{content:"请在节点事件内配置提醒事件",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("提醒次数(次)")]),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.approverForm.noticeConfig.overEventTime,callback:function(t){e.$set(e.approverForm.noticeConfig,"overEventTime",t)},expression:"approverForm.noticeConfig.overEventTime"}})],1)],1)],1)],1):e._e()],1)],1)],1)],1)],1):e._e(),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center rule-dialog",attrs:{title:"数据传递","close-on-click-modal":!1,visible:e.ruleVisible,"lock-scroll":"","append-to-body":"",width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-tabs",{staticClass:"JNPF-el_tabs node-tabs"},e._l(e.assignList,(function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.title}},[a("div",{staticClass:"option-box-tip"},[e._v("当父流程流转到子流程时，将对应的上一节点表单字段赋值给子流程发起节点")]),e._l(t.ruleList,(function(l,o){return a("el-row",{key:o,staticClass:"mb-10",attrs:{gutter:10}},[a("el-col",{staticClass:"rule-cell",attrs:{span:2}},[e._v("父流程")]),a("el-col",{staticClass:"rule-cell",attrs:{span:7}},[a("el-select",{attrs:{placeholder:"请选择字段",filterable:"",clearable:""},model:{value:l.parentField,callback:function(t){e.$set(l,"parentField",t)},expression:"child.parentField"}},[a("el-option",{attrs:{label:"上节点表单Id",value:"@prevNodeFormId"}}),e._l(t.formFieldList,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})}))],2)],1),a("el-col",{staticClass:"rule-cell mid",attrs:{span:4}},[e._v("赋值给")]),a("el-col",{staticClass:"rule-cell",attrs:{span:2}},[e._v("子流程")]),a("el-col",{staticClass:"rule-cell",attrs:{span:7}},[a("el-select",{attrs:{placeholder:"请选择字段",filterable:"",clearable:""},model:{value:l.childField,callback:function(t){e.$set(l,"childField",t)},expression:"child.childField"}},e._l(e.childFieldOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1),a("el-col",{staticClass:"rule-cell",attrs:{span:2}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-close"},on:{click:function(t){return e.delTransmitRule(i,o)}}})],1)],1)})),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addTransmitRule(i)}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("新增规则")])],1)],2)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.ruleVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveRule}},[e._v("确定")])],1)],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center rule-dialog",attrs:{title:"数据传递","close-on-click-modal":!1,visible:e.approverTransmitRuleVisible,"lock-scroll":"","append-to-body":"",width:"700px"},on:{"update:visible":function(t){e.approverTransmitRuleVisible=t}}},[a("el-tabs",{staticClass:"JNPF-el_tabs node-tabs"},e._l(e.assignList,(function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.title}},[a("div",{staticClass:"option-box-tip"},[e._v("当节点流转到本节点时，将对应的上一节点的字段赋值给本节点")]),e._l(t.ruleList,(function(l,o){return a("el-row",{key:o,staticClass:"mb-10",attrs:{gutter:10}},[a("el-col",{staticClass:"rule-cell",attrs:{span:2}},[e._v("上节点")]),a("el-col",{staticClass:"rule-cell",attrs:{span:7}},[a("el-select",{attrs:{placeholder:"请选择字段",filterable:"",clearable:""},model:{value:l.parentField,callback:function(t){e.$set(l,"parentField",t)},expression:"child.parentField"}},[a("el-option",{attrs:{label:"上节点表单Id",value:"@prevNodeFormId"}}),e._l(t.formFieldList,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})}))],2)],1),a("el-col",{staticClass:"rule-cell mid",attrs:{span:4}},[e._v("赋值给")]),a("el-col",{staticClass:"rule-cell",attrs:{span:2}},[e._v("本节点")]),a("el-col",{staticClass:"rule-cell",attrs:{span:7}},[a("el-select",{attrs:{placeholder:"请选择字段",filterable:"",clearable:""},model:{value:l.childField,callback:function(t){e.$set(l,"childField",t)},expression:"child.childField"}},e._l(e.formFieldsOptions,(function(e){return a("el-option",{key:e.__vModel__,attrs:{label:e.__config__.label,value:e.__vModel__}})})),1)],1),a("el-col",{staticClass:"rule-cell",attrs:{span:2}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-close"},on:{click:function(t){return e.delTransmitRule(i,o)}}})],1)],1)})),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addTransmitRule(i)}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("新增规则")])],1)],2)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.approverTransmitRuleVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveApproverTransmitRule}},[e._v("确定")])],1)],1),a("FormulaDialog",{attrs:{visible:e.formulaVisible,value:e.activeItem.field,formFieldsOptions:e.formFieldsOptions},on:{"update:visible":function(t){e.formulaVisible=t},updateFormula:e.updateFormula}}),e.viewVisible?a("Detail",{ref:"View",on:{close:function(t){e.viewVisible=!1}}}):e._e(),e.registerApproversSortVisible?a("ApproversSortDialog",{ref:"approversSort",on:{confirm:e.updateApproversSortList}}):e._e()],1):e._e()},L=[],O=a("3835"),$=(a("5df3"),a("f400"),a("b85c")),I=(a("7514"),a("20d6"),a("bb1a")),j=a("5451"),M=a("8c5f"),V=a("c5cd"),A=a("a63f"),P=a("e984"),J=a("03e8"),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._g(e._b({staticClass:"JNPF-dialog JNPF-dialog_center formula-dialog",attrs:{title:"公式编辑","close-on-click-modal":!1,"lock-scroll":"","append-to-body":"",width:"800px","modal-append-to-body":!1},on:{open:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),[a("div",{staticClass:"formula-dialog-body"},[a("div",{staticClass:"code-editor-area"},[a("JSONEditor",{ref:"codemirror",staticClass:"json-editor",attrs:{mode:"javascript"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),a("div",{staticClass:"operation-area"},[a("div",{staticClass:"area-item field-area"},[a("div",{staticClass:"area-title"},[e._v("当前表单字段")]),a("div",{staticClass:"area-content"},[a("el-tree",{attrs:{data:e.fieldsOptions,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,props:e.treeProps},on:{"node-click":e.handleNodeClick}})],1)]),a("div",{staticClass:"area-item formula-area"},[a("div",{staticClass:"area-title"},[e._v("函数")]),a("div",{staticClass:"area-content"},[a("el-tree",{attrs:{data:e.formulaData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,props:e.treeProps},on:{"node-click":e.formulaNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"text",on:{mouseenter:function(t){return e.formulaMouseenter(l)}}},[e._v(e._s(i.label))])])}}])})],1)]),a("div",{staticClass:"area-item formula-desc-area"},[a("div",{staticClass:"area-title"},[e._v(e._s(e.descTitle))]),a("div",{staticClass:"area-content",domProps:{innerHTML:e._s(e.descContent)}})])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onClose()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])},K=[],B=a("fa7e"),E=[{id:"maths",fullName:"数学函数",desc:"",children:[{id:"SUM",fullName:"SUM",desc:'<ul class="formula-desc-wrapper">\n        <li><span class="formula-name">SUM</span>函数可以获取一组数值的总和</li>\n        <li>用法：<span class="formula-name">SUM</span>(数值1,数值2,...)</li>\n        <li>示例：<span class="formula-name">SUM</span>(语文成绩，数学成绩)返回两门课程总分</li>\n        </ul>'},{id:"SUBTRACT",fullName:"SUBTRACT",desc:'<ul class="formula-desc-wrapper">\n        <li><span class="formula-name">SUBTRACT</span>函数可以返回数值相减</li>\n        <li>用法：<span class="formula-name">SUBTRACT</span>(被减数,减数)</li>\n        <li>示例：<span class="formula-name">SUBTRACT</span>(总收入，总支出)返回收支总利润</li>\n        </ul>'},{id:"PRODUCT",fullName:"PRODUCT",desc:'<ul class="formula-desc-wrapper">\n        <li><span class="formula-name">PRODUCT</span>函数可以获取一组数值的乘积</li>\n        <li>用法：<span class="formula-name">PRODUCT</span>(数值1,数值2,...)</li>\n        <li>示例：<span class="formula-name">PRODUCT</span>(单价，数量)获取总价，即单价和数量的乘积</li>\n        </ul>'},{id:"DIVIDE",fullName:"DIVIDE",desc:'<ul class="formula-desc-wrapper">\n        <li><span class="formula-name">DIVIDE</span>函数可以返回数值相除</li>\n        <li>用法：<span class="formula-name">DIVIDE</span>(被除数,除数)</li>\n        <li>示例：<span class="formula-name">DIVIDE</span>(总价，单价)获取数量，即总价除单价</li>\n        </ul>'},{id:"COUNT",fullName:"COUNT",desc:'<ul class="formula-desc-wrapper">\n        <li><span class="formula-name">COUNT</span>函数可以获取参数的数量</li>\n        <li>用法：<span class="formula-name">COUNT</span>(值,值,...)</li>\n        <li>示例：<span class="formula-name">COUNT</span>(小王,小李)返回2,即人员数量</li>\n        </ul>'}]}],z=E,q={components:{JSONEditor:B["a"]},props:["value","formFieldsOptions"],data:function(){return{text:"111",treeProps:{children:"children",label:"fullName"},formulaData:z,descTitle:"",descContent:"请从左侧面板选择字段名和函数"}},computed:{fieldsOptions:function(){var e=this.formFieldsOptions.map((function(e){return{id:e.__vModel__,fullName:e.__config__.label}}));return e}},methods:{onOpen:function(){this.text=this.value},handleNodeClick:function(e){this.$refs.codemirror.insert("{"+e.id+"}")},formulaNodeClick:function(e){e.desc&&this.$refs.codemirror.insert(e.id+"()",!0)},formulaMouseenter:function(e){e.desc&&(this.descContent=e.desc,this.descTitle=e.fullName)},onClose:function(){this.$emit("updateFormula",this.text),this.closeDialog()},closeDialog:function(){this.$emit("update:visible",!1)}}},W=q,U=Object(T["a"])(W,R,K,!1,null,null,null),H=U.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popupSelect-container"},[a("div",{staticClass:"el-select",on:{click:e.openDialog}},[a("el-input",{attrs:{placeholder:"请选择子流程",readonly:"","validate-event":!1},nativeOn:{mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},[a("template",{slot:"suffix"},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-arrow-up"]}),e.showClose?a("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}):e._e()])],2)],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{title:"选择子流程","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"JNPF-common-layout"},[a("div",{staticClass:"JNPF-common-layout-center"},[a("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"JNPF-common-search-box-right"},[a("el-tooltip",{attrs:{effect:"dark",content:"刷新",placement:"top"}},[a("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)],1),a("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,border:!1,"highlight-current-row":"",hasNO:!1},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" ")])]}}])}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"fullName",label:"流程名称"}})],1),a("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)])],1)},Q=[],Y=(a("386d"),{props:{value:{default:""},title:{default:""},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},flowType:{default:""}},model:{prop:"value",event:"input"},data:function(){return{list:[],innerValue:"",listQuery:{currentPage:1,pageSize:20,sort:"desc",sidx:""},keyword:"",total:0,checked:"",checkedRow:{},listLoading:!1,defaultProps:{id:"id",label:"fullName",enCode:"enCode"},query:{categoryId:"",keyword:"",dataType:null},treeLoading:!1,treeData:[],inputHovering:!1,visible:!1,tableName:"",category:""}},computed:{showClose:function(){var e=void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.disabled&&this.inputHovering&&e;return t}},created:function(){this.reset()},methods:{initData:function(){var e=this;this.listLoading=!0;var t=Object(o["a"])(Object(o["a"])({keyword:this.keyword},this.listQuery),{},{flowType:this.flowType});Object(j["i"])(t).then((function(t){e.list=t.data.list,e.total=t.data.pagination.total,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},handleNodeClick:function(e){e.id!=this.category&&(this.category=e.id||"",this.reset())},reset:function(){this.keyword="",this.search()},search:function(){this.listQuery.currentPage=1,this.listQuery.pageSize=20,this.listQuery.sort="desc",this.initData()},openDialog:function(){this.disabled||(this.checked=this.value,this.visible=!0,this.reset())},clear:function(){this.checked="",this.checkedRow={},this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow)},select:function(){this.checked&&(this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow),this.visible=!1)},rowClick:function(e){this.checked=e.id,this.checkedRow=e}}}),Z=Y,X=Object(T["a"])(Z,G,Q,!1,null,null,null),ee=X.exports,te=a("1ee6"),ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popupSelect-container"},[a("div",{staticClass:"el-select",on:{click:e.openDialog}},[a("el-input",{attrs:{placeholder:e.placeholder,readonly:"","validate-event":!1},nativeOn:{mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},[a("template",{slot:"suffix"},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-arrow-up"]}),e.showClose?a("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}):e._e()])],2)],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{title:e.label+"选择","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"JNPF-common-layout"},[a("div",{staticClass:"JNPF-common-layout-center"},[a("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"JNPF-common-search-box-right"},[a("el-tooltip",{attrs:{effect:"dark",content:"刷新",placement:"top"}},[a("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)],1),a("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,border:!1,"highlight-current-row":"",hasNO:!1},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" ")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"fullName",label:e.label+"名称","show-overflow-tooltip":""}}),1==this.type?a("el-table-column",{attrs:{prop:"isQuote",label:"是否引用",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.isQuote?"danger":"success","disable-transitions":""}},[e._v("\n                  "+e._s(t.row.isQuote?"是":"否"))])]}}],null,!1,2009926835)}):e._e(),a("el-table-column",{attrs:{prop:"enCode",label:e.label+"编码"}}),a("el-table-column",{attrs:{prop:"formType",label:e.label+"类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(2==t.row.formType?"自定义"+e.label:"系统"+e.label))])]}}])})],1),a("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.$t("common.confirmButton"))+"\n      ")])],1)])],1)},ie=[],le=(a("c5f6"),{name:"FlowFormDialog",props:{value:{default:""},title:{type:String,default:""},placeholder:{type:String,default:"请选择"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},type:{type:Number,default:1},formType:{default:null}},model:{prop:"value",event:"input"},data:function(){return{list:[],innerValue:"",listQuery:{keyword:"",currentPage:1,pageSize:20},total:0,checked:"",checkedRow:{},listLoading:!1,inputHovering:!1,visible:!1}},computed:{showClose:function(){var e=void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.disabled&&this.inputHovering&&e;return t},label:function(){return 1==this.type?"功能":"表单"}},methods:{initData:function(){var e=this;this.listLoading=!0;var t=Object(o["a"])(Object(o["a"])({},this.listQuery),{},{flowType:this.type,formType:this.formType});Object(M["i"])(t).then((function(t){e.list=t.data.list,e.total=t.data.pagination.total,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},openDialog:function(){this.disabled||(this.checked=this.value,this.checkedRow={id:this.value,fullName:this.title},this.visible=!0,this.reset())},reset:function(){this.listQuery.keyword="",this.search()},search:function(){this.listQuery.currentPage=1,this.listQuery.pageSize=20,this.initData()},clear:function(){this.checked="",this.checkedRow={},this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow)},select:function(){this.checked&&(this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow),this.visible=!1)},rowClick:function(e){this.checked=e.id,this.checkedRow=e}}}),oe=le,ne=(a("5b08"),Object(T["a"])(oe,ae,ie,!1,null,"5c3bf12f",null)),se=ne.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center formula-dialog",attrs:{title:"设置依次审批顺序",visible:e.visible,"append-to-body":"",width:"400px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"approvers-sort-body"},[a("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"list"},[a("draggable",{attrs:{list:e.list,animation:300,group:"selectItem",handle:".option-drag",itemKey:"id"}},e._l(e.list,(function(t){return a("div",{key:t.id,staticClass:"column-item"},[a("div",{staticClass:"selected-item selected-item-user"},[a("div",{staticClass:"selected-item-main"},[a("el-avatar",{staticClass:"selected-item-headIcon",attrs:{size:36,src:e.define.comUrl+t.headIcon}}),a("div",{staticClass:"selected-item-text"},[a("p",{staticClass:"name"},[e._v(e._s(t.fullName))]),a("p",{staticClass:"organize",attrs:{title:t.organize}},[e._v(e._s(t.organize))])]),a("div",{staticClass:"option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})])],1)])])})),0)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSubmit()}}},[e._v(e._s(e.$t("common.confirmButton"))+"\n    ")])],1)])},ce=[],de=a("b3f4"),ue=a("1980"),pe=a.n(ue),fe={name:"ApproversSortDialog",components:{draggable:pe.a},data:function(){return{visible:!1,loading:!1,list:[]}},methods:{init:function(e){var t=this;console.log(e),this.visible=!0,e.ids&&e.ids.length&&(this.loading=!0,this.list=[],Object(de["m"])(e.ids).then((function(e){t.list=e.data.list||[],t.loading=!1})))},handleSubmit:function(){var e=this.list.map((function(e){return e.id+"--user"}));this.$emit("confirm",e),this.visible=!1}}},me=fe,_e=(a("3c80"),Object(T["a"])(me,re,ce,!1,null,"0a194270",null)),he=_e.exports,ve=function(e){return["billRule","createUser","createTime","modifyTime","modifyUser","currPosition","currOrganize","table"].includes(e)},be=function(e){if(!e.__config__||!e.__config__.jnpfKey)return"";var t=e.__config__.jnpfKey;return["inputNumber","datePicker","rate","slider"].includes(t)?"number":["checkbox","uploadFile","uploadImg","cascader","organizeSelect","areaSelect"].includes(t)||["select","depSelect","posSelect","userSelect","usersSelect","treeSelect","roleSelect","groupSelect"].includes(t)&&e.multiple?"array":""},ge={errorRule:1,errorRuleUser:[],formFieldType:1,initiateType:6,managerLevel:1,departmentLevel:1,formField:"",nodeId:"",getUserUrl:"",initiator:[],flowId:"",flowName:"",assignList:[],prevNodeList:[],launchMsgConfig:{on:3,msgId:"",msgName:"",templateJson:[]},isAsync:!1,autoSubmit:!1},ye={extraRule:1,extraCopyRule:1,hasAgreeRule:!1,agreeRules:[],formFieldType:1,approvers:[],assigneeType:6,userType:"role",formOperates:[],circulateRole:[],circulateUser:[],isFormFieldCopy:!1,copyFormFieldType:1,copyFormField:"",isCustomCopy:!1,isInitiatorCopy:!1,progress:"50",rejectType:1,rejectStep:"0",description:"",managerLevel:1,departmentLevel:1,counterSignConfig:{auditType:1,auditRatio:100,auditNum:1,rejectType:0,rejectRatio:10,rejectNum:1},formField:"",nodeId:"",getUserUrl:"",counterSign:0,noApproverHandler:!0,hasFreeApproverBtn:!1,hasFreeApproverBtnText:"加 签",hasSaveBtn:!1,saveBtnText:"暂 存",hasAuditBtn:!0,auditBtnText:"通 过",hasRejectBtn:!0,rejectBtnText:"退 回",hasRevokeBtn:!0,revokeBtnText:"撤 回",hasTransferBtn:!0,transferBtnText:"转 审",hasCancelBtn:!1,cancelBtnText:"驳 回",hasPrintBtn:!1,printBtnText:"打 印",printId:"",hasSign:!1,hasOpinion:!0,formId:"",formName:"",prevNodeList:[],assignList:[],funcConfigRule:0,approversSortList:[],timeLimitConfig:{on:2,nodeLimit:0,duringDeal:24,formField:""},overTimeConfig:{on:2,firstOver:0,overTimeDuring:2,overNotice:!1,overAutoApprove:!1,overAutoApproveTime:5,overEvent:!1,overEventTime:5},noticeConfig:{on:2,firstOver:1,overTimeDuring:2,overNotice:!1,overEvent:!1,overEventTime:5},overTimeFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},noticeFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},overTimeMsgConfig:{on:2,msgId:"",msgName:"",templateJson:[]},noticeMsgConfig:{on:2,msgId:"",msgName:"",templateJson:[]},approveMsgConfig:{on:2,msgId:"",msgName:"",templateJson:[]},rejectMsgConfig:{on:2,msgId:"",msgName:"",templateJson:[]},copyMsgConfig:{on:2,msgId:"",msgName:"",templateJson:[]},approveFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},rejectFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]},recallFuncConfig:{on:!1,interfaceId:"",interfaceName:"",templateJson:[]}},De=[{nodeId:"0",properties:{title:"流程发起"}},{nodeId:"1",properties:{title:"上级审批节点"}}],we=[{label:"指定成员",value:6},{label:"发起者本人",value:3},{label:"发起者主管",value:1},{label:"部门主管",value:2},{label:"表单变量",value:4},{label:"流程环节",value:5},{label:"接口服务",value:9},{label:"候选人员",value:7}],xe=[{value:1,label:"自定义"},{value:0,label:"关闭"}],Ce=[{value:0,label:"接收时间"},{value:1,label:"发起时间"},{value:2,label:"表单变量"}],ke=[{value:1,label:"无审批人范围"},{value:6,label:"同一公司"},{value:2,label:"同一部门"},{value:3,label:"同一岗位"},{value:4,label:"发起人上级"},{value:5,label:"发起人下属"}],Te=[{value:2,label:"同步发起配置"}].concat(xe),Fe=[{value:3,label:"默认"}].concat(xe),Se=[{value:2,label:"同步发起配置"}].concat(Object(n["a"])(Fe)),Ne=[{__config__:{label:"流程ID",required:!0},__vModel__:"@flowId"},{__config__:{label:"任务ID",required:!0},__vModel__:"@taskId"},{__config__:{label:"节点ID",required:!0},__vModel__:"@taskNodeId"},{__config__:{label:"流程名称",required:!0},__vModel__:"@flowFullName"},{__config__:{label:"任务标题",required:!0},__vModel__:"@taskFullName"},{__config__:{label:"发起用户ID",required:!0},__vModel__:"@launchUserId"},{__config__:{label:"发起用户名",required:!0},__vModel__:"@launchUserName"},{__config__:{label:"当前操作用户ID",required:!0},__vModel__:"@flowOperatorUserId"},{__config__:{label:"当前操作用户名",required:!0},__vModel__:"@flowOperatorUserName"}],Le=[{id:1,fullName:"按百分比"},{id:2,fullName:"按人数"}],Oe=[{id:0,fullName:"无"}].concat(Le),$e={props:["value","processData","flowType","formInfo"],components:{OrgSelect:A["a"],MsgDialog:P["a"],InterfaceDialog:J["a"],FormulaDialog:H,FlowDialog:ee,Detail:te["a"],FlowFormDialog:se,ApproversSortDialog:he},data:function(){return{parameterSource:[{value:1,label:"字段"},{value:2,label:"自定义"},{value:3,label:"为空"}],temporaryContent:"",visible:!1,activeName:"config",showingPCons:[],pconditions:[],properties:{title:""},initiator:[],priorityLength:0,startForm:JSON.parse(JSON.stringify(V["a"].defaultStartForm)),ruleVisible:!1,subFlowForm:JSON.parse(JSON.stringify(ge)),approverForm:JSON.parse(JSON.stringify(ye)),initiateTypeOptions:we,assigneeTypeOptions:we,noticeOptions:xe,nodeNoticeOptions:Te,noticeOptionsData:Fe,nodeNoticeOptionsData:Se,systemFieldOptions:Ne,overTimeOptions:Ce,extraRuleOptions:ke,auditTypeOptions:Le,rejectTypeOptions:Oe,realNodeList:[],progressOptions:["10","20","30","40","50","60","70","80","90"],symbolOptions:[{label:"大于等于",value:">="},{label:"大于",value:">"},{label:"等于",value:"=="},{label:"小于等于",value:"<="},{label:"小于",value:"<"},{label:"不等于",value:"<>"},{label:"包含",value:"like"},{label:"不包含",value:"notLike"}],logicOptions:[{label:"and",value:"and"},{label:"or",value:"or"}],conditionTypeOptions:[{label:"字段",value:1},{label:"公式",value:3}],conditionTypeOptions1:[{label:"字段",value:1},{label:"自定义",value:2}],assignList:[],printTplList:[],childFieldOptions:[],nodeOptions:[],formulaVisible:!1,activeItem:{},viewVisible:!1,formFieldList:[],approverTransmitRuleVisible:!1,prevNodeList:[],isPrevNodeWithSubForm:!1,formOperatesList:[],indeterminateReadFlag:!1,readAllChecked:!1,indeterminateWriteFlag:!1,writeAllChecked:!1,requiredAllChecked:!1,indeterminateRequiredFlag:!1,oldFormId:"",registerApproversSortVisible:!1,beforeNodeOptions:[]}},computed:{notUseConNum:function(){return this.pconditions.length-this.showingPCons.length+1},formFieldsOptions:function(){return this.formFieldList.filter((function(e){return"table"!==e.__config__.jnpfKey}))},usedFormItems:function(){return this.formFieldsOptions.filter((function(e){return e.__vModel__.indexOf("-")<0}))},funcOptions:function(){var e=[].concat(Ne,Object(n["a"])(this.formFieldsOptions));return e},funcRequiredOptions:function(){return this.formFieldsOptions.filter((function(e){return e.__config__&&e.__config__.required}))},rejectStepOptions:function(){var e=[],t=[{nodeId:"2",properties:{title:"自选审批节点"}}];return e=[].concat(De,t,Object(n["a"])(this.realNodeList)),2==this.approverForm.rejectType&&(e=e.filter((function(e){return 1!=e.nodeId}))),e},getCanSetApproversSort:function(){return 6===this.approverForm.assigneeType&&this.approverForm.approvers.length&&this.approverForm.approvers.every((function(e){return-1!==e.indexOf("--user")}))&&2==this.approverForm.counterSign}},methods:{onSwerveNodeChange:function(e){if(e){var t=this.beforeNodeOptions.filter((function(t){return t.id==e}))[0];this.properties.swerveLabel=t.fullName}},onSignNumberChange:function(e,t){var a=this;e||this.$nextTick((function(){a.$set(a.approverForm.counterSignConfig,t,1)}))},updateApproversSortList:function(e){this.approverForm.approversSortList=e},openApproversSortListModal:function(){var e=this;this.registerApproversSortVisible=!0,this.approversSort,this.$nextTick((function(){e.$refs.approversSort.init({ids:e.approverForm.approversSortList})}))},onApproversChange:function(e){var t=this;if(console.log(e),6!=this.approverForm.assigneeType||!e||!e.length||!e.every((function(e){return-1!==e.indexOf("--user")})))return this.approverForm.approversSortList=[];if(!this.approverForm.approversSortList.length)return this.approverForm.approversSortList=e;var a=this.approverForm.approversSortList.filter((function(t){return-1!==e.indexOf(t)})),i=e.filter((function(e){return-1===t.approverForm.approversSortList.indexOf(e)}));this.approverForm.approversSortList=[].concat(Object(n["a"])(a),Object(n["a"])(i))},handleCheckedCitiesChange:function(e,t){var a=this.formOperatesList.length,i=this.formOperatesList.filter((function(e){return!e.requiredDisabled})).length,l=0,o=0,n=0;this.formOperatesList.forEach((function(e){e.read&&1==t&&l++,e.write&&2==t&&o++,e.required&&3==t&&n++})),1==t&&(this.readAllChecked=l===a),2==t&&(this.writeAllChecked=o===a),3==t&&(this.requiredAllChecked=n===i),1==t&&(this.indeterminateReadFlag=l>0&&l<a),2==t&&(this.indeterminateWriteFlag=o>0&&o<a),3==t&&(this.indeterminateRequiredFlag=n>0&&n<i)},updateReadAllSelected:function(e,t){1==t&&(this.indeterminateReadFlag=!1),2==t&&(this.indeterminateWriteFlag=!1),3==t&&(this.indeterminateRequiredFlag=!1),this.formOperatesList.forEach((function(a){1==t&&(a.read=e),2==t&&(a.write=e),3!=t||a.requiredDisabled||(a.required=e)}))},onChangeRelationField:function(e,t,a){var i=this[t][a].templateJson[e];i.relationField&&(i.relationField=void 0),this.$set(this[t][a].templateJson,e,i)},refreshPrintOptions:function(){var e=this;Object(I["k"])(1).then((function(t){var a=t.data.list,i=a.filter((function(e){return e.children&&e.children.length}));e.printTplList=i.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{hasChildren:!0})}))})).catch((function(e){reject(e)}))},open:function(e){window.open(e,"_blank")},openPrint:function(){var e=this.$router.resolve({path:"/system/printDev?open=true"});this.open(e.href)},handleSelect:function(e){this.temporaryContent+="{"+e.id+"}",this.startForm.titleContent=this.temporaryContent},querySearch:function(e,t){var a=[{id:"@flowFullName",value:"@flowFullName(流程名称)"},{id:"@flowFullCode",value:"@flowFullCode(流程编码)"},{id:"@launchUserName",value:"@launchUserName(发起用户名)"},{id:"@launchTime",value:"@launchTime(发起时间)"}],i=[];i=this.usedFormItems.filter((function(e){return"input"===e.__config__.jnpfKey||"textarea"===e.__config__.jnpfKey||"inputNumber"===e.__config__.jnpfKey}));var l=i.map((function(e){return{id:e.__vModel__,value:e.__vModel__+"("+e.__config__.label+")"}}));t([].concat(a,Object(n["a"])(l)))},getFormOperates:function(){var e=[];this.isApproverNode()&&(e=this.approverForm.formOperates),this.isStartNode()&&(e=this.startForm.formOperates),this.formOperatesList=e;var t=this.formOperatesList.filter((function(e){return!e.requiredDisabled})).length,a=0,i=0,l=0;return this.formOperatesList.length?(this.formOperatesList.forEach((function(e){e.read&&a++,e.write&&i++,e.required&&l++})),this.readAllChecked=a===this.formOperatesList.length,this.writeAllChecked=i===this.formOperatesList.length,this.requiredAllChecked=l===t,this.indeterminateReadFlag=a>0&&a<this.formOperatesList.length,this.indeterminateWriteFlag=i>0&&i<this.formOperatesList.length,this.indeterminateRequiredFlag=l>0&&l<t,e):e},resetOrgColl:function(){this.approverForm.approvers=[],this.subFlowForm.initiator=[],this.approverForm.approversSortList=[]},onOrgChange:function(e,t){},timeRangeLabel:function(e){var t=["fc-time-duration","fc-date-duration"].findIndex((function(t){return t===e.tag}));return t>-1?"时长"+["(小时)","(天)"][t]:e.label},getAssignTypeLabel:function(){var e=this,t=this.assigneeTypeOptions.find((function(t){return t.value===e.approverForm.assigneeType}));return t?t.label:""},changeAllFormOperate:function(e){var t=this.isStartNode()?this.startForm:this.approverForm;t.formOperates.forEach((function(t){return t.formOperate=e}))},couldShowIt:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return a.includes(e.tag)&&this.showingPCons.includes(e.formId)},initFormOperates:function(e,t,a){var i=e.properties&&e.properties.formOperates||[],l=[],o=function(t){var a=i.filter((function(e){return e.id===t}));return a.length?a[0].write:c["a"].isStartNode(e)},n=function(e){var t=i.filter((function(t){return t.id===e}));return!t.length||t[0].read},s=function(e){var t=i.filter((function(t){return t.id===e}));return!!t.length&&t[0].required};if(!i.length||t)for(var r=0;r<this.formFieldList.length;r++){var d=this.formFieldList[r];l.push({id:d.__vModel__,name:d.__config__.label,required:a?d.__config__.required||s(d.__vModel__):d.__config__.required,requiredDisabled:ve(d.__config__.jnpfKey)||d.__config__.required,jnpfKey:d.__config__.jnpfKey,dataType:be(d),read:!a||n(d.__vModel__),write:a?o(d.__vModel__):c["a"].isStartNode(e)})}else l=i;return l},initCopyNode:function(){this.properties=this.value.properties},initStartNodeData:function(){this.initInitiator()},copyNodeConfirm:function(){this.$emit("confirm",this.properties,this.getOrgSelectLabel("copy")||"发起人自选"),this.visible=!1},conditionNodeConfirm:function(){if(this.exist()){if(1==this.properties.conditionType&&!this.properties.swerveNode)return this.$message.error("请设置转向节点");this.properties.conditions=this.pconditions;for(var e="",t=0;t<this.properties.conditions.length;t++){var a=this.properties.conditions[t];e+=1==this.properties.conditions.length?"":(0==t?"":" ".concat(this.properties.matchLogic," "))+"( ";for(var i=0;i<a.groups.length;i++){var l=a.groups[i],o=0==i?"":" ".concat(a.logic," "),n="[ ".concat(l.fieldName," ").concat(l.symbolName,"\n        ").concat(l.fieldLabel?l.fieldLabel:l.fieldValue||0===l.fieldValue?l.fieldValue:""," ]");e+=o+n}e+=1==this.properties.conditions.length?"":" )"}1==this.properties.conditionType&&(e+=" 转向"+this.properties.swerveLabel),this.$emit("confirm",this.properties,e||"请设置条件"),this.visible=!1}},getOrgSelectLabel:function(e){return this.$refs[e+"-org"]&&this.$refs[e+"-org"]["selectedLabels"]},startNodeConfirm:function(){if(2!=this.startForm.errorRule||this.startForm.errorRuleUser.length){if(this.startForm.hasPrintBtn&&!this.startForm.printId)return this.$message.warning("请选择打印模板"),this.value;var e={title:this.properties.title};Object.assign(this.properties,this.startForm,e),this.properties.initiator=this.initiator;var t="",a=this.getOrgSelectLabel("start-user");a?t+=(t&&a?",":"")+a:t="所有人",this.$emit("confirm",this.properties,t),this.visible=!1}else this.$message({message:"请选择异常处理人",type:"error"})},timerNodeConfirm:function(){var e="",t=this.properties,a=t.day,i=t.hour,l=t.minute,o=t.second;e=a||i||l||o?"将于".concat(a?a+"天":"").concat(i?i+"小时":"").concat(l?l+"分钟":"").concat(o?o+"秒":"","后流转"):"请设置时间",this.$emit("confirm",this.properties,e),this.visible=!1},subFlowNodeConfirm:function(){var e=this;if(this.properties.title){var t="";if(6===this.subFlowForm.initiateType){if(!this.subFlowForm.initiator.length)return void this.$message({message:"请设置发起人",type:"error"});var a=this.getOrgSelectLabel("subFlow-user");t+=(t&&a?",":"")+a}else t=this.initiateTypeOptions.find((function(t){return t.value===e.subFlowForm.initiateType})).label;if(4!=this.subFlowForm.initiateType||this.subFlowForm.formField)if(5!=this.subFlowForm.initiateType||this.subFlowForm.nodeId)if(9!=this.subFlowForm.initiateType||this.subFlowForm.getUserUrl)if(this.subFlowForm.flowId)if(2!=this.subFlowForm.errorRule||this.subFlowForm.errorRuleUser.length){var i={title:this.properties.title};Object.assign(this.properties,this.subFlowForm,i),this.$emit("confirm",this.properties,t||"请设置发起人"),this.visible=!1}else this.$message({message:"请选择异常处理人",type:"error"});else this.$message({message:"请选择子流程表单",type:"error"});else this.$message({message:"请输入接口路径",type:"error"});else this.$message({message:"请选择节点",type:"error"});else this.$message({message:"请选择表单字段",type:"error"})}else this.$message({message:"请输入子流程名称",type:"error"})},approverNodeConfirm:function(){if(this.properties.title){if(this.approverForm.hasPrintBtn&&!this.approverForm.printId)return this.$message.warning("请选择打印模板"),this.value;var e=this.approverForm.assigneeType,t="";if(6==e){if(!this.approverForm.approvers.length)return void this.$message({message:"请设置审批人",type:"error"});var a=this.getOrgSelectLabel("approver-user");t+=(t&&a?",":"")+a}else t=this.assigneeTypeOptions.find((function(t){return t.value===e})).label;if(4!=e||this.approverForm.formField)if(5!=e||this.approverForm.nodeId)if(9!=e||this.approverForm.getUserUrl)if(!this.approverForm.hasAgreeRule||this.approverForm.agreeRules.length){var i={title:this.properties.title};Object.assign(this.properties,this.approverForm,i),this.$emit("confirm",this.properties,t||"请设置审批人"),this.visible=!1}else this.$message({message:"请选择同意规则配置",type:"error"});else this.$message({message:"请输入接口路径",type:"error"});else this.$message({message:"请选择节点",type:"error"});else this.$message({message:"请选择表单字段",type:"error"})}else this.$message({message:"请输入节点名称",type:"error"})},confirm:function(){this.isCopyNode()&&this.copyNodeConfirm(),this.isStartNode()&&this.startNodeConfirm(),this.isTimerNode()&&this.timerNodeConfirm(),this.isSubFlowNode()&&this.subFlowNodeConfirm(),this.isApproverNode()&&this.approverNodeConfirm(),this.isConditionNode()&&this.conditionNodeConfirm()},cancel:function(){var e=this;setTimeout((function(){e.$emit("cancel"),e.visible=!1}),0)},onDelCondition:function(e){this.pconditions.splice(e,1)},getPrevData:function(){return c["a"].getPreviousNode(this.value.prevId,this.processData)},getPriorityLength:function(){this.priorityLength=this.getPrevData().conditionNodes.length},isConditionNode:function(){return!!this.value&&c["a"].isConditionNode(this.value)},isApproverNode:function(){return!!this.value&&c["a"].isApproverNode(this.value)},isStartNode:function(){return!!this.value&&c["a"].isStartNode(this.value)},isCopyNode:function(){return!!this.value&&c["a"].isCopyNode(this.value)},isTimerNode:function(){return!!this.value&&c["a"].isTimerNode(this.value)},isSubFlowNode:function(){return!!this.value&&c["a"].isSubFlowNode(this.value)},initInitiator:function(){this.initiator=this.value.properties&&this.value.properties.initiator;var e=JSON.parse(JSON.stringify(this.value.properties));if(Object.assign(this.startForm,e),this.oldFormId=this.startForm.formId,this.oldFormId){var t=[];this.startForm.allFormMap&&this.startForm.allFormMap["form_"+this.oldFormId]&&(t=this.startForm.allFormMap["form_"+this.oldFormId]||[]),this.formFieldList=t,this.getFormOperates()}},initApproverNodeData:function(){this.activeName="config",this.isPrevNodeWithSubForm=!1;var e=JSON.parse(JSON.stringify(this.value.properties)),t=[],a=e.formId||this.processData.properties.formId;this.oldFormId=a,a&&this.processData.properties.allFormMap&&this.processData.properties.allFormMap["form_"+a]&&(t=this.processData.properties.allFormMap["form_"+a]||[]),this.formFieldList=t,this.approverForm.formOperates=this.initFormOperates(this.value),Object.assign(this.approverForm,e),this.getNodeOption(),this.getPrevNodeOption(),this.approverForm.approveMsgConfig.on="number"===typeof this.approverForm.approveMsgConfig.on?this.approverForm.approveMsgConfig.on:2,this.approverForm.rejectMsgConfig.on="number"===typeof this.approverForm.rejectMsgConfig.on?this.approverForm.rejectMsgConfig.on:2,this.getFormOperates()},initSubFlowData:function(){this.getNodeOption(),this.getPrevNodeOption();var e=JSON.parse(JSON.stringify(this.value.properties));Object.assign(this.subFlowForm,e);var t=this.prevNodeList[0],a=[],i=t.properties.formId||this.processData.properties.formId;i&&this.processData.properties.allFormMap&&this.processData.properties.allFormMap["form_"+i]&&(a=this.processData.properties.allFormMap["form_"+i]||[]),this.formFieldList=a,this.subFlowForm.launchMsgConfig.on="number"===typeof this.subFlowForm.launchMsgConfig.on?this.subFlowForm.launchMsgConfig.on:0},openApproverTransmitRuleBox:function(){var e=this.approverForm.assignList?JSON.parse(JSON.stringify(this.approverForm.assignList)):[];this.getRealAssignList(e),this.approverTransmitRuleVisible=!0},getRealAssignList:function(e){var t=this,a=this.prevNodeList.map((function(e){var a=[],i=e.properties.formId||t.processData.properties.formId;return i&&t.processData.properties.allFormMap&&t.processData.properties.allFormMap["form_"+i]&&(a=t.processData.properties.allFormMap["form_"+i]||[]),a=a.filter((function(e){return"table"!==e.__config__.jnpfKey})),{nodeId:e.nodeId,title:e.properties.title,formFieldList:a,ruleList:[]}}));if(e.length){for(var i=[],l=0;l<e.length;l++){var o=e[l];e:for(var s=0;s<a.length;s++)if(o.nodeId===a[s].nodeId){var r={nodeId:o.nodeId,title:a[s].title,formFieldList:a[s].formFieldList,ruleList:o.ruleList};i.push(r);break e}}var c=a.filter((function(t){return!e.some((function(e){return e.nodeId===t.nodeId}))}));this.assignList=[].concat(i,Object(n["a"])(c))}else this.assignList=a},addTransmitRule:function(e){this.assignList[e].ruleList.push({parentField:"",childField:"",childFieldOptions:[]})},delTransmitRule:function(e,t){this.assignList[e].ruleList.splice(t,1)},saveApproverTransmitRule:function(){for(var e=!0,t=0;t<this.assignList.length;t++)for(var a=this.assignList[t],i=a.ruleList,l=0;l<i.length;l++){if(!i[l].parentField){e=!1,this.$message({message:"请选择".concat(a.title,"的上节点字段"),type:"error"});break}if(!i[l].childField){e=!1,this.$message({message:"请选择".concat(a.title,"的本节点字段"),type:"error"});break}}e&&(this.approverForm.assignList=this.assignList,this.approverTransmitRuleVisible=!1,this.assignList=[])},openRuleBox:function(){var e=this;this.subFlowForm.flowId?Object(j["t"])(this.subFlowForm.flowId).then((function(t){var a=t.data,i=a.formType,l=void 0===i?1:i,o=a.propertyJson,n={},s=[];o&&(n=JSON.parse(o)),s=1==l?e.transformFormJson(n):n.fields,e.childFieldOptions=e.transformFieldList(s).filter((function(e){return"table"!==e.__config__.jnpfKey}));var r=e.subFlowForm.assignList?JSON.parse(JSON.stringify(e.subFlowForm.assignList)):[];e.getRealAssignList(r),e.ruleVisible=!0})):this.$message({message:"请选择子流程表单",type:"error"})},saveRule:function(){for(var e=!0,t=0;t<this.assignList.length;t++)for(var a=this.assignList[t],i=a.ruleList,l=0;l<i.length;l++){if(!i[l].parentField){e=!1,this.$message({message:"请选择".concat(a.title,"的父流程字段"),type:"error"});break}if(!i[l].childField){e=!1,this.$message({message:"请选择".concat(a.title,"的子流程字段"),type:"error"});break}}e&&(this.subFlowForm.assignList=this.assignList,this.ruleVisible=!1,this.assignList=[])},getPrevNodeOption:function(){var e=this,t=c["a"].getPreviousNode(this.value.prevId,this.processData),a=JSON.parse(JSON.stringify(t));delete a.childNode;var i=[],l=function t(a){if(a.conditionNodes){var l=a.conditionNodes.some((function(t){return t.nodeId===e.value.nodeId}));if(l)return i.push(a)}if(a.childNode)t(a.childNode);else if(a.conditionNodes&&!a.childNode){var o,n=Object($["a"])(a.conditionNodes);try{for(n.s();!(o=n.n()).done;){var s=o.value;t(s)}}catch(r){n.e(r)}finally{n.f()}}else i.push(a)};l(a),this.prevNodeList=i,this.getPrevNodeRealList()},getPrevNodeRealList:function(){var e=this,t=function t(a){var i=function(i){if(["condition","subFlow","timer"].includes(a[i].type)){"subFlow"===a[i].type&&(e.isPrevNodeWithSubForm=!0);var l=c["a"].getPreviousNode(a[i].prevId,e.processData),o=JSON.parse(JSON.stringify(l));delete o.childNode;var n=[],s=function e(t){if(t.conditionNodes){var l=t.conditionNodes.some((function(e){return e.nodeId===a[i].nodeId}));if(l)return n.push(t)}if(t.childNode)e(t.childNode);else if(t.conditionNodes&&!t.childNode){var o,s=Object($["a"])(t.conditionNodes);try{for(s.s();!(o=s.n()).done;){var r=o.value;e(r)}}catch(c){s.e(c)}finally{s.f()}}else n.push(t)};return s(o),a.splice.apply(a,[i,1].concat(n)),t(a),1}};e:for(var l=0;l<a.length;l++)if(i(l))break e};t(this.prevNodeList),this.prevNodeList=this.unique(this.prevNodeList,"nodeId")},unique:function(e,t){var a=new Map;return e.filter((function(e){return!a.has(e[t])&&a.set(e[t],1)}))},getNodeOption:function(){var e=[],t=this,a=function t(a){Array.isArray(a)&&a.forEach((function(e){return t(e)})),"approver"===a.type&&e.push(a),a.conditionNodes&&Array.isArray(a.conditionNodes)&&t(a.conditionNodes),a.childNode&&t(a.childNode)};a(this.processData);for(var i=[],l=0;l<e.length;l++){if(e[l].nodeId===t.value.nodeId)break;i.push(e[l])}this.beforeNodeOptions=i.map((function(e){return{id:e.nodeId,fullName:e.properties.title}}));for(var o=[],n=0;n<e.length;n++){if(e[n].nodeId===t.value.nodeId)break;o.push(e[n])}this.realNodeList=o;var s=e.filter((function(e){return e.nodeId!==t.value.nodeId}));this.nodeOptions=s},getSwerveNodeOption:function(){var e=[],t=function t(a){Array.isArray(a)&&a.forEach((function(e){return t(e)})),"approver"!==a.type&&"start"!==a.type||e.push(a),a.conditionNodes&&Array.isArray(a.conditionNodes)&&t(a.conditionNodes),a.childNode&&t(a.childNode)};t(this.processData);for(var a=this.prevNodeList[0],i=[],l=0;l<e.length;l++){if(e[l].nodeId===a.nodeId)break;i.push(e[l])}this.beforeNodeOptions=i.map((function(e){return{id:e.nodeId,fullName:e.properties.title}}))},initConditionNodeData:function(){this.getConditionNodeFieldList(),this.getSwerveNodeOption();for(var e=this.value.properties&&this.value.properties.conditions,t=0;t<e.length;t++)for(var a=0;a<this.usedFormItems.length;a++)e[t].__vModel__===this.usedFormItems[a].__vModel__&&(e[t]=Object(o["a"])(Object(o["a"])({},e[t]),this.usedFormItems[a]));this.pconditions=JSON.parse(JSON.stringify(e)),this.pconditions.matchLogic=this.properties.matchLogic||"and"},addCondition:function(){var e={logic:"&&",groups:[{fieldValue:"",props:{},fieldType:1,fieldValueType:2,fieldLabel:"",dataOptions:[],dataLabel:"",dataValue:"",field:"",symbol:"",jnpfKey:""}]};this.pconditions.push(e)},getConditionNodeFieldList:function(){if(this.getPrevNodeOption(),this.prevNodeList.length){var e=this.prevNodeList[0],t=[],a=e.properties.formId||this.processData.properties.formId;a&&this.processData.properties.allFormMap&&this.processData.properties.allFormMap["form_"+a]&&(t=this.processData.properties.allFormMap["form_"+a]||[]),this.formFieldList=t.filter((function(e){return"table"!==e.__config__.jnpfKey}))}else this.formFieldList=[]},fieldNameChange:function(e,t,a,i){var l=this.usedFormItems.filter((function(t){return t.__vModel__==e}))[0];t.fieldName=l.__config__.label,t.jnpfKey=l.__config__.jnpfKey,t=Object(o["a"])(Object(o["a"])({},t),l),t.fieldValue=void 0,t.fieldLabel="",t.fieldValueJnpfKey="",this.$set(this.pconditions[a].groups,i,t)},symbolChange:function(e,t){var a=this.symbolOptions.filter((function(t){return t.value==e}))[0];t.symbolName=a.label},logicChange:function(e,t){var a=this.logicOptions.filter((function(t){return t.value==e}))[0];t.logicName=a.label},fieldValueTypeChange:function(e){e.fieldValue="",e.fieldLabel="",e.fieldValueJnpfKey=""},fieldTypeChange:function(e){e.field="",e.fieldName="",e.jnpfKey="",e.fieldValue=""},fieldValueChange:function(e,t){var a=this.usedFormItems.filter((function(t){return t.__vModel__==e}))[0];t.fieldLabel=a.__config__.label,t.fieldValueJnpfKey=a.__config__.jnpfKey||""},exist:function(){for(var e=!0,t=0;t<this.pconditions.length;t++){var a=this.pconditions[t];if(!a.groups.length)return this.$message.warning("条件配置不能为空");for(var i=0;i<a.groups.length;i++){var l=a.groups[i];if(!l.field&&1==l.fieldType){this.$message({showClose:!0,message:"条件字段不能为空",type:"error",duration:1e3}),e=!1;break}if(!l.symbol){this.$message({showClose:!0,message:"比较不能为空",type:"error",duration:1e3}),e=!1;break}}}return e},getPrintTplList:function(){var e=this;this.$store.dispatch("base/getPrintFlowTree").then((function(t){var a=t.filter((function(e){return e.children&&e.children.length}));e.printTplList=a.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{hasChildren:!0})}))}))},onMsgChange:function(e,t,a){var i=Object(O["a"])(a,2),l=i[0],o=i[1];if(!l)return this[e][t].msgId="",this[e][t].msgName="",void(this[e][t].templateJson=[]);this[e][t].msgId!==l&&(this[e][t].msgId=l,this[e][t].msgName=o.fullName,this[e][t].templateJson=o.templateJson)},onFuncChange:function(e,t,a){var i=Object(O["a"])(a,2),l=i[0],n=i[1];if(!l)return this[e][t].interfaceId="",this[e][t].interfaceName="",void(this[e][t].templateJson=[]);this[e][t].interfaceId!==l&&(this[e][t].interfaceId=l,this[e][t].interfaceName=n.fullName,this[e][t].templateJson=n.templateJson.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{sourceType:1})})))},onRelationFieldChange:function(e,t){if(e){var a=this.funcOptions.filter((function(t){return e===t.__vModel__}));if(a.length){var i=a[0];this.$set(t,"isSubTable",!(!i.__config__||!i.__config__.isSubTable)&&i.__config__.isSubTable)}}},onSubFlowIdChange:function(e,t){if(!e)return this.subFlowForm.flowId="",void(this.subFlowForm.flowName="");this.subFlowForm.flowId!==e&&(this.subFlowForm.flowId=e,this.subFlowForm.flowName=t.fullName,this.subFlowForm.assignList=[])},addGroup:function(){var e={logic:"and",groups:[{fieldName:"",symbolName:"",fieldValue:void 0,fieldType:1,fieldValueType:2,fieldLabel:"",fieldValueJnpfKey:"",logicName:"并且",field:"",symbol:"",logic:"&&",jnpfKey:"",cellKey:+new Date}]};this.pconditions.push(e)},addItem:function(e){this.pconditions[e].groups.push({fieldName:"",symbolName:"",fieldValue:void 0,fieldType:1,fieldValueType:2,fieldLabel:"",fieldValueJnpfKey:"",logicName:"并且",field:"",symbol:"",logic:"&&",jnpfKey:"",cellKey:+new Date})},delGroup:function(e){this.pconditions.splice(e,1)},delItem:function(e,t){this.pconditions[e].groups.splice(t,1)},onConditionDateChange:function(e,t){if(!e)return t.fieldLabel="";var a=t.format||"yyyy-MM-dd HH:mm:ss";t.fieldLabel=this.jnpf.toDate(e,a)},onConditionListChange:function(e,t){if(!e||!e[1])return t.fieldLabel="";var a=e[1].map((function(e){return e.fullName}));t.fieldLabel=a.join("/")},onConditionObjChange:function(e,t){if(!e||!e[1])return t.fieldLabel="";t.fieldLabel=e[1].fullName||""},editFormula:function(e){var t=this;this.activeItem=e,this.$nextTick((function(){t.formulaVisible=!0}))},updateFormula:function(e){this.activeItem.field=e,this.activeItem.fieldName=e},goDetail:function(e){var t=this;this.viewVisible=!0,this.$nextTick((function(){t.$refs.View.init(e)}))},onStartFormIdChange:function(e,t){if(!e)return this.handleNull("startForm");var a=this.startForm.formId===e;this.startForm.formName=t.fullName,this.startForm.formId=e,this.getFormFieldList(e,"startForm",a)},onApproverFormIdChange:function(e,t){if(!e)return this.handleNull("approverForm");var a=this.startForm.formId===e;this.approverForm.formName=t.fullName,this.approverForm.formId=e,this.approverForm.assignList=[],this.getFormFieldList(e,"approverForm",a)},handleNull:function(e){this[e].formName="",this[e].formId="";var t=[];if("approverForm"===e){var a=this.processData.properties.formId;a&&this.processData.properties.allFormMap&&this.processData.properties.allFormMap["form_"+a]&&(t=this.processData.properties.allFormMap["form_"+a]||[])}this.formFieldList=t,this[e].formOperates=this.initFormOperates(this.value,!0),"startForm"===e&&this.updateAllNodeFormOperates(),this.updateAllFormMap("",e,t)},getFormFieldList:function(e,t,a){var i=this;Object(M["g"])(e).then((function(l){var o=l.data,n=o.formType,s=void 0===n?1:n,r=o.propertyJson,c={},d=[];r&&(c=JSON.parse(r)),d=1==s?i.transformFormJson(c):c.fields;var u=i.transformFieldList(d);i.formFieldList=u,i[t].formOperates=i.initFormOperates(i.value,!0,a),i.updateAllFormMap(e,t,u),"startForm"===t&&i.updateAllNodeFormOperates(a),i.getFormOperates()}))},updateAllFormMap:function(e,t,a){"startForm"===t?(this[t].allFormMap||(this[t].allFormMap={}),this.oldFormId&&!this.getHasSameFormId(this.oldFormId)&&delete this[t].allFormMap["form_"+this.oldFormId],e&&(this[t].allFormMap["form_"+e]=a)):(this.processData.properties.allFormMap||(this.processData.properties.allFormMap={}),this.oldFormId&&!this.getHasSameFormId(this.oldFormId)&&delete this.processData.properties.allFormMap["form_"+this.oldFormId],e&&(this.processData.properties.allFormMap["form_"+e]=a)),this.oldFormId=e},getHasSameFormId:function(e){var t=this;if(!e)return!1;var a=!1,i=function i(l){if(Array.isArray(l)&&l.forEach((function(e){return i(e)})),("approver"===l.type||"start"===l.type)&&l.nodeId!==t.value.nodeId&&l.properties.formId===e)return a=!0;l.conditionNodes&&Array.isArray(l.conditionNodes)&&i(l.conditionNodes),l.childNode&&i(l.childNode)};return i(this.processData),a},transformFormJson:function(e){var t=e.map((function(e){return{__config__:{label:e.filedName,jnpfKey:e.jnpfKey||"",required:e.required||!1},__vModel__:e.filedId,multiple:e.multiple||!1}}));return t},transformFieldList:function(e){var t=[],a=function e(a,i){if(a){if(a.__vModel__){var l=i&&i.__config__&&"table"===i.__config__.jnpfKey,n=Object(o["a"])(Object(o["a"])({},a),{},{id:l?i.__vModel__+"-"+a.__vModel__:a.__vModel__,__vModel__:l?i.__vModel__+"-"+a.__vModel__:a.__vModel__,fullName:l?i.__config__.label+"-"+a.__config__.label:a.__config__.label,__config__:{label:l?i.__config__.label+"-"+a.__config__.label:a.__config__.label,jnpfKey:a.__config__.jnpfKey,required:a.__config__.required,isSubTable:a.__config__.isSubTable}});delete n.on,delete n.style,delete n.options,delete n.props,delete n.templateJson,delete n.columnOptions,delete n.addTableConf,delete n.tableConf,t.push(n)}Array.isArray(a)&&a.forEach((function(t){return e(t,i)})),a.__config__&&a.__config__.children&&Array.isArray(a.__config__.children)&&e(a.__config__.children,a)}};return a(e),t},updateAllNodeFormOperates:function(e){var t=this,a=function a(i){Array.isArray(i)&&i.forEach((function(e){return a(e)})),"approver"!==i.type||i.properties.formId||(i.properties.formOperates=t.initFormOperates(i,!0,e)),i.conditionNodes&&Array.isArray(i.conditionNodes)&&a(i.conditionNodes),i.childNode&&a(i.childNode)};a(this.processData)},radioInput:function(e){this.approverForm.rejectStep="0"}},watch:{visible:function(e){if(!e)return this.approverForm=JSON.parse(JSON.stringify(ye)),this.subFlowForm=JSON.parse(JSON.stringify(ge)),void(this.startForm=JSON.parse(JSON.stringify(V["a"].defaultStartForm)));this.isStartNode()&&this.initStartNodeData(),this.isSubFlowNode()&&this.initSubFlowData(),this.isApproverNode()&&this.initApproverNodeData(),this.isConditionNode()&&this.initConditionNodeData(),this.getPrintTplList()},"startForm.titleContent":function(e){this.temporaryContent=e},value:function(e){e&&e.properties&&(this.visible=!0,this.properties=JSON.parse(JSON.stringify(e.properties)),this.properties&&c["a"].isConditionNode(e)&&this.getPriorityLength())}}},Ie=$e,je=(a("c4ff"),a("6ad7"),Object(T["a"])(Ie,N,L,!1,null,"5005c1d4",null)),Me=je.exports,Ve=a("fa72"),Ae=function(e){return["billRule","createUser","createTime","modifyTime","modifyUser","currPosition","currOrganize","table"].includes(e)},Pe=function(e){if(!e.__config__||!e.__config__.jnpfKey)return"";var t=e.__config__.jnpfKey;return["inputNumber","datePicker","rate","slider"].includes(t)?"number":["checkbox","uploadFile","uploadImg","cascader","organizeSelect","areaSelect"].includes(t)||["select","depSelect","posSelect","userSelect","usersSelect","treeSelect","roleSelect","groupSelect","popupSelect","popupTableSelect"].includes(t)&&e.multiple?"array":""},Je={name:"ProcessMain",props:["conf","flowType","verifyMode","formInfo"],data:function(){var e={};return e=this.conf,{data:e,scaleVal:100,step:5,updateId:0,activeData:null,isProcessCmp:!0}},methods:{updateFiled:function(e){var t=this,a=function e(a){Array.isArray(a)&&a.forEach((function(t){return e(t)})),"approver"!==a.type&&"start"!==a.type||t.initFormOperates(a),a.conditionNodes&&Array.isArray(a.conditionNodes)&&e(a.conditionNodes),a.childNode&&e(a.childNode)};a(e)},initFormOperates:function(e){var t=e.properties&&e.properties.formOperates||[],a=[],i=function(a){var i=t.filter((function(e){return e.id===a}));return i.length?i[0].write:c["a"].isStartNode(e)},l=function(e){var a=t.filter((function(t){return t.id===e}));return!a.length||a[0].read},o=function(e){var a=t.filter((function(t){return t.id===e}));return!!a.length&&a[0].required},n=function e(t,n){if(t){if(t.__vModel__){var s=n&&n.__config__&&"table"===n.__config__.jnpfKey,r=s?n.__vModel__+"-"+t.__vModel__:t.__vModel__;a.push({id:r,name:s?n.__config__.label+"-"+t.__config__.label:t.__config__.label,required:t.__config__.required||o(r),requiredDisabled:Ae(t.__config__.jnpfKey)||t.__config__.required,jnpfKey:t.__config__.jnpfKey,dataType:Pe(t),read:l(r),write:i(r)})}Array.isArray(t)&&t.forEach((function(t){return e(t,n)})),t.__config__&&t.__config__.children&&Array.isArray(t.__config__.children)&&e(t.__config__.children,t)}};n(Object(Ve["a"])()),e.properties.formOperates=a},eventReceiver:function(e){var t=e.event,a=e.args;"edit"!==t?(c["a"][t].apply(c["a"],Object(n["a"])(a)),this.forceUpdate()):this.activeData=a[0]},forceUpdate:function(){this.updateId=this.updateId+1},changeScale:function(e){if(this.scaleVal>=0&&this.scaleVal<=200){if(200===this.scaleVal&&this.scaleVal+e>200)return;if(0===this.scaleVal&&this.scaleVal+e<0)return;this.scaleVal+=e}},onPropEditConfirm:function(e,t){this.activeData.content=t||"请设置条件";var a=this.activeData.properties;this.activeData.properties=e,c["a"].isConditionNode(this.activeData)&&(e.priority!==a.priority&&c["a"].resortPrioByCNode(this.activeData,a.priority,this.data),c["a"].setDefaultCondition(this.activeData,this.data)),c["a"].isStartNode(this.activeData)&&this.$emit("startNodeChange",this.data),this.onClosePanel(),this.forceUpdate()},onClosePanel:function(){this.activeData=null},isFilledPCon:function(e){var t=!1,a=function(e,t){return e.childNode&&i(e.childNode,t)},i=function(i,l){if(!t&&i){if(Array.isArray(i.conditionNodes)){var o=i.conditionNodes.some((function(t){var a=t.properties.conditions||[];return Array.isArray(e)?a.some((function(t){return e.includes(t.formId)})):a.length>0}));o?l():i.conditionNodes.forEach((function(e){return a(e,l)}))}a(i,l)}};return i(this.data,(function(){return t=!0})),t}},render:function(e){return e("div",{class:"flow-container"},[e("div",{class:"scale-slider"},[e("i",{class:"btn  el-icon-minus",on:{click:this.changeScale.bind(this,-this.step)}}),e("span",{style:"font-size:14px;"},[this.scaleVal,"%"]),e("i",{class:"btn  el-icon-plus ",on:{click:this.changeScale.bind(this,this.step)}})]),e(S,{attrs:{verifyMode:this.verifyMode,data:this.data},key:this.updateId,on:{emits:this.eventReceiver},style:{transform:"scale(".concat(this.scaleVal/100,")")}}),e(Me,{attrs:{value:this.activeData,flowType:this.flowType||0,processData:this.data,formInfo:this.formInfo},on:{confirm:this.onPropEditConfirm,cancel:this.onClosePanel}})])}},Re=Je,Ke=(a("a93f"),Object(T["a"])(Re,w,x,!1,null,"7ee2c64a",null)),Be=Ke.exports,Ee=function(e){return["billRule","createUser","createTime","modifyTime","modifyUser","currPosition","currOrganize","table"].includes(e)},ze=function(e){if(!e.__config__||!e.__config__.jnpfKey)return"";var t=e.__config__.jnpfKey;return["inputNumber","datePicker","rate","slider"].includes(t)?"number":["checkbox","uploadFile","uploadImg","cascader","organizeSelect","areaSelect"].includes(t)||["select","depSelect","posSelect","userSelect","treeSelect","usersSelect","roleSelect","groupSelect","popupSelect","popupTableSelect"].includes(t)&&e.multiple?"array":""},qe={name:"Process",props:["tabName","conf","flowType","formInfo"],data:function(){return{activeConf:null,key:+new Date,loading:!1,verifyMode:!1,flowList:[],visible:!1,handleType:"",defaultData:{},formFieldList:{},dataForm:{fullName:"",id:"",flowId:""},dataRule:{fullName:[{required:!0,message:"请输入流程名称",trigger:"blur"}]},keyword:""}},components:{ProcessMain:Be,draggable:pe.a},created:function(){var e=this;this.$store.dispatch("base/getPositionList"),this.$store.dispatch("base/getRoleList"),this.$store.dispatch("generator/getDepTree"),this.$store.dispatch("generator/getGroupTree"),this.loading=!0,this.formInfo.onlineDev&&this.formInfo.onlineFormId?Object(M["g"])(this.formInfo.onlineFormId).then((function(t){var a=Object(c["b"])();a.properties.formName=t.data.fullName,a.properties.formId=t.data.id;var i=t.data.propertyJson,l={},o=[];i&&(l=JSON.parse(i)),o=l.fields,e.formFieldList=e.transformFieldList(o),a.properties.allFormMap||(a.properties.allFormMap={}),a.properties.allFormMap["form_"+t.data.id]=e.formFieldList,a.properties.formOperates=e.initFormOperates(a),e.defaultData=a,e.initData()})):(this.defaultData=Object(c["b"])(),this.initData())},computed:{getFlowList:function(){var e=this;return this.keyword?this.flowList.filter((function(t){return-1!==t.fullName.indexOf(e.keyword)})):this.flowList}},methods:{initData:function(){var e=this;if(Array.isArray(this.conf)&&null!==this.conf&&"[]"!==JSON.stringify(this.conf))this.flowList=this.conf,this.updateData();else{var t={id:"",flowId:this.jnpf.idGenerator(),fullName:this.formInfo.fullName,flowTemplateJson:JSON.parse(JSON.stringify(this.defaultData))};this.flowList=[t]}this.activeConf=this.flowList[0],this.$nextTick((function(){e.loading=!1}))},getData:function(){this.verifyMode=!0;for(var e=!0,t={},a=0;a<this.flowList.length;a++)if(e=c["a"].checkAllNode(this.flowList[a].flowTemplateJson),t=this.flowList[a],!e)break;return e?Promise.resolve({formData:this.flowList}):Promise.reject({target:2,msg:"请完善".concat(t.fullName,"的流程设计")})},addFlow:function(){var e=this;this.handleType="add",this.visible=!0,this.$nextTick((function(){e.$refs["dataForm"].resetFields();var t=JSON.parse(JSON.stringify(e.defaultData));if(e.flowList.length){var a=e.flowList[0].flowTemplateJson.properties;t.properties.formName=a.formName,t.properties.formId=a.formId;var i=a.allFormMap["form_"+a.formId]||[];t.properties.allFormMap["form_"+a.formId]=i,e.formFieldList=i,t.properties.formOperates=e.initFormOperates(t,!0)}e.dataForm={id:"",flowId:e.jnpf.idGenerator(),fullName:"",flowTemplateJson:t}}))},editFlow:function(e){var t=this;this.handleType="edit",this.visible=!0,this.$nextTick((function(){t.$refs["dataForm"].resetFields(),t.dataForm=JSON.parse(JSON.stringify(e))}))},delFlow:function(e,t){var a=this;return 1===this.flowList.length?this.$message.warning("最后一个流程不能删除"):t?this.$message.warning("流程已被使用，不能删除"):void this.$confirm("此操作将永久删除该流程，是否继续？","提示",{type:"warning"}).then((function(){a.flowList.splice(e,1),a.activeConf=a.flowList[a.flowList.length-1],a.key=+new Date})).catch((function(){}))},copyFlow:function(e){var t=this,a=JSON.parse(JSON.stringify(e));this.$confirm("您确定要复制该流程，是否继续？","提示",{type:"warning"}).then((function(){var e=t.jnpf.idGenerator(),i=a.fullName+e;i.length>50&&(i=i.substring(i.length-50));var l={id:"",flowId:e,fullName:i,flowTemplateJson:a.flowTemplateJson};t.flowList.push(l)})).catch((function(){}))},changeFlow:function(e){e.flowId!==this.activeConf.flowId&&(this.activeConf=e,this.key=+new Date)},dataFormSubmit:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){if("add"===e.handleType){var a=e.flowList.some((function(t){return t.fullName===e.dataForm.fullName}));if(a)return e.$message.warning("流程名称重复，请重新输入");e.flowList.push(JSON.parse(JSON.stringify(e.dataForm))),e.activeConf=e.flowList[e.flowList.length-1],e.key=+new Date}else{var i=e.flowList.some((function(t){return t.fullName===e.dataForm.fullName&&t.flowId!==e.dataForm.flowId}));if(i)return e.$message.warning("流程名称重复，请重新输入");for(var l=0;l<e.flowList.length;l++)if(e.dataForm.flowId===e.flowList[l].flowId){e.$set(e.flowList[l],"fullName",e.dataForm.fullName);break}}e.visible=!1}}))},transformFieldList:function(e){var t=[],a=function e(a,i){if(a){if(a.__vModel__){var l=i&&i.__config__&&"table"===i.__config__.jnpfKey,n=Object(o["a"])(Object(o["a"])({},a),{},{id:l?i.__vModel__+"-"+a.__vModel__:a.__vModel__,__vModel__:l?i.__vModel__+"-"+a.__vModel__:a.__vModel__,fullName:l?i.__config__.label+"-"+a.__config__.label:a.__config__.label,__config__:{label:l?i.__config__.label+"-"+a.__config__.label:a.__config__.label,jnpfKey:a.__config__.jnpfKey,required:a.__config__.required,isSubTable:a.__config__.isSubTable}});delete n.on,delete n.style,delete n.options,delete n.props,delete n.templateJson,delete n.columnOptions,delete n.addTableConf,delete n.tableConf,t.push(n)}Array.isArray(a)&&a.forEach((function(t){return e(t,i)})),a.__config__&&a.__config__.children&&Array.isArray(a.__config__.children)&&e(a.__config__.children,a)}};return a(e),t},initFormOperates:function(e,t,a){var i=e.properties&&e.properties.formOperates||[],l=[],o=function(t){var a=i.filter((function(e){return e.id===t}));return a.length?a[0].write:c["a"].isStartNode(e)},n=function(e){var t=i.filter((function(t){return t.id===e}));return!t.length||t[0].read},s=function(e){var t=i.filter((function(t){return t.id===e}));return!!t.length&&t[0].required};if(!i.length||t)for(var r=0;r<this.formFieldList.length;r++){var d=this.formFieldList[r];l.push({id:d.__vModel__,name:d.__config__.label,required:a?d.__config__.required||s(d.__vModel__):d.__config__.required,requiredDisabled:Ee(d.__config__.jnpfKey)||d.__config__.required,jnpfKey:d.__config__.jnpfKey,dataType:ze(d),read:!a||n(d.__vModel__),write:a?o(d.__vModel__):c["a"].isStartNode(e)})}else l=i;return l},updateData:function(){for(var e=0;e<this.flowList.length;e++)this.flowList[e].flowTemplateJson=Object.assign(c["a"].createNode("start"),this.flowList[e].flowTemplateJson),this.updateAllFormMap(this.flowList[e].flowTemplateJson)},updateAllFormMap:function(e){var t=this;if(e.properties.allFormMap||(e.properties.allFormMap={}),e.properties.formFieldList||this.formInfo.onlineDev&&this.formInfo.onlineFormId){this.formInfo.onlineDev&&this.formInfo.onlineFormId&&(e.properties.allFormMap["form_"+e.properties.formId]=this.formFieldList);var a=function a(i){if(Array.isArray(i)&&i.forEach((function(e){return a(e)})),"approver"===i.type||"start"===i.type){var l;if(null!==(l=i.properties.formFieldList)&&void 0!==l&&l.length){if(i.properties.formId){var n=i.properties.formFieldList.map((function(e){return e.id?e:Object(o["a"])(Object(o["a"])({},e),{},{id:e.__vModel__,fullName:e.__config__.label})}));e.properties.allFormMap["form_"+i.properties.formId]=n}delete i.properties.formFieldList}t.formInfo.onlineDev&&t.formInfo.onlineFormId&&(i.properties.formOperates=t.initFormOperates(i,!0,!0))}i.conditionNodes&&Array.isArray(i.conditionNodes)&&a(i.conditionNodes),i.childNode&&a(i.childNode)};a(e)}}}},We=qe,Ue=(a("05fc"),Object(T["a"])(We,i,l,!1,null,"3a6f02de",null));t["a"]=Ue.exports},e897:function(e,t,a){"use strict";a("8914")},e8f0:function(e,t,a){"use strict";a("870e")},e984:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popupSelect-container"},[a("div",{on:{click:e.openDialog}},[a("el-input",{attrs:{placeholder:"请选择发送配置",readonly:"","validate-event":!1},nativeOn:{mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},[a("template",{slot:"suffix"},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-arrow-up"]}),e.showClose?a("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}):e._e()]),5!=e.messageSource?a("el-button",{attrs:{slot:"append"},on:{click:function(t){return t.stopPropagation(),e.goMsgConfig()}},slot:"append"},[e._v("\n        添加配置")]):e._e()],2)],1),a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-tree-select",attrs:{title:"消息发送配置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"JNPF-common-layout"},[a("div",{staticClass:"JNPF-common-layout-center"},[a("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"JNPF-common-search-box-right"},[a("el-tooltip",{attrs:{effect:"dark",content:"刷新",placement:"top"}},[a("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1)],1)],1),a("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,border:!1,"highlight-current-row":"",hasNO:!1},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" ")])]}}])}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"fullName",label:"名称"}}),a("el-table-column",{attrs:{prop:"enCode",label:"编码"}})],1),a("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.$t("common.confirmButton"))+"\n      ")])],1)])],1)},l=[],o=(a("386d"),a("c5f6"),a("fdff")),n={name:"PopupSelect",props:{value:{default:""},title:{type:String,default:""},messageSource:{type:Number,default:2},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},model:{prop:"value",event:"input"},data:function(){return{list:[],innerValue:"",listQuery:{keyword:"",currentPage:1,pageSize:20,messageSource:1},total:0,checked:"",checkedRow:{},listLoading:!1,inputHovering:!1,visible:!1}},computed:{showClose:function(){var e=void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.disabled&&this.inputHovering&&e;return t}},methods:{initData:function(){var e=this;this.listLoading=!0,this.listQuery.messageSource=this.messageSource||1,Object(o["e"])(this.listQuery).then((function(t){e.list=t.data.list,e.total=t.data.pagination.total,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},openDialog:function(){this.disabled||(this.checked=this.value,this.visible=!0,this.reset())},reset:function(){this.listQuery.keyword="",this.search()},search:function(){this.listQuery.currentPage=1,this.listQuery.pageSize=20,this.initData()},clear:function(){this.checked="",this.checkedRow={},this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow)},select:function(){this.checked&&(this.$emit("input",this.checked),this.$emit("change",this.checked,this.checkedRow),this.visible=!1)},rowClick:function(e){this.checked=e.id,this.checkedRow=e},goMsgConfig:function(){var e=window.location.protocol+"//"+window.location.host+"/msgCenter/sendConfig";window.open(e,"_blank")}}},s=n,r=(a("8716"),a("2877")),c=Object(r["a"])(s,i,l,!1,null,"56c5915e",null);t["a"]=c.exports},eb13:function(e,t,a){},ec0f:function(e,t,a){"use strict";a("b243")},ecdb:function(e,t,a){},ed16:function(e,t,a){},ee58:function(e,t,a){"use strict";a("e74b")},eebd:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"echarts",class:e.className,style:{height:e.height,width:e.width}})},l=[],o=a("164e"),n=a("f42c");a("817d");var s={name:"chart",mixins:[n["a"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},options:{type:Object,default:{},required:!0}},data:function(){return{chart:null}},watch:{options:{deep:!0,handler:function(e){!this.chart&&e?this.initChart():this.chart.setOption(this.options,!0)}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=o["init"](this.$refs.echarts,"macarons"),this.chart.setOption(this.options)}}},r=s,c=a("2877"),d=Object(c["a"])(r,i,l,!1,null,null,null);t["a"]=d.exports},eec5:function(e,t,a){},eff4:function(e,t,a){},f1a3:function(e,t,a){},f2c3:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"top",title:"参数介绍及使用示例",width:"454","popper-class":"script-demo-popover",trigger:"click"},on:{show:e.onShow},scopedSlots:e._u([{key:"reference",fn:function(){return[a("el-link",{attrs:{type:"primary",underline:!1}},[e._v("参数介绍及使用示例")])]},proxy:!0}])},[a("div",{staticClass:"script-demo-popover-main",style:{height:e.editorHeight}},[a("JNPFCodeEditor",{key:e.key,ref:"CodeEditor",attrs:{options:e.editorOptions},model:{value:e.currentContent,callback:function(t){e.currentContent=t},expression:"currentContent"}})],1)])},l=[],o=a("7c37"),n="\n// onlineUtils--在线js工具类\n// 获取用户信息\nconst userInfo = onlineUtils.getUserInfo()\n// 获取设备信息\nconst deviceInfo = onlineUtils.getDeviceInfo()\n// 请求接口(url,method='get',data,headers)\nonlineUtils.request('url', 'get', { param: '1' }, { header: '1' })\n// 路由跳转(url,type) (type仅移动端支持)\nonlineUtils.route('url')\n// 消息提示(message,type='info',duration=3000)\nonlineUtils.toast('message', 'info', 3000)",s="// formData--表单数据\nconsole.log(formData)\n// setFormData--设置表单某个组件数据(prop,value)\nsetFormData('key', 'value')\n// setShowOrHide--设置显示或隐藏(prop,value)\nsetShowOrHide('key', true)\n// setRequired--设置必填项(prop,value)\nsetRequired('key', true)\n// setDisabled--设置禁用项(prop,value)\nsetDisabled('key', true)",r="// data--当前组件的选中数据\nconsole.log(data)\n// rowIndex--当前行下标(仅在子表中可用)\nconsole.log(rowIndex)\n"+s,c="// data--列表当前行数据\nconsole.log(data)\n// index--列表当前行下标\nconsole.log(index)\n// refresh--刷新列表\nrefresh()",d="// data--列表行数据\nconsole.log(data)\n// tableRef--表格DOM元素\nconsole.log(tableRef)",u="// row--列表行数据\n// rowIndex--列表行下标\n({ row, rowIndex }) => {\r\n   return {\r\n      background: rowIndex%2==0 ? 'red' : 'blue'\r\n   }\r\n}",p="// row--列表行数据\n// column--列表列数据\n// rowIndex--列表行下标\n// columnIndex--列表列下标\n({ row, column, rowIndex, columnIndex }) => {\r\n    return {\r\n        color: rowIndex%2 == 0 ? 'blue' : 'red'\r\n    }\r\n}",f={components:{JNPFCodeEditor:o["a"]},props:{type:{type:String,default:"formField"}},data:function(){return{currentContent:"",editorOptions:{language:"javascript",readOnly:!0,lineNumbers:"off",minimap:{enabled:!1},scrollBeyondLastLine:!1,glyphMargin:0},editorHeight:"500px",key:0}},methods:{onShow:function(){var e=this;"form"===this.type?(this.currentContent=s+n,this.editorHeight="420px"):"btnEvent"===this.type?(this.currentContent=c+n,this.editorHeight="350px"):"afterOnload"===this.type?(this.currentContent=d+n,this.editorHeight="310px"):"rowStyle"===this.type?(this.currentContent=u,this.editorHeight="140px"):"cellStyle"===this.type?(this.currentContent=p,this.editorHeight="180px"):(this.currentContent=r+n,this.editorHeight="500px"),this.$nextTick((function(){e.key=+new Date,e.$refs.CodeEditor.changeEditor({value:e.currentContent,options:e.editorOptions})}))}}},m=f,_=(a("d90d"),a("2877")),h=Object(_["a"])(m,i,l,!1,null,null,null);t["a"]=h.exports},f2d6:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"JNPF-full-dialog",attrs:{visible:e.visible,fullscreen:"","lock-scroll":"","show-close":!1,modal:!1},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"JNPF-full-dialog-header"},[i("div",{staticClass:"header-title"},[i("img",{staticClass:"header-logo",attrs:{src:a("73b6")}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.fullName,placement:"top"}},[i("p",{staticClass:"header-txt"},[e._v(" · "+e._s(e.fullName))])])],1),i("el-radio-group",{attrs:{size:"mini"},model:{value:e.showType,callback:function(t){e.showType=t},expression:"showType"}},[i("el-radio-button",{attrs:{label:"pc"}},[i("el-tooltip",{attrs:{effect:"dark",content:"PC",placement:"top"}},[i("i",{staticClass:"icon-ym icon-ym-pc"})])],1),i("el-radio-button",{attrs:{label:"app"}},[i("el-tooltip",{attrs:{effect:"dark",content:"APP",placement:"top"}},[i("i",{staticClass:"icon-ym icon-ym-mobile"})])],1)],1),i("div",{staticClass:"options"},[i("el-tooltip",{attrs:{effect:"dark",content:"撤销",placement:"top"}},[i("el-link",{staticClass:"active-btn",attrs:{icon:"icon-ym icon-ym-report-icon-undo",underline:!1,disabled:!e.getCanUndo},on:{click:function(t){return e.handleRedoAndUndo("handleUndo")}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:"重做",placement:"top"}},[i("el-link",{staticClass:"active-btn",attrs:{icon:"icon-ym icon-ym-report-icon-restore",underline:!1,disabled:!e.getCanRedo},on:{click:function(t){return e.handleRedoAndUndo("handleRedo")}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:"清空",placement:"top"}},[i("el-link",{staticClass:"active-btn",attrs:{icon:"icon-ym icon-ym-clean",underline:!1},on:{click:e.empty}})],1),i("el-tooltip",{attrs:{effect:"dark",content:"预览",placement:"top"}},[i("el-link",{staticClass:"active-btn",attrs:{icon:"icon-ym el-icon-video-play",underline:!1},on:{click:function(t){return e.preview()}}})],1),i("el-divider",{staticClass:"divider",attrs:{direction:"vertical"}}),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit(1)}}},[e._v("\n        保存并发布")]),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n        保 存")]),i("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)],1),i("ReleaseDialog",{ref:"release",attrs:{visible:e.releaseDialog},on:{"update:visible":function(t){e.releaseDialog=t},release:e.closeDialog}}),e.loading?e._e():i("div",{staticClass:"main"},[i("PortalDesigner",{ref:"portalDesigner",attrs:{conf:e.formData,showType:e.showType},on:{addRecord:e.handleAddRecord}})],1)],1)},l=[],o=a("1641"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"JNPF-Portal"},[i("el-main",{staticClass:"center-box"},[i("div",{staticClass:"action-bar"},[i("div",{staticClass:"components-list"},e._l(e.componentsList,(function(t,a){return i("div",{key:a,staticClass:"components-part"},[i("el-dropdown",{on:{command:e.addComponent}},[i("div",{staticClass:"components-title"},[e._v(e._s(t.title)),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{staticClass:"components-box",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.list,(function(t,a){return i("el-dropdown-item",{key:a,staticClass:"components-item",attrs:{icon:t.icon,command:t}},[e._v(e._s(t.label)+"\n              ")])})),1)],1)],1)})),0)]),i("el-scrollbar",{staticClass:"layout-area",class:{"ml-10":"pc"==e.showType}},["pc"==e.showType?i("div",[e.layout.length?i("grid-layout",{attrs:{layout:e.layout,"row-height":40},on:{"update:layout":function(t){e.layout=t}}},e._l(e.layout,(function(t){return i("grid-item",{key:t.i,class:{"active-item":t.i===e.activeId},attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,maxH:t.maxH,minH:t.minH,minW:t.minW,maxW:t.maxW},on:{resized:function(a){return e.resizedEvent(t.i,t)},moved:e.movedEvent},nativeOn:{click:function(a){return e.handleClick(t)}}},[i("parser",{attrs:{item:t,activeId:e.activeId}}),e.noNeedMaskList.includes(t.jnpfKey)?e._e():i("div",{staticClass:"mask"}),i("span",{staticClass:"drawing-item-copy",attrs:{title:"复制"},on:{click:function(a){return e.addComponent(t,"copy")}}},[i("i",{staticClass:"el-icon-copy-document"})]),i("el-popconfirm",{staticClass:"drawing-item-delete",attrs:{title:"确定删除该组件？"},on:{confirm:function(a){e.handleRemoveItem(t.i)}}},[i("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},slot:"reference"})])],1)})),1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.layout.length,expression:"!layout.length"}],staticClass:"empty-info"},[i("img",{staticClass:"empty-img",attrs:{src:a("d5f9")}})])],1):i("div",{attrs:{id:"ipad"}},[i("div",{staticClass:"outeripad"},[i("div",{staticClass:"ipadbody"},[i("div",{staticClass:"ipad-name"},[e._v("当前展示pc设计内容，请前往APP查看效果")]),i("el-scrollbar",{staticClass:"center-scrollbar"},[e.layout.length?i("draggable",{staticClass:"drawing-board",attrs:{list:e.layout,animation:340,group:"componentsGroup"}},e._l(e.layout,(function(t,a){return i("div",{key:a,staticClass:"item-box",class:{"active-item":t.i===e.activeId},on:{click:function(a){return e.handleClick(t)}}},[i("parser",{attrs:{item:t,activeId:e.activeId,showType:e.showType}}),e.noNeedMaskList.includes(t.jnpfKey)?e._e():i("div",{staticClass:"mask"}),i("span",{staticClass:"drawing-item-copy",attrs:{title:"复制"},on:{click:function(a){return e.addComponent(t)}}},[i("i",{staticClass:"el-icon-copy-document"})]),i("el-popconfirm",{staticClass:"drawing-item-delete",attrs:{title:"确定删除该组件？"},on:{confirm:function(a){e.handleRemoveItem(t.i)}}},[i("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},slot:"reference"})])],1)})),0):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.layout.length,expression:"!layout.length"}],staticClass:"empty-info app-empty-info"},[i("img",{staticClass:"empty-img",attrs:{src:a("d5f9")}})])],1)],1)])])])],1),i("right-panel",{attrs:{"active-data":e.activeData,refresh:e.refresh,showType:e.showType}}),i("Preview",{attrs:{visible:e.previewVisible,layout:e.layout},on:{"update:visible":function(t){e.previewVisible=t}}})],1)},s=[],r=(a("7f7f"),a("ac6a"),a("6762"),a("2fdb"),a("5530")),c=a("53ca"),d=a("7be8"),u=a.n(d),p=a("ed08"),f=a("32aa"),m=a("1130"),_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",e._g(e._b({staticClass:"JNPF-full-dialog",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,fullscreen:"","lock-scroll":"","show-close":!1,modal:!1},on:{open:e.onOpen,close:function(t){e.showPortalLayout=!1}}},"el-dialog",e.$attrs,!1),e.$listeners),[i("div",{staticClass:"JNPF-full-dialog-header"},[i("div",{staticClass:"header-title"},[i("img",{staticClass:"header-logo",attrs:{src:a("73b6")}}),i("p",{staticClass:"header-txt"},[e._v(" · 门户预览")])]),i("div",{staticClass:"options"},[i("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)]),i("div",{staticClass:"main",staticStyle:{padding:"0"}},[e.showPortalLayout?i("PortalLayout",{attrs:{layout:e.layoutData,mask:"",detailed:""}}):e._e()],1)])},h=[],v=a("c797"),b={props:["layout"],components:{PortalLayout:v["a"]},data:function(){return{showPortalLayout:!1,layoutData:[]}},methods:{onOpen:function(){this.showPortalLayout=!0,this.layoutData=this.filterList(JSON.parse(JSON.stringify(this.layout)))},filterList:function(e){var t=function e(t){for(var a=0;a<t.length;a++){var i=t[a];Array.isArray(i.visibility)&&i.visibility.includes("pc")||!i.jnpfKey||(t.splice(a,1),a--),i.children&&i.children.length&&e(i.children)}};return t(e),e},closeDialog:function(){this.$emit("update:visible",!1)}}},g=b,y=a("2877"),D=Object(y["a"])(g,_,h,!1,null,null,null),w=D.exports,x=a("c288"),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-aside",{staticClass:"right-box",attrs:{width:"340px"}},[a("el-tabs",{staticClass:"center-tabs",model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:"控件属性",name:"1"}}),a("el-tab-pane",{attrs:{label:"门户属性",name:"2"}})],1),a("el-scrollbar",{staticClass:"aside-scrollbar"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.currentTab,expression:"currentTab==1"}],attrs:{size:"small","label-width":"86px",labelPosition:"left"}},[e.activeData&&e.activeData.jnpfKey?[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},["tab"!=e.activeData.jnpfKey&&"collapse"!=e.activeData.jnpfKey?a("Card",{attrs:{activeData:e.activeData,showType:e.showType,menuList:e.menuList,appMenuList:e.appMenuList}}):e._e(),e.noNeedTypeSetList.includes(e.activeData.jnpfKey)?e._e():a("Chart",{attrs:{activeData:e.activeData,showType:e.showType,menuList:e.menuList,appMenuList:e.appMenuList}}),e.chartList.includes(e.activeData.jnpfKey)||"mapChart"==e.activeData.jnpfKey?a("MainTitle",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),e.chartList.includes(e.activeData.jnpfKey)||"mapChart"==e.activeData.jnpfKey?a("SubTitle",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),"barChart"==e.activeData.jnpfKey?a("BarStyle",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),"barChart"==e.activeData.jnpfKey||"lineChart"==e.activeData.jnpfKey?a("XAxis",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),"barChart"==e.activeData.jnpfKey||"lineChart"==e.activeData.jnpfKey?a("YAxis",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),e.chartList.includes(e.activeData.jnpfKey)?a("Label",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),e.chartList.includes(e.activeData.jnpfKey)||"mapChart"==e.activeData.jnpfKey?a("Tooltip",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),!e.chartList.includes(e.activeData.jnpfKey)&&"mapChart"!=e.activeData.jnpfKey||"pc"!=e.showType?e._e():a("Margin",{attrs:{activeData:e.activeData,showType:e.showType}}),e.chartList.includes(e.activeData.jnpfKey)?a("Legend",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),e.chartList.includes(e.activeData.jnpfKey)?a("Color",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),e.needDataSetList.includes(e.activeData.jnpfKey)?a("Data",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),"tab"==e.activeData.jnpfKey?a("Tab",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),"collapse"==e.activeData.jnpfKey?a("Collapse",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),"schedule"==e.activeData.jnpfKey?a("Schedule",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),"notice"==e.activeData.jnpfKey?a("Notice",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e()],1),a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"多端显示"}},[a("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.activeData.visibility,callback:function(t){e.$set(e.activeData,"visibility",t)},expression:"activeData.visibility"}},[a("el-checkbox",{attrs:{label:"pc"}},[e._v("Web")]),a("el-checkbox",{attrs:{label:"app",disabled:"iframe"==e.activeData.jnpfKey}},[e._v("App")])],1)],1)]:e._e()],2),a("el-form",{directives:[{name:"show",rawName:"v-show",value:2==e.currentTab,expression:"currentTab==2"}],staticClass:"portal-attr",attrs:{size:"small","label-width":"86px",labelPosition:"left"}},[a("Refresh",{attrs:{refresh:e.refresh}})],1)],1),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.current},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}})],1)},k=[],T=a("2909"),F=a("1980"),S=a.n(F),N=a("a6dc"),L=a("ef22"),O=a("17de"),$=a("a7b7"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"数据设置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.visible=t}}},[a("JSONEditor",{staticClass:"preview",attrs:{mode:"json"},model:{value:e.responseData,callback:function(t){e.responseData=t},expression:"responseData"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)},j=[],M=a("fa7e"),V={components:{JSONEditor:M["a"]},data:function(){return{visible:!1,responseData:""}},methods:{init:function(e){this.visible=!0,this.responseData=JSON.stringify(e,null,2)},closeDialog:function(){this.visible=!1,this.$emit("refresh",this.responseData)}}},A=V,P=(a("5bad"),Object(y["a"])(A,I,j,!1,null,"07376454",null)),J=P.exports,R=a("03e8"),K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"卡片设置",name:"13"}},[a("el-form-item",{attrs:{label:"标题名称"}},[a("el-input",{attrs:{placeholder:"请输入标题名称"},model:{value:e.activeData.title,callback:function(t){e.$set(e.activeData,"title",t)},expression:"activeData.title"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.card.titleFontSize,callback:function(t){e.$set(e.activeData.card,"titleFontSize",t)},expression:"activeData.card.titleFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.card.titleFontWeight,callback:function(t){e.$set(e.activeData.card,"titleFontWeight",t)},expression:"activeData.card.titleFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.card.titleFontColor,callback:function(t){e.$set(e.activeData.card,"titleFontColor",t)},expression:"activeData.card.titleFontColor"}})],1),a("el-form-item",{attrs:{label:"字体位置"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.card.titleLeft,callback:function(t){e.$set(e.activeData.card,"titleLeft",t)},expression:"activeData.card.titleLeft"}},e._l(e.alignList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.card.titleBgColor,callback:function(t){e.$set(e.activeData.card,"titleBgColor",t)},expression:"activeData.card.titleBgColor"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-input",{attrs:{placeholder:"请输入图标名称"},model:{value:e.activeData.card.cardIcon,callback:function(t){e.$set(e.activeData.card,"cardIcon",t)},expression:"activeData.card.cardIcon"}},[a("el-button",{attrs:{slot:"append"},on:{click:e.openIconsDialog},slot:"append"},[e._v("\n        选择\n      ")])],1)],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"图标颜色"}},[a("el-color-picker",{model:{value:e.activeData.card.cardIconColor,callback:function(t){e.$set(e.activeData.card,"cardIconColor",t)},expression:"activeData.card.cardIconColor"}})],1),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.activeData.card.cardIcon},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}}),a("el-form-item",{attrs:{label:"右上角名称"}},[a("el-input",{attrs:{placeholder:"请输入右上角名称"},model:{value:e.activeData.card.cardRightBtn,callback:function(t){e.$set(e.activeData.card,"cardRightBtn",t)},expression:"activeData.card.cardRightBtn"}})],1),e.activeData.card.cardRightBtn?a("Link",{attrs:{activeData:e.activeData,menuList:e.menuList,appMenuList:e.appMenuList,showType:e.showType,type:2}}):e._e()],1)},B=[],E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[1==e.type?["pc"==e.showType?[a("el-form-item",{attrs:{label:"链接类型"}},[a("el-select",{attrs:{placeholder:"请选择链接类型",clearable:"",filterable:""},on:{change:function(t){return e.onLinkTypeChange(1)}},model:{value:e.activeData.option.linkType,callback:function(t){e.$set(e.activeData.option,"linkType",t)},expression:"activeData.option.linkType"}},e._l(e.linkTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.option.linkType?a("el-form-item",{attrs:{label:"菜单名称"}},[a("JnpfTreeSelect",{attrs:{options:e.menuList,placeholder:"请选择菜单",lastLevel:"",lastLevelKey:"hasModule",lastLevelValue:!0,clearable:""},on:{change:e.getSelectValue},model:{value:e.activeData.option.moduleId,callback:function(t){e.$set(e.activeData.option,"moduleId",t)},expression:"activeData.option.moduleId"}})],1):e._e(),2==e.activeData.option.linkType?a("jnpf-form-tip-item",{attrs:{label:"链接地址","tip-label":"地址以http://或https://开头"}},[a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:e.activeData.option.urlAddress,callback:function(t){e.$set(e.activeData.option,"urlAddress",t)},expression:"activeData.option.urlAddress"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append"},slot:"append",model:{value:e.activeData.option.linkTarget,callback:function(t){e.$set(e.activeData.option,"linkTarget",t)},expression:"activeData.option.linkTarget"}},[a("el-option",{attrs:{label:"_self",value:"_self"}}),a("el-option",{attrs:{label:"_blank",value:"_blank"}})],1)],1)],1):e._e()]:[a("el-form-item",{attrs:{label:"链接类型"}},[a("el-select",{attrs:{placeholder:"请选择链接类型",clearable:"",filterable:""},on:{change:function(t){return e.onLinkTypeChange(1,"app")}},model:{value:e.activeData.option.appLinkType,callback:function(t){e.$set(e.activeData.option,"appLinkType",t)},expression:"activeData.option.appLinkType"}},e._l(e.linkTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.option.appLinkType?a("el-form-item",{attrs:{label:"菜单名称"}},[a("JnpfTreeSelect",{attrs:{options:e.appMenuList,placeholder:"请选择菜单",lastLevel:"",lastLevelKey:"hasModule",lastLevelValue:!0,clearable:""},on:{change:e.getSelectValue},model:{value:e.activeData.option.appModuleId,callback:function(t){e.$set(e.activeData.option,"appModuleId",t)},expression:"activeData.option.appModuleId"}})],1):e._e(),2==e.activeData.option.appLinkType?a("jnpf-form-tip-item",{attrs:{label:"链接地址","tip-label":"地址以http://或https://开头"}},[a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:e.activeData.option.appUrlAddress,callback:function(t){e.$set(e.activeData.option,"appUrlAddress",t)},expression:"activeData.option.appUrlAddress"}})],1):e._e()]]:["pc"==e.showType?[a("el-form-item",{attrs:{label:"右上角链接"}},[a("el-select",{attrs:{placeholder:"请选择链接类型",clearable:"",filterable:""},on:{change:function(t){return e.onLinkTypeChange(2)}},model:{value:e.activeData.card.linkType,callback:function(t){e.$set(e.activeData.card,"linkType",t)},expression:"activeData.card.linkType"}},e._l(e.linkTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.card.linkType?a("el-form-item",{attrs:{label:"菜单名称"}},[a("JnpfTreeSelect",{attrs:{options:e.menuList,placeholder:"请选择菜单",lastLevel:"",lastLevelKey:"hasModule",lastLevelValue:!0,clearable:""},on:{change:e.getSelectVal},model:{value:e.activeData.card.moduleId,callback:function(t){e.$set(e.activeData.card,"moduleId",t)},expression:"activeData.card.moduleId"}})],1):e._e(),2==e.activeData.card.linkType?a("jnpf-form-tip-item",{attrs:{label:"链接地址","tip-label":"地址以http://或https://开头"}},[a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:e.activeData.card.urlAddress,callback:function(t){e.$set(e.activeData.card,"urlAddress",t)},expression:"activeData.card.urlAddress"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append"},slot:"append",model:{value:e.activeData.card.linkTarget,callback:function(t){e.$set(e.activeData.card,"linkTarget",t)},expression:"activeData.card.linkTarget"}},[a("el-option",{attrs:{label:"_self",value:"_self"}}),a("el-option",{attrs:{label:"_blank",value:"_blank"}})],1)],1)],1):e._e()]:[a("el-form-item",{attrs:{label:"右上角链接"}},[a("el-select",{attrs:{placeholder:"请选择链接类型",clearable:"",filterable:""},on:{change:function(t){return e.onLinkTypeChange(2,"app")}},model:{value:e.activeData.card.appLinkType,callback:function(t){e.$set(e.activeData.card,"appLinkType",t)},expression:"activeData.card.appLinkType"}},e._l(e.linkTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.card.appLinkType?a("el-form-item",{attrs:{label:"菜单名称"}},[a("JnpfTreeSelect",{attrs:{options:e.appMenuList,placeholder:"请选择菜单",lastLevel:"",lastLevelKey:"hasModule",lastLevelValue:!0,clearable:""},on:{change:e.getSelectVal},model:{value:e.activeData.card.appModuleId,callback:function(t){e.$set(e.activeData.card,"appModuleId",t)},expression:"activeData.card.appModuleId"}})],1):e._e(),2==e.activeData.card.appLinkType?a("jnpf-form-tip-item",{attrs:{label:"链接地址","tip-label":"地址以http://或https://开头"}},[a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:e.activeData.card.appUrlAddress,callback:function(t){e.$set(e.activeData.card,"appUrlAddress",t)},expression:"activeData.card.appUrlAddress"}})],1):e._e()]]],2)},z=[],q=(a("c5f6"),{props:{activeData:{type:Object,default:{}},menuList:{type:Array,default:[]},appMenuList:{type:Array,default:[]},type:{type:Number,default:1},showType:{type:String,default:"pc"}},data:function(){return{linkTypeList:f["t"]}},methods:{getSelectValue:function(e,t){var a="pc"==this.showType;this.activeData.option[a?"type":"appType"]=t.type,this.activeData.option[a?"urlAddress":"appUrlAddress"]=t.urlAddress,t.linkTarget&&a&&(this.activeData.option.linkTarget=t.linkTarget),t.propertyJson&&(this.activeData.option[a?"propertyJson":"appPropertyJson"]=t.propertyJson)},getSelectVal:function(e,t){var a="pc"==this.showType;this.activeData.card[a?"type":"appType"]=t.type,this.activeData.card[a?"urlAddress":"appUrlAddress"]=t.urlAddress,t.linkTarget&&a&&(this.activeData.card.linkTarget=t.linkTarget),t.propertyJson&&(this.activeData.card[a?"propertyJson":"appPropertyJson"]=t.propertyJson)},onLinkTypeChange:function(e,t){1==e?"app"==t?(this.activeData.option.appType="",this.activeData.option.appUrlAddress="",this.activeData.option.appModuleId=""):(this.activeData.option.type="",this.activeData.option.moduleId="",this.activeData.option.linkTarget="_self",this.activeData.option.urlAddress=""):"app"==t?(this.activeData.card.appType="",this.activeData.card.appUrlAddress="",this.activeData.card.appModuleId=""):(this.activeData.card.type="",this.activeData.card.moduleId="",this.activeData.card.linkTarget="_self",this.activeData.card.urlAddress="")}}}),W=q,U=Object(y["a"])(W,E,z,!1,null,null,null),H=U.exports,G={components:{iconBox:$["a"],Link:H},props:["activeData","menuList","appMenuList","showType"],data:function(){return{alignList:f["a"],iconsVisible:!1}},watch:{"activeData.title":{handler:function(){this.$eventBus.$emit("eChart"+this.activeData.i)}}},methods:{openIconsDialog:function(){this.iconsVisible=!0},setIcon:function(e){this.activeData.card.cardIcon=e}}},Q=G,Y=Object(y["a"])(Q,K,B,!1,null,null,null),Z=Y.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:e.getTitle(),name:"1"}},[e.noStyleTypeList.includes(e.activeData.jnpfKey)?e._e():a("jnpf-form-tip-item",{attrs:{label:"风格类型","tip-label":e.getTipLabel()}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},on:{change:e.styleTypeChange},model:{value:e.activeData.option.styleType,callback:function(t){e.$set(e.activeData.option,"styleType",t)},expression:"activeData.option.styleType"}},e._l(e.styleTypeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),"lineChart"==e.activeData.jnpfKey?[a("el-form-item",{attrs:{label:"面积堆积"}},[a("el-switch",{model:{value:e.activeData.option.areaStyle,callback:function(t){e.$set(e.activeData.option,"areaStyle",t)},expression:"activeData.option.areaStyle"}})],1),a("el-form-item",{attrs:{label:"线条宽度"}},[a("el-slider",{attrs:{min:1,max:20},model:{value:e.activeData.option.seriesLineStyleWidth,callback:function(t){e.$set(e.activeData.option,"seriesLineStyleWidth",t)},expression:"activeData.option.seriesLineStyleWidth"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"点的大小"}},[a("el-slider",{attrs:{max:20},model:{value:e.activeData.option.seriesSymbolRotate,callback:function(t){e.$set(e.activeData.option,"seriesSymbolRotate",t)},expression:"activeData.option.seriesSymbolRotate"}})],1)]:e._e(),"pieChart"==e.activeData.jnpfKey?[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType||1==e.activeData.option.styleType,expression:"showType == 'pc'||activeData.option.styleType==1"}],attrs:{label:"南丁格尔图"}},[a("el-switch",{model:{value:e.activeData.option.roseType,callback:function(t){e.$set(e.activeData.option,"roseType",t)},expression:"activeData.option.roseType"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"自动排序"}},[a("el-switch",{model:{value:e.activeData.option.sortable,callback:function(t){e.$set(e.activeData.option,"sortable",t)},expression:"activeData.option.sortable"}})],1),a("el-form-item",{attrs:{label:"不展示零"}},[a("el-switch",{model:{value:e.activeData.option.showZero,callback:function(t){e.$set(e.activeData.option,"showZero",t)},expression:"activeData.option.showZero"}})],1)]:e._e(),"radarChart"==e.activeData.jnpfKey?[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"指示器大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.radarAxisNameFontSize,callback:function(t){e.$set(e.activeData.option,"radarAxisNameFontSize",t)},expression:"activeData.option.radarAxisNameFontSize"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"指示器加粗"}},[a("el-switch",{model:{value:e.activeData.option.radarAxisNameFontWeight,callback:function(t){e.$set(e.activeData.option,"radarAxisNameFontWeight",t)},expression:"activeData.option.radarAxisNameFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"指示器颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.radarAxisNameColor,callback:function(t){e.$set(e.activeData.option,"radarAxisNameColor",t)},expression:"activeData.option.radarAxisNameColor"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"区域透明度"}},[a("el-slider",{attrs:{max:1,step:.1},model:{value:e.activeData.option.seriesAreaStyleOpacity,callback:function(t){e.$set(e.activeData.option,"seriesAreaStyleOpacity",t)},expression:"activeData.option.seriesAreaStyleOpacity"}})],1)]:e._e(),"mapChart"==e.activeData.jnpfKey?[a("MapSet",{attrs:{activeData:e.activeData,cascaderOptions:e.cascaderOptions,showType:e.showType}})]:e._e(),"rankList"==e.activeData.jnpfKey?[a("el-divider",[e._v("列表字段")]),a("draggable",{attrs:{list:e.activeData.option.columnOptions,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.option.columnOptions,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"列名",size:"small"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}}),a("el-input",{attrs:{placeholder:"字段",size:"small"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),a("div",{staticClass:"close-btn select-line-icon",class:{opacity5:1==e.activeData.option.columnOptions.length},on:{click:function(t){return e.delSelectItem(i)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{margin:"0 0 15px 29px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addSelectItem}},[e._v("\n        添加字段\n      ")])],1)]:e._e(),"timeAxis"==e.activeData.jnpfKey?[a("jnpf-form-tip-item",{attrs:{label:"标签布局","tip-label":"APP不支持所有交错类型，默认显示轴右侧"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},model:{value:e.activeData.option.layout,callback:function(t){e.$set(e.activeData.option,"layout",t)},expression:"activeData.option.layout"}},e._l(e.layoutStyleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.sortable,callback:function(t){e.$set(e.activeData.option,"sortable",t)},expression:"activeData.option.sortable"}},e._l(e.sortList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),a("jnpf-form-tip-item",{attrs:{label:"显示条数"}},["pc"==e.showType?a("el-input-number",{attrs:{"controls-position":"right",min:1,max:50},model:{value:e.activeData.option.showNumber,callback:function(t){e.$set(e.activeData.option,"showNumber",t)},expression:"activeData.option.showNumber"}}):a("el-input-number",{attrs:{"controls-position":"right",min:1,max:50},model:{value:e.activeData.option.appShowNumber,callback:function(t){e.$set(e.activeData.option,"appShowNumber",t)},expression:"activeData.option.appShowNumber"}})],1)]:e._e(),"text"==e.activeData.jnpfKey?[a("el-form-item",{attrs:{label:"文本类型"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.textChange},model:{value:e.activeData.option.styleType,callback:function(t){e.$set(e.activeData.option,"styleType",t)},expression:"activeData.option.styleType"}},e._l(e.textStyleList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),a("el-form-item",{attrs:{label:"数据类型"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.dataType,callback:function(t){e.$set(e.activeData,"dataType",t)},expression:"activeData.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"==e.activeData.dataType?a("el-form-item",{attrs:{label:"文本内容"}},[1==e.activeData.option.styleType?a("el-input",{attrs:{placeholder:"请输入文本内容"},model:{value:e.activeData.option.defaultValue,callback:function(t){e.$set(e.activeData.option,"defaultValue",t)},expression:"activeData.option.defaultValue"}}):e._e(),2==e.activeData.option.styleType?a("el-button",{on:{click:function(t){return e.showEditor()}}},[e._v("设置")]):e._e()],1):a("el-form-item",{attrs:{label:"数据接口"}},[a("interface-dialog",{attrs:{value:e.activeData.propsApi,title:e.activeData.propsName,popupTitle:"数据接口"},on:{change:e.propsApiChange}})],1),"dynamic"===e.activeData.dataType&&e.activeData.propsApi?a("refresh",{attrs:{refresh:e.activeData.refresh}}):e._e(),2!=e.activeData.option.styleType?[a("el-form-item",{attrs:{label:"文本大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.textFontSize,callback:function(t){e.$set(e.activeData.option,"textFontSize",t)},expression:"activeData.option.textFontSize"}})],1),a("el-form-item",{attrs:{label:"文本加粗"}},[a("el-switch",{model:{value:e.activeData.option.textFontWeight,callback:function(t){e.$set(e.activeData.option,"textFontWeight",t)},expression:"activeData.option.textFontWeight"}})],1),a("el-form-item",{attrs:{label:"文本斜体"}},[a("el-switch",{model:{value:e.activeData.option.textFontStyle,callback:function(t){e.$set(e.activeData.option,"textFontStyle",t)},expression:"activeData.option.textFontStyle"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"文本颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.textFontColor,callback:function(t){e.$set(e.activeData.option,"textFontColor",t)},expression:"activeData.option.textFontColor"}})],1),a("el-form-item",{attrs:{label:"文本位置"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.textLeft,callback:function(t){e.$set(e.activeData.option,"textLeft",t)},expression:"activeData.option.textLeft"}},e._l(e.alignList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],1),a("el-form-item",{attrs:{label:"文本下划线"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.textUnderLine,callback:function(t){e.$set(e.activeData.option,"textUnderLine",t)},expression:"activeData.option.textUnderLine"}},e._l(e.underLineList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],1)]:e._e(),"2"!=e.activeData.option.styleType?a("el-form-item",{attrs:{label:"文本滚动"}},[a("el-switch",{model:{value:e.activeData.option.textAutoplay,callback:function(t){e.$set(e.activeData.option,"textAutoplay",t)},expression:"activeData.option.textAutoplay"}})],1):e._e(),e.activeData.option.textAutoplay&&"2"!=e.activeData.option.styleType?["pc"==e.showType?a("el-form-item",{attrs:{label:"滚动方向"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.renderKeyChange},model:{value:e.activeData.option.textAutoplayMode,callback:function(t){e.$set(e.activeData.option,"textAutoplayMode",t)},expression:"activeData.option.textAutoplayMode"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("横向")]),a("el-radio-button",{attrs:{label:"up"}},[e._v("纵向")])],1)],1):e._e(),a("el-form-item",{attrs:{label:"滚动速度"}},[a("el-input-number",{attrs:{"controls-position":"right",min:10,max:100},on:{change:e.renderKeyChange},model:{value:e.activeData.option.textAutoplaySpeed,callback:function(t){e.$set(e.activeData.option,"textAutoplaySpeed",t)},expression:"activeData.option.textAutoplaySpeed"}})],1)]:e._e(),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.textBgColor,callback:function(t){e.$set(e.activeData.option,"textBgColor",t)},expression:"activeData.option.textBgColor"}})],1),a("Link",{attrs:{activeData:e.activeData,menuList:e.menuList,appMenuList:e.appMenuList,showType:e.showType}})]:e._e(),"image"==e.activeData.jnpfKey?[a("el-form-item",{attrs:{label:"图片来源"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.styleTypeChange},model:{value:e.activeData.option.styleType,callback:function(t){e.$set(e.activeData.option,"styleType",t)},expression:"activeData.option.styleType"}},e._l(e.styleTypeOptions,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),1==e.activeData.option.styleType?a("jnpf-form-tip-item",{attrs:{label:"上传图片"}},[a("single-img",{model:{value:e.activeData.option.defaultValue,callback:function(t){e.$set(e.activeData.option,"defaultValue",t)},expression:"activeData.option.defaultValue"}})],1):2==e.activeData.option.styleType?a("jnpf-form-tip-item",{attrs:{label:"图片地址",tipLabel:"地址以http://或https://为开头"}},[a("el-input",{attrs:{placeholder:"请输入图片地址"},model:{value:e.activeData.option.defaultValue,callback:function(t){e.$set(e.activeData.option,"defaultValue",t)},expression:"activeData.option.defaultValue"}})],1):a("el-form-item",{attrs:{label:"数据接口"}},[a("interface-dialog",{attrs:{value:e.activeData.propsApi,title:e.activeData.propsName,popupTitle:"数据接口"},on:{change:e.propsApiChange}})],1),"dynamic"===e.activeData.dataType&&e.activeData.propsApi?a("refresh",{attrs:{refresh:e.activeData.refresh}}):e._e(),a("el-form-item",{attrs:{label:"填充方式"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},model:{value:e.activeData.option.imageFillStyle,callback:function(t){e.$set(e.activeData.option,"imageFillStyle",t)},expression:"activeData.option.imageFillStyle"}},e._l(e.fillStyleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"文本内容"}},[a("el-input",{attrs:{placeholder:"请输入文本内容"},model:{value:e.activeData.option.textDefaultValue,callback:function(t){e.$set(e.activeData.option,"textDefaultValue",t)},expression:"activeData.option.textDefaultValue"}})],1),a("textSet",{attrs:{activeData:e.activeData}}),a("Link",{attrs:{activeData:e.activeData,menuList:e.menuList,appMenuList:e.appMenuList,showType:e.showType}})]:e._e(),"carousel"==e.activeData.jnpfKey?[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType=='pc'"}],attrs:{label:"轮播图方向"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.carouselDirection,callback:function(t){e.$set(e.activeData.option,"carouselDirection",t)},expression:"activeData.option.carouselDirection"}},e._l(e.directionList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),a("el-form-item",{attrs:{label:"自动轮播"}},[a("el-switch",{model:{value:e.activeData.option.carouselAutoplay,callback:function(t){e.$set(e.activeData.option,"carouselAutoplay",t)},expression:"activeData.option.carouselAutoplay"}})],1),a("el-form-item",{attrs:{label:"轮播间隔"}},[a("el-input",{attrs:{placeholder:"请输入轮播间隔",type:"number",min:500,max:5e5},model:{value:e.activeData.option.carouselInterval,callback:function(t){e.$set(e.activeData.option,"carouselInterval",t)},expression:"activeData.option.carouselInterval"}},[a("template",{slot:"append"},[e._v("ms")])],2)],1),a("el-form-item",{attrs:{label:"指示点显示"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.carouselIndicatorPosition,callback:function(t){e.$set(e.activeData.option,"carouselIndicatorPosition",t)},expression:"activeData.option.carouselIndicatorPosition"}},e._l(e.indicatorPositionList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},["horizontal"==e.activeData.option.carouselDirection?a("span",[e._v(e._s(t.label))]):a("span",[e._v(e._s(t.title))])])})),1)],1),"horizontal"==e.activeData.option.carouselDirection&&"pc"==e.showType?a("el-form-item",{attrs:{label:"箭头显示"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.carouselArrow,callback:function(t){e.$set(e.activeData.option,"carouselArrow",t)},expression:"activeData.option.carouselArrow"}},e._l(e.arrowList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType=='pc'"}],attrs:{label:"循环显示"}},[a("el-switch",{model:{value:e.activeData.option.carouselLoop,callback:function(t){e.$set(e.activeData.option,"carouselLoop",t)},expression:"activeData.option.carouselLoop"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"!=e.showType,expression:"showType!='pc'"}],attrs:{label:"3D效果"}},[a("el-switch",{model:{value:e.activeData.option.carouselType,callback:function(t){e.$set(e.activeData.option,"carouselType",t)},expression:"activeData.option.carouselType"}})],1),a("el-form-item",{attrs:{label:"选项"}},[a("el-button",{on:{click:function(t){return e.showData("carouselData","carouselDataVisible")}}},[e._v("设置")])],1),a("refresh",{directives:[{name:"show",rawName:"v-show",value:e.activeData.option["pc"==e.showType?"defaultValue":"appDefaultValue"].find((function(e){return 3===e.dataType})),expression:"activeData.option[showType=='pc'?'defaultValue':'appDefaultValue'].find(ele => ele.dataType === 3)"}],attrs:{refresh:e.activeData.refresh}}),e.carouselDataVisible?a("CarouselData",{ref:"carouselData",attrs:{menuList:e.menuList,appMenuList:e.appMenuList,showType:e.showType},on:{refresh:e.refresh}}):e._e(),a("el-form-item",{attrs:{label:"填充方式"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},model:{value:e.activeData.option.imageFillStyle,callback:function(t){e.$set(e.activeData.option,"imageFillStyle",t)},expression:"activeData.option.imageFillStyle"}},e._l(e.fillStyleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("textSet",{attrs:{activeData:e.activeData}})]:e._e(),"video"==e.activeData.jnpfKey?[a("el-form-item",{attrs:{label:"视频来源"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.styleTypeChange},model:{value:e.activeData.option.styleType,callback:function(t){e.$set(e.activeData.option,"styleType",t)},expression:"activeData.option.styleType"}},e._l(e.styleTypeOptions,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),"1"==e.activeData.option.styleType?a("el-form-item",{attrs:{label:"上传视频"}},[a("JnpfUploadFile",{attrs:{limit:1,buttonText:"上传视频",accept:"video/*",fileSize:"100"},on:{change:e.uploadFileChange},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1):2==e.activeData.option.styleType?a("jnpf-form-tip-item",{attrs:{label:"视频地址",tipLabel:"地址以http://或https://开头"}},[a("el-input",{attrs:{placeholder:"请输入视频地址"},model:{value:e.activeData.option.defaultValue,callback:function(t){e.$set(e.activeData.option,"defaultValue",t)},expression:"activeData.option.defaultValue"}})],1):[a("el-form-item",{attrs:{label:"数据接口"}},[a("interface-dialog",{attrs:{value:e.activeData.propsApi,title:e.activeData.propsName,popupTitle:"数据接口"},on:{change:e.propsApiChange}})],1),"dynamic"===e.activeData.dataType&&e.activeData.propsApi?a("refresh",{attrs:{refresh:e.activeData.refresh}}):e._e()],a("el-form-item",{attrs:{label:"自动播放"}},[a("el-switch",{model:{value:e.activeData.option.videoAutoplay,callback:function(t){e.$set(e.activeData.option,"videoAutoplay",t)},expression:"activeData.option.videoAutoplay"}})],1),a("el-form-item",{attrs:{label:"播放频率"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.playNumber,callback:function(t){e.$set(e.activeData.option,"playNumber",t)},expression:"activeData.option.playNumber"}},e._l(e.playNumberList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),a("el-form-item",{attrs:{label:"静音播放"}},[a("el-switch",{model:{value:e.activeData.option.mutePlay,callback:function(t){e.$set(e.activeData.option,"mutePlay",t)},expression:"activeData.option.mutePlay"}})],1)]:e._e(),"iframe"==e.activeData.jnpfKey?[a("jnpf-form-tip-item",{attrs:{label:"链接地址","tip-label":"地址以http://或https://为开头"}},[a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:e.activeData.option.defaultValue,callback:function(t){e.$set(e.activeData.option,"defaultValue",t)},expression:"activeData.option.defaultValue"}})],1)]:e._e(),"todo"==e.activeData.jnpfKey?["app"==e.showType?[a("el-form-item",{attrs:{label:"风格类型"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},model:{value:e.activeData.option.styleType,callback:function(t){e.$set(e.activeData.option,"styleType",t)},expression:"activeData.option.styleType"}},e._l(e.appTodoStyleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),2==e.activeData.option.styleType?[a("el-form-item",{attrs:{label:"每行选项数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},model:{value:e.activeData.option.appRowNumber,callback:function(t){e.$set(e.activeData.option,"appRowNumber",t)},expression:"activeData.option.appRowNumber"}})],1),a("el-form-item",{attrs:{label:"显示边框"}},[a("el-switch",{model:{value:e.activeData.option.appShowBorder,callback:function(t){e.$set(e.activeData.option,"appShowBorder",t)},expression:"activeData.option.appShowBorder"}})],1)]:e._e()]:[a("el-form-item",{attrs:{label:"每行选项数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},model:{value:e.activeData.option.rowNumber,callback:function(t){e.$set(e.activeData.option,"rowNumber",t)},expression:"activeData.option.rowNumber"}})],1),a("el-form-item",{attrs:{label:"显示边框"}},[a("el-switch",{model:{value:e.activeData.option.showBorder,callback:function(t){e.$set(e.activeData.option,"showBorder",t)},expression:"activeData.option.showBorder"}})],1)],a("el-form-item",{attrs:{label:"选项"}},[a("el-button",{on:{click:e.showDataTodoData}},[e._v("设置")])],1),a("refresh",{attrs:{refresh:e.activeData.refresh}}),e.todoDataVisible?a("todo-data",{ref:"todoData",on:{refresh:e.commonRefresh}}):e._e(),a("el-form-item",{attrs:{label:"名称大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.labelFontSize,callback:function(t){e.$set(e.activeData.option,"labelFontSize",t)},expression:"activeData.option.labelFontSize"}})],1),a("el-form-item",{attrs:{label:"名称加粗"}},[a("el-switch",{model:{value:e.activeData.option.labelFontWeight,callback:function(t){e.$set(e.activeData.option,"labelFontWeight",t)},expression:"activeData.option.labelFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"名称颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.labelFontColor,callback:function(t){e.$set(e.activeData.option,"labelFontColor",t)},expression:"activeData.option.labelFontColor"}})],1),a("el-form-item",{attrs:{label:"数值大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.valueFontSize,callback:function(t){e.$set(e.activeData.option,"valueFontSize",t)},expression:"activeData.option.valueFontSize"}})],1),a("el-form-item",{attrs:{label:"数值加粗"}},[a("el-switch",{model:{value:e.activeData.option.valueFontWeight,callback:function(t){e.$set(e.activeData.option,"valueFontWeight",t)},expression:"activeData.option.valueFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"数值颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.valueFontColor,callback:function(t){e.$set(e.activeData.option,"valueFontColor",t)},expression:"activeData.option.valueFontColor"}})],1),"app"==e.showType?a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"数值背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.valueFontBgColor,callback:function(t){e.$set(e.activeData.option,"valueFontBgColor",t)},expression:"activeData.option.valueFontBgColor"}})],1):e._e()]:e._e(),"commonFunc"==e.activeData.jnpfKey?["app"==e.showType?[a("el-form-item",{attrs:{label:"风格类型"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},model:{value:e.activeData.option.appStyleType,callback:function(t){e.$set(e.activeData.option,"appStyleType",t)},expression:"activeData.option.appStyleType"}},e._l(e.appTodoStyleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),2==e.activeData.option.appStyleType?[a("el-form-item",{attrs:{label:"每行选项数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},model:{value:e.activeData.option.appRowNumber,callback:function(t){e.$set(e.activeData.option,"appRowNumber",t)},expression:"activeData.option.appRowNumber"}})],1),a("el-form-item",{attrs:{label:"显示边框"}},[a("el-switch",{model:{value:e.activeData.option.appShowBorder,callback:function(t){e.$set(e.activeData.option,"appShowBorder",t)},expression:"activeData.option.appShowBorder"}})],1)]:e._e()]:[a("el-form-item",{attrs:{label:"每行选项数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},model:{value:e.activeData.option.rowNumber,callback:function(t){e.$set(e.activeData.option,"rowNumber",t)},expression:"activeData.option.rowNumber"}})],1),a("el-form-item",{attrs:{label:"显示边框"}},[a("el-switch",{model:{value:e.activeData.option.showBorder,callback:function(t){e.$set(e.activeData.option,"showBorder",t)},expression:"activeData.option.showBorder"}})],1)],a("el-form-item",{attrs:{label:"选项"}},[a("el-button",{on:{click:function(t){return e.showData("commonFunData","commonFunDataVisible")}}},[e._v("设置")])],1),e.commonFunDataVisible?a("CommonFunData",{ref:"commonFunData",attrs:{menuList:e.menuList,appMenuList:e.appMenuList,showType:e.showType},on:{refresh:e.refresh}}):e._e(),"pc"==e.showType?a("el-form-item",{attrs:{label:"图标位置"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.styleType,callback:function(t){e.$set(e.activeData.option,"styleType",t)},expression:"activeData.option.styleType"}},e._l(e.commonFuncStyleList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1):e._e(),a("el-form-item",{attrs:{label:"名称大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.labelFontSize,callback:function(t){e.$set(e.activeData.option,"labelFontSize",t)},expression:"activeData.option.labelFontSize"}})],1),a("el-form-item",{attrs:{label:"名称加粗"}},[a("el-switch",{model:{value:e.activeData.option.labelFontWeight,callback:function(t){e.$set(e.activeData.option,"labelFontWeight",t)},expression:"activeData.option.labelFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"名称颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.labelFontColor,callback:function(t){e.$set(e.activeData.option,"labelFontColor",t)},expression:"activeData.option.labelFontColor"}})],1)]:e._e(),"dataBoard"==e.activeData.jnpfKey?["app"==e.showType?[a("el-form-item",{attrs:{label:"风格类型"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},model:{value:e.activeData.option.appStyleType,callback:function(t){e.$set(e.activeData.option,"appStyleType",t)},expression:"activeData.option.appStyleType"}},e._l(e.appTodoStyleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),2==e.activeData.option.appStyleType?[a("el-form-item",{attrs:{label:"每行选项数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:8},model:{value:e.activeData.option.appRowNumber,callback:function(t){e.$set(e.activeData.option,"appRowNumber",t)},expression:"activeData.option.appRowNumber"}})],1),a("el-form-item",{attrs:{label:"显示边框"}},[a("el-switch",{model:{value:e.activeData.option.appShowBorder,callback:function(t){e.$set(e.activeData.option,"appShowBorder",t)},expression:"activeData.option.appShowBorder"}})],1)]:e._e()]:[a("el-form-item",{attrs:{label:"每行选项数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:8},model:{value:e.activeData.option.rowNumber,callback:function(t){e.$set(e.activeData.option,"rowNumber",t)},expression:"activeData.option.rowNumber"}})],1),a("el-form-item",{attrs:{label:"显示边框"}},[a("el-switch",{model:{value:e.activeData.option.showBorder,callback:function(t){e.$set(e.activeData.option,"showBorder",t)},expression:"activeData.option.showBorder"}})],1)],a("el-divider",[e._v("选项设置")]),a("el-form-item",{attrs:{label:"数据类型"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.dataBoardDataTypeChange},model:{value:e.activeData.dataType,callback:function(t){e.$set(e.activeData,"dataType",t)},expression:"activeData.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"dynamic"===e.activeData.dataType?a("el-form-item",{attrs:{label:"数据接口"}},[a("interface-dialog",{attrs:{value:e.activeData.propsApi,title:e.activeData.propsName,popupTitle:"数据接口"},on:{change:e.propsApiChange}})],1):e._e(),"dynamic"===e.activeData.dataType?a("Refresh",{attrs:{refresh:e.activeData.refresh}}):e._e(),a("el-form-item",{attrs:{label:"选项"}},[a("el-button",{on:{click:function(t){return e.showData("dataBoardData","dataBoardDataVisible")}}},[e._v("设置")])],1),e.dataBoardDataVisible?a("DataBoardData",{ref:"dataBoardData",attrs:{menuList:e.menuList,appMenuList:e.appMenuList,interfaceId:e.activeData.propsApi,type:"dynamic"===e.activeData.dataType?2:1,showType:e.showType},on:{refresh:e.refresh}}):e._e(),a("el-divider",[e._v("选项样式")]),a("el-form-item",{attrs:{label:"名称大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.labelFontSize,callback:function(t){e.$set(e.activeData.option,"labelFontSize",t)},expression:"activeData.option.labelFontSize"}})],1),a("el-form-item",{attrs:{label:"名称加粗"}},[a("el-switch",{model:{value:e.activeData.option.labelFontWeight,callback:function(t){e.$set(e.activeData.option,"labelFontWeight",t)},expression:"activeData.option.labelFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"名称颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.labelFontColor,callback:function(t){e.$set(e.activeData.option,"labelFontColor",t)},expression:"activeData.option.labelFontColor"}})],1),a("el-form-item",{attrs:{label:"数值大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.valueFontSize,callback:function(t){e.$set(e.activeData.option,"valueFontSize",t)},expression:"activeData.option.valueFontSize"}})],1),a("el-form-item",{attrs:{label:"数值加粗"}},[a("el-switch",{model:{value:e.activeData.option.valueFontWeight,callback:function(t){e.$set(e.activeData.option,"valueFontWeight",t)},expression:"activeData.option.valueFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"数值颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.valueFontColor,callback:function(t){e.$set(e.activeData.option,"valueFontColor",t)},expression:"activeData.option.valueFontColor"}})],1),a("el-form-item",{attrs:{label:"单位大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.unitFontSize,callback:function(t){e.$set(e.activeData.option,"unitFontSize",t)},expression:"activeData.option.unitFontSize"}})],1),a("el-form-item",{attrs:{label:"单位加粗"}},[a("el-switch",{model:{value:e.activeData.option.unitFontWeight,callback:function(t){e.$set(e.activeData.option,"unitFontWeight",t)},expression:"activeData.option.unitFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"单位颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.unitFontColor,callback:function(t){e.$set(e.activeData.option,"unitFontColor",t)},expression:"activeData.option.unitFontColor"}})],1)]:e._e(),"tableList"==e.activeData.jnpfKey?a("TableList",{attrs:{activeData:e.activeData,showType:e.showType}}):e._e(),e.editorVisible?a("popupEditor",{ref:"popupEditor",on:{refresh:e.commonRefresh}}):e._e()],2)},ee=[],te=(a("4f7f"),a("5df3"),a("1c4c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"文本内容","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("JnpfEditor",{ref:"myQuillEditor",model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)}),ae=[],ie={data:function(){return{visible:!1,content:""}},methods:{init:function(e){this.visible=!0,this.content=e},closeDialog:function(){this.visible=!1,this.$emit("refresh",this.content)}}},le=ie,oe=(a("ba4e"),Object(y["a"])(le,te,ae,!1,null,"6977f88a",null)),ne=oe.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center todoData",attrs:{title:"选项设置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("JNPF-table",{ref:"dragTable",attrs:{data:e.list,hasNO:!1,"row-key":"id"}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"field",label:"名称",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入名称",maxlength:"50"},model:{value:t.row.fullName,callback:function(a){e.$set(t.row,"fullName",a)},expression:"scope.row.fullName"}})]}}])}),a("el-table-column",{attrs:{prop:"dataType",label:"分类",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!=t.row.id?a("el-select",{attrs:{filterable:"",placeholder:"请选择分类",multiple:"",clearable:""},model:{value:t.row.category,callback:function(a){e.$set(t.row,"category",a)},expression:"scope.row.category"}},e._l(e.categoryList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"dataLength",label:"隐藏",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{model:{value:t.row.noShow,callback:function(a){e.$set(t.row,"noShow",a)},expression:"scope.row.noShow"}})]}}])}),a("el-table-column",{attrs:{prop:"field",label:"图标"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入图标名称"},model:{value:t.row.icon,callback:function(a){e.$set(t.row,"icon",a)},expression:"scope.row.icon"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(a){return e.openIconsDialog(t.row.icon,t.$index)}},slot:"append"},[e._v("\n              选择\n            ")])],1)]}}])}),a("el-table-column",{attrs:{label:"图标背景色",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-color-picker",{staticClass:"color-picker",model:{value:t.row.iconBgColor,callback:function(a){e.$set(t.row,"iconBgColor",a)},expression:"scope.row.iconBgColor"}})]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.currentIcon},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}})],1)},re=[],ce=a("53fe"),de=a.n(ce),ue={components:{iconBox:$["a"]},data:function(){return{visible:!1,list:[],categoryList:[],iconsVisible:!1,currentIcon:"",currentIndex:""}},methods:{init:function(e){var t=this;this.list=JSON.parse(JSON.stringify(e)),this.getDictionaryData(),this.visible=!0,this.$nextTick((function(){t.setSort()}))},getDictionaryData:function(){var e=this;this.$store.dispatch("base/getDictionaryData",{sort:"WorkFlowCategory"}).then((function(t){e.categoryList=t}))},confirm:function(){for(var e=0;e<this.list.length;e++){var t=this.list[e];if(!t.fullName)return this.$message.warning("名称不能为空");if(!t.icon)return this.$message.warning("请选择图标");if(!t.iconBgColor)return this.$message.warning("请选择图标背景色")}this.visible=!1,this.$emit("refresh",this.list)},openIconsDialog:function(e,t){this.currentIcon=e,this.currentIndex=t,this.iconsVisible=!0},setIcon:function(e){this.list[this.currentIndex].icon=e},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];de.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,a)},handle:".drag-handler"})}}},pe=ue,fe=(a("59ed"),Object(y["a"])(pe,se,re,!1,null,"2055fcfc",null)),me=fe.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center todoData",attrs:{title:"选项设置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"main"},[a("JNPF-table",{ref:"dragTable",attrs:{data:e.list,hasNO:!1,"row-key":"id"}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"field",label:"名称",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入名称",maxlength:"50"},model:{value:t.row.fullName,callback:function(a){e.$set(t.row,"fullName",a)},expression:"scope.row.fullName"}})]}}])}),a("el-table-column",{attrs:{prop:"field",label:"图标",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入图标名称"},model:{value:t.row.icon,callback:function(a){e.$set(t.row,"icon",a)},expression:"scope.row.icon"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(a){return e.openIconsDialog(t.row.icon,t.$index)}},slot:"append"},[e._v("\n                选择\n              ")])],1)]}}])}),a("el-table-column",{attrs:{label:"图标颜色",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-color-picker",{staticClass:"color-picker",model:{value:t.row.iconBgColor,callback:function(a){e.$set(t.row,"iconBgColor",a)},expression:"scope.row.iconBgColor"}})]}}])}),a("el-table-column",{attrs:{prop:"dataLength",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择链接类型",filterable:"",clearable:""},on:{change:function(a){return e.linkTypeChange(t.$index)}},model:{value:t.row.linkType,callback:function(a){e.$set(t.row,"linkType",a)},expression:"scope.row.linkType"}},e._l(e.linkTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]}}])},[a("template",{slot:"header"},[a("p",[e._v("\n              链接类型\n              "),a("el-tooltip",{attrs:{content:"地址以http://或https://为开头",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)])],2),a("el-table-column",{attrs:{prop:"dataLength"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.linkType?a("JnpfTreeSelect",{attrs:{options:"pc"==e.showType?e.menuList:e.appMenuList,placeholder:"请选择菜单",lastLevel:"",clearable:""},on:{change:function(a){return e.getSelectVal(arguments,t.$index)}},model:{value:t.row.moduleId,callback:function(a){e.$set(t.row,"moduleId",a)},expression:"scope.row.moduleId"}}):e._e(),2==t.row.linkType?a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:t.row.urlAddress,callback:function(a){e.$set(t.row,"urlAddress",a)},expression:"scope.row.urlAddress"}},["pc"==e.showType?a("el-select",{staticStyle:{width:"80px"},attrs:{slot:"append"},slot:"append",model:{value:t.row.linkTarget,callback:function(a){e.$set(t.row,"linkTarget",a)},expression:"scope.row.linkTarget"}},[a("el-option",{attrs:{label:"_self",value:"_self"}}),a("el-option",{attrs:{label:"_blank",value:"_blank"}})],1):e._e()],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index)}}},[e._v("删除\n            ")])]}}])})],1),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addHandle()}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("添加")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("common.confirmButton")))])],1)]),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.currentIcon},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}})],1)},he=[],ve=a("61f7"),be={components:{iconBox:$["a"]},props:["menuList","appMenuList","showType"],data:function(){return{visible:!1,list:[],categoryList:[],iconsVisible:!1,currentIcon:"",currentIndex:"",linkTypeList:f["t"]}},methods:{init:function(e){var t=this;this.list=JSON.parse(JSON.stringify(e)),this.getDictionaryData(),this.visible=!0,this.$nextTick((function(){t.setSort()}))},getDictionaryData:function(){var e=this;this.$store.dispatch("base/getDictionaryData",{sort:"WorkFlowCategory"}).then((function(t){e.categoryList=t}))},confirm:function(){for(var e=0;e<this.list.length;e++){var t=this.list[e];if(!t.fullName)return this.$message.warning("名称不能为空");if(!t.icon)return this.$message.warning("请选择图标");if(!t.iconBgColor)return this.$message.warning("请选择图标颜色");if(1==t.linkType&&!t.urlAddress&&!t.moduleId)return this.$message.warning("请选择菜单");if(2==t.linkType&&!t.urlAddress)return this.$message.warning("链接地址不能为空");if(2==t.linkType&&!Object(ve["d"])(t.urlAddress))return this.$message.warning("请输入正确的链接地址")}this.visible=!1,this.$emit("refresh",this.list)},openIconsDialog:function(e,t){this.currentIcon=e,this.currentIndex=t,this.iconsVisible=!0},setIcon:function(e){this.list[this.currentIndex].icon=e},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];de.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,a)},handle:".drag-handler"})},getSelectVal:function(e,t){var a=e[1];this.list[t].type=a.type,this.list[t].urlAddress=a.urlAddress,a.linkTarget&&(this.list[t].linkTarget=a.linkTarget),a.propertyJson&&(this.list[t].propertyJson=a.propertyJson)},addHandle:function(){var e={fullName:"",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",icon:"icon-ym icon-ym-webDesign",iconBgColor:"#1890FF",type:2,id:this.jnpf.idGenerator()};this.list.push(e)},handleDel:function(e){this.list.splice(e,1)},linkTypeChange:function(e){this.list[e].urlAddress=""}}},ge=be,ye=(a("fda8"),Object(y["a"])(ge,_e,he,!1,null,"4582c320",null)),De=ye.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center todoData",attrs:{title:"选项设置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"main"},[a("JNPF-table",{ref:"dragTable",attrs:{data:e.list,hasNO:!1,"row-key":"id"}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"field",label:"名称",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入名称",maxlength:"50",clearable:""},model:{value:t.row.fullName,callback:function(a){e.$set(t.row,"fullName",a)},expression:"scope.row.fullName"}})]}}])}),1==e.type?a("el-table-column",{attrs:{prop:"num",width:"180px",label:"数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入数值",maxlength:"10"},model:{value:t.row.num,callback:function(a){e.$set(t.row,"num",a)},expression:"scope.row.num"}})]}}],null,!1,2537132932)}):a("el-table-column",{attrs:{prop:"field",label:"字段",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearchAsync,clearable:"",placeholder:"请输入字段"},on:{select:function(a){return e.handleSelect(a,t.$index)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!0),model:{value:t.row.field,callback:function(a){e.$set(t.row,"field",a)},expression:"scope.row.field"}})]}}])}),a("el-table-column",{attrs:{prop:"field",label:"单位名称",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"单位名称",maxlength:"5"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("el-table-column",{attrs:{prop:"field",label:"图标",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入图标名称"},model:{value:t.row.icon,callback:function(a){e.$set(t.row,"icon",a)},expression:"scope.row.icon"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(a){return e.openIconsDialog(t.row.icon,t.$index)}},slot:"append"},[e._v("\n                选择\n              ")])],1)]}}])}),a("el-table-column",{attrs:{label:"图标颜色",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-color-picker",{staticClass:"color-picker",attrs:{"color-format":"rgb"},model:{value:t.row.iconColor,callback:function(a){e.$set(t.row,"iconColor",a)},expression:"scope.row.iconColor"}})]}}])}),a("el-table-column",{attrs:{prop:"dataLength",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择链接类型",clearable:"",filterable:""},model:{value:t.row.linkType,callback:function(a){e.$set(t.row,"linkType",a)},expression:"scope.row.linkType"}},e._l(e.linkTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]}}])},[a("template",{slot:"header"},[a("p",[e._v("\n              链接类型\n              "),a("el-tooltip",{attrs:{content:"地址以http://或https://为开头",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)])],2),a("el-table-column",{attrs:{prop:"dataLength",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.linkType?a("JnpfTreeSelect",{attrs:{options:"pc"==e.showType?e.menuList:e.appMenuList,placeholder:"请选择菜单",lastLevel:"",clearable:""},on:{change:function(a){return e.getSelectVal(arguments,t.$index)}},model:{value:t.row.moduleId,callback:function(a){e.$set(t.row,"moduleId",a)},expression:"scope.row.moduleId"}}):e._e(),2==t.row.linkType?a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:t.row.urlAddress,callback:function(a){e.$set(t.row,"urlAddress",a)},expression:"scope.row.urlAddress"}},["pc"==e.showType?a("el-select",{staticStyle:{width:"80px"},attrs:{slot:"append"},slot:"append",model:{value:t.row.linkTarget,callback:function(a){e.$set(t.row,"linkTarget",a)},expression:"scope.row.linkTarget"}},[a("el-option",{attrs:{label:"_self",value:"_self"}}),a("el-option",{attrs:{label:"_blank",value:"_blank"}})],1):e._e()],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"50",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index)}}},[e._v("删除\n            ")])]}}])})],1),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addHandle()}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("添加")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("common.confirmButton")))])],1)]),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.currentIcon},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}})],1)},xe=[],Ce={components:{iconBox:$["a"]},props:["menuList","appMenuList","showType","type","interfaceId"],data:function(){return{visible:!1,list:[],categoryList:[],iconsVisible:!1,currentIcon:"",currentIndex:"",linkTypeList:f["t"],appLinkTypeList:f["appLinkTypeList"],dataTypeList:f["k"],allOptions:[]}},methods:{init:function(e){var t=this;this.list=JSON.parse(JSON.stringify(e)),this.getDictionaryData(),this.visible=!0,this.$nextTick((function(){t.setSort(),1!=t.type&&t.initFieldData()}))},getDictionaryData:function(){var e=this;this.$store.dispatch("base/getDictionaryData",{sort:"WorkFlowCategory"}).then((function(t){e.categoryList=t}))},confirm:function(){for(var e=0;e<this.list.length;e++){var t=this.list[e];if(!t.fullName)return this.$message.warning("名称不能为空");if(2==this.type&&!t.field)return this.$message.warning("字段不能为空");if(1==this.type&&!t.num)return this.$message.warning("数值不能为空");if(!t.icon)return this.$message.warning("请选择图标");if(!t.iconColor)return this.$message.warning("请选择图标颜色");if(1==t.linkType&&!t.urlAddress&&!t.moduleId)return this.$message.warning("请选择菜单");if(2==t.linkType&&!t.urlAddress)return this.$message.warning("链接地址不能为空");if(2==t.linkType&&!Object(ve["d"])(t.urlAddress))return this.$message.warning("请输入正确的链接地址")}this.visible=!1,this.$emit("refresh",this.list)},openIconsDialog:function(e,t){this.currentIcon=e,this.currentIndex=t,this.iconsVisible=!0},setIcon:function(e){this.list[this.currentIndex].icon=e},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];de.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,a)},handle:".drag-handler"})},getSelectVal:function(e,t){var a=e[1];this.list[t].type=a.type,this.list[t].urlAddress=a.urlAddress,a.linkTarget&&(this.list[t].linkTarget=a.linkTarget),a.propertyJson&&(this.list[t].propertyJson=a.propertyJson)},addHandle:function(){var e={fullName:"",moduleId:"",linkType:"",urlAddress:"",field:"",num:"",linkTarget:"_self",dataType:"static",icon:"icon-ym icon-ym-webDesign",iconColor:"rgb(74, 184, 255)",type:2,id:this.jnpf.idGenerator()};this.list.push(e)},handleDel:function(e){this.list.splice(e,1)},dataTypeChange:function(e){this.list[e].propsApi="",this.list[e].propsName=""},propsApiChange:function(e,t){var a=e[0],i=e[1];if(!a)return this.list[t].propsApi="",void(this.list[t].propsName="");this.list[t].propsApi=a,this.list[t].propsName=i.fullName},initFieldData:function(){var e=this;if(!this.interfaceId)return this.allOptions=[];Object(O["k"])(this.interfaceId).then((function(t){var a=t.data;e.allOptions=a.fieldJson?JSON.parse(a.fieldJson):[]}))},querySearchAsync:function(e,t){var a=e?this.allOptions.filter(this.createStateFilter(e)):this.allOptions;t(a)},createStateFilter:function(e){return function(t){return 0===t.defaultValue.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e,t){this.list[t].field=e.defaultValue}}},ke=Ce,Te=(a("13bd"),Object(y["a"])(ke,we,xe,!1,null,"2160d4f4",null)),Fe=Te.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center todoData",attrs:{title:"选项设置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"main"},[a("JNPF-table",{ref:"dragTable",attrs:{data:e.list,hasNO:!1,"row-key":"id"}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"field",label:"图片来源",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择数值类型",filterable:""},on:{change:function(a){return e.dataTypeChange(t.$index)}},model:{value:t.row.dataType,callback:function(a){e.$set(t.row,"dataType",a)},expression:"scope.row.dataType"}},e._l(e.imageStyleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"dataLength",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.dataType?a("single-img",{model:{value:t.row.imageUrl,callback:function(a){e.$set(t.row,"imageUrl",a)},expression:"scope.row.imageUrl"}}):2==t.row.dataType?a("el-input",{attrs:{placeholder:"请输入图片地址"},model:{value:t.row.imageUrl,callback:function(a){e.$set(t.row,"imageUrl",a)},expression:"scope.row.imageUrl"}}):a("interface-dialog",{attrs:{value:t.row.propsApi,title:t.row.propsName,popupTitle:"数据接口"},on:{change:function(a){return e.propsApiChange(arguments,t.$index)}}})]}}])}),a("el-table-column",{attrs:{prop:"field",label:"文本内容",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入文本内容",maxlength:"50"},model:{value:t.row.textDefaultValue,callback:function(a){e.$set(t.row,"textDefaultValue",a)},expression:"scope.row.textDefaultValue"}})]}}])}),a("el-table-column",{attrs:{prop:"dataLength",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择链接类型",clearable:"",filterable:""},model:{value:t.row.linkType,callback:function(a){e.$set(t.row,"linkType",a)},expression:"scope.row.linkType"}},e._l(e.linkTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]}}])},[a("template",{slot:"header"},[a("p",[e._v("\n              链接类型\n              "),a("el-tooltip",{attrs:{content:"地址以http://或https://为开头",placement:"top"}},[a("a",{staticClass:"el-icon-question tooltip-question"})])],1)])],2),a("el-table-column",{attrs:{prop:"dataLength",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.linkType?a("JnpfTreeSelect",{attrs:{options:"pc"==e.showType?e.menuList:e.appMenuList,placeholder:"请选择菜单",lastLevel:"",clearable:""},on:{change:function(a){return e.getSelectVal(arguments,t.$index)}},model:{value:t.row.moduleId,callback:function(a){e.$set(t.row,"moduleId",a)},expression:"scope.row.moduleId"}}):e._e(),2==t.row.linkType?a("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:t.row.urlAddress,callback:function(a){e.$set(t.row,"urlAddress",a)},expression:"scope.row.urlAddress"}},["pc"==e.showType?a("el-select",{staticStyle:{width:"80px"},attrs:{slot:"append"},slot:"append",model:{value:t.row.linkTarget,callback:function(a){e.$set(t.row,"linkTarget",a)},expression:"scope.row.linkTarget"}},[a("el-option",{attrs:{label:"_self",value:"_self"}}),a("el-option",{attrs:{label:"_blank",value:"_blank"}})],1):e._e()],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"50",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addHandle()}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("添加")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("common.confirmButton")))])],1)]),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.currentIcon},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}})],1)},Ne=[],Le=a("28c9"),Oe={components:{iconBox:$["a"],InterfaceDialog:R["a"],singleImg:Le["a"]},props:["menuList","appMenuList","showType"],data:function(){return{visible:!1,list:[],categoryList:[],iconsVisible:!1,currentIcon:"",currentIndex:"",linkTypeList:f["t"],imageStyleList:f["n"]}},methods:{init:function(e){var t=this;this.list=JSON.parse(JSON.stringify(e)),this.getDictionaryData(),this.visible=!0,this.$nextTick((function(){t.setSort()}))},getDictionaryData:function(){var e=this;this.$store.dispatch("base/getDictionaryData",{sort:"WorkFlowCategory"}).then((function(t){e.categoryList=t}))},confirm:function(){for(var e=0;e<this.list.length;e++){var t=this.list[e];if((1==t.dataType||2==t.dataType)&&!t.imageUrl)return this.$message.warning(2==t.dataType?"图片地址不能为空":"请上传图片");if(2==t.dataType&&!Object(ve["d"])(t.imageUrl))return this.$message.warning("请输入正确的图片地址");if(3==t.dataType&&!t.propsApi)return this.$message.warning("请选择请选择数据接口");if(1==t.linkType&&!t.urlAddress&&!t.moduleId)return this.$message.warning("请选择菜单");if(2==t.linkType&&!t.urlAddress)return this.$message.warning("链接地址不能为空");if(2==t.linkType&&!Object(ve["d"])(t.urlAddress))return this.$message.warning("请输入正确的链接地址")}this.visible=!1,this.$emit("refresh",this.list)},openIconsDialog:function(e,t){this.currentIcon=e,this.currentIndex=t,this.iconsVisible=!0},setIcon:function(e){this.list[this.currentIndex].icon=e},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];de.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,a)},handle:".drag-handler"})},getSelectVal:function(e,t){var a=e[1];this.list[t].type=a.type,this.list[t].urlAddress=a.urlAddress,a.linkTarget&&(this.list[t].linkTarget=a.linkTarget),a.propertyJson&&(this.list[t].propertyJson=a.propertyJson)},addHandle:function(){var e={mageUrl:"",dataType:2,propsApi:"",moduleId:"",linkType:"",urlAddress:"",linkTarget:"_self",textDefaultValue:"",id:this.jnpf.idGenerator()};this.list.push(e)},handleDel:function(e){this.list.splice(e,1)},dataTypeChange:function(e){this.list[e].propsApi="",this.list[e].propsName="",this.list[e].imageUrl=""},propsApiChange:function(e,t){var a=e[0],i=e[1];if(!a)return this.list[t].propsApi="",void(this.list[t].propsName="");this.list[t].propsApi=a,this.list[t].propsName=i.fullName}}},$e=Oe,Ie=(a("b551"),Object(y["a"])($e,Se,Ne,!1,null,"6b821e0c",null)),je=Ie.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["app"==e.showType?[a("el-form-item",{attrs:{label:"显示名称"}},[a("el-switch",{model:{value:e.activeData.option.showName,callback:function(t){e.$set(e.activeData.option,"showName",t)},expression:"activeData.option.showName"}})],1),a("el-form-item",{attrs:{label:"数据类型"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.dataType,callback:function(t){e.$set(e.activeData,"dataType",t)},expression:"activeData.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.dataType?a("el-form-item",{attrs:{label:"数据设置"}},[a("el-button",{on:{click:function(t){return e.showData(e.activeData.option.defaultValue)}}},[e._v("设置")])],1):e._e(),"dynamic"===e.activeData.dataType?a("el-form-item",{attrs:{label:"数据接口"}},[a("interface-dialog",{attrs:{value:e.activeData.propsApi,title:e.activeData.propsName,popupTitle:"数据接口"},on:{change:e.propsApiChange}})],1):e._e(),e.activeData.propsApi?a("refresh",{attrs:{refresh:e.activeData.refresh}}):e._e(),a("el-form-item",{attrs:{label:"行数据"}},[a("el-button",{on:{click:function(t){return e.showColumnData(e.activeData.option.appColumnList)}}},[e._v("设置")])],1),a("jnpf-form-tip-item",{attrs:{label:"显示条数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:50},model:{value:e.activeData.option.appCount,callback:function(t){e.$set(e.activeData.option,"appCount",t)},expression:"activeData.option.appCount"}})],1),e.activeData.option.showName?[a("el-form-item",{attrs:{label:"名称大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.nameFontSize,callback:function(t){e.$set(e.activeData.option,"nameFontSize",t)},expression:"activeData.option.nameFontSize"}})],1),a("el-form-item",{attrs:{label:"名称加粗"}},[a("el-switch",{model:{value:e.activeData.option.nameFontWeight,callback:function(t){e.$set(e.activeData.option,"nameFontWeight",t)},expression:"activeData.option.nameFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"名称颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.nameFontColor,callback:function(t){e.$set(e.activeData.option,"nameFontColor",t)},expression:"activeData.option.nameFontColor"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"数据大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.dataFontSize,callback:function(t){e.$set(e.activeData.option,"dataFontSize",t)},expression:"activeData.option.dataFontSize"}})],1),a("el-form-item",{attrs:{label:"数据加粗"}},[a("el-switch",{model:{value:e.activeData.option.dataFontWeight,callback:function(t){e.$set(e.activeData.option,"dataFontWeight",t)},expression:"activeData.option.dataFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"数据颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.dataFontColor,callback:function(t){e.$set(e.activeData.option,"dataFontColor",t)},expression:"activeData.option.dataFontColor"}})],1)]:[a("el-form-item",{attrs:{label:"风格类型"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},on:{change:e.renderKeyChange},model:{value:e.activeData.option.styleType,callback:function(t){e.$set(e.activeData.option,"styleType",t)},expression:"activeData.option.styleType"}},e._l(e.styleTypeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.activeData.option.styleType?[a("el-form-item",{attrs:{label:"显示边框"}},[a("el-switch",{model:{value:e.activeData.option.border,callback:function(t){e.$set(e.activeData.option,"border",t)},expression:"activeData.option.border"}})],1),a("jnpf-form-tip-item",{staticClass:"left-tree-query",attrs:{"tip-label":"启用：溢出省略号显示；<br/>禁用：显示全部信息，溢出换行显示",label:"溢出省略"}},[a("el-switch",{model:{value:e.activeData.option.showOverflow,callback:function(t){e.$set(e.activeData.option,"showOverflow",t)},expression:"activeData.option.showOverflow"}})],1),a("el-divider",[e._v("表头设置")]),a("el-form-item",{attrs:{label:"显示表头"}},[a("el-switch",{on:{change:e.renderKeyChange},model:{value:e.activeData.option.showHeader,callback:function(t){e.$set(e.activeData.option,"showHeader",t)},expression:"activeData.option.showHeader"}})],1),e.activeData.option.showHeader?[a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.headerFontSize,callback:function(t){e.$set(e.activeData.option,"headerFontSize",t)},expression:"activeData.option.headerFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.headerFontWeight,callback:function(t){e.$set(e.activeData.option,"headerFontWeight",t)},expression:"activeData.option.headerFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.headerFontColor,callback:function(t){e.$set(e.activeData.option,"headerFontColor",t)},expression:"activeData.option.headerFontColor"}})],1),a("el-form-item",{attrs:{label:"字体位置"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.headerLeft,callback:function(t){e.$set(e.activeData.option,"headerLeft",t)},expression:"activeData.option.headerLeft"}},e._l(e.alignList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1)],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.headerBgColor,callback:function(t){e.$set(e.activeData.option,"headerBgColor",t)},expression:"activeData.option.headerBgColor"}})],1)]:e._e(),a("el-divider",[e._v("表格设置")]),a("el-form-item",{attrs:{label:"显示序号"}},[a("el-switch",{on:{change:e.renderKeyChange},model:{value:e.activeData.option.tableIndex,callback:function(t){e.$set(e.activeData.option,"tableIndex",t)},expression:"activeData.option.tableIndex"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.tableFontSize,callback:function(t){e.$set(e.activeData.option,"tableFontSize",t)},expression:"activeData.option.tableFontSize"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.tableFontColor,callback:function(t){e.$set(e.activeData.option,"tableFontColor",t)},expression:"activeData.option.tableFontColor"}})],1)]:e._e(),3==e.activeData.option.styleType?a("el-form-item",{attrs:{label:"显示描述"}},[a("el-switch",{model:{value:e.activeData.option.describe,callback:function(t){e.$set(e.activeData.option,"describe",t)},expression:"activeData.option.describe"}})],1):e._e(),a("jnpf-form-tip-item",{attrs:{label:"显示条数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:50},on:{change:e.renderKeyChange},model:{value:e.activeData.option.tableCount,callback:function(t){e.$set(e.activeData.option,"tableCount",t)},expression:"activeData.option.tableCount"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.tableBgColor,callback:function(t){e.$set(e.activeData.option,"tableBgColor",t)},expression:"activeData.option.tableBgColor"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"奇行颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.tableOddLineColor,callback:function(t){e.$set(e.activeData.option,"tableOddLineColor",t)},expression:"activeData.option.tableOddLineColor"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"偶行颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.tableEvenLineColor,callback:function(t){e.$set(e.activeData.option,"tableEvenLineColor",t)},expression:"activeData.option.tableEvenLineColor"}})],1),1==e.activeData.option.styleType?a("el-divider",[e._v("列数据设置")]):e._e(),a("el-form-item",{attrs:{label:"数据类型"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.dataType,callback:function(t){e.$set(e.activeData,"dataType",t)},expression:"activeData.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.dataType?a("el-form-item",{attrs:{label:"数据设置"}},[a("el-button",{on:{click:function(t){return e.showData(e.activeData.option.defaultValue)}}},[e._v("设置")])],1):e._e(),"dynamic"===e.activeData.dataType?a("el-form-item",{attrs:{label:"数据接口"}},[a("interface-dialog",{attrs:{value:e.activeData.propsApi,title:e.activeData.propsName,popupTitle:"数据接口"},on:{change:e.propsApiChange}})],1):e._e(),e.activeData.propsApi?a("Refresh",{attrs:{refresh:e.activeData.refresh}}):e._e(),a("el-form-item",{attrs:{label:1==e.activeData.option.styleType?"列数据":"行数据"}},[a("el-button",{on:{click:function(t){return e.showColumnData(1==e.activeData.option.styleType?e.activeData.option.columnData:e.activeData.option.rowData,e.activeData.option.styleType)}}},[e._v("\n        设置")])],1)],e.areaVisible?a("JSONArea",{ref:"JSONArea",on:{refresh:e.updateOption}}):e._e(),e.columnVisible?a("ColumnData",{ref:"columnData",attrs:{showType:e.showType},on:{columnList:e.columnList}}):e._e()],2)},Ve=[],Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center dialog_height",attrs:{title:"选项设置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[1==e.type?a("JNPF-table",{ref:"dragTable",attrs:{data:e.list,hasNO:!1,"row-key":"id"}},[a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2),a("el-table-column",{attrs:{prop:"fullName",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.row.fullName,callback:function(a){e.$set(t.row,"fullName",a)},expression:"scope.row.fullName"}})]}}],null,!1,1054380744)}),a("el-table-column",{attrs:{prop:"filedName",label:"字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearchAsync,clearable:"",placeholder:"请输入字段"},on:{select:function(a){return e.handleSelect(a,t.$index)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!0),model:{value:t.row.filedName,callback:function(a){e.$set(t.row,"filedName",a)},expression:"scope.row.filedName"}})]}}],null,!1,1260925442)}),"app"!=e.showType?[a("el-table-column",{attrs:{prop:"sortable",label:"排序",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.sortable,callback:function(a){e.$set(t.row,"sortable",a)},expression:"scope.row.sortable"}})]}}],null,!1,1224267452)}),a("el-table-column",{attrs:{prop:"align",label:"冻结方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.fixed,callback:function(a){e.$set(t.row,"fixed",a)},expression:"scope.row.fixed"}},e._l(e.fixedOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.fullName,value:e.value}})})),1)]}}],null,!1,1249773682)}),a("el-table-column",{attrs:{prop:"align",label:"对齐方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.align,callback:function(a){e.$set(t.row,"align",a)},expression:"scope.row.align"}},e._l(e.alignOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.fullName,value:e.value}})})),1)]}}],null,!1,1285751410)}),a("el-table-column",{attrs:{prop:"width",label:"宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"宽度",min:0,precision:0,"controls-position":"right"},model:{value:t.row.width,callback:function(a){e.$set(t.row,"width",a)},expression:"scope.row.width"}})]}}],null,!1,2922497326)})]:e._e(),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDel(t.$index)}}},[e._v("删除")])]}}],null,!1,2079021643)})],2):a("el-table",{ref:"dragTable",attrs:{data:e.list,hasNO:!1}},[a("el-table-column",{attrs:{prop:"index",type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"fullName",label:"名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.fullName))])]}}])}),a("el-table-column",{attrs:{prop:"filedName",label:"字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearchAsync,clearable:"",placeholder:"请输入字段"},on:{select:function(a){return e.handleSelect(a,t.$index)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("div",{staticClass:"sale-order-popper-item"},[a("span",[e._v(e._s(i.defaultValue))])])]}}],null,!0),model:{value:t.row.filedName,callback:function(a){e.$set(t.row,"filedName",a)},expression:"scope.row.filedName"}})]}}])}),a("el-table-column",{attrs:{prop:"fontSize",label:"大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"大小",min:0,precision:0,"controls-position":"right"},model:{value:t.row.fontSize,callback:function(a){e.$set(t.row,"fontSize",a)},expression:"scope.row.fontSize"}})]}}])}),a("el-table-column",{attrs:{prop:"fontWeight",label:"加粗",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{model:{value:t.row.fontWeight,callback:function(a){e.$set(t.row,"fontWeight",a)},expression:"scope.row.fontWeight"}})]}}])}),a("el-table-column",{attrs:{prop:"fontColor",label:"颜色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-color-picker",{model:{value:t.row.fontColor,callback:function(a){e.$set(t.row,"fontColor",a)},expression:"scope.row.fontColor"}})]}}])})],1),1==e.type?a("div",{staticClass:"table-actions",on:{click:function(t){return e.addHandle()}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("添加")])],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)},Pe=[],Je={props:["showType"],components:{},data:function(){return{visible:!1,list:[],type:1,fixedOptions:[{value:"none",fullName:"无"},{value:"left",fullName:"左冻结"},{value:"right",fullName:"右冻结"}],alignOptions:[{value:"left",fullName:"左对齐"},{value:"center",fullName:"居中对齐"},{value:"right",fullName:"右对齐"}],interfaceId:"",allOptions:[]}},methods:{init:function(e,t,a){var i=this;this.type=t||1,this.list=e?JSON.parse(JSON.stringify(e)):[],this.visible=!0,this.interfaceId=a||"",this.$nextTick((function(){i.setSort(),i.initFieldData()}))},closeDialog:function(){if(!this.list.length)return this.$message.warning("数据不能为空");for(var e=0;e<this.list.length;e++){var t=this.list[e];if(!t.fullName)return this.$message.warning("名称不能为空");if(!t.filedName)return this.$message.warning("名称字段不能为空")}this.$emit("columnList",this.list),this.visible=!1},handleDel:function(e){this.list.splice(e,1)},addHandle:function(){var e={};e="app"===this.showType?{fullName:"",filedName:"",id:this.jnpf.idGenerator()}:{fullName:"",filedName:"",sortable:!1,fixed:"none",align:"center",width:0,id:this.jnpf.idGenerator()},this.list.push(e)},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=de.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,a)},handle:".drag-handler"})},initFieldData:function(){var e=this;if(!this.interfaceId)return this.allOptions=[];Object(O["k"])(this.interfaceId).then((function(t){var a=t.data;e.allOptions=a.fieldJson?JSON.parse(a.fieldJson):[]}))},querySearchAsync:function(e,t){var a=e?this.allOptions.filter(this.createStateFilter(e)):this.allOptions;t(a)},createStateFilter:function(e){return function(t){return 0===t.defaultValue.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e,t){this.list[t].filedName=e.defaultValue}}},Re=Je,Ke=(a("704f"),Object(y["a"])(Re,Ae,Pe,!1,null,"b6ef9594",null)),Be=Ke.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:"自动刷新"}},[a("el-switch",{model:{value:e.refresh.autoRefresh,callback:function(t){e.$set(e.refresh,"autoRefresh",t)},expression:"refresh.autoRefresh"}})],1),e.refresh.autoRefresh?a("el-form-item",{attrs:{label:"刷新间隔"}},[a("el-input",{attrs:{placeholder:"请输入",type:"number",min:"1",max:"1440",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))"},model:{value:e.refresh.autoRefreshTime,callback:function(t){e.$set(e.refresh,"autoRefreshTime",e._n(t))},expression:"refresh.autoRefreshTime"}},[a("template",{slot:"append"},[e._v("分钟")])],2)],1):e._e()],1)},ze=[],qe={props:["refresh"]},We=qe,Ue=Object(y["a"])(We,Ee,ze,!1,null,null,null),He=Ue.exports,Ge={components:{JSONArea:J,InterfaceDialog:R["a"],ColumnData:Be,Refresh:He},props:["activeData","showType"],data:function(){return{areaVisible:!1,alignList:f["a"],columnVisible:!1,styleTypeOptions:[{label:"表格",value:1},{label:"列表（横向）",value:2},{label:"列表（纵向）",value:3}]}},watch:{},methods:{showColumnData:function(e,t){var a=this;this.columnVisible=!0,this.$nextTick((function(){a.$refs.columnData.init(e,t,a.activeData.propsApi)}))},showData:function(e){var t=this;this.areaVisible=!0,this.$nextTick((function(){t.$refs.JSONArea.init(e)}))},renderKeyChange:function(){this.activeData.renderKey=+new Date},updateOption:function(e){this.activeData.option.defaultValue=e?JSON.parse(e):[],this.renderKeyChange()},columnList:function(e){e&&("app"===this.showType?this.activeData.option.appColumnList=e:1==this.activeData.option.styleType?this.activeData.option.columnData=e:this.activeData.option.rowData=e,this.renderKeyChange())},dataTypeChange:function(){this.activeData.propsApi="",this.activeData.propsName="",this.activeData.option.defaultValue=[],this.renderKeyChange()},propsApiChange:function(e,t){e?(this.activeData.propsApi=e,this.activeData.propsName=t.fullName,this.activeData.refresh.autoRefresh=!1):(this.activeData.propsApi="",this.activeData.propsName=""),this.renderKeyChange()}}},Qe=Ge,Ye=Object(y["a"])(Qe,Me,Ve,!1,null,null,null),Ze=Ye.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:"文本大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.textFontSize,callback:function(t){e.$set(e.activeData.option,"textFontSize",t)},expression:"activeData.option.textFontSize"}})],1),a("el-form-item",{attrs:{label:"文本加粗"}},[a("el-switch",{model:{value:e.activeData.option.textFontWeight,callback:function(t){e.$set(e.activeData.option,"textFontWeight",t)},expression:"activeData.option.textFontWeight"}})],1),"text"==e.activeData.jnpfKey?a("el-form-item",{attrs:{label:"文本斜体"}},[a("el-switch",{model:{value:e.activeData.option.textFontStyle,callback:function(t){e.$set(e.activeData.option,"textFontStyle",t)},expression:"activeData.option.textFontStyle"}})],1):e._e(),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"文本颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.textFontColor,callback:function(t){e.$set(e.activeData.option,"textFontColor",t)},expression:"activeData.option.textFontColor"}})],1),a("el-form-item",{attrs:{label:"文本位置"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.textLeft,callback:function(t){e.$set(e.activeData.option,"textLeft",t)},expression:"activeData.option.textLeft"}},e._l(e.alignList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)],1),"text"==e.activeData.jnpfKey?a("el-form-item",{attrs:{label:"文本下划线"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.textUnderLine,callback:function(t){e.$set(e.activeData.option,"textUnderLine",t)},expression:"activeData.option.textUnderLine"}},e._l(e.underLineList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)],1):e._e(),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.textBgColor,callback:function(t){e.$set(e.activeData.option,"textBgColor",t)},expression:"activeData.option.textBgColor"}})],1)],1)},et=[],tt={props:["activeData"],data:function(){return{alignList:f["a"],underLineList:f["J"]}},methods:{}},at=tt,it=Object(y["a"])(at,Xe,et,!1,null,null,null),lt=it.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:"地图选择"}},[a("el-cascader",{attrs:{options:e.cascaderOptions,"show-all-levels":!1,props:{checkStrictly:!0,value:"enCode",label:"fullName"}},on:{change:e.cascaderChange},model:{value:e.activeData.option.mapType,callback:function(t){e.$set(e.activeData.option,"mapType",t)},expression:"activeData.option.mapType"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.bgColor,callback:function(t){e.$set(e.activeData.option,"bgColor",t)},expression:"activeData.option.bgColor"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"区域颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.geoAreaColor,callback:function(t){e.$set(e.activeData.option,"geoAreaColor",t)},expression:"activeData.option.geoAreaColor"}})],1),a("el-form-item",{attrs:{label:"区域名称"}},[a("el-switch",{model:{value:e.activeData.option.geoLabelShow,callback:function(t){e.$set(e.activeData.option,"geoLabelShow",t)},expression:"activeData.option.geoLabelShow"}})],1),e.activeData.option.geoLabelShow?[a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.geoLabelFontSize,callback:function(t){e.$set(e.activeData.option,"geoLabelFontSize",t)},expression:"activeData.option.geoLabelFontSize"}})],1),"pc"==e.showType?a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.geoLabelFontWeight,callback:function(t){e.$set(e.activeData.option,"geoLabelFontWeight",t)},expression:"activeData.option.geoLabelFontWeight"}})],1):e._e(),a("el-form-item",{attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.geoLabelColor,callback:function(t){e.$set(e.activeData.option,"geoLabelColor",t)},expression:"activeData.option.geoLabelColor"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"区域线"}},[a("el-slider",{attrs:{min:0,max:10,step:1},model:{value:e.activeData.option.geoBorderWidth,callback:function(t){e.$set(e.activeData.option,"geoBorderWidth",t)},expression:"activeData.option.geoBorderWidth"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"区域线颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.geoBorderColor,callback:function(t){e.$set(e.activeData.option,"geoBorderColor",t)},expression:"activeData.option.geoBorderColor"}})],1),"pc"==e.showType?[a("el-form-item",{attrs:{label:"阴影大小"}},[a("el-slider",{attrs:{min:0,max:5,step:1},model:{value:e.activeData.option.geoShadowOffset,callback:function(t){e.$set(e.activeData.option,"geoShadowOffset",t)},expression:"activeData.option.geoShadowOffset"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"阴影颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.geoShadowColor,callback:function(t){e.$set(e.activeData.option,"geoShadowColor",t)},expression:"activeData.option.geoShadowColor"}})],1),a("el-form-item",{attrs:{label:"鼠标缩放"}},[a("el-switch",{model:{value:e.activeData.option.geoRoam,callback:function(t){e.$set(e.activeData.option,"geoRoam",t)},expression:"activeData.option.geoRoam"}})],1),a("el-form-item",{attrs:{label:"缩放比例"}},[a("el-slider",{attrs:{min:.5,max:5,step:.1},model:{value:e.activeData.option.mspScale,callback:function(t){e.$set(e.activeData.option,"mspScale",t)},expression:"activeData.option.mspScale"}})],1),a("el-form-item",{attrs:{label:"地图长宽比"}},[a("el-slider",{attrs:{min:.25,max:1.5,step:.05},model:{value:e.activeData.option.geoAspectScale,callback:function(t){e.$set(e.activeData.option,"geoAspectScale",t)},expression:"activeData.option.geoAspectScale"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"钻取"}},[a("el-switch",{model:{value:e.activeData.option.drillDown,callback:function(t){e.$set(e.activeData.option,"drillDown",t)},expression:"activeData.option.drillDown"}})],1),e.activeData.option.drillDown?[a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.drillDownFontSize,callback:function(t){e.$set(e.activeData.option,"drillDownFontSize",t)},expression:"activeData.option.drillDownFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.drillDownFontWeight,callback:function(t){e.$set(e.activeData.option,"drillDownFontWeight",t)},expression:"activeData.option.drillDownFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.drillDownColor,callback:function(t){e.$set(e.activeData.option,"drillDownColor",t)},expression:"activeData.option.drillDownColor"}})],1)]:e._e(),"pc"==e.showType?[a("el-divider",[e._v("视觉设置")]),a("el-form-item",{attrs:{label:"视觉类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.visualMapType,callback:function(t){e.$set(e.activeData.option,"visualMapType",t)},expression:"activeData.option.visualMapType"}},[a("el-radio-button",{key:"continuous",attrs:{label:"continuous"}},[e._v("连续")]),a("el-radio-button",{key:"piecewise",attrs:{label:"piecewise"}},[e._v("分段")])],1)],1),a("el-form-item",{attrs:{label:"最小值"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},on:{change:e.onVisualMapMinChange},model:{value:e.activeData.option.visualMapMin,callback:function(t){e.$set(e.activeData.option,"visualMapMin",t)},expression:"activeData.option.visualMapMin"}})],1),a("el-form-item",{attrs:{label:"最大值"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},on:{change:e.onVisualMapMaxChange},model:{value:e.activeData.option.visualMapMax,callback:function(t){e.$set(e.activeData.option,"visualMapMax",t)},expression:"activeData.option.visualMapMax"}})],1)]:e._e(),1==e.activeData.option.styleType||4==e.activeData.option.styleType?[a("el-divider",[e._v("散点设置")]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"散点类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.seriesType,callback:function(t){e.$set(e.activeData.option,"seriesType",t)},expression:"activeData.option.seriesType"}},[a("el-radio-button",{key:"scatter",attrs:{label:"scatter"}},[e._v("散点")]),a("el-radio-button",{key:"effectScatter",attrs:{label:"effectScatter"}},[e._v("涟漪散点")])],1)],1),a("jnpf-form-tip-item",{attrs:{label:"显示数量","tip-label":"置空时，则显示全部数据"}},[a("el-input-number",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{"controls-position":"right",min:0,max:2e3},model:{value:e.activeData.option.showNumber,callback:function(t){e.$set(e.activeData.option,"showNumber",t)},expression:"activeData.option.showNumber"}}),a("el-input-number",{directives:[{name:"show",rawName:"v-show",value:"pc"!==e.showType,expression:"showType !== 'pc'"}],attrs:{"controls-position":"right",min:0,max:2e3},model:{value:e.activeData.option.appShowNumber,callback:function(t){e.$set(e.activeData.option,"appShowNumber",t)},expression:"activeData.option.appShowNumber"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"透明度"}},[a("el-slider",{attrs:{min:0,max:1,step:.1},model:{value:e.activeData.option.seriesItemStyleOpacity,callback:function(t){e.$set(e.activeData.option,"seriesItemStyleOpacity",t)},expression:"activeData.option.seriesItemStyleOpacity"}})],1)]:e._e(),4==e.activeData.option.styleType&&"pc"==e.showType?[a("el-divider",[e._v("柱形排名设置")]),a("el-form-item",{attrs:{label:"标题名称"}},[a("el-input",{attrs:{placeholder:"请输入标题名称"},model:{value:e.activeData.option.barTitleText,callback:function(t){e.$set(e.activeData.option,"barTitleText",t)},expression:"activeData.option.barTitleText"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.barTitleTextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"barTitleTextStyleFontSize",t)},expression:"activeData.option.barTitleTextStyleFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.barTitleTextStyleFontWeight,callback:function(t){e.$set(e.activeData.option,"barTitleTextStyleFontWeight",t)},expression:"activeData.option.barTitleTextStyleFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.barTitleTextStyleColor,callback:function(t){e.$set(e.activeData.option,"barTitleTextStyleColor",t)},expression:"activeData.option.barTitleTextStyleColor"}})],1),a("el-form-item",{attrs:{label:"底边距"}},[a("el-slider",{attrs:{min:0,max:600,step:1},model:{value:e.activeData.option.berGridBottom,callback:function(t){e.$set(e.activeData.option,"berGridBottom",t)},expression:"activeData.option.berGridBottom"}})],1),a("el-form-item",{attrs:{label:"右边距"}},[a("el-slider",{attrs:{min:0,max:100,step:1},model:{value:e.activeData.option.berGridRight,callback:function(t){e.$set(e.activeData.option,"berGridRight",t)},expression:"activeData.option.berGridRight"}})],1),a("el-form-item",{attrs:{label:"顶边距"}},[a("el-slider",{attrs:{min:0,max:100,step:1},model:{value:e.activeData.option.berGridTop,callback:function(t){e.$set(e.activeData.option,"berGridTop",t)},expression:"activeData.option.berGridTop"}})],1)]:e._e(),1!=e.activeData.option.styleType&&4!=e.activeData.option.styleType||"pc"!=e.showType?e._e():[a("el-divider",[e._v("轮播设置")]),a("el-form-item",{attrs:{label:"开启轮播"}},[a("el-switch",{model:{value:e.activeData.option.autoCarousel,callback:function(t){e.$set(e.activeData.option,"autoCarousel",t)},expression:"activeData.option.autoCarousel"}})],1),e.activeData.option.autoCarousel?a("el-form-item",{attrs:{label:"轮播间隔"}},[a("el-input",{attrs:{placeholder:"请输入轮播间隔",type:"number",min:100,max:5e5},model:{value:e.activeData.option.autoCarouselTime,callback:function(t){e.$set(e.activeData.option,"autoCarouselTime",t)},expression:"activeData.option.autoCarouselTime"}},[a("template",{slot:"append"},[e._v("ms")])],2)],1):e._e()],2==e.activeData.option.styleType&&"pc"==e.showType?[a("el-divider",[e._v("热力设置")]),a("el-form-item",{attrs:{label:" 点大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.activeData.option.seriesPointSize,callback:function(t){e.$set(e.activeData.option,"seriesPointSize",t)},expression:"activeData.option.seriesPointSize"}})],1),a("el-form-item",{attrs:{label:"点模糊大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.activeData.option.seriesBlurSize,callback:function(t){e.$set(e.activeData.option,"seriesBlurSize",t)},expression:"activeData.option.seriesBlurSize"}})],1),a("el-form-item",{attrs:{label:"透明度"}},[a("el-slider",{attrs:{min:0,max:5,step:.1},model:{value:e.activeData.option.seriesMaxOpacity,callback:function(t){e.$set(e.activeData.option,"seriesMaxOpacity",t)},expression:"activeData.option.seriesMaxOpacity"}})],1)]:e._e(),3==e.activeData.option.styleType&&"pc"==e.showType?[a("el-divider",[e._v("柱形设置")]),a("el-form-item",{attrs:{label:"宽度"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:e.activeData.option.seriesBarWidth,callback:function(t){e.$set(e.activeData.option,"seriesBarWidth",t)},expression:"activeData.option.seriesBarWidth"}})],1),a("el-form-item",{attrs:{label:"弧度"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:e.activeData.option.seriesItemStyleBarBorderRadius,callback:function(t){e.$set(e.activeData.option,"seriesItemStyleBarBorderRadius",t)},expression:"activeData.option.seriesItemStyleBarBorderRadius"}})],1)]:e._e()],2)},nt=[],st={props:["activeData","cascaderOptions","showType"],methods:{cascaderChange:function(){this.activeData.option.updateMapType=+new Date},onVisualMapMinChange:function(e){e>this.activeData.option.visualMapMax&&this.$message.warning("最小值不能超过最大值，请重新输入")},onVisualMapMaxChange:function(e){e<this.activeData.option.visualMapMin&&this.$message.warning("最大值不能小于最小值，请重新输入")}}},rt=st,ct=Object(y["a"])(rt,ot,nt,!1,null,null,null),dt=ct.exports,ut={props:["activeData","menuList","appMenuList","showType"],components:{draggable:S.a,popupEditor:ne,todoData:me,CommonFunData:De,DataBoardData:Fe,CarouselData:je,InterfaceDialog:R["a"],textSet:lt,MapSet:dt,Link:H,TableList:Ze,Refresh:He,singleImg:Le["a"]},data:function(){return{cascaderOptions:[],styleTypeOptions:[],tempData:[],fileList:[],editorVisible:!1,todoDataVisible:!1,commonFunDataVisible:!1,dataBoardDataVisible:!1,carouselDataVisible:!1,alignList:f["a"],underLineList:f["J"],linkTypeList:f["t"],directionList:f["l"],indicatorPositionList:f["o"],arrowList:f["e"],fillStyleList:f["m"],playNumberList:f["A"],layoutStyleList:f["r"],appLayoutStyleList:f["b"],sortList:f["D"],textStyleList:f["H"],noStyleTypeList:f["y"],appTodoStyleList:f["d"],commonFuncStyleList:f["j"]}},watch:{"activeData.jnpfKey":{handler:function(e){this.getStyleTypeOptions()},immediate:!0}},computed:{linkType:function(){return this.activeData.option.linkType||""}},created:function(){var e=this;Object(o["h"])().then((function(t){e.cascaderOptions=t.data})),this.fileList=[],"video"==this.activeData.jnpfKey&&this.activeData.option.defaultValue&&1==this.activeData.option.styleType&&(this.fileList=[this.activeData.option.defaultValue])},methods:{initBarType:function(){var e=this;if(7==this.activeData.option.styleType&&"barChart"==this.activeData.jnpfKey){var t=this.activeData.option.defaultValue||[];if(Array.isArray(t)){this.activeData.option.barType=[];var a=Array.from(new Set(t.map((function(e){return e.type}))));a.map((function(t,a){e.activeData.option.barType.push({title:t,type:1==a?"line":"bar"})}))}}},getStyleTypeOptions:function(){this.styleTypeOptions=[];var e=this.activeData.jnpfKey;"barChart"==e&&(this.styleTypeOptions=JSON.parse(JSON.stringify(f["f"]))),"lineChart"==e&&(this.styleTypeOptions=f["s"]),"pieChart"==e&&(this.styleTypeOptions=f["z"]),"radarChart"==e&&(this.styleTypeOptions=f["B"]),"rankList"==e&&(this.styleTypeOptions=f["C"]),"timeAxis"==e&&(this.styleTypeOptions=f["I"]),"image"==e&&(this.styleTypeOptions=f["n"]),"video"==e&&(this.styleTypeOptions=f["K"]),"mapChart"==e&&(this.styleTypeOptions=f["u"]),"tableList"==e&&(this.styleTypeOptions=f["tableTypeList"])},getTitle:function(){var e=this.activeData.jnpfKey;return"barChart"==e?"柱状图设置":"lineChart"==e?"折线图设置":"pieChart"==e?"饼图设置":"radarChart"==e?"雷达图设置":"rankList"==e?"排行榜设置":"timeAxis"==e?"时间轴设置":"text"==e?"文本设置":"image"==e?"图片设置":"carousel"==e?"轮播图设置":"video"==e?"视频设置":"iframe"==e?"iframe设置":"mapChart"==e?"地图设置":"todo"==e?"待办设置":"commonFunc"==e?"常用功能设置":"dataBoard"==e?"数据面板设置":"tableList"==e?"表格列表设置":void 0},getTipLabel:function(){var e=this.activeData.jnpfKey;return"barChart"==e?"APP不支持背景类型，默认显示基础类型":"lineChart"==e?"APP不支持堆叠类型，默认显示基础类型":"mapChart"==e?"APP不支持柱形和柱形排名类型，默认显示散点类型":""},addSelectItem:function(){this.activeData.option.columnOptions.push({value:"",label:""})},delSelectItem:function(e){this.activeData.option.columnOptions.length>1&&this.activeData.option.columnOptions.splice(e,1)},showEditor:function(){var e=this;this.editorVisible=!0,this.$nextTick((function(){e.$refs.popupEditor.init(e.activeData.option.defaultValue)}))},getTempData:function(){var e=this;this.tempData.length||Object(L["o"])({type:1}).then((function(t){e.tempData=t.data.list}))},showData:function(e,t){var a=this;this[t]=!0,this.$nextTick((function(){"pc"==a.showType?a.$refs[e].init(a.activeData.option.defaultValue):a.$refs[e].init(a.activeData.option.appDefaultValue)}))},showDataTodoData:function(){var e=this;this.todoDataVisible=!0,this.$nextTick((function(){e.$refs.todoData.init(e.activeData.option.defaultValue)}))},refresh:function(e){var t="pc"==this.showType?"defaultValue":"appDefaultValue";this.activeData.option[t]=e,this.renderKeyChange()},commonRefresh:function(e){this.activeData.option.defaultValue=e,this.renderKeyChange()},uploadFileChange:function(e){this.activeData.option.defaultValue=e.length?e[0]:""},textChange:function(){this.activeData.option.defaultValue="","static"==this.activeData.dataType&&(this.activeData.option.defaultValue="JNPF快速开发平台")},dataTypeChange:function(){this.activeData.option.defaultValue="","static"==this.activeData.dataType&&(this.activeData.option.defaultValue="JNPF快速开发平台"),this.activeData.propsApi="",this.activeData.propsName=""},dataBoardDataTypeChange:function(){this.activeData.propsApi="",this.activeData.propsName="",this.renderKeyChange()},propsApiChange:function(e,t){e?(this.activeData.propsApi=e,this.activeData.propsName=t.fullName,this.activeData.refresh.autoRefresh=!1):(this.activeData.propsApi="",this.activeData.propsName=""),this.renderKeyChange()},renderKeyChange:function(){this.activeData.renderKey=+new Date},styleTypeChange:function(e){var t=this.activeData.jnpfKey;"image"!=t&&"video"!=t||(this.activeData.propsApi="",this.activeData.propsName="",this.activeData.dataType="static",this.activeData.option.defaultValue="","3"==e&&(this.activeData.dataType="dynamic"))}}},pt=ut,ft=(a("ba8c"),Object(y["a"])(pt,X,ee,!1,null,"46f973c7",null)),mt=ft.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"图表标题设置",name:"2"}},[a("el-form-item",{attrs:{label:"标题名称"}},[a("el-input",{attrs:{placeholder:"请输入标题名称"},model:{value:e.activeData.option.titleText,callback:function(t){e.$set(e.activeData.option,"titleText",t)},expression:"activeData.option.titleText"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.titleTextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"titleTextStyleFontSize",t)},expression:"activeData.option.titleTextStyleFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.titleTextStyleFontWeight,callback:function(t){e.$set(e.activeData.option,"titleTextStyleFontWeight",t)},expression:"activeData.option.titleTextStyleFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.titleTextStyleColor,callback:function(t){e.$set(e.activeData.option,"titleTextStyleColor",t)},expression:"activeData.option.titleTextStyleColor"}})],1),a("el-form-item",{attrs:{label:"字体位置"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.titleLeft,callback:function(t){e.$set(e.activeData.option,"titleLeft",t)},expression:"activeData.option.titleLeft"}},e._l(e.alignList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.titleBgColor,callback:function(t){e.$set(e.activeData.option,"titleBgColor",t)},expression:"activeData.option.titleBgColor"}})],1)],1)},ht=[],vt={props:["activeData","showType"],data:function(){return{alignList:f["a"]}}},bt=vt,gt=Object(y["a"])(bt,_t,ht,!1,null,null,null),yt=gt.exports,Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"图表副标题设置",name:"3"}},[a("el-form-item",{attrs:{label:"副标题名称"}},[a("el-input",{attrs:{placeholder:"请输入副标题名称"},model:{value:e.activeData.option.titleSubtext,callback:function(t){e.$set(e.activeData.option,"titleSubtext",t)},expression:"activeData.option.titleSubtext"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.titleSubtextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"titleSubtextStyleFontSize",t)},expression:"activeData.option.titleSubtextStyleFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.titleSubtextStyleFontWeight,callback:function(t){e.$set(e.activeData.option,"titleSubtextStyleFontWeight",t)},expression:"activeData.option.titleSubtextStyleFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.titleSubtextStyleColor,callback:function(t){e.$set(e.activeData.option,"titleSubtextStyleColor",t)},expression:"activeData.option.titleSubtextStyleColor"}})],1)],1)},wt=[],xt={props:["activeData","showType"],data:function(){return{}},methods:{}},Ct=xt,kt=Object(y["a"])(Ct,Dt,wt,!1,null,null,null),Tt=kt.exports,Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return 6!=e.activeData.option.styleType||"app"!=e.showType?a("el-collapse-item",{attrs:{title:"柱体设置",name:"4"}},[a("el-form-item",{attrs:{label:"宽度"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:e.activeData.option.seriesBarWidth,callback:function(t){e.$set(e.activeData.option,"seriesBarWidth",t)},expression:"activeData.option.seriesBarWidth"}})],1),2!=e.activeData.option.styleType||"app"!=e.showType?a("el-form-item",{attrs:{label:"弧度"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:e.activeData.option.seriesItemStyleBarBorderRadius,callback:function(t){e.$set(e.activeData.option,"seriesItemStyleBarBorderRadius",t)},expression:"activeData.option.seriesItemStyleBarBorderRadius"}})],1):e._e()],1):e._e()},St=[],Nt={props:["activeData","showType"],data:function(){return{}},methods:{}},Lt=Nt,Ot=Object(y["a"])(Lt,Ft,St,!1,null,null,null),$t=Ot.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"X轴设置",name:"5"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType=='pc'"}],attrs:{label:"坐标轴类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.category,callback:function(t){e.$set(e.activeData.option,"category",t)},expression:"activeData.option.category"}},e._l(e.categoryList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)],1),a("el-form-item",{attrs:{label:"显示坐标轴"}},[a("el-switch",{model:{value:e.activeData.option.xAxisShow,callback:function(t){e.$set(e.activeData.option,"xAxisShow",t)},expression:"activeData.option.xAxisShow"}})],1),e.activeData.option.xAxisShow?[a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"坐标轴颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.xAxisAxisLineLineStyleColor,callback:function(t){e.$set(e.activeData.option,"xAxisAxisLineLineStyleColor",t)},expression:"activeData.option.xAxisAxisLineLineStyleColor"}})],1),"pc"==e.showType?[a("el-form-item",{attrs:{label:"X轴名称"}},[a("el-input",{attrs:{placeholder:"请输入X轴名称"},model:{value:e.activeData.option.xAxisName,callback:function(t){e.$set(e.activeData.option,"xAxisName",t)},expression:"activeData.option.xAxisName"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.xAxisNameTextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"xAxisNameTextStyleFontSize",t)},expression:"activeData.option.xAxisNameTextStyleFontSize"}})],1),e.activeData.option.xAxisShow?a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.xAxisNameTextStyleFontWeight,callback:function(t){e.$set(e.activeData.option,"xAxisNameTextStyleFontWeight",t)},expression:"activeData.option.xAxisNameTextStyleFontWeight"}})],1):e._e(),e.activeData.option.xAxisShow?a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.xAxisNameTextStyleColor,callback:function(t){e.$set(e.activeData.option,"xAxisNameTextStyleColor",t)},expression:"activeData.option.xAxisNameTextStyleColor"}})],1):e._e()]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType=='pc'"}],attrs:{label:"标签大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.xAxisAxisLabelTextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"xAxisAxisLabelTextStyleFontSize",t)},expression:"activeData.option.xAxisAxisLabelTextStyleFontSize"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType=='pc'"}],attrs:{label:"标签加粗"}},[a("el-switch",{model:{value:e.activeData.option.xAxisAxisLabelTextFontWeight,callback:function(t){e.$set(e.activeData.option,"xAxisAxisLabelTextFontWeight",t)},expression:"activeData.option.xAxisAxisLabelTextFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"标签颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.xAxisAxisLabelTextStyleColor,callback:function(t){e.$set(e.activeData.option,"xAxisAxisLabelTextStyleColor",t)},expression:"activeData.option.xAxisAxisLabelTextStyleColor"}})],1),a("el-form-item",{attrs:{label:"标签角度"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:e.activeData.option.xAxisAxisLabelRotate,callback:function(t){e.$set(e.activeData.option,"xAxisAxisLabelRotate",t)},expression:"activeData.option.xAxisAxisLabelRotate"}})],1),a("el-form-item",{attrs:{label:"显示网格线"}},[a("el-switch",{model:{value:e.activeData.option.xAxisSplitLineShow,callback:function(t){e.$set(e.activeData.option,"xAxisSplitLineShow",t)},expression:"activeData.option.xAxisSplitLineShow"}})],1),e.activeData.option.xAxisSplitLineShow?a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"网格线颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.xAxisSplitLineLineStyleColor,callback:function(t){e.$set(e.activeData.option,"xAxisSplitLineLineStyleColor",t)},expression:"activeData.option.xAxisSplitLineLineStyleColor"}})],1):e._e()]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType=='pc'"}],attrs:{label:"反转"}},[a("el-switch",{model:{value:e.activeData.option.xAxisInverse,callback:function(t){e.$set(e.activeData.option,"xAxisInverse",t)},expression:"activeData.option.xAxisInverse"}})],1)],2)},jt=[],Mt=[{label:"类型",value:"category"},{label:"数值",value:"value"}],Vt={props:["activeData","showType"],data:function(){return{categoryList:Mt}},methods:{}},At=Vt,Pt=Object(y["a"])(At,It,jt,!1,null,null,null),Jt=Pt.exports,Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"Y轴设置",name:"6"}},[a("el-form-item",{attrs:{label:"显示坐标轴"}},[a("el-switch",{model:{value:e.activeData.option.yAxisShow,callback:function(t){e.$set(e.activeData.option,"yAxisShow",t)},expression:"activeData.option.yAxisShow"}})],1),e.activeData.option.yAxisShow?[a("el-form-item",{attrs:{label:"坐标轴颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.yAxisAxisLineLineStyleColor,callback:function(t){e.$set(e.activeData.option,"yAxisAxisLineLineStyleColor",t)},expression:"activeData.option.yAxisAxisLineLineStyleColor"}})],1),"pc"==e.showType?[a("el-form-item",{attrs:{label:"Y轴名称"}},[a("el-input",{attrs:{placeholder:"请输入Y轴名称"},model:{value:e.activeData.option.yAxisName,callback:function(t){e.$set(e.activeData.option,"yAxisName",t)},expression:"activeData.option.yAxisName"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.yAxisNameTextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"yAxisNameTextStyleFontSize",t)},expression:"activeData.option.yAxisNameTextStyleFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.yAxisNameTextStyleFontWeight,callback:function(t){e.$set(e.activeData.option,"yAxisNameTextStyleFontWeight",t)},expression:"activeData.option.yAxisNameTextStyleFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.yAxisNameTextStyleColor,callback:function(t){e.$set(e.activeData.option,"yAxisNameTextStyleColor",t)},expression:"activeData.option.yAxisNameTextStyleColor"}})],1)]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"标签大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.yAxisAxisLabelTextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"yAxisAxisLabelTextStyleFontSize",t)},expression:"activeData.option.yAxisAxisLabelTextStyleFontSize"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"标签加粗"}},[a("el-switch",{model:{value:e.activeData.option.yAxisAxisLabelTextFontWeight,callback:function(t){e.$set(e.activeData.option,"yAxisAxisLabelTextFontWeight",t)},expression:"activeData.option.yAxisAxisLabelTextFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"标签颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.yAxisAxisLabelTextStyleColor,callback:function(t){e.$set(e.activeData.option,"yAxisAxisLabelTextStyleColor",t)},expression:"activeData.option.yAxisAxisLabelTextStyleColor"}})],1),a("el-form-item",{attrs:{label:"显示网格线"}},[a("el-switch",{model:{value:e.activeData.option.yAxisSplitLineShow,callback:function(t){e.$set(e.activeData.option,"yAxisSplitLineShow",t)},expression:"activeData.option.yAxisSplitLineShow"}})],1),e.activeData.option.yAxisSplitLineShow?a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"网格线颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.yAxisSplitLineLineStyleColor,callback:function(t){e.$set(e.activeData.option,"yAxisSplitLineLineStyleColor",t)},expression:"activeData.option.yAxisSplitLineLineStyleColor"}})],1):e._e()]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType == 'pc'"}],attrs:{label:"反转"}},[a("el-switch",{model:{value:e.activeData.option.yAxisInverse,callback:function(t){e.$set(e.activeData.option,"yAxisInverse",t)},expression:"activeData.option.yAxisInverse"}})],1)],2)},Kt=[],Bt={props:["activeData","showType"],data:function(){return{}},methods:{}},Et=Bt,zt=Object(y["a"])(Et,Rt,Kt,!1,null,null,null),qt=zt.exports,Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"数值设置",name:"7"}},[a("el-form-item",{attrs:{label:"显示"}},[a("el-switch",{model:{value:e.activeData.option.seriesLabelShow,callback:function(t){e.$set(e.activeData.option,"seriesLabelShow",t)},expression:"activeData.option.seriesLabelShow"}})],1),e.activeData.option.seriesLabelShow?["pieChart"==e.activeData.jnpfKey&&"pc"==e.showType?[a("el-form-item",{attrs:{label:"显示位置"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.seriesLabelPosition,callback:function(t){e.$set(e.activeData.option,"seriesLabelPosition",t)},expression:"activeData.option.seriesLabelPosition"}},e._l(e.labelPositionList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],1),a("el-form-item",{attrs:{label:"显示内容"}},[a("el-checkbox-group",{model:{value:e.activeData.option.seriesLabelShowInfo,callback:function(t){e.$set(e.activeData.option,"seriesLabelShowInfo",t)},expression:"activeData.option.seriesLabelShowInfo"}},e._l(e.labelShowList,(function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],1)]:e._e(),"pc"==e.showType?[a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.seriesLabelFontSize,callback:function(t){e.$set(e.activeData.option,"seriesLabelFontSize",t)},expression:"activeData.option.seriesLabelFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.seriesLabelFontWeight,callback:function(t){e.$set(e.activeData.option,"seriesLabelFontWeight",t)},expression:"activeData.option.seriesLabelFontWeight"}})],1)]:e._e(),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.seriesLabelColor,callback:function(t){e.$set(e.activeData.option,"seriesLabelColor",t)},expression:"activeData.option.seriesLabelColor"}})],1),"pc"==e.showType?a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.seriesLabelBgColor,callback:function(t){e.$set(e.activeData.option,"seriesLabelBgColor",t)},expression:"activeData.option.seriesLabelBgColor"}})],1):e._e()]:e._e()],2)},Ut=[],Ht=[{label:"外侧",value:"outside"},{label:"内侧",value:"inside"}],Gt=[{label:"数值",value:"count"},{label:"百分比",value:"percent"}],Qt={props:["activeData","showType"],data:function(){return{labelPositionList:Ht,labelShowList:Gt}},methods:{}},Yt=Qt,Zt=Object(y["a"])(Yt,Wt,Ut,!1,null,"41baa227",null),Xt=Zt.exports,ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"提示语设置",name:"8"}},[a("el-form-item",{attrs:{label:"显示"}},[a("el-switch",{model:{value:e.activeData.option.tooltipShow,callback:function(t){e.$set(e.activeData.option,"tooltipShow",t)},expression:"activeData.option.tooltipShow"}})],1),e.activeData.option.tooltipShow?[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType=='pc'"}],attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.tooltipTextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"tooltipTextStyleFontSize",t)},expression:"activeData.option.tooltipTextStyleFontSize"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==e.showType,expression:"showType=='pc'"}],attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.tooltipTextStyleFontWeight,callback:function(t){e.$set(e.activeData.option,"tooltipTextStyleFontWeight",t)},expression:"activeData.option.tooltipTextStyleFontWeight"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.tooltipTextStyleColor,callback:function(t){e.$set(e.activeData.option,"tooltipTextStyleColor",t)},expression:"activeData.option.tooltipTextStyleColor"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.tooltipBgColor,callback:function(t){e.$set(e.activeData.option,"tooltipBgColor",t)},expression:"activeData.option.tooltipBgColor"}})],1)]:e._e()],2)},ta=[],aa={props:["activeData","showType"],data:function(){return{}},methods:{}},ia=aa,la=Object(y["a"])(ia,ea,ta,!1,null,null,null),oa=la.exports,na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:e.getTitle(),name:"9"}},["pieChart"==e.activeData.jnpfKey||"mapChart"==e.activeData.jnpfKey?[a("el-form-item",{attrs:{label:"上下边距"}},[a("el-slider",{attrs:{max:100},model:{value:e.activeData.option.seriesCenterTop,callback:function(t){e.$set(e.activeData.option,"seriesCenterTop",t)},expression:"activeData.option.seriesCenterTop"}})],1),a("el-form-item",{attrs:{label:"左右边距"}},[a("el-slider",{attrs:{max:100},model:{value:e.activeData.option.seriesCenterLeft,callback:function(t){e.$set(e.activeData.option,"seriesCenterLeft",t)},expression:"activeData.option.seriesCenterLeft"}})],1)]:"radarChart"==e.activeData.jnpfKey?[a("el-form-item",{attrs:{label:"上下边距"}},[a("el-slider",{attrs:{max:100},model:{value:e.activeData.option.radarCenterTop,callback:function(t){e.$set(e.activeData.option,"radarCenterTop",t)},expression:"activeData.option.radarCenterTop"}})],1),a("el-form-item",{attrs:{label:"左右边距"}},[a("el-slider",{attrs:{max:100},model:{value:e.activeData.option.radarCenterLeft,callback:function(t){e.$set(e.activeData.option,"radarCenterLeft",t)},expression:"activeData.option.radarCenterLeft"}})],1)]:[a("el-form-item",{attrs:{label:"左边距"}},[a("el-slider",{attrs:{max:400},model:{value:e.activeData.option.gridLeft,callback:function(t){e.$set(e.activeData.option,"gridLeft",t)},expression:"activeData.option.gridLeft"}})],1),a("el-form-item",{attrs:{label:"顶边距"}},[a("el-slider",{attrs:{max:400},model:{value:e.activeData.option.gridTop,callback:function(t){e.$set(e.activeData.option,"gridTop",t)},expression:"activeData.option.gridTop"}})],1),a("el-form-item",{attrs:{label:"右边距"}},[a("el-slider",{attrs:{max:400},model:{value:e.activeData.option.gridRight,callback:function(t){e.$set(e.activeData.option,"gridRight",t)},expression:"activeData.option.gridRight"}})],1),a("el-form-item",{attrs:{label:"底边距"}},[a("el-slider",{attrs:{max:400},model:{value:e.activeData.option.gridBottom,callback:function(t){e.$set(e.activeData.option,"gridBottom",t)},expression:"activeData.option.gridBottom"}})],1)]],2)},sa=[],ra={props:["activeData"],data:function(){return{}},methods:{getTitle:function(){var e=this.activeData.jnpfKey;return"pieChart"==e||"radarChart"==e||"mapChart"==e?"中心坐标设置":"坐标轴边距设置"}}},ca=ra,da=Object(y["a"])(ca,na,sa,!1,null,null,null),ua=da.exports,pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"图例设置",name:"10"}},[a("el-form-item",{attrs:{label:"显示"}},[a("el-switch",{model:{value:e.activeData.option.legendShow,callback:function(t){e.$set(e.activeData.option,"legendShow",t)},expression:"activeData.option.legendShow"}})],1),e.activeData.option.legendShow&&"pc"==e.showType?[a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.legendTextStyleFontSize,callback:function(t){e.$set(e.activeData.option,"legendTextStyleFontSize",t)},expression:"activeData.option.legendTextStyleFontSize"}})],1),a("el-form-item",{attrs:{label:"布局"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.legendOrient,callback:function(t){e.$set(e.activeData.option,"legendOrient",t)},expression:"activeData.option.legendOrient"}},e._l(e.layoutList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1),a("el-form-item",{attrs:{label:"上下边距"}},[a("el-slider",{attrs:{max:100},model:{value:e.activeData.option.legendTop,callback:function(t){e.$set(e.activeData.option,"legendTop",t)},expression:"activeData.option.legendTop"}})],1),a("el-form-item",{attrs:{label:"左右边距"}},[a("el-slider",{attrs:{max:100},model:{value:e.activeData.option.legendLeft,callback:function(t){e.$set(e.activeData.option,"legendLeft",t)},expression:"activeData.option.legendLeft"}})],1)]:e._e()],2)},fa=[],ma=[{label:"横排",value:"horizontal"},{label:"竖排",value:"vertical"}],_a={props:["activeData","showType"],data:function(){return{layoutList:ma}},methods:{}},ha=_a,va=Object(y["a"])(ha,pa,fa,!1,null,null,null),ba=va.exports,ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"自定义配色设置",name:"11"}},["pieChart"!=e.activeData.jnpfKey&&"radarChart"!=e.activeData.jnpfKey&&"pc"==e.showType?[a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"文字颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.AxisTextStyleColor,callback:function(t){e.$set(e.activeData.option,"AxisTextStyleColor",t)},expression:"activeData.option.AxisTextStyleColor"}})],1),a("el-form-item",{staticStyle:{height:"32px"},attrs:{label:"轴线颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.AxisLineStyleColor,callback:function(t){e.$set(e.activeData.option,"AxisLineStyleColor",t)},expression:"activeData.option.AxisLineStyleColor"}})],1)]:e._e(),a("el-table",{attrs:{data:e.activeData.option.colorList}},[a("el-table-column",{attrs:{prop:"fullName",label:"颜色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-color-picker",{model:{value:t.row.color1,callback:function(a){e.$set(t.row,"color1",a)},expression:"scope.row.color1"}})]}}])}),"pc"==e.showType?a("el-table-column",{attrs:{prop:"fullName",label:"渐变色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-color-picker",{model:{value:t.row.color2,callback:function(a){e.$set(t.row,"color2",a)},expression:"scope.row.color2"}})]}}],null,!1,2709865894)}):e._e(),a("el-table-column",{attrs:{width:"70",prop:"enCode",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{underline:!1,type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.deleteBarColor(t.$index)}}})]}}])})],1),a("div",{staticClass:"table-actions",on:{click:function(t){return e.addHandle()}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"}},[e._v("新增")])],1)],2)},ya=[],Da={props:["activeData","showType"],methods:{addHandle:function(){this.activeData.option.colorList.push({color1:"#1890ff",color2:"#4696DD"})},deleteBarColor:function(e){var t=this;this.$confirm(this.$t("common.delTip"),this.$t("common.tipTitle"),{type:"warning"}).then((function(){t.activeData.option.colorList.splice(e,1),t.$message({type:"success",message:"删除成功"})})).catch((function(){}))}}},wa=Da,xa=Object(y["a"])(wa,ga,ya,!1,null,null,null),Ca=xa.exports,ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-collapse-item",{attrs:{title:"数据设置",name:"12"}},[a("el-form-item",{attrs:{label:"数据类型"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.dataTypeChange},model:{value:e.activeData.dataType,callback:function(t){e.$set(e.activeData,"dataType",t)},expression:"activeData.dataType"}},[a("el-radio-button",{attrs:{label:"static"}},[e._v("静态数据")]),a("el-radio-button",{attrs:{label:"dynamic"}},[e._v("远端数据")])],1)],1),"static"===e.activeData.dataType?a("el-form-item",{attrs:{label:"数据设置"}},[a("el-button",{on:{click:function(t){return e.showData(e.activeData.option.defaultValue)}}},[e._v("查看")])],1):e._e(),"dynamic"===e.activeData.dataType?a("el-form-item",{attrs:{label:"数据接口"}},[a("interface-dialog",{attrs:{value:e.activeData.propsApi,title:e.activeData.propsName,popupTitle:"数据接口"},on:{change:e.propsApiChange}})],1):e._e(),7==e.activeData.option.styleType&&"barChart"==e.activeData.jnpfKey?a("div",[a("el-table",{attrs:{data:e.activeData.option.barType}},[a("el-table-column",{attrs:{prop:"title",label:"系列"}}),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择分格类型",filterable:""},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.barTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!1,1548367253)})],1)],1):e._e(),"dynamic"===e.activeData.dataType&&e.activeData.propsApi?a("Refresh",{attrs:{refresh:e.activeData.refresh}}):e._e()],1),e.areaVisible?a("JSONArea",{ref:"JSONArea",on:{refresh:e.updateOption}}):e._e()],1)},Ta=[],Fa=[{label:"柱体",value:"bar"},{label:"折线",value:"line"}],Sa={props:["activeData"],components:{JSONArea:J,InterfaceDialog:R["a"],Refresh:He},data:function(){return{areaVisible:!1,barTypeList:Fa}},methods:{showData:function(e){var t=this;this.areaVisible=!0,this.$nextTick((function(){t.$refs.JSONArea.init(e)}))},updateOption:function(e){this.activeData.option.defaultValue=e?JSON.parse(e):[]},dataTypeChange:function(){this.activeData.propsApi="",this.activeData.propsName=""},propsApiChange:function(e,t){e?(this.activeData.propsApi=e,this.activeData.propsName=t.fullName):(this.activeData.propsApi="",this.activeData.propsName="")}}},Na=Sa,La=Object(y["a"])(Na,ka,Ta,!1,null,null,null),Oa=La.exports,$a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"标签设置",name:"13"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"风格类型"}},[a("el-radio-group",{model:{value:e.activeData.type,callback:function(t){e.$set(e.activeData,"type",t)},expression:"activeData.type"}},[a("el-radio-button",{attrs:{label:""}},[e._v("默认")]),a("el-radio-button",{attrs:{label:"card"}},[e._v("选项卡")]),a("el-radio-button",{attrs:{label:"border-card"}},[e._v("卡片化")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{label:"选项卡位置"}},[a("el-radio-group",{model:{value:e.activeData["tab-position"],callback:function(t){e.$set(e.activeData,"tab-position",t)},expression:"activeData['tab-position']"}},[a("el-radio-button",{attrs:{label:"top"}},[e._v("顶部")]),a("el-radio-button",{attrs:{label:"left"}},[e._v("左侧")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("右侧")]),a("el-radio-button",{attrs:{label:"bottom"}},[e._v("底部")])],1)],1),a("el-divider",[e._v("标签页配置")]),a("draggable",{attrs:{list:e.activeData.children,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.children,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"标签名称",size:"small"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}}),a("el-input",{directives:[{name:"show",rawName:"v-show",value:"pc"===e.showType,expression:"showType==='pc'"}],attrs:{placeholder:"请输入图标名称"},model:{value:t.icon,callback:function(a){e.$set(t,"icon",a)},expression:"item.icon"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(a){return e.openIconsDialog(t.icon,i)}},slot:"append"},[e._v("\n          选择\n        ")])],1),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(a){return e.delItem(i,t)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px","margin-bottom":"15px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addItem}},[e._v("\n      添加标签页\n    ")])],1),a("iconBox",{attrs:{visible:e.iconsVisible,current:e.currentIcon},on:{"update:visible":function(t){e.iconsVisible=t},choiceIcon:e.setIcon}})],1)},Ia=[],ja={components:{draggable:S.a,iconBox:$["a"]},props:["activeData","showType"],data:function(){return{iconsVisible:!1,currentIcon:"",currentIndex:0}},methods:{addItem:function(){var e=this.jnpf.idGenerator();this.activeData.children.push({title:"New Tab "+e,name:e,icon:"",children:[]})},delItem:function(e,t){var a=this,i=this.activeData.children,l=i.length;l<2?this.$message({message:"最后一项不能删除",type:"warning"}):this.$confirm("删除后不能撤销，确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(a.activeData.active===t.name){var l=i[e+1]||i[e-1];l&&(a.activeData.active=l.name)}a.activeData.children.splice(e,1)})).catch((function(){}))},setIcon:function(e){this.$set(this.activeData.children[this.currentIndex],"icon",e)},openIconsDialog:function(e,t){this.currentIcon=e,this.currentIndex=t,this.iconsVisible=!0}}},Ma=ja,Va=Object(y["a"])(Ma,$a,Ia,!1,null,null,null),Aa=Va.exports,Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"标签设置",name:"13"}},[a("el-form-item",{attrs:{label:"是否手风琴"}},[a("el-switch",{model:{value:e.activeData.accordion,callback:function(t){e.$set(e.activeData,"accordion",t)},expression:"activeData.accordion"}})],1),a("el-divider",[e._v("面板配置")]),a("draggable",{attrs:{list:e.activeData.children,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.children,(function(t,i){return a("div",{key:i,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"icon-ym icon-ym-darg"})]),a("el-input",{attrs:{placeholder:"标签名称",size:"small"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(a){return e.delItem(i,t)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"29px","margin-bottom":"15px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addItem}},[e._v("\n      添加面板\n    ")])],1)],1)},Ja=[],Ra={props:["activeData"],components:{draggable:S.a},data:function(){return{}},created:function(){},methods:{addItem:function(){this.activeData.children.push({title:"新面板",name:this.jnpf.idGenerator(),children:[]})},delItem:function(e,t){var a=this,i=this.activeData.children,l=i.length;l<2?this.$message({message:"最后一项不能删除",type:"warning"}):this.$confirm("删除后不能撤销，确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.activeData.children.splice(e,1)})).catch((function(){}))}}},Ka=Ra,Ba=Object(y["a"])(Ka,Pa,Ja,!1,null,null,null),Ea=Ba.exports,za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-item",{attrs:{title:"日程设置",name:"14"}},[a("el-form-item",{attrs:{label:"默认视图"}},[a("el-radio-group",{on:{change:e.renderKeyChange},model:{value:e.activeData.defaultView,callback:function(t){e.$set(e.activeData,"defaultView",t)},expression:"activeData.defaultView"}},[a("el-radio-button",{attrs:{label:"timeGridDay"}},[e._v("日")]),a("el-radio-button",{attrs:{label:"timeGridWeek"}},[e._v("周")]),a("el-radio-button",{attrs:{label:"dayGridMonth"}},[e._v("月")])],1)],1),a("el-form-item",{attrs:{label:"显示农历"}},[a("el-switch",{model:{value:e.activeData.showLunarCalendar,callback:function(t){e.$set(e.activeData,"showLunarCalendar",t)},expression:"activeData.showLunarCalendar"}})],1),a("el-form-item",{attrs:{label:"周第一天"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.activeData.firstDay,callback:function(t){e.$set(e.activeData,"firstDay",t)},expression:"activeData.firstDay"}},e._l(e.firstDayOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"默认时长"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.activeData.duration,callback:function(t){e.$set(e.activeData,"duration",t)},expression:"activeData.duration"}},e._l(e.durationList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.fullName,value:e.id}})})),1)],1),a("Refresh",{attrs:{refresh:e.activeData.refresh}})],1)},qa=[],Wa={components:{Refresh:He},props:["activeData"],data:function(){return{defaultViewOptions:[{value:"dayGridMonth",label:"月"},{value:"timeGridWeek",label:"周"},{value:"timeGridDay",label:"日"}],firstDayOptions:[{value:1,label:"一"},{value:2,label:"二"},{value:3,label:"三"},{value:4,label:"四"},{value:5,label:"五"},{value:6,label:"六"},{value:0,label:"日"}],durationList:[{id:30,fullName:"30分钟"},{id:60,fullName:"1小时"},{id:90,fullName:"1小时30分钟"},{id:120,fullName:"2小时"},{id:180,fullName:"3小时"}]}},methods:{renderKeyChange:function(){this.activeData.renderKey=+new Date}}},Ua=Wa,Ha=Object(y["a"])(Ua,za,qa,!1,null,null,null),Ga=Ha.exports,Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notice_r"},[a("el-collapse-item",{attrs:{title:"公告通知设置",name:"14"}},["pc"==e.showType?a("el-form-item",{attrs:{label:"风格类型",height:"32px"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},on:{change:e.renderKeyChange},model:{value:e.activeData.option.styleType,callback:function(t){e.$set(e.activeData.option,"styleType",t)},expression:"activeData.option.styleType"}},e._l(e.styleTypeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"app"==e.showType?a("el-form-item",{attrs:{label:"风格类型"}},[a("el-select",{attrs:{placeholder:"请选择风格类型",filterable:""},on:{change:e.renderKeyChange},model:{value:e.activeData.option.appStyleType,callback:function(t){e.$set(e.activeData.option,"appStyleType",t)},expression:"activeData.option.appStyleType"}},e._l(e.appStyleTypeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"pc"==e.showType?[1==e.activeData.option.styleType?[a("el-form-item",{attrs:{label:"显示边框"}},[a("el-switch",{model:{value:e.activeData.border,callback:function(t){e.$set(e.activeData,"border",t)},expression:"activeData.border"}})],1),a("jnpf-form-tip-item",{staticClass:"left-tree-query",attrs:{"tip-label":"启用：溢出省略号显示；<br/>禁用：显示全部信息，溢出换行显示",label:"溢出省略"}},[a("el-switch",{model:{value:e.activeData.option.showOverflow,callback:function(t){e.$set(e.activeData.option,"showOverflow",t)},expression:"activeData.option.showOverflow"}})],1),a("el-divider",[e._v("表头设置")]),a("el-form-item",{attrs:{label:"显示表头"}},[a("el-switch",{on:{change:e.renderKeyChange},model:{value:e.activeData.option.showHeader,callback:function(t){e.$set(e.activeData.option,"showHeader",t)},expression:"activeData.option.showHeader"}})],1),e.activeData.option.showHeader?[a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.headerFontSize,callback:function(t){e.$set(e.activeData.option,"headerFontSize",t)},expression:"activeData.option.headerFontSize"}})],1),a("el-form-item",{attrs:{label:"字体加粗"}},[a("el-switch",{model:{value:e.activeData.option.headerFontWeight,callback:function(t){e.$set(e.activeData.option,"headerFontWeight",t)},expression:"activeData.option.headerFontWeight"}})],1),a("el-form-item",{attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.headerFontColor,callback:function(t){e.$set(e.activeData.option,"headerFontColor",t)},expression:"activeData.option.headerFontColor"}})],1),a("el-form-item",{attrs:{label:"字体位置"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.option.headerLeft,callback:function(t){e.$set(e.activeData.option,"headerLeft",t)},expression:"activeData.option.headerLeft"}},e._l(e.alignList,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v("\n                "+e._s(t.label)+"\n              ")])})),1)],1),a("el-form-item",{attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.headerBgColor,callback:function(t){e.$set(e.activeData.option,"headerBgColor",t)},expression:"activeData.option.headerBgColor"}})],1)]:e._e(),a("el-divider",[e._v("表格设置")]),a("el-form-item",{attrs:{label:"显示序号"}},[a("el-switch",{model:{value:e.activeData.option.tableIndex,callback:function(t){e.$set(e.activeData.option,"tableIndex",t)},expression:"activeData.option.tableIndex"}})],1),a("jnpf-form-tip-item",{attrs:{label:"显示条数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:50},model:{value:e.activeData.option.noticeCount,callback:function(t){e.$set(e.activeData.option,"noticeCount",t)},expression:"activeData.option.noticeCount"}})],1),a("el-form-item",{attrs:{label:"字体大小"}},[a("el-input-number",{attrs:{"controls-position":"right",min:12,max:25},model:{value:e.activeData.option.tableFontSize,callback:function(t){e.$set(e.activeData.option,"tableFontSize",t)},expression:"activeData.option.tableFontSize"}})],1),a("el-form-item",{attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.tableFontColor,callback:function(t){e.$set(e.activeData.option,"tableFontColor",t)},expression:"activeData.option.tableFontColor"}})],1),a("el-form-item",{attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.noticeBgColor,callback:function(t){e.$set(e.activeData.option,"noticeBgColor",t)},expression:"activeData.option.noticeBgColor"}})],1),a("el-form-item",{attrs:{label:"奇行颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.noticeOddLineColor,callback:function(t){e.$set(e.activeData.option,"noticeOddLineColor",t)},expression:"activeData.option.noticeOddLineColor"}})],1),a("el-form-item",{attrs:{label:"偶行颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.noticeEventLineColor,callback:function(t){e.$set(e.activeData.option,"noticeEventLineColor",t)},expression:"activeData.option.noticeEventLineColor"}})],1),1==e.activeData.option.styleType?a("el-divider",[e._v("列数据设置")]):e._e(),a("el-form-item",{attrs:{label:1==e.activeData.option.styleType?"列数据":"行数据"}},[a("el-button",{on:{click:function(t){return e.showColumnData(1==e.activeData.option.styleType?e.activeData.option.columnData:e.activeData.option.rowData,e.activeData.option.styleType)}}},[e._v("\n            设置")])],1),e.activeData.propsApi?a("Refresh",{attrs:{refresh:e.activeData.refresh}}):e._e()]:e._e(),1!=e.activeData.option.styleType?[a("el-form-item",{attrs:{label:"显示图片"}},[a("el-switch",{model:{value:e.activeData.option.showImage,callback:function(t){e.$set(e.activeData.option,"showImage",t)},expression:"activeData.option.showImage"}})],1),a("jnpf-form-tip-item",{attrs:{label:"显示条数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:50},model:{value:e.activeData.option.noticeCount,callback:function(t){e.$set(e.activeData.option,"noticeCount",t)},expression:"activeData.option.noticeCount"}})],1),a("el-form-item",{attrs:{label:"背景色"}},[a("el-color-picker",{model:{value:e.activeData.option.noticeBgColor,callback:function(t){e.$set(e.activeData.option,"noticeBgColor",t)},expression:"activeData.option.noticeBgColor"}})],1),a("el-form-item",{attrs:{label:"奇行颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.noticeOddLineColor,callback:function(t){e.$set(e.activeData.option,"noticeOddLineColor",t)},expression:"activeData.option.noticeOddLineColor"}})],1),a("el-form-item",{attrs:{label:"偶行颜色"}},[a("el-color-picker",{model:{value:e.activeData.option.noticeEventLineColor,callback:function(t){e.$set(e.activeData.option,"noticeEventLineColor",t)},expression:"activeData.option.noticeEventLineColor"}})],1),a("el-form-item",{attrs:{label:1==e.activeData.option.styleType?"列数据":"行数据"}},[a("el-button",{on:{click:function(t){return e.showColumnData(1==e.activeData.option.styleType?e.activeData.option.columnData:e.activeData.option.rowData,e.activeData.option.styleType)}}},[e._v("\n            设置")])],1),e.activeData.propsApi?a("Refresh",{attrs:{refresh:e.activeData.refresh}}):e._e()]:e._e()]:e._e(),"app"==e.showType?[3!=e.activeData.option.appStyleType?a("el-form-item",{attrs:{label:"显示图片"}},[a("el-switch",{model:{value:e.activeData.option.showImage,callback:function(t){e.$set(e.activeData.option,"showImage",t)},expression:"activeData.option.showImage"}})],1):e._e(),a("el-form-item",{attrs:{label:"行数据"}},[a("el-button",{on:{click:function(t){return e.showColumnData(e.activeData.option.appColumnList,e.activeData.option.appStyleType)}}},[e._v("设置")])],1),a("Refresh",{attrs:{refresh:e.activeData.refresh}}),a("jnpf-form-tip-item",{attrs:{label:"显示条数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:50},on:{change:e.renderKeyChange},model:{value:e.activeData.option.appCount,callback:function(t){e.$set(e.activeData.option,"appCount",t)},expression:"activeData.option.appCount"}})],1)]:e._e(),e.columnVisible?a("NoticeColumnData",{ref:"noticeColumnData",attrs:{showType:e.showType},on:{columnList:e.columnList}}):e._e()],2)],1)},Ya=[],Za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center dialog_height",attrs:{title:"选项设置","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("JNPF-table",{ref:"dragNoticeTable",attrs:{data:e.list,hasNO:!1,"row-key":"id"}},["pc"==e.showType&&1==e.type?a("el-table-column",{attrs:{align:"center",label:"拖动",width:"50"}},[[a("i",{staticClass:"drag-handler icon-ym icon-ym-darg",staticStyle:{cursor:"move","font-size":"20px"},attrs:{title:"点击拖动"}})]],2):e._e(),a("el-table-column",{attrs:{prop:"fullName",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex"}},["pc"==e.showType?a("el-input",{attrs:{placeholder:"请输入名称",disabled:"classify"==t.row.filedName},model:{value:t.row.fullName,callback:function(a){e.$set(t.row,"fullName",a)},expression:"scope.row.fullName"}}):e._e(),"app"==e.showType?a("el-input",{attrs:{placeholder:"请输入名称",disabled:""},model:{value:t.row.fullName,callback:function(a){e.$set(t.row,"fullName",a)},expression:"scope.row.fullName"}}):e._e(),"classify"==t.row.filedName?a("el-select",{staticStyle:{"margin-left":"5px"},attrs:{multiple:"",placeholder:"请选择类型",filterable:""},model:{value:t.row.classify,callback:function(a){e.$set(t.row,"classify",a)},expression:"scope.row.classify"}},e._l(e.classifyOptions,(function(e){return a("el-option",{key:e.enCode,attrs:{label:e.fullName,value:e.enCode}})})),1):e._e(),"time"==t.row.filedName?a("el-select",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.timeClassify,callback:function(a){e.$set(t.row,"timeClassify",a)},expression:"scope.row.timeClassify"}},e._l(e.timeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.fullName,value:e.value}})})),1):e._e(),"user"==t.row.filedName?a("el-select",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.userClassify,callback:function(a){e.$set(t.row,"userClassify",a)},expression:"scope.row.userClassify"}},e._l(e.userOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.fullName,value:e.value}})})),1):e._e()],1)]}}])}),"pc"==e.showType?[1!=e.type?[a("el-table-column",{attrs:{label:"是否显示",prop:"show",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!=t.row.id&&4!=t.row.id?a("el-switch",{model:{value:t.row.show,callback:function(a){e.$set(t.row,"show",a)},expression:"scope.row.show"}}):e._e()]}}],null,!1,941648471)}),a("el-table-column",{attrs:{prop:"fontSize",label:"大小",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"大小",min:0,precision:0,"controls-position":"right"},model:{value:t.row.fontSize,callback:function(a){e.$set(t.row,"fontSize",a)},expression:"scope.row.fontSize"}}):e._e()]}}],null,!1,3949701518)}),a("el-table-column",{attrs:{prop:"fontWeight",label:"加粗",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-switch",{model:{value:t.row.fontWeight,callback:function(a){e.$set(t.row,"fontWeight",a)},expression:"scope.row.fontWeight"}}):e._e()]}}],null,!1,2392681981)}),a("el-table-column",{attrs:{prop:"fontColor",label:"颜色",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-color-picker",{model:{value:t.row.fontColor,callback:function(a){e.$set(t.row,"fontColor",a)},expression:"scope.row.fontColor"}}):e._e()]}}],null,!1,632207364)})]:e._e(),1==e.type?[a("el-table-column",{attrs:{label:"是否显示",prop:"show",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{model:{value:t.row.show,callback:function(a){e.$set(t.row,"show",a)},expression:"scope.row.show"}})]}}],null,!1,2063095694)}),"pc"==e.showType?a("el-table-column",{attrs:{prop:"sortable",label:"排序",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.sortable,callback:function(a){e.$set(t.row,"sortable",a)},expression:"scope.row.sortable"}})]}}],null,!1,1224267452)}):e._e(),"pc"==e.showType?a("el-table-column",{attrs:{prop:"align",label:"冻结方式",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.fixed,callback:function(a){e.$set(t.row,"fixed",a)},expression:"scope.row.fixed"}},e._l(e.fixedOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.fullName,value:e.value}})})),1):e._e()]}}],null,!1,3038396881)}):e._e(),"pc"==e.showType?a("el-table-column",{attrs:{prop:"align",label:"对齐方式",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.row.align,callback:function(a){e.$set(t.row,"align",a)},expression:"scope.row.align"}},e._l(e.alignOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.fullName,value:e.value}})})),1):e._e()]}}],null,!1,232195665)}):e._e(),a("el-table-column",{attrs:{prop:"width",label:"宽度",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"宽度",min:0,precision:0,"controls-position":"right"},model:{value:t.row.width,callback:function(a){e.$set(t.row,"width",a)},expression:"scope.row.width"}}):e._e()]}}],null,!1,3377040973)})]:e._e()]:[a("el-table-column",{attrs:{label:"是否显示",prop:"show",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"==t.row.filedName?a("el-switch",{model:{value:t.row.show,callback:function(a){e.$set(t.row,"show",a)},expression:"scope.row.show"}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"fontSize",label:"大小",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"大小",min:0,precision:0,"controls-position":"right"},model:{value:t.row.fontSize,callback:function(a){e.$set(t.row,"fontSize",a)},expression:"scope.row.fontSize"}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"fontWeight",label:"加粗",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-switch",{model:{value:t.row.fontWeight,callback:function(a){e.$set(t.row,"fontWeight",a)},expression:"scope.row.fontWeight"}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"fontColor",label:"颜色",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["classify"!==t.row.filedName?a("el-color-picker",{model:{value:t.row.fontColor,callback:function(a){e.$set(t.row,"fontColor",a)},expression:"scope.row.fontColor"}}):e._e()]}}])})]],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog()}}},[e._v(e._s(e.$t("common.confirmButton")))])],1)],1)},Xa=[],ei={props:["showType"],components:{},data:function(){return{visible:!1,list:[],type:1,fixedOptions:[{value:"none",fullName:"无"},{value:"left",fullName:"左冻结"},{value:"right",fullName:"右冻结"}],alignOptions:[{value:"left",fullName:"左对齐"},{value:"center",fullName:"居中对齐"},{value:"right",fullName:"右对齐"}],classifyOptions:[],timeOptions:[{value:1,fullName:"创建时间"},{value:2,fullName:"发布时间"}],userOptions:[{value:1,fullName:"创建人"},{value:2,fullName:"发布人"}]}},methods:{init:function(e,t){var a=this;this.type=t||1,this.list=e?JSON.parse(JSON.stringify(e)):[],this.visible=!0,this.$store.dispatch("base/getDictionaryData",{sort:"NoticeType"}).then((function(e){a.classifyOptions=e})),this.$nextTick((function(){a.setSort()}))},closeDialog:function(){for(var e=0;e<this.list.length;e++){var t=this.list[e];if(!t.fullName)return this.$message.warning("名称不能为空")}this.$emit("columnList",this.list),this.visible=!1},handleDel:function(e){this.list.splice(e,1)},setSort:function(){var e=this,t=this.$refs.dragNoticeTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=de.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,a)},handle:".drag-handler"})}}},ti=ei,ai=(a("2623"),Object(y["a"])(ti,Za,Xa,!1,null,"617386e2",null)),ii=ai.exports,li={components:{Refresh:He,NoticeColumnData:ii},props:["activeData","showType"],data:function(){return{areaVisible:!1,columnVisible:!1,alignList:f["a"],appStyleTypeOptions:[{label:"纵向1",value:1},{label:"纵向2",value:2},{label:"横向",value:3}],styleTypeOptions:[{label:"表格",value:1},{label:"列表（横向）",value:2},{label:"列表（纵向）",value:3}]}},watch:{},methods:{columnList:function(e){e&&("app"===this.showType?this.activeData.option.appColumnList=e:1==this.activeData.option.styleType?this.activeData.option.columnData=e:this.activeData.option.rowData=e,this.renderKeyChange())},renderKeyChange:function(){this.activeData.renderKey=+new Date},showColumnData:function(e,t){var a=this;this.columnVisible=!0,setTimeout((function(){a.$nextTick((function(){a.$refs.noticeColumnData.init(e,t)}))}),300)}}},oi=li,ni=(a("c151"),Object(y["a"])(oi,Qa,Ya,!1,null,null,null)),si=ni.exports,ri={props:["activeData","showType","refresh"],components:{draggable:S.a,iconBox:$["a"],JSONArea:J,InterfaceDialog:R["a"],Card:Z,Chart:mt,MainTitle:yt,SubTitle:Tt,BarStyle:$t,XAxis:Jt,YAxis:qt,Label:Xt,Tooltip:oa,Margin:ua,Legend:ba,Color:Ca,Data:Oa,Tab:Aa,Collapse:Ea,Schedule:Ga,Refresh:He,Notice:si},data:function(){return{iconsVisible:!1,areaVisible:!1,currentIndex:0,current:"",menuList:[],appMenuList:[],dataInterfaceOptions:[],activeNames:[],chartList:f["i"],needDataSetList:f["v"],noNeedTypeSetList:[].concat(Object(T["a"])(f["q"]),Object(T["a"])(f["F"]),["schedule"]),currentTab:"1"}},created:function(){this.getMenuList(),this.getDataInterfaceSelector()},methods:{getMenuList:function(){var e=this;Object(N["i"])({category:"Web"}).then((function(t){e.menuList=(t.data.list||[]).filter((function(e){return e.children&&e.children.length}))})),Object(N["i"])({category:"App"}).then((function(t){e.appMenuList=(t.data.list||[]).filter((function(e){return e.children&&e.children.length}))}))},getDataInterfaceSelector:function(){var e=this;Object(O["p"])().then((function(t){e.dataInterfaceOptions=t.data}))},getSelectValue:function(e,t){if(e[0]){var a="";if(e[1].propertyJson){var i=JSON.parse(e[1].propertyJson);a=i.iconBackgroundColor||""}this.$set(this.activeData.list,t,{fullName:e[1].fullName,id:e[1].id,urlAddress:e[1].urlAddress,type:e[1].type,propertyJson:e[1].propertyJson,linkTarget:e[1].linkTarget,enCode:e[1].enCode,icon:e[1].icon,iconBackgroundColor:a})}else this.$set(this.activeData.list,t,{fullName:"",id:"",urlAddress:"",icon:"",iconBackgroundColor:"",type:"",propertyJson:"",linkTarget:"_self",enCode:""})},addSelectItem:function(){this.activeData.list.push({fullName:"",id:"",urlAddress:"",icon:"",iconBackgroundColor:"",type:"",propertyJson:"",linkTarget:"_self",enCode:""})},delSelectItem:function(e){this.activeData.list.length<3?this.$message({message:"选项最少要保留两项",type:"warning"}):this.activeData.list.splice(e,1)},addDataBoardItem:function(){this.activeData.list.push({fullName:"",num:"",dataType:"static",propsApi:"",icon:""})},delDataBoardItem:function(e){this.activeData.list.length<3?this.$message({message:"选项最少要保留两项",type:"warning"}):this.activeData.list.splice(e,1)},openIconsDialog:function(e){this.iconsVisible=!0,this.currentIndex=e,this.current=this.activeData.list[this.currentIndex].icon},setIcon:function(e){this.activeData.list[this.currentIndex].icon=e},propsUrlChange:function(e,t){if(!e||!e.length)return this.activeData.list[t].propsApi="",void(this.activeData.list[t].propsName="");this.activeData.list[t].propsApi=e[0],this.activeData.list[t].propsName=e[1].fullName}}},ci=ri,di=(a("aedc"),Object(y["a"])(ci,C,k,!1,null,"4c38aee2",null)),ui=di.exports,pi=a("6433"),fi={layoutId:100,layout:[],refresh:{autoRefresh:!1,autoRefreshTime:"5"}},mi={name:"JNPF-PortalDesigner",props:["conf","showType"],components:{GridLayout:u.a.GridLayout,GridItem:u.a.GridItem,Preview:w,RightPanel:ui,draggable:S.a,CardHeader:x["a"],parser:pi["a"]},data:function(){return{componentsList:[{title:"布局控件",list:f["p"]},{title:"基础控件",list:f["g"]},{title:"系统控件",list:f["E"]},{title:"图表控件",list:f["h"]}],layout:[],activeId:null,activeData:null,refresh:{},previewVisible:!1,noNeedMaskList:f["x"],config:{},copyDrawingList:""}},mounted:function(){var e=this;"object"===Object(c["a"])(this.conf)&&null!==this.conf?this.config=Object(r["a"])(Object(r["a"])({},fi),this.conf):(this.config=Object(p["b"])(fi),this.config.layoutId=100),this.layout=this.config.layout||[],this.refresh=this.config.refresh||{},setTimeout((function(){e.addLocalRecord(e.layout),e.setActiveData()}),50),this.$eventBus.$on("addComponent",(function(t,a,i){e.addComponent(t,"",a,i)})),this.$eventBus.$on("handlerActive",(function(t){e.handleClick(t)}))},beforeDestroy:function(){this.activeData&&this.activeData.i&&this.$eventBus.$off("eChart"+this.activeData.i),this.$eventBus.$off("addComponent"),this.$eventBus.$off("handlerActive")},methods:{handleData:function(e){var t=this;this.layout=JSON.parse(JSON.stringify(e)),this.copyDrawingList=JSON.stringify(this.layout);var a=!1,i=function e(i){for(var l=0;l<i.length;l++){var o=i[l];o.i===t.activeId&&(t.activeData=o,t.activeId=o.i,a=!0),o.children&&Array.isArray(o.children)&&e(o.children)}};i(this.layout),a||(this.activeData={},this.activeId=null)},addLocalRecord:function(e){JSON.stringify(e)!=this.copyDrawingList&&(this.copyDrawingList=JSON.stringify(e),this.$emit("addRecord",e))},setActiveData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.activeId=null,this.activeData={},this.layout.length&&(this.activeData=this.layout[e],this.activeId=this.layout[e].i)},getData:function(){var e=this;return new Promise((function(t,a){var i=function e(t){for(var i=0;i<t.length;i++){var l=t[i],o=l.option||{},n=l.card||{};if(n.cardRightBtn){if("1"===n.linkType&&!n.urlAddress){a({msg:"".concat(l.label,"控件“菜单名称”属性不能为空"),target:1});break}if("2"===n.linkType){if(!n.urlAddress){a({msg:"".concat(l.label,"控件“链接地址”属性不能为空"),target:1});break}if(!Object(ve["d"])(n.urlAddress)){a({msg:"请输入正确的链接地址",target:1});break}}if("1"===n.appLinkType&&!n.appUrlAddress){a({msg:"".concat(l.label,"控件“菜单名称”属性不能为空"),target:1});break}if("2"===n.appLinkType){if(!n.appUrlAddress){a({msg:"".concat(l.label,"控件“链接地址”属性不能为空"),target:1});break}if(!Object(ve["d"])(n.appUrlAddress)){a({msg:"请输入正确的链接地址",target:1});break}}}if("1"===o.linkType&&!o.urlAddress){a({msg:"".concat(l.label,"控件“菜单名称”属性不能为空"),target:1});break}if("2"===o.linkType){if(!o.urlAddress){a({msg:"".concat(l.label,"控件“链接地址”属性不能为空"),target:1});break}if(!Object(ve["d"])(o.urlAddress)){a({msg:"请输入正确的链接地址",target:1});break}}if("1"===o.appLinkType&&!o.appUrlAddress){a({msg:"".concat(l.label,"控件“菜单名称”属性不能为空"),target:1});break}if("2"===o.appLinkType){if(!o.appUrlAddress){a({msg:"".concat(l.label,"控件“链接地址”属性不能为空"),target:1});break}if(!Object(ve["d"])(o.appUrlAddress)){a({msg:"请输入正确的链接地址",target:1});break}}if(("video"==l.jnpfKey||"image"==l.jnpfKey)&&2==o.styleType){var s="video"==l.jnpfKey?"视频":"图片";if(!o.defaultValue){a({msg:"".concat(l.label,"控件“").concat(s,"地址”属性不能为空"),target:1});break}if(!Object(ve["d"])(o.defaultValue)){a({msg:"请输入正确的".concat(s,"地址"),target:1});break}}if("iframe"==l.jnpfKey){if(!o.defaultValue){a({msg:"".concat(l.label,"控件“链接地址”属性不能为空"),target:1});break}if(!Object(ve["d"])(o.defaultValue)){a({msg:"请输入正确的链接地址",target:1});break}}l.children&&Array.isArray(l.children)&&e(l.children)}};i(e.layout),e.config.layout=e.layout,t({formData:e.config,target:1})}))},addComponent:function(e,t,a,i){var l=Object(p["b"])(e),o=0,n=0,s=this.config.layoutId;if(this.layout.length){for(var c={y:0,h:0},d=0;d<this.layout.length;d++)this.layout[d].y>=c.y&&(c=this.layout[d]);n=c.y+c.h}var u=Object(r["a"])(Object(r["a"])({},l),{},{i:s,x:o,y:n});f["w"].includes(u.jnpfKey)&&"copy"!=t&&(u.option.defaultValue=this.getDefaultValue(u)),a?("card"==a.jnpfKey&&a.children.push(u),"collapse"==a.jnpfKey&&a.children[i].children.push(u),"tab"==a.jnpfKey&&a.children.forEach((function(e){e.name==a.active&&e.children.push(u)}))):this.layout.push(u),this.activeId=this.config.layoutId,this.activeData=u,this.config.layoutId++,this.addLocalRecord(this.layout)},getDefaultValue:function(e){var t=e.jnpfKey;return"text"==t?"JNPF快速开发平台":"image"==t?"https://app.cdn.jnpfsoft.com/image/3.2/banner1.png":"video"==t?"https://cdn.jnpfsoft.com/2022/video/index_video.mp4":"barChart"==t||"lineChart"==t||"pieChart"==t?m["a"].baseBarData:"radarChart"==t?m["a"].radarData:"mapChart"==t?m["b"]:"rankList"==t?m["c"]:"timeAxis"==t?m["e"]:"tableList"==t?m["d"]:void 0},handleRemoveItem:function(e){var t=this;this.layout=this.layout.filter((function(t){return t.i!==e})),this.activeId=null,this.activeData={},this.addLocalRecord(this.layout),this.$nextTick((function(){var e=t.layout.length;e&&t.setActiveData(e-1)}))},empty:function(){var e=this;this.$confirm("确定要清空所有吗？","提示",{type:"warning"}).then((function(){e.layout=[],e.config.layoutId=100,e.activeId=null,e.activeData={},e.addLocalRecord(e.layout)})).catch((function(){}))},preview:function(){this.previewVisible=!0},handleClick:function(e){this.activeId=e.i,this.activeData=e},resizedEvent:function(e,t){var a=this;this.$eventBus.$emit("eChart"+e);var i=function e(i){i.children&&t.children.length&&i.children.map((function(t){t.jnpfKey&&a.$eventBus.$emit("eChart"+t.i),t.children&&t.children.length&&e(t)}))};i(t),this.addLocalRecord(this.layout)},movedEvent:function(){this.addLocalRecord(this.layout)}}},_i=mi,hi=(a("b8c9"),Object(y["a"])(_i,n,s,!1,null,"1bc56e6f",null)),vi=hi.exports,bi={data:function(){return{recordList:[],currentRecordIndex:-1,recordLimit:500,copyLayout:""}},computed:{getCanUndo:function(){return this.currentRecordIndex>0},getCanRedo:function(){return this.recordList.length>this.currentRecordIndex+1}},methods:{initRedo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;this.recordList=[],this.currentRecordIndex=-1,this.recordLimit=e},addRecord:function(e){this.currentRecordIndex+1<this.recordList.length&&this.recordList.splice(this.currentRecordIndex+1),this.recordList.push(JSON.parse(JSON.stringify(e))),this.currentRecordIndex++,this.recordList.length>this.recordLimit&&(this.recordList.shift(),this.currentRecordIndex--)},handleUndo:function(e){if(this.getCanUndo){this.currentRecordIndex--;var t=this.recordList[this.currentRecordIndex];e(t)}},handleRedo:function(e){if(this.getCanRedo){this.currentRecordIndex++;var t=this.recordList[this.currentRecordIndex];e(t)}}}},gi=a("fe8c"),yi={mixins:[bi],components:{PortalDesigner:vi,ReleaseDialog:gi["default"]},data:function(){return{currRow:{},visible:!1,loading:!1,formVisible:!1,btnLoading:!1,formData:null,categoryList:[],showType:"pc",fullName:"",id:"",key:!1,showFullName:!1,releaseDialog:!1}},methods:{init:function(e){var t=this;this.currRow=e,this.visible=!0,this.loading=!1,this.formData=null,this.fullName=e.fullName,this.btnLoading=!1,this.showType="pc",this.initRedo(),this.$nextTick((function(){t.currRow.id&&(t.loading=!0,Object(o["k"])(t.currRow.id).then((function(e){t.loading=!1,t.formData=JSON.parse(e.data.formData)})).catch((function(){t.loading=!1})))}))},dataFormSubmit:function(e){var t=this;this.$refs["portalDesigner"].getData().then((function(a){t.btnLoading=!0,t.formData=a.formData;var i={type:t.currRow.type,formData:JSON.stringify(t.formData),id:t.currRow.id},l=t.currRow.id?o["e"]:o["b"];l(i).then((function(a){t.$message({message:a.msg,type:"success",duration:1500,onClose:function(){t.btnLoading=!1,1==e?t.$nextTick((function(){t.releaseDialog=!0,t.$refs.release.openRelease(t.currRow)})):t.closeDialog(!0)}})})).catch((function(){t.btnLoading=!1}))})).catch((function(e){e.msg&&t.$message.warning(e.msg)}))},closeDialog:function(e){this.visible=!1,this.$emit("close",e)},handleRedoAndUndo:function(e){this[e](this.$refs.portalDesigner.handleData)},preview:function(){this.$refs.portalDesigner.preview()},empty:function(){this.$refs.portalDesigner.empty()},handleAddRecord:function(e){this.addRecord(e)}}},Di=yi,wi=(a("32ab"),Object(y["a"])(Di,i,l,!1,null,"4a3c64d7",null));t["a"]=wi.exports},f330:function(e,t,a){"use strict";a("1aab")},f42c:function(e,t,a){"use strict";var i=a("ed08");t["a"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},initListener:function(){var e=this;this.$_resizeHandler=Object(i["a"])((function(){e.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var e=this.chart;e&&e.resize()}}}},f4b7:function(e,t,a){},f678:function(e,t,a){},f80e:function(e,t,a){},f8ad3:function(e,t,a){"use strict";a("32f9")},f91c:function(e,t,a){},f948:function(e,t,a){"use strict";a("84a6")},f989:function(e,t,a){},fa72:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return d}));var i="drawingItems",l="1.1",o="DRAWING_ITEMS_VERSION",n="idGlobal";function s(){var e=localStorage.getItem(o);if(e!==l)return localStorage.setItem(o,l),r([]),null;var t=localStorage.getItem(i);return t?JSON.parse(t):null}function r(e){localStorage.setItem(i,JSON.stringify(e))}function c(){var e=localStorage.getItem(n);return e?parseInt(e,10):100}function d(e){localStorage.setItem(n,"".concat(e))}},fa7e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"json-editor"},[a("textarea",{ref:"textarea"})])},l=[],o=a("56b3"),n=a.n(o);a("014bb"),a("0dd0"),a("a7be"),a("acdf"),a("f9d4"),a("8822"),a("d2de"),a("ffda"),a("f6b6"),a("9b74"),a("991c"),a("8c33"),a("10b2");a("ae67");var s={name:"JsonEditor",props:{value:{default:""},mode:{type:String,default:"json"},readOnly:{type:Boolean,default:!1}},data:function(){return{jsonEditor:null,options:{lineNumbers:!0,mode:this.mode,readOnly:this.readOnly,tabSize:2,lineWrapping:!0,styleActiveLine:!0,matchBrackets:!0,autoCloseBrackets:!0,extraKeys:{"Ctrl-Space":"autocomplete"},hintOptions:{keywords:["SUM","SUBTRACT","PRODUCT","DIVIDE","COUNT"]}}}},watch:{value:function(e){var t=this.jsonEditor.getValue();e!==t&&this.jsonEditor.setValue(this.value)}},mounted:function(){var e=this;this.jsonEditor=n.a.fromTextArea(this.$refs.textarea,this.options);this.jsonEditor.doc.modeOption;this.jsonEditor.setValue(this.value),this.jsonEditor.on("change",(function(t){e.$emit("changed",t.getValue()),e.$emit("input",t.getValue())}))},methods:{getValue:function(){return this.jsonEditor.getValue()},insert:function(e,t){this.jsonEditor.replaceSelection(e),this.jsonEditor.focus();var a=this.jsonEditor.getCursor(),i={};i.line=a.line,i.ch=t?a.ch-1:a.ch,this.jsonEditor.setCursor(i)}}},r=s,c=(a("e1f5"),a("2877")),d=Object(c["a"])(r,i,l,!1,null,"689c8fb1",null);t["a"]=d.exports},fac3:function(e,t,a){},fb29:function(e,t,a){},fca9:function(e,t,a){"use strict";a("7f67")},fda8:function(e,t,a){"use strict";a("fb29")}}]);